var Ob=i=>{throw TypeError(i)};var Nm=(i,e,t)=>e.has(i)||Ob("Cannot "+t);var hi=(i,e,t)=>(Nm(i,e,"read from private field"),t?t.call(i):e.get(i)),Mo=(i,e,t)=>e.has(i)?Ob("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),Cr=(i,e,t,n)=>(Nm(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t),Do=(i,e,t)=>(Nm(i,e,"access private method"),t);var Bb=(i,e,t,n)=>({set _(s){Cr(i,e,s,t)},get _(){return hi(i,e,n)}});function vC(i,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in i)){const r=Object.getOwnPropertyDescriptor(n,s);r&&Object.defineProperty(i,s,r.get?r:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();var UF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cv(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function yC(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var e=i.default;if(typeof e=="function"){var t=function n(){var s=!1;try{s=this instanceof n}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(n){var s=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(t,n,s.get?s:{enumerable:!0,get:function(){return i[n]}})}),t}var km={exports:{}},Yh={};var Fb;function bC(){if(Fb)return Yh;Fb=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,s,r){var a=null;if(r!==void 0&&(a=""+r),s.key!==void 0&&(a=""+s.key),"key"in s){r={};for(var l in s)l!=="key"&&(r[l]=s[l])}else r=s;return s=r.ref,{$$typeof:i,type:n,key:a,ref:s!==void 0?s:null,props:r}}return Yh.Fragment=e,Yh.jsx=t,Yh.jsxs=t,Yh}var Ub;function wC(){return Ub||(Ub=1,km.exports=bC()),km.exports}var x=wC(),Rm={exports:{}},Yt={};var jb;function xC(){if(jb)return Yt;jb=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),v=Symbol.iterator;function m(Q){return Q===null||typeof Q!="object"?null:(Q=v&&Q[v]||Q["@@iterator"],typeof Q=="function"?Q:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,N={};function C(Q,M,V){this.props=Q,this.context=M,this.refs=N,this.updater=V||E}C.prototype.isReactComponent={},C.prototype.setState=function(Q,M){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,M,"setState")},C.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function P(){}P.prototype=C.prototype;function L(Q,M,V){this.props=Q,this.context=M,this.refs=N,this.updater=V||E}var O=L.prototype=new P;O.constructor=L,S(O,C.prototype),O.isPureReactComponent=!0;var q=Array.isArray;function G(){}var W={H:null,A:null,T:null,S:null},K=Object.prototype.hasOwnProperty;function j(Q,M,V){var Z=V.ref;return{$$typeof:i,type:Q,key:M,ref:Z!==void 0?Z:null,props:V}}function ee(Q,M){return j(Q.type,M,Q.props)}function B(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===i}function H(Q){var M={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(V){return M[V]})}var se=/\/+/g;function ie(Q,M){return typeof Q=="object"&&Q!==null&&Q.key!=null?H(""+Q.key):M.toString(36)}function ye(Q){switch(Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason;default:switch(typeof Q.status=="string"?Q.then(G,G):(Q.status="pending",Q.then(function(M){Q.status==="pending"&&(Q.status="fulfilled",Q.value=M)},function(M){Q.status==="pending"&&(Q.status="rejected",Q.reason=M)})),Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason}}throw Q}function X(Q,M,V,Z,le){var ce=typeof Q;(ce==="undefined"||ce==="boolean")&&(Q=null);var he=!1;if(Q===null)he=!0;else switch(ce){case"bigint":case"string":case"number":he=!0;break;case"object":switch(Q.$$typeof){case i:case e:he=!0;break;case h:return he=Q._init,X(he(Q._payload),M,V,Z,le)}}if(he)return le=le(Q),he=Z===""?"."+ie(Q,0):Z,q(le)?(V="",he!=null&&(V=he.replace(se,"$&/")+"/"),X(le,M,V,"",function(Ie){return Ie})):le!=null&&(B(le)&&(le=ee(le,V+(le.key==null||Q&&Q.key===le.key?"":(""+le.key).replace(se,"$&/")+"/")+he)),M.push(le)),1;he=0;var Ae=Z===""?".":Z+":";if(q(Q))for(var Ee=0;Ee<Q.length;Ee++)Z=Q[Ee],ce=Ae+ie(Z,Ee),he+=X(Z,M,V,ce,le);else if(Ee=m(Q),typeof Ee=="function")for(Q=Ee.call(Q),Ee=0;!(Z=Q.next()).done;)Z=Z.value,ce=Ae+ie(Z,Ee++),he+=X(Z,M,V,ce,le);else if(ce==="object"){if(typeof Q.then=="function")return X(ye(Q),M,V,Z,le);throw M=String(Q),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.")}return he}function ue(Q,M,V){if(Q==null)return Q;var Z=[],le=0;return X(Q,Z,"","",function(ce){return M.call(V,ce,le++)}),Z}function de(Q){if(Q._status===-1){var M=Q._result;M=M(),M.then(function(V){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=V)},function(V){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=V)}),Q._status===-1&&(Q._status=0,Q._result=M)}if(Q._status===1)return Q._result.default;throw Q._result}var we=typeof reportError=="function"?reportError:function(Q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var M=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Q=="object"&&Q!==null&&typeof Q.message=="string"?String(Q.message):String(Q),error:Q});if(!window.dispatchEvent(M))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Q);return}console.error(Q)},Oe={map:ue,forEach:function(Q,M,V){ue(Q,function(){M.apply(this,arguments)},V)},count:function(Q){var M=0;return ue(Q,function(){M++}),M},toArray:function(Q){return ue(Q,function(M){return M})||[]},only:function(Q){if(!B(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}};return Yt.Activity=p,Yt.Children=Oe,Yt.Component=C,Yt.Fragment=t,Yt.Profiler=s,Yt.PureComponent=L,Yt.StrictMode=n,Yt.Suspense=c,Yt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,Yt.__COMPILER_RUNTIME={__proto__:null,c:function(Q){return W.H.useMemoCache(Q)}},Yt.cache=function(Q){return function(){return Q.apply(null,arguments)}},Yt.cacheSignal=function(){return null},Yt.cloneElement=function(Q,M,V){if(Q==null)throw Error("The argument must be a React element, but you passed "+Q+".");var Z=S({},Q.props),le=Q.key;if(M!=null)for(ce in M.key!==void 0&&(le=""+M.key),M)!K.call(M,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&M.ref===void 0||(Z[ce]=M[ce]);var ce=arguments.length-2;if(ce===1)Z.children=V;else if(1<ce){for(var he=Array(ce),Ae=0;Ae<ce;Ae++)he[Ae]=arguments[Ae+2];Z.children=he}return j(Q.type,le,Z)},Yt.createContext=function(Q){return Q={$$typeof:a,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null},Q.Provider=Q,Q.Consumer={$$typeof:r,_context:Q},Q},Yt.createElement=function(Q,M,V){var Z,le={},ce=null;if(M!=null)for(Z in M.key!==void 0&&(ce=""+M.key),M)K.call(M,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(le[Z]=M[Z]);var he=arguments.length-2;if(he===1)le.children=V;else if(1<he){for(var Ae=Array(he),Ee=0;Ee<he;Ee++)Ae[Ee]=arguments[Ee+2];le.children=Ae}if(Q&&Q.defaultProps)for(Z in he=Q.defaultProps,he)le[Z]===void 0&&(le[Z]=he[Z]);return j(Q,ce,le)},Yt.createRef=function(){return{current:null}},Yt.forwardRef=function(Q){return{$$typeof:l,render:Q}},Yt.isValidElement=B,Yt.lazy=function(Q){return{$$typeof:h,_payload:{_status:-1,_result:Q},_init:de}},Yt.memo=function(Q,M){return{$$typeof:d,type:Q,compare:M===void 0?null:M}},Yt.startTransition=function(Q){var M=W.T,V={};W.T=V;try{var Z=Q(),le=W.S;le!==null&&le(V,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(G,we)}catch(ce){we(ce)}finally{M!==null&&V.types!==null&&(M.types=V.types),W.T=M}},Yt.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},Yt.use=function(Q){return W.H.use(Q)},Yt.useActionState=function(Q,M,V){return W.H.useActionState(Q,M,V)},Yt.useCallback=function(Q,M){return W.H.useCallback(Q,M)},Yt.useContext=function(Q){return W.H.useContext(Q)},Yt.useDebugValue=function(){},Yt.useDeferredValue=function(Q,M){return W.H.useDeferredValue(Q,M)},Yt.useEffect=function(Q,M){return W.H.useEffect(Q,M)},Yt.useEffectEvent=function(Q){return W.H.useEffectEvent(Q)},Yt.useId=function(){return W.H.useId()},Yt.useImperativeHandle=function(Q,M,V){return W.H.useImperativeHandle(Q,M,V)},Yt.useInsertionEffect=function(Q,M){return W.H.useInsertionEffect(Q,M)},Yt.useLayoutEffect=function(Q,M){return W.H.useLayoutEffect(Q,M)},Yt.useMemo=function(Q,M){return W.H.useMemo(Q,M)},Yt.useOptimistic=function(Q,M){return W.H.useOptimistic(Q,M)},Yt.useReducer=function(Q,M,V){return W.H.useReducer(Q,M,V)},Yt.useRef=function(Q){return W.H.useRef(Q)},Yt.useState=function(Q){return W.H.useState(Q)},Yt.useSyncExternalStore=function(Q,M,V){return W.H.useSyncExternalStore(Q,M,V)},Yt.useTransition=function(){return W.H.useTransition()},Yt.version="19.2.0",Yt}var qb;function Nv(){return qb||(qb=1,Rm.exports=xC()),Rm.exports}var me=Nv();const _u=Cv(me);var Lm={exports:{}},Kh={},Pm={exports:{}},Im={};var Hb;function _C(){return Hb||(Hb=1,(function(i){function e(X,ue){var de=X.length;X.push(ue);e:for(;0<de;){var we=de-1>>>1,Oe=X[we];if(0<s(Oe,ue))X[we]=ue,X[de]=Oe,de=we;else break e}}function t(X){return X.length===0?null:X[0]}function n(X){if(X.length===0)return null;var ue=X[0],de=X.pop();if(de!==ue){X[0]=de;e:for(var we=0,Oe=X.length,Q=Oe>>>1;we<Q;){var M=2*(we+1)-1,V=X[M],Z=M+1,le=X[Z];if(0>s(V,de))Z<Oe&&0>s(le,V)?(X[we]=le,X[Z]=de,we=Z):(X[we]=V,X[M]=de,we=M);else if(Z<Oe&&0>s(le,de))X[we]=le,X[Z]=de,we=Z;else break e}}return ue}function s(X,ue){var de=X.sortIndex-ue.sortIndex;return de!==0?de:X.id-ue.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();i.unstable_now=function(){return a.now()-l}}var c=[],d=[],h=1,p=null,v=3,m=!1,E=!1,S=!1,N=!1,C=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function O(X){for(var ue=t(d);ue!==null;){if(ue.callback===null)n(d);else if(ue.startTime<=X)n(d),ue.sortIndex=ue.expirationTime,e(c,ue);else break;ue=t(d)}}function q(X){if(S=!1,O(X),!E)if(t(c)!==null)E=!0,G||(G=!0,H());else{var ue=t(d);ue!==null&&ye(q,ue.startTime-X)}}var G=!1,W=-1,K=5,j=-1;function ee(){return N?!0:!(i.unstable_now()-j<K)}function B(){if(N=!1,G){var X=i.unstable_now();j=X;var ue=!0;try{e:{E=!1,S&&(S=!1,P(W),W=-1),m=!0;var de=v;try{t:{for(O(X),p=t(c);p!==null&&!(p.expirationTime>X&&ee());){var we=p.callback;if(typeof we=="function"){p.callback=null,v=p.priorityLevel;var Oe=we(p.expirationTime<=X);if(X=i.unstable_now(),typeof Oe=="function"){p.callback=Oe,O(X),ue=!0;break t}p===t(c)&&n(c),O(X)}else n(c);p=t(c)}if(p!==null)ue=!0;else{var Q=t(d);Q!==null&&ye(q,Q.startTime-X),ue=!1}}break e}finally{p=null,v=de,m=!1}ue=void 0}}finally{ue?H():G=!1}}}var H;if(typeof L=="function")H=function(){L(B)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,ie=se.port2;se.port1.onmessage=B,H=function(){ie.postMessage(null)}}else H=function(){C(B,0)};function ye(X,ue){W=C(function(){X(i.unstable_now())},ue)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(X){X.callback=null},i.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<X?Math.floor(1e3/X):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_next=function(X){switch(v){case 1:case 2:case 3:var ue=3;break;default:ue=v}var de=v;v=ue;try{return X()}finally{v=de}},i.unstable_requestPaint=function(){N=!0},i.unstable_runWithPriority=function(X,ue){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var de=v;v=X;try{return ue()}finally{v=de}},i.unstable_scheduleCallback=function(X,ue,de){var we=i.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?we+de:we):de=we,X){case 1:var Oe=-1;break;case 2:Oe=250;break;case 5:Oe=1073741823;break;case 4:Oe=1e4;break;default:Oe=5e3}return Oe=de+Oe,X={id:h++,callback:ue,priorityLevel:X,startTime:de,expirationTime:Oe,sortIndex:-1},de>we?(X.sortIndex=de,e(d,X),t(c)===null&&X===t(d)&&(S?(P(W),W=-1):S=!0,ye(q,de-we))):(X.sortIndex=Oe,e(c,X),E||m||(E=!0,G||(G=!0,H()))),X},i.unstable_shouldYield=ee,i.unstable_wrapCallback=function(X){var ue=v;return function(){var de=v;v=ue;try{return X.apply(this,arguments)}finally{v=de}}}})(Im)),Im}var zb;function AC(){return zb||(zb=1,Pm.exports=_C()),Pm.exports}var Mm={exports:{}},js={};var Vb;function SC(){if(Vb)return js;Vb=1;var i=Nv();function e(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function r(c,d,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:p==null?null:""+p,children:c,containerInfo:d,implementation:h}}var a=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return js.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,js.createPortal=function(c,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return r(c,d,null,h)},js.flushSync=function(c){var d=a.T,h=n.p;try{if(a.T=null,n.p=2,c)return c()}finally{a.T=d,n.p=h,n.d.f()}},js.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,n.d.C(c,d))},js.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},js.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var h=d.as,p=l(h,d.crossOrigin),v=typeof d.integrity=="string"?d.integrity:void 0,m=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?n.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:v,fetchPriority:m}):h==="script"&&n.d.X(c,{crossOrigin:p,integrity:v,fetchPriority:m,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},js.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=l(d.as,d.crossOrigin);n.d.M(c,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&n.d.M(c)},js.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,p=l(h,d.crossOrigin);n.d.L(c,h,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},js.preloadModule=function(c,d){if(typeof c=="string")if(d){var h=l(d.as,d.crossOrigin);n.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else n.d.m(c)},js.requestFormReset=function(c){n.d.r(c)},js.unstable_batchedUpdates=function(c,d){return c(d)},js.useFormState=function(c,d,h){return a.H.useFormState(c,d,h)},js.useFormStatus=function(){return a.H.useHostTransitionStatus()},js.version="19.2.0",js}var Gb;function EC(){if(Gb)return Mm.exports;Gb=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Mm.exports=SC(),Mm.exports}var $b;function TC(){if($b)return Kh;$b=1;var i=AC(),e=Nv(),t=EC();function n(o){var u="https://react.dev/errors/"+o;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function r(o){var u=o,f=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(f=u.return),o=u.return;while(o)}return u.tag===3?f:null}function a(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function l(o){if(o.tag===31){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function c(o){if(r(o)!==o)throw Error(n(188))}function d(o){var u=o.alternate;if(!u){if(u=r(o),u===null)throw Error(n(188));return u!==o?null:o}for(var f=o,g=u;;){var _=f.return;if(_===null)break;var T=_.alternate;if(T===null){if(g=_.return,g!==null){f=g;continue}break}if(_.child===T.child){for(T=_.child;T;){if(T===f)return c(_),o;if(T===g)return c(_),u;T=T.sibling}throw Error(n(188))}if(f.return!==g.return)f=_,g=T;else{for(var D=!1,Y=_.child;Y;){if(Y===f){D=!0,f=_,g=T;break}if(Y===g){D=!0,g=_,f=T;break}Y=Y.sibling}if(!D){for(Y=T.child;Y;){if(Y===f){D=!0,f=T,g=_;break}if(Y===g){D=!0,g=T,f=_;break}Y=Y.sibling}if(!D)throw Error(n(189))}}if(f.alternate!==g)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?o:u}function h(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(u=h(o),u!==null)return u;o=o.sibling}return null}var p=Object.assign,v=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),P=Symbol.for("react.consumer"),L=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),ee=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function H(o){return o===null||typeof o!="object"?null:(o=B&&o[B]||o["@@iterator"],typeof o=="function"?o:null)}var se=Symbol.for("react.client.reference");function ie(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===se?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case S:return"Fragment";case C:return"Profiler";case N:return"StrictMode";case q:return"Suspense";case G:return"SuspenseList";case j:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case E:return"Portal";case L:return o.displayName||"Context";case P:return(o._context.displayName||"Context")+".Consumer";case O:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case W:return u=o.displayName||null,u!==null?u:ie(o.type)||"Memo";case K:u=o._payload,o=o._init;try{return ie(o(u))}catch{}}return null}var ye=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},we=[],Oe=-1;function Q(o){return{current:o}}function M(o){0>Oe||(o.current=we[Oe],we[Oe]=null,Oe--)}function V(o,u){Oe++,we[Oe]=o.current,o.current=u}var Z=Q(null),le=Q(null),ce=Q(null),he=Q(null);function Ae(o,u){switch(V(ce,u),V(le,o),V(Z,null),u.nodeType){case 9:case 11:o=(o=u.documentElement)&&(o=o.namespaceURI)?rb(o):0;break;default:if(o=u.tagName,u=u.namespaceURI)u=rb(u),o=ab(u,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}M(Z),V(Z,o)}function Ee(){M(Z),M(le),M(ce)}function Ie(o){o.memoizedState!==null&&V(he,o);var u=Z.current,f=ab(u,o.type);u!==f&&(V(le,o),V(Z,f))}function He(o){le.current===o&&(M(Z),M(le)),he.current===o&&(M(he),Vh._currentValue=de)}var Ye,Ze;function st(o){if(Ye===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);Ye=u&&u[1]||"",Ze=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ye+o+Ze}var ne=!1;function Je(o,u){if(!o||ne)return"";ne=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(u){var ze=function(){throw Error()};if(Object.defineProperty(ze.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ze,[])}catch(Pe){var Re=Pe}Reflect.construct(o,[],ze)}else{try{ze.call()}catch(Pe){Re=Pe}o.call(ze.prototype)}}else{try{throw Error()}catch(Pe){Re=Pe}(ze=o())&&typeof ze.catch=="function"&&ze.catch(function(){})}}catch(Pe){if(Pe&&Re&&typeof Pe.stack=="string")return[Pe.stack,Re.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=g.DetermineComponentFrameRoot(),D=T[0],Y=T[1];if(D&&Y){var fe=D.split(`
`),ke=Y.split(`
`);for(_=g=0;g<fe.length&&!fe[g].includes("DetermineComponentFrameRoot");)g++;for(;_<ke.length&&!ke[_].includes("DetermineComponentFrameRoot");)_++;if(g===fe.length||_===ke.length)for(g=fe.length-1,_=ke.length-1;1<=g&&0<=_&&fe[g]!==ke[_];)_--;for(;1<=g&&0<=_;g--,_--)if(fe[g]!==ke[_]){if(g!==1||_!==1)do if(g--,_--,0>_||fe[g]!==ke[_]){var Fe=`
`+fe[g].replace(" at new "," at ");return o.displayName&&Fe.includes("<anonymous>")&&(Fe=Fe.replace("<anonymous>",o.displayName)),Fe}while(1<=g&&0<=_);break}}}finally{ne=!1,Error.prepareStackTrace=f}return(f=o?o.displayName||o.name:"")?st(f):""}function Ge(o,u){switch(o.tag){case 26:case 27:case 5:return st(o.type);case 16:return st("Lazy");case 13:return o.child!==u&&u!==null?st("Suspense Fallback"):st("Suspense");case 19:return st("SuspenseList");case 0:case 15:return Je(o.type,!1);case 11:return Je(o.type.render,!1);case 1:return Je(o.type,!0);case 31:return st("Activity");default:return""}}function Be(o){try{var u="",f=null;do u+=Ge(o,f),f=o,o=o.return;while(o);return u}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var Le=Object.prototype.hasOwnProperty,at=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,rt=i.unstable_requestPaint,Tt=i.unstable_now,zt=i.unstable_getCurrentPriorityLevel,At=i.unstable_ImmediatePriority,tn=i.unstable_UserBlockingPriority,Vt=i.unstable_NormalPriority,ut=i.unstable_LowPriority,Pt=i.unstable_IdlePriority,tt=i.log,Pn=i.unstable_setDisableYieldValue,bt=null,Ct=null;function Ft(o){if(typeof tt=="function"&&Pn(o),Ct&&typeof Ct.setStrictMode=="function")try{Ct.setStrictMode(bt,o)}catch{}}var nn=Math.clz32?Math.clz32:Lt,St=Math.log,In=Math.LN2;function Lt(o){return o>>>=0,o===0?32:31-(St(o)/In|0)|0}var Ot=256,An=262144,Gt=4194304;function gt(o){var u=o&42;if(u!==0)return u;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function rn(o,u,f){var g=o.pendingLanes;if(g===0)return 0;var _=0,T=o.suspendedLanes,D=o.pingedLanes;o=o.warmLanes;var Y=g&134217727;return Y!==0?(g=Y&~T,g!==0?_=gt(g):(D&=Y,D!==0?_=gt(D):f||(f=Y&~o,f!==0&&(_=gt(f))))):(Y=g&~T,Y!==0?_=gt(Y):D!==0?_=gt(D):f||(f=g&~o,f!==0&&(_=gt(f)))),_===0?0:u!==0&&u!==_&&(u&T)===0&&(T=_&-_,f=u&-u,T>=f||T===32&&(f&4194048)!==0)?u:_}function Ws(o,u){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&u)===0}function Un(o,u){switch(o){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lr(){var o=Gt;return Gt<<=1,(Gt&62914560)===0&&(Gt=4194304),o}function Os(o){for(var u=[],f=0;31>f;f++)u.push(o);return u}function wt(o,u){o.pendingLanes|=u,u!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Ca(o,u,f,g,_,T){var D=o.pendingLanes;o.pendingLanes=f,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=f,o.entangledLanes&=f,o.errorRecoveryDisabledLanes&=f,o.shellSuspendCounter=0;var Y=o.entanglements,fe=o.expirationTimes,ke=o.hiddenUpdates;for(f=D&~f;0<f;){var Fe=31-nn(f),ze=1<<Fe;Y[Fe]=0,fe[Fe]=-1;var Re=ke[Fe];if(Re!==null)for(ke[Fe]=null,Fe=0;Fe<Re.length;Fe++){var Pe=Re[Fe];Pe!==null&&(Pe.lane&=-536870913)}f&=~ze}g!==0&&na(o,g,0),T!==0&&_===0&&o.tag!==0&&(o.suspendedLanes|=T&~(D&~u))}function na(o,u,f){o.pendingLanes|=u,o.suspendedLanes&=~u;var g=31-nn(u);o.entangledLanes|=u,o.entanglements[g]=o.entanglements[g]|1073741824|f&261930}function Ys(o,u){var f=o.entangledLanes|=u;for(o=o.entanglements;f;){var g=31-nn(f),_=1<<g;_&u|o[g]&u&&(o[g]|=u),f&=~_}}function Ks(o,u){var f=u&-u;return f=(f&42)!==0?1:Zn(f),(f&(o.suspendedLanes|u))!==0?0:f}function Zn(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Ti(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Gi(){var o=ue.p;return o!==0?o:(o=window.event,o===void 0?32:kb(o.type))}function po(o,u){var f=ue.p;try{return ue.p=o,u()}finally{ue.p=f}}var xs=Math.random().toString(36).slice(2),Mn="__reactFiber$"+xs,ei="__reactProps$"+xs,ds="__reactContainer$"+xs,Js="__reactEvents$"+xs,ur="__reactListeners$"+xs,$o="__reactHandles$"+xs,Pr="__reactResources$"+xs,Ir="__reactMarker$"+xs;function go(o){delete o[Mn],delete o[ei],delete o[Js],delete o[ur],delete o[$o]}function Mr(o){var u=o[Mn];if(u)return u;for(var f=o.parentNode;f;){if(u=f[ds]||f[Mn]){if(f=u.alternate,u.child!==null||f!==null&&f.child!==null)for(o=fb(o);o!==null;){if(f=o[Mn])return f;o=fb(o)}return u}o=f,f=o.parentNode}return null}function Dr(o){if(o=o[Mn]||o[ds]){var u=o.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return o}return null}function Wo(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o.stateNode;throw Error(n(33))}function ia(o){var u=o[Pr];return u||(u=o[Pr]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function mi(o){o[Ir]=!0}var ku=new Set,Xs={};function Or(o,u){Na(o,u),Na(o+"Capture",u)}function Na(o,u){for(Xs[o]=u,o=0;o<u.length;o++)ku.add(u[o])}var Ru=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lu={},Pu={};function Lc(o){return Le.call(Pu,o)?!0:Le.call(Lu,o)?!1:Ru.test(o)?Pu[o]=!0:(Lu[o]=!0,!1)}function Zs(o,u,f){if(Lc(u))if(f===null)o.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":o.removeAttribute(u);return;case"boolean":var g=u.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){o.removeAttribute(u);return}}o.setAttribute(u,""+f)}}function ka(o,u,f){if(f===null)o.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttribute(u,""+f)}}function Br(o,u,f,g){if(g===null)o.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(f);return}o.setAttributeNS(u,f,""+g)}}function wn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Iu(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function sa(o,u,f){var g=Object.getOwnPropertyDescriptor(o.constructor.prototype,u);if(!o.hasOwnProperty(u)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var _=g.get,T=g.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return _.call(this)},set:function(D){f=""+D,T.call(this,D)}}),Object.defineProperty(o,u,{enumerable:g.enumerable}),{getValue:function(){return f},setValue:function(D){f=""+D},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function mo(o){if(!o._valueTracker){var u=Iu(o)?"checked":"value";o._valueTracker=sa(o,u,""+o[u])}}function Mu(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var f=u.getValue(),g="";return o&&(g=Iu(o)?o.checked?"true":"false":o.value),o=g,o!==f?(u.setValue(o),!0):!1}function _s(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Bi=/[\n"\\]/g;function Ci(o){return o.replace(Bi,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Ml(o,u,f,g,_,T,D,Y){o.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?o.type=D:o.removeAttribute("type"),u!=null?D==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+wn(u)):o.value!==""+wn(u)&&(o.value=""+wn(u)):D!=="submit"&&D!=="reset"||o.removeAttribute("value"),u!=null?Du(o,D,wn(u)):f!=null?Du(o,D,wn(f)):g!=null&&o.removeAttribute("value"),_==null&&T!=null&&(o.defaultChecked=!!T),_!=null&&(o.checked=_&&typeof _!="function"&&typeof _!="symbol"),Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?o.name=""+wn(Y):o.removeAttribute("name")}function Pc(o,u,f,g,_,T,D,Y){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(o.type=T),u!=null||f!=null){if(!(T!=="submit"&&T!=="reset"||u!=null)){mo(o);return}f=f!=null?""+wn(f):"",u=u!=null?""+wn(u):f,Y||u===o.value||(o.value=u),o.defaultValue=u}g=g??_,g=typeof g!="function"&&typeof g!="symbol"&&!!g,o.checked=Y?o.checked:!!g,o.defaultChecked=!!g,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(o.name=D),mo(o)}function Du(o,u,f){u==="number"&&_s(o.ownerDocument)===o||o.defaultValue===""+f||(o.defaultValue=""+f)}function As(o,u,f,g){if(o=o.options,u){u={};for(var _=0;_<f.length;_++)u["$"+f[_]]=!0;for(f=0;f<o.length;f++)_=u.hasOwnProperty("$"+o[f].value),o[f].selected!==_&&(o[f].selected=_),_&&g&&(o[f].defaultSelected=!0)}else{for(f=""+wn(f),u=null,_=0;_<o.length;_++){if(o[_].value===f){o[_].selected=!0,g&&(o[_].defaultSelected=!0);return}u!==null||o[_].disabled||(u=o[_])}u!==null&&(u.selected=!0)}}function Ou(o,u,f){if(u!=null&&(u=""+wn(u),u!==o.value&&(o.value=u),f==null)){o.defaultValue!==u&&(o.defaultValue=u);return}o.defaultValue=f!=null?""+wn(f):""}function Bu(o,u,f,g){if(u==null){if(g!=null){if(f!=null)throw Error(n(92));if(ye(g)){if(1<g.length)throw Error(n(93));g=g[0]}f=g}f==null&&(f=""),u=f}f=wn(u),o.defaultValue=f,g=o.textContent,g===f&&g!==""&&g!==null&&(o.value=g),mo(o)}function Fr(o,u){if(u){var f=o.firstChild;if(f&&f===o.lastChild&&f.nodeType===3){f.nodeValue=u;return}}o.textContent=u}var Yo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ic(o,u,f){var g=u.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?g?o.setProperty(u,""):u==="float"?o.cssFloat="":o[u]="":g?o.setProperty(u,f):typeof f!="number"||f===0||Yo.has(u)?u==="float"?o.cssFloat=f:o[u]=(""+f).trim():o[u]=f+"px"}function Mc(o,u,f){if(u!=null&&typeof u!="object")throw Error(n(62));if(o=o.style,f!=null){for(var g in f)!f.hasOwnProperty(g)||u!=null&&u.hasOwnProperty(g)||(g.indexOf("--")===0?o.setProperty(g,""):g==="float"?o.cssFloat="":o[g]="");for(var _ in u)g=u[_],u.hasOwnProperty(_)&&f[_]!==g&&Ic(o,_,g)}else for(var T in u)u.hasOwnProperty(T)&&Ic(o,T,u[T])}function Fu(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bs(o){return Dc.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function Ur(){}var Ra=null;function Ko(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var vo=null,It=null;function Oc(o){var u=Dr(o);if(u&&(o=u.stateNode)){var f=o[ei]||null;e:switch(o=u.stateNode,u.type){case"input":if(Ml(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),u=f.name,f.type==="radio"&&u!=null){for(f=o;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Ci(""+u)+'"][type="radio"]'),u=0;u<f.length;u++){var g=f[u];if(g!==o&&g.form===o.form){var _=g[ei]||null;if(!_)throw Error(n(90));Ml(g,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(u=0;u<f.length;u++)g=f[u],g.form===o.form&&Mu(g)}break e;case"textarea":Ou(o,f.value,f.defaultValue);break e;case"select":u=f.value,u!=null&&As(o,!!f.multiple,u,!1)}}}var ju=!1;function Bc(o,u,f){if(ju)return o(u,f);ju=!0;try{var g=o(u);return g}finally{if(ju=!1,(vo!==null||It!==null)&&(vp(),vo&&(u=vo,o=It,It=vo=null,Oc(u),o)))for(u=0;u<o.length;u++)Oc(o[u])}}function Qs(o,u){var f=o.stateNode;if(f===null)return null;var g=f[ei]||null;if(g===null)return null;f=g[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break e;default:o=!1}if(o)return null;if(f&&typeof f!="function")throw Error(n(231,u,typeof f));return f}var es=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qu=!1;if(es)try{var Jo={};Object.defineProperty(Jo,"passive",{get:function(){qu=!0}}),window.addEventListener("test",Jo,Jo),window.removeEventListener("test",Jo,Jo)}catch{qu=!1}var er=null,Xo=null,ra=null;function Fc(){if(ra)return ra;var o,u=Xo,f=u.length,g,_="value"in er?er.value:er.textContent,T=_.length;for(o=0;o<f&&u[o]===_[o];o++);var D=f-o;for(g=1;g<=D&&u[f-g]===_[T-g];g++);return ra=_.slice(o,1<g?1-g:void 0)}function cr(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function Dl(){return!0}function Ol(){return!1}function $i(o){function u(f,g,_,T,D){this._reactName=f,this._targetInst=_,this.type=g,this.nativeEvent=T,this.target=D,this.currentTarget=null;for(var Y in o)o.hasOwnProperty(Y)&&(f=o[Y],this[Y]=f?f(T):T[Y]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Dl:Ol,this.isPropagationStopped=Ol,this}return p(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Dl)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Dl)},persist:function(){},isPersistent:Dl}),u}var aa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dr=$i(aa),La=p({},aa,{view:0,detail:0}),Bl=$i(La),Zo,Pa,Ia,Qo=p({},La,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ut,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Ia&&(Ia&&o.type==="mousemove"?(Zo=o.screenX-Ia.screenX,Pa=o.screenY-Ia.screenY):Pa=Zo=0,Ia=o),Zo)},movementY:function(o){return"movementY"in o?o.movementY:Pa}}),Hu=$i(Qo),Ma=p({},Qo,{dataTransfer:0}),Da=$i(Ma),Uc=p({},La,{relatedTarget:0}),Oa=$i(Uc),jc=p({},aa,{animationName:0,elapsedTime:0,pseudoElement:0}),k=$i(jc),F=p({},aa,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),oe=$i(F),pe=p({},aa,{data:0}),xe=$i(pe),Ue={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ct={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mt(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=ct[o])?!!u[o]:!1}function Ut(){return mt}var $t=p({},La,{key:function(o){if(o.key){var u=Ue[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=cr(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?$e[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ut,charCode:function(o){return o.type==="keypress"?cr(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?cr(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),hn=$i($t),ti=p({},Qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vi=$i(ti),jn=p({},La,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ut}),Fi=$i(jn),Ni=p({},aa,{propertyName:0,elapsedTime:0,pseudoElement:0}),ts=$i(Ni),Ba=p({},Qo,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),jr=$i(Ba),Fa=p({},aa,{newState:0,oldState:0}),zu=$i(Fa),Fl=[9,13,27,32],oa=es&&"CompositionEvent"in window,qr=null;es&&"documentMode"in document&&(qr=document.documentMode);var el=es&&"TextEvent"in window&&!qr,Ua=es&&(!oa||qr&&8<qr&&11>=qr),Wi=" ",yo=!1;function bo(o,u){switch(o){case"keyup":return Fl.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ul(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var la=!1;function Ss(o,u){switch(o){case"compositionend":return Ul(u);case"keypress":return u.which!==32?null:(yo=!0,Wi);case"textInput":return o=u.data,o===Wi&&yo?null:o;default:return null}}function ja(o,u){if(la)return o==="compositionend"||!oa&&bo(o,u)?(o=Fc(),ra=Xo=er=null,la=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Ua&&u.locale!=="ko"?null:u.data;default:return null}}var jl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vu(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!jl[o.type]:u==="textarea"}function tr(o,u,f,g){vo?It?It.push(g):It=[g]:vo=g,u=Sp(u,"onChange"),0<u.length&&(f=new dr("onChange","change",null,f,g),o.push({event:f,listeners:u}))}var Hr=null,qa=null;function Gu(o){Q2(o,0)}function zr(o){var u=Wo(o);if(Mu(u))return o}function wo(o,u){if(o==="change")return u}var Fs=!1;if(es){var Es;if(es){var ua="oninput"in document;if(!ua){var ca=document.createElement("div");ca.setAttribute("oninput","return;"),ua=typeof ca.oninput=="function"}Es=ua}else Es=!1;Fs=Es&&(!document.documentMode||9<document.documentMode)}function Ha(){Hr&&(Hr.detachEvent("onpropertychange",ql),qa=Hr=null)}function ql(o){if(o.propertyName==="value"&&zr(qa)){var u=[];tr(u,qa,o,Ko(o)),Bc(Gu,u)}}function Hl(o,u,f){o==="focusin"?(Ha(),Hr=u,qa=f,Hr.attachEvent("onpropertychange",ql)):o==="focusout"&&Ha()}function yi(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return zr(qa)}function qc(o,u){if(o==="click")return zr(u)}function da(o,u){if(o==="input"||o==="change")return zr(u)}function ha(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var ns=typeof Object.is=="function"?Object.is:ha;function za(o,u){if(ns(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var f=Object.keys(o),g=Object.keys(u);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var _=f[g];if(!Le.call(u,_)||!ns(o[_],u[_]))return!1}return!0}function zl(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Vl(o,u){var f=zl(o);o=0;for(var g;f;){if(f.nodeType===3){if(g=o+f.textContent.length,o<=u&&g>=u)return{node:f,offset:u-o};o=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=zl(f)}}function Va(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?Va(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function Ga(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var u=_s(o.document);u instanceof o.HTMLIFrameElement;){try{var f=typeof u.contentWindow.location.href=="string"}catch{f=!1}if(f)o=u.contentWindow;else break;u=_s(o.document)}return u}function fa(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}var tl=es&&"documentMode"in document&&11>=document.documentMode,nr=null,$a=null,hs=null,hr=!1;function xn(o,u,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;hr||nr==null||nr!==_s(g)||(g=nr,"selectionStart"in g&&fa(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),hs&&za(hs,g)||(hs=g,g=Sp($a,"onSelect"),0<g.length&&(u=new dr("onSelect","select",null,u,f),o.push({event:u,listeners:g}),u.target=nr)))}function fn(o,u){var f={};return f[o.toLowerCase()]=u.toLowerCase(),f["Webkit"+o]="webkit"+u,f["Moz"+o]="moz"+u,f}var qn={animationend:fn("Animation","AnimationEnd"),animationiteration:fn("Animation","AnimationIteration"),animationstart:fn("Animation","AnimationStart"),transitionrun:fn("Transition","TransitionRun"),transitionstart:fn("Transition","TransitionStart"),transitioncancel:fn("Transition","TransitionCancel"),transitionend:fn("Transition","TransitionEnd")},bi={},pa={};es&&(pa=document.createElement("div").style,"AnimationEvent"in window||(delete qn.animationend.animation,delete qn.animationiteration.animation,delete qn.animationstart.animation),"TransitionEvent"in window||delete qn.transitionend.transition);function Vr(o){if(bi[o])return bi[o];if(!qn[o])return o;var u=qn[o],f;for(f in u)if(u.hasOwnProperty(f)&&f in pa)return bi[o]=u[f];return o}var nl=Vr("animationend"),$u=Vr("animationiteration"),fh=Vr("animationstart"),Wf=Vr("transitionrun"),Yf=Vr("transitionstart"),Kf=Vr("transitioncancel"),ph=Vr("transitionend"),gh=new Map,il="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");il.push("scrollEnd");function fr(o,u){gh.set(o,u),Or(u,[o])}var Wu=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},ir=[],sl=0,Hc=0;function Yu(){for(var o=sl,u=Hc=sl=0;u<o;){var f=ir[u];ir[u++]=null;var g=ir[u];ir[u++]=null;var _=ir[u];ir[u++]=null;var T=ir[u];if(ir[u++]=null,g!==null&&_!==null){var D=g.pending;D===null?_.next=_:(_.next=D.next,D.next=_),g.pending=_}T!==0&&Ju(f,_,T)}}function Ku(o,u,f,g){ir[sl++]=o,ir[sl++]=u,ir[sl++]=f,ir[sl++]=g,Hc|=g,o.lanes|=g,o=o.alternate,o!==null&&(o.lanes|=g)}function zc(o,u,f,g){return Ku(o,u,f,g),fs(o)}function Wa(o,u){return Ku(o,null,null,u),fs(o)}function Ju(o,u,f){o.lanes|=f;var g=o.alternate;g!==null&&(g.lanes|=f);for(var _=!1,T=o.return;T!==null;)T.childLanes|=f,g=T.alternate,g!==null&&(g.childLanes|=f),T.tag===22&&(o=T.stateNode,o===null||o._visibility&1||(_=!0)),o=T,T=T.return;return o.tag===3?(T=o.stateNode,_&&u!==null&&(_=31-nn(f),o=T.hiddenUpdates,g=o[_],g===null?o[_]=[u]:g.push(u),u.lane=f|536870912),T):null}function fs(o){if(50<Bh)throw Bh=0,Zg=null,Error(n(185));for(var u=o.return;u!==null;)o=u,u=o.return;return o.tag===3?o.stateNode:null}var is={};function Vc(o,u,f,g){this.tag=o,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ps(o,u,f,g){return new Vc(o,u,f,g)}function Gc(o){return o=o.prototype,!(!o||!o.isReactComponent)}function pr(o,u){var f=o.alternate;return f===null?(f=ps(o.tag,u,o.key,o.mode),f.elementType=o.elementType,f.type=o.type,f.stateNode=o.stateNode,f.alternate=o,o.alternate=f):(f.pendingProps=u,f.type=o.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=o.flags&65011712,f.childLanes=o.childLanes,f.lanes=o.lanes,f.child=o.child,f.memoizedProps=o.memoizedProps,f.memoizedState=o.memoizedState,f.updateQueue=o.updateQueue,u=o.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=o.sibling,f.index=o.index,f.ref=o.ref,f.refCleanup=o.refCleanup,f}function Xu(o,u){o.flags&=65011714;var f=o.alternate;return f===null?(o.childLanes=0,o.lanes=u,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=f.childLanes,o.lanes=f.lanes,o.child=f.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=f.memoizedProps,o.memoizedState=f.memoizedState,o.updateQueue=f.updateQueue,o.type=f.type,u=f.dependencies,o.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),o}function Gl(o,u,f,g,_,T){var D=0;if(g=o,typeof o=="function")Gc(o)&&(D=1);else if(typeof o=="string")D=rC(o,f,Z.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case j:return o=ps(31,f,u,_),o.elementType=j,o.lanes=T,o;case S:return xo(f.children,_,T,u);case N:D=8,_|=24;break;case C:return o=ps(12,f,u,_|2),o.elementType=C,o.lanes=T,o;case q:return o=ps(13,f,u,_),o.elementType=q,o.lanes=T,o;case G:return o=ps(19,f,u,_),o.elementType=G,o.lanes=T,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case L:D=10;break e;case P:D=9;break e;case O:D=11;break e;case W:D=14;break e;case K:D=16,g=null;break e}D=29,f=Error(n(130,o===null?"null":typeof o,"")),g=null}return u=ps(D,f,u,_),u.elementType=o,u.type=g,u.lanes=T,u}function xo(o,u,f,g){return o=ps(7,o,g,u),o.lanes=f,o}function Zu(o,u,f){return o=ps(6,o,null,u),o.lanes=f,o}function $c(o){var u=ps(18,null,null,0);return u.stateNode=o,u}function $l(o,u,f){return u=ps(4,o.children!==null?o.children:[],o.key,u),u.lanes=f,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}var Wc=new WeakMap;function gr(o,u){if(typeof o=="object"&&o!==null){var f=Wc.get(o);return f!==void 0?f:(u={value:o,source:u,stack:Be(u)},Wc.set(o,u),u)}return{value:o,source:u,stack:Be(u)}}var Wl=[],rl=0,Yc=null,Qu=0,mr=[],vr=0,_o=null,yr=1,br="";function sr(o,u){Wl[rl++]=Qu,Wl[rl++]=Yc,Yc=o,Qu=u}function Jf(o,u,f){mr[vr++]=yr,mr[vr++]=br,mr[vr++]=_o,_o=o;var g=yr;o=br;var _=32-nn(g)-1;g&=~(1<<_),f+=1;var T=32-nn(u)+_;if(30<T){var D=_-_%5;T=(g&(1<<D)-1).toString(32),g>>=D,_-=D,yr=1<<32-nn(u)+_|f<<_|g,br=T+o}else yr=1<<T|f<<_|g,br=o}function mh(o){o.return!==null&&(sr(o,1),Jf(o,1,0))}function Kc(o){for(;o===Yc;)Yc=Wl[--rl],Wl[rl]=null,Qu=Wl[--rl],Wl[rl]=null;for(;o===_o;)_o=mr[--vr],mr[vr]=null,br=mr[--vr],mr[vr]=null,yr=mr[--vr],mr[vr]=null}function Xf(o,u){mr[vr++]=yr,mr[vr++]=br,mr[vr++]=_o,yr=u.id,br=u.overflow,_o=o}var ss=null,Wn=null,on=!1,Ts=null,li=!1,Gr=Error(n(519));function Ao(o){var u=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Yl(gr(u,o)),Gr}function vh(o){var u=o.stateNode,f=o.type,g=o.memoizedProps;switch(u[Mn]=o,u[ei]=g,f){case"dialog":un("cancel",u),un("close",u);break;case"iframe":case"object":case"embed":un("load",u);break;case"video":case"audio":for(f=0;f<Uh.length;f++)un(Uh[f],u);break;case"source":un("error",u);break;case"img":case"image":case"link":un("error",u),un("load",u);break;case"details":un("toggle",u);break;case"input":un("invalid",u),Pc(u,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":un("invalid",u);break;case"textarea":un("invalid",u),Bu(u,g.value,g.defaultValue,g.children)}f=g.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||u.textContent===""+f||g.suppressHydrationWarning===!0||ib(u.textContent,f)?(g.popover!=null&&(un("beforetoggle",u),un("toggle",u)),g.onScroll!=null&&un("scroll",u),g.onScrollEnd!=null&&un("scrollend",u),g.onClick!=null&&(u.onclick=Ur),u=!0):u=!1,u||Ao(o,!0)}function Ya(o){for(ss=o.return;ss;)switch(ss.tag){case 5:case 31:case 13:li=!1;return;case 27:case 3:li=!0;return;default:ss=ss.return}}function rs(o){if(o!==ss)return!1;if(!on)return Ya(o),on=!0,!1;var u=o.tag,f;if((f=u!==3&&u!==27)&&((f=u===5)&&(f=o.type,f=!(f!=="form"&&f!=="button")||fm(o.type,o.memoizedProps)),f=!f),f&&Wn&&Ao(o),Ya(o),u===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));Wn=hb(o)}else if(u===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));Wn=hb(o)}else u===27?(u=Wn,lu(o.type)?(o=ym,ym=null,Wn=o):Wn=u):Wn=ss?ya(o.stateNode.nextSibling):null;return!0}function al(){Wn=ss=null,on=!1}function yh(){var o=Ts;return o!==null&&(Er===null?Er=o:Er.push.apply(Er,o),Ts=null),o}function Yl(o){Ts===null?Ts=[o]:Ts.push(o)}var Jc=Q(null),So=null,ga=null;function Eo(o,u,f){V(Jc,u._currentValue),u._currentValue=f}function wr(o){o._currentValue=Jc.current,M(Jc)}function Kl(o,u,f){for(;o!==null;){var g=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,g!==null&&(g.childLanes|=u)):g!==null&&(g.childLanes&u)!==u&&(g.childLanes|=u),o===f)break;o=o.return}}function ol(o,u,f,g){var _=o.child;for(_!==null&&(_.return=o);_!==null;){var T=_.dependencies;if(T!==null){var D=_.child;T=T.firstContext;e:for(;T!==null;){var Y=T;T=_;for(var fe=0;fe<u.length;fe++)if(Y.context===u[fe]){T.lanes|=f,Y=T.alternate,Y!==null&&(Y.lanes|=f),Kl(T.return,f,o),g||(D=null);break e}T=Y.next}}else if(_.tag===18){if(D=_.return,D===null)throw Error(n(341));D.lanes|=f,T=D.alternate,T!==null&&(T.lanes|=f),Kl(D,f,o),D=null}else D=_.child;if(D!==null)D.return=_;else for(D=_;D!==null;){if(D===o){D=null;break}if(_=D.sibling,_!==null){_.return=D.return,D=_;break}D=D.return}_=D}}function To(o,u,f,g){o=null;for(var _=u,T=!1;_!==null;){if(!T){if((_.flags&524288)!==0)T=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var D=_.alternate;if(D===null)throw Error(n(387));if(D=D.memoizedProps,D!==null){var Y=_.type;ns(_.pendingProps.value,D.value)||(o!==null?o.push(Y):o=[Y])}}else if(_===he.current){if(D=_.alternate,D===null)throw Error(n(387));D.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(o!==null?o.push(Vh):o=[Vh])}_=_.return}o!==null&&ol(u,o,f,g),u.flags|=262144}function Xc(o){for(o=o.firstContext;o!==null;){if(!ns(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Co(o){So=o,ga=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function as(o){return Zf(So,o)}function Zc(o,u){return So===null&&Co(o),Zf(o,u)}function Zf(o,u){var f=u._currentValue;if(u={context:u,memoizedValue:f,next:null},ga===null){if(o===null)throw Error(n(308));ga=u,o.dependencies={lanes:0,firstContext:u},o.flags|=524288}else ga=ga.next=u;return f}var vg=typeof AbortController<"u"?AbortController:function(){var o=[],u=this.signal={aborted:!1,addEventListener:function(f,g){o.push(g)}};this.abort=function(){u.aborted=!0,o.forEach(function(f){return f()})}},yg=i.unstable_scheduleCallback,bg=i.unstable_NormalPriority,wi={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jl(){return{controller:new vg,data:new Map,refCount:0}}function ec(o){o.refCount--,o.refCount===0&&yg(bg,function(){o.controller.abort()})}var tc=null,Qc=0,b=0,A=null;function R(o,u){if(tc===null){var f=tc=[];Qc=0,b=sm(),A={status:"pending",value:void 0,then:function(g){f.push(g)}}}return Qc++,u.then(I,I),u}function I(){if(--Qc===0&&tc!==null){A!==null&&(A.status="fulfilled");var o=tc;tc=null,b=0,A=null;for(var u=0;u<o.length;u++)(0,o[u])()}}function U(o,u){var f=[],g={status:"pending",value:null,reason:null,then:function(_){f.push(_)}};return o.then(function(){g.status="fulfilled",g.value=u;for(var _=0;_<f.length;_++)(0,f[_])(u)},function(_){for(g.status="rejected",g.reason=_,_=0;_<f.length;_++)(0,f[_])(void 0)}),g}var z=X.S;X.S=function(o,u){C2=Tt(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&R(o,u),z!==null&&z(o,u)};var $=Q(null);function J(){var o=$.current;return o!==null?o:Kn.pooledCache}function te(o,u){u===null?V($,$.current):V($,u.pool)}function ae(){var o=J();return o===null?null:{parent:wi._currentValue,pool:o}}var ge=Error(n(460)),Ce=Error(n(474)),re=Error(n(542)),be={then:function(){}};function Se(o){return o=o.status,o==="fulfilled"||o==="rejected"}function De(o,u,f){switch(f=o[f],f===void 0?o.push(u):f!==u&&(u.then(Ur,Ur),u=f),u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,We(o),o;default:if(typeof u.status=="string")u.then(Ur,Ur);else{if(o=Kn,o!==null&&100<o.shellSuspendCounter)throw Error(n(482));o=u,o.status="pending",o.then(function(g){if(u.status==="pending"){var _=u;_.status="fulfilled",_.value=g}},function(g){if(u.status==="pending"){var _=u;_.status="rejected",_.reason=g}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,We(o),o}throw Me=u,ge}}function Te(o){try{var u=o._init;return u(o._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(Me=f,ge):f}}var Me=null;function je(){if(Me===null)throw Error(n(459));var o=Me;return Me=null,o}function We(o){if(o===ge||o===re)throw Error(n(483))}var Ve=null,ft=0;function nt(o){var u=ft;return ft+=1,Ve===null&&(Ve=[]),De(Ve,o,u)}function qt(o,u){u=u.props.ref,o.ref=u!==void 0?u:null}function ot(o,u){throw u.$$typeof===v?Error(n(525)):(o=Object.prototype.toString.call(u),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o)))}function an(o){function u(_e,ve){if(o){var Ne=_e.deletions;Ne===null?(_e.deletions=[ve],_e.flags|=16):Ne.push(ve)}}function f(_e,ve){if(!o)return null;for(;ve!==null;)u(_e,ve),ve=ve.sibling;return null}function g(_e){for(var ve=new Map;_e!==null;)_e.key!==null?ve.set(_e.key,_e):ve.set(_e.index,_e),_e=_e.sibling;return ve}function _(_e,ve){return _e=pr(_e,ve),_e.index=0,_e.sibling=null,_e}function T(_e,ve,Ne){return _e.index=Ne,o?(Ne=_e.alternate,Ne!==null?(Ne=Ne.index,Ne<ve?(_e.flags|=67108866,ve):Ne):(_e.flags|=67108866,ve)):(_e.flags|=1048576,ve)}function D(_e){return o&&_e.alternate===null&&(_e.flags|=67108866),_e}function Y(_e,ve,Ne,qe){return ve===null||ve.tag!==6?(ve=Zu(Ne,_e.mode,qe),ve.return=_e,ve):(ve=_(ve,Ne),ve.return=_e,ve)}function fe(_e,ve,Ne,qe){var kt=Ne.type;return kt===S?Fe(_e,ve,Ne.props.children,qe,Ne.key):ve!==null&&(ve.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===K&&Te(kt)===ve.type)?(ve=_(ve,Ne.props),qt(ve,Ne),ve.return=_e,ve):(ve=Gl(Ne.type,Ne.key,Ne.props,null,_e.mode,qe),qt(ve,Ne),ve.return=_e,ve)}function ke(_e,ve,Ne,qe){return ve===null||ve.tag!==4||ve.stateNode.containerInfo!==Ne.containerInfo||ve.stateNode.implementation!==Ne.implementation?(ve=$l(Ne,_e.mode,qe),ve.return=_e,ve):(ve=_(ve,Ne.children||[]),ve.return=_e,ve)}function Fe(_e,ve,Ne,qe,kt){return ve===null||ve.tag!==7?(ve=xo(Ne,_e.mode,qe,kt),ve.return=_e,ve):(ve=_(ve,Ne),ve.return=_e,ve)}function ze(_e,ve,Ne){if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return ve=Zu(""+ve,_e.mode,Ne),ve.return=_e,ve;if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case m:return Ne=Gl(ve.type,ve.key,ve.props,null,_e.mode,Ne),qt(Ne,ve),Ne.return=_e,Ne;case E:return ve=$l(ve,_e.mode,Ne),ve.return=_e,ve;case K:return ve=Te(ve),ze(_e,ve,Ne)}if(ye(ve)||H(ve))return ve=xo(ve,_e.mode,Ne,null),ve.return=_e,ve;if(typeof ve.then=="function")return ze(_e,nt(ve),Ne);if(ve.$$typeof===L)return ze(_e,Zc(_e,ve),Ne);ot(_e,ve)}return null}function Re(_e,ve,Ne,qe){var kt=ve!==null?ve.key:null;if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return kt!==null?null:Y(_e,ve,""+Ne,qe);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case m:return Ne.key===kt?fe(_e,ve,Ne,qe):null;case E:return Ne.key===kt?ke(_e,ve,Ne,qe):null;case K:return Ne=Te(Ne),Re(_e,ve,Ne,qe)}if(ye(Ne)||H(Ne))return kt!==null?null:Fe(_e,ve,Ne,qe,null);if(typeof Ne.then=="function")return Re(_e,ve,nt(Ne),qe);if(Ne.$$typeof===L)return Re(_e,ve,Zc(_e,Ne),qe);ot(_e,Ne)}return null}function Pe(_e,ve,Ne,qe,kt){if(typeof qe=="string"&&qe!==""||typeof qe=="number"||typeof qe=="bigint")return _e=_e.get(Ne)||null,Y(ve,_e,""+qe,kt);if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case m:return _e=_e.get(qe.key===null?Ne:qe.key)||null,fe(ve,_e,qe,kt);case E:return _e=_e.get(qe.key===null?Ne:qe.key)||null,ke(ve,_e,qe,kt);case K:return qe=Te(qe),Pe(_e,ve,Ne,qe,kt)}if(ye(qe)||H(qe))return _e=_e.get(Ne)||null,Fe(ve,_e,qe,kt,null);if(typeof qe.then=="function")return Pe(_e,ve,Ne,nt(qe),kt);if(qe.$$typeof===L)return Pe(_e,ve,Ne,Zc(ve,qe),kt);ot(ve,qe)}return null}function dt(_e,ve,Ne,qe){for(var kt=null,Sn=null,vt=ve,en=ve=0,dn=null;vt!==null&&en<Ne.length;en++){vt.index>en?(dn=vt,vt=null):dn=vt.sibling;var En=Re(_e,vt,Ne[en],qe);if(En===null){vt===null&&(vt=dn);break}o&&vt&&En.alternate===null&&u(_e,vt),ve=T(En,ve,en),Sn===null?kt=En:Sn.sibling=En,Sn=En,vt=dn}if(en===Ne.length)return f(_e,vt),on&&sr(_e,en),kt;if(vt===null){for(;en<Ne.length;en++)vt=ze(_e,Ne[en],qe),vt!==null&&(ve=T(vt,ve,en),Sn===null?kt=vt:Sn.sibling=vt,Sn=vt);return on&&sr(_e,en),kt}for(vt=g(vt);en<Ne.length;en++)dn=Pe(vt,_e,en,Ne[en],qe),dn!==null&&(o&&dn.alternate!==null&&vt.delete(dn.key===null?en:dn.key),ve=T(dn,ve,en),Sn===null?kt=dn:Sn.sibling=dn,Sn=dn);return o&&vt.forEach(function(fu){return u(_e,fu)}),on&&sr(_e,en),kt}function Bt(_e,ve,Ne,qe){if(Ne==null)throw Error(n(151));for(var kt=null,Sn=null,vt=ve,en=ve=0,dn=null,En=Ne.next();vt!==null&&!En.done;en++,En=Ne.next()){vt.index>en?(dn=vt,vt=null):dn=vt.sibling;var fu=Re(_e,vt,En.value,qe);if(fu===null){vt===null&&(vt=dn);break}o&&vt&&fu.alternate===null&&u(_e,vt),ve=T(fu,ve,en),Sn===null?kt=fu:Sn.sibling=fu,Sn=fu,vt=dn}if(En.done)return f(_e,vt),on&&sr(_e,en),kt;if(vt===null){for(;!En.done;en++,En=Ne.next())En=ze(_e,En.value,qe),En!==null&&(ve=T(En,ve,en),Sn===null?kt=En:Sn.sibling=En,Sn=En);return on&&sr(_e,en),kt}for(vt=g(vt);!En.done;en++,En=Ne.next())En=Pe(vt,_e,en,En.value,qe),En!==null&&(o&&En.alternate!==null&&vt.delete(En.key===null?en:En.key),ve=T(En,ve,en),Sn===null?kt=En:Sn.sibling=En,Sn=En);return o&&vt.forEach(function(mC){return u(_e,mC)}),on&&sr(_e,en),kt}function Gn(_e,ve,Ne,qe){if(typeof Ne=="object"&&Ne!==null&&Ne.type===S&&Ne.key===null&&(Ne=Ne.props.children),typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case m:e:{for(var kt=Ne.key;ve!==null;){if(ve.key===kt){if(kt=Ne.type,kt===S){if(ve.tag===7){f(_e,ve.sibling),qe=_(ve,Ne.props.children),qe.return=_e,_e=qe;break e}}else if(ve.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===K&&Te(kt)===ve.type){f(_e,ve.sibling),qe=_(ve,Ne.props),qt(qe,Ne),qe.return=_e,_e=qe;break e}f(_e,ve);break}else u(_e,ve);ve=ve.sibling}Ne.type===S?(qe=xo(Ne.props.children,_e.mode,qe,Ne.key),qe.return=_e,_e=qe):(qe=Gl(Ne.type,Ne.key,Ne.props,null,_e.mode,qe),qt(qe,Ne),qe.return=_e,_e=qe)}return D(_e);case E:e:{for(kt=Ne.key;ve!==null;){if(ve.key===kt)if(ve.tag===4&&ve.stateNode.containerInfo===Ne.containerInfo&&ve.stateNode.implementation===Ne.implementation){f(_e,ve.sibling),qe=_(ve,Ne.children||[]),qe.return=_e,_e=qe;break e}else{f(_e,ve);break}else u(_e,ve);ve=ve.sibling}qe=$l(Ne,_e.mode,qe),qe.return=_e,_e=qe}return D(_e);case K:return Ne=Te(Ne),Gn(_e,ve,Ne,qe)}if(ye(Ne))return dt(_e,ve,Ne,qe);if(H(Ne)){if(kt=H(Ne),typeof kt!="function")throw Error(n(150));return Ne=kt.call(Ne),Bt(_e,ve,Ne,qe)}if(typeof Ne.then=="function")return Gn(_e,ve,nt(Ne),qe);if(Ne.$$typeof===L)return Gn(_e,ve,Zc(_e,Ne),qe);ot(_e,Ne)}return typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint"?(Ne=""+Ne,ve!==null&&ve.tag===6?(f(_e,ve.sibling),qe=_(ve,Ne),qe.return=_e,_e=qe):(f(_e,ve),qe=Zu(Ne,_e.mode,qe),qe.return=_e,_e=qe),D(_e)):f(_e,ve)}return function(_e,ve,Ne,qe){try{ft=0;var kt=Gn(_e,ve,Ne,qe);return Ve=null,kt}catch(vt){if(vt===ge||vt===re)throw vt;var Sn=ps(29,vt,null,_e.mode);return Sn.lanes=qe,Sn.return=_e,Sn}finally{}}}var Yn=an(!0),Wt=an(!1),it=!1;function Xe(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ni(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Mt(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Xt(o,u,f){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,(kn&2)!==0){var _=g.pending;return _===null?u.next=u:(u.next=_.next,_.next=u),g.pending=u,u=fs(o),Ju(o,null,f),u}return Ku(o,g,u,f),fs(o)}function Cn(o,u,f){if(u=u.updateQueue,u!==null&&(u=u.shared,(f&4194048)!==0)){var g=u.lanes;g&=o.pendingLanes,f|=g,u.lanes=f,Ys(o,f)}}function Ui(o,u){var f=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var _=null,T=null;if(f=f.firstBaseUpdate,f!==null){do{var D={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};T===null?_=T=D:T=T.next=D,f=f.next}while(f!==null);T===null?_=T=u:T=T.next=u}else _=T=u;f={baseState:g.baseState,firstBaseUpdate:_,lastBaseUpdate:T,shared:g.shared,callbacks:g.callbacks},o.updateQueue=f;return}o=f.lastBaseUpdate,o===null?f.firstBaseUpdate=u:o.next=u,f.lastBaseUpdate=u}var os=!1;function Hn(){if(os){var o=A;if(o!==null)throw o}}function ki(o,u,f,g){os=!1;var _=o.updateQueue;it=!1;var T=_.firstBaseUpdate,D=_.lastBaseUpdate,Y=_.shared.pending;if(Y!==null){_.shared.pending=null;var fe=Y,ke=fe.next;fe.next=null,D===null?T=ke:D.next=ke,D=fe;var Fe=o.alternate;Fe!==null&&(Fe=Fe.updateQueue,Y=Fe.lastBaseUpdate,Y!==D&&(Y===null?Fe.firstBaseUpdate=ke:Y.next=ke,Fe.lastBaseUpdate=fe))}if(T!==null){var ze=_.baseState;D=0,Fe=ke=fe=null,Y=T;do{var Re=Y.lane&-536870913,Pe=Re!==Y.lane;if(Pe?(cn&Re)===Re:(g&Re)===Re){Re!==0&&Re===b&&(os=!0),Fe!==null&&(Fe=Fe.next={lane:0,tag:Y.tag,payload:Y.payload,callback:null,next:null});e:{var dt=o,Bt=Y;Re=u;var Gn=f;switch(Bt.tag){case 1:if(dt=Bt.payload,typeof dt=="function"){ze=dt.call(Gn,ze,Re);break e}ze=dt;break e;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=Bt.payload,Re=typeof dt=="function"?dt.call(Gn,ze,Re):dt,Re==null)break e;ze=p({},ze,Re);break e;case 2:it=!0}}Re=Y.callback,Re!==null&&(o.flags|=64,Pe&&(o.flags|=8192),Pe=_.callbacks,Pe===null?_.callbacks=[Re]:Pe.push(Re))}else Pe={lane:Re,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},Fe===null?(ke=Fe=Pe,fe=ze):Fe=Fe.next=Pe,D|=Re;if(Y=Y.next,Y===null){if(Y=_.shared.pending,Y===null)break;Pe=Y,Y=Pe.next,Pe.next=null,_.lastBaseUpdate=Pe,_.shared.pending=null}}while(!0);Fe===null&&(fe=ze),_.baseState=fe,_.firstBaseUpdate=ke,_.lastBaseUpdate=Fe,T===null&&(_.shared.lanes=0),iu|=D,o.lanes=D,o.memoizedState=ze}}function gs(o,u){if(typeof o!="function")throw Error(n(191,o));o.call(u)}function Ri(o,u){var f=o.callbacks;if(f!==null)for(o.callbacks=null,o=0;o<f.length;o++)gs(f[o],u)}var sn=Q(null),vn=Q(0);function ii(o,u){o=vl,V(vn,o),V(sn,u),vl=o|u.baseLanes}function _n(){V(vn,vl),V(sn,sn.current)}function ji(){vl=vn.current,M(sn),M(vn)}var si=Q(null),yn=null;function xi(o){var u=o.alternate;V(pn,pn.current&1),V(si,o),yn===null&&(u===null||sn.current!==null||u.memoizedState!==null)&&(yn=o)}function Nn(o){V(pn,pn.current),V(si,o),yn===null&&(yn=o)}function Li(o){o.tag===22?(V(pn,pn.current),V(si,o),yn===null&&(yn=o)):Pi()}function Pi(){V(pn,pn.current),V(si,si.current)}function Dn(o){M(si),yn===o&&(yn=null),M(pn)}var pn=Q(0);function ms(o){for(var u=o;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||mm(f)||vm(f)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var ui=0,Et=null,Nt=null,bn=null,Us=!1,xr=!1,Cs=!1,Ii=0,No=0,ko=null,ed=0;function zn(){throw Error(n(321))}function bh(o,u){if(u===null)return!1;for(var f=0;f<u.length&&f<o.length;f++)if(!ns(o[f],u[f]))return!1;return!0}function wh(o,u,f,g,_,T){return ui=T,Et=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,X.H=o===null||o.memoizedState===null?Fy:Cg,Cs=!1,T=f(g,_),Cs=!1,xr&&(T=Ka(u,f,g,_)),td(o),T}function td(o){X.H=Nh;var u=Nt!==null&&Nt.next!==null;if(ui=0,bn=Nt=Et=null,Us=!1,No=0,ko=null,u)throw Error(n(300));o===null||Ki||(o=o.dependencies,o!==null&&Xc(o)&&(Ki=!0))}function Ka(o,u,f,g){Et=o;var _=0;do{if(xr&&(ko=null),No=0,xr=!1,25<=_)throw Error(n(301));if(_+=1,bn=Nt=null,o.updateQueue!=null){var T=o.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}X.H=Uy,T=u(f,g)}while(xr);return T}function wg(){var o=X.H,u=o.useState()[0];return u=typeof u.then=="function"?Ro(u):u,o=o.useState()[0],(Nt!==null?Nt.memoizedState:null)!==o&&(Et.flags|=1024),u}function xh(){var o=Ii!==0;return Ii=0,o}function _h(o,u,f){u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~f}function nd(o){if(Us){for(o=o.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}Us=!1}ui=0,bn=Nt=Et=null,xr=!1,No=Ii=0,ko=null}function Yi(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bn===null?Et.memoizedState=bn=o:bn=bn.next=o,bn}function ci(){if(Nt===null){var o=Et.alternate;o=o!==null?o.memoizedState:null}else o=Nt.next;var u=bn===null?Et.memoizedState:bn.next;if(u!==null)bn=u,Nt=o;else{if(o===null)throw Et.alternate===null?Error(n(467)):Error(n(310));Nt=o,o={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},bn===null?Et.memoizedState=bn=o:bn=bn.next=o}return bn}function nc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ro(o){var u=No;return No+=1,ko===null&&(ko=[]),o=De(ko,o,u),u=Et,(bn===null?u.memoizedState:bn.next)===null&&(u=u.alternate,X.H=u===null||u.memoizedState===null?Fy:Cg),o}function Xl(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Ro(o);if(o.$$typeof===L)return as(o)}throw Error(n(438,String(o)))}function ll(o){var u=null,f=Et.updateQueue;if(f!==null&&(u=f.memoCache),u==null){var g=Et.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(u={data:g.data.map(function(_){return _.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),f===null&&(f=nc(),Et.updateQueue=f),f.memoCache=u,f=u.data[u.index],f===void 0)for(f=u.data[u.index]=Array(o),g=0;g<o;g++)f[g]=ee;return u.index++,f}function ma(o,u){return typeof u=="function"?u(o):u}function id(o){var u=ci();return Zl(u,Nt,o)}function Zl(o,u,f){var g=o.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=f;var _=o.baseQueue,T=g.pending;if(T!==null){if(_!==null){var D=_.next;_.next=T.next,T.next=D}u.baseQueue=_=T,g.pending=null}if(T=o.baseState,_===null)o.memoizedState=T;else{u=_.next;var Y=D=null,fe=null,ke=u,Fe=!1;do{var ze=ke.lane&-536870913;if(ze!==ke.lane?(cn&ze)===ze:(ui&ze)===ze){var Re=ke.revertLane;if(Re===0)fe!==null&&(fe=fe.next={lane:0,revertLane:0,gesture:null,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null}),ze===b&&(Fe=!0);else if((ui&Re)===Re){ke=ke.next,Re===b&&(Fe=!0);continue}else ze={lane:0,revertLane:ke.revertLane,gesture:null,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null},fe===null?(Y=fe=ze,D=T):fe=fe.next=ze,Et.lanes|=Re,iu|=Re;ze=ke.action,Cs&&f(T,ze),T=ke.hasEagerState?ke.eagerState:f(T,ze)}else Re={lane:ze,revertLane:ke.revertLane,gesture:ke.gesture,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null},fe===null?(Y=fe=Re,D=T):fe=fe.next=Re,Et.lanes|=ze,iu|=ze;ke=ke.next}while(ke!==null&&ke!==u);if(fe===null?D=T:fe.next=Y,!ns(T,o.memoizedState)&&(Ki=!0,Fe&&(f=A,f!==null)))throw f;o.memoizedState=T,o.baseState=D,o.baseQueue=fe,g.lastRenderedState=T}return _===null&&(g.lanes=0),[o.memoizedState,g.dispatch]}function sd(o){var u=ci(),f=u.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=o;var g=f.dispatch,_=f.pending,T=u.memoizedState;if(_!==null){f.pending=null;var D=_=_.next;do T=o(T,D.action),D=D.next;while(D!==_);ns(T,u.memoizedState)||(Ki=!0),u.memoizedState=T,u.baseQueue===null&&(u.baseState=T),f.lastRenderedState=T}return[T,g]}function rd(o,u,f){var g=Et,_=ci(),T=on;if(T){if(f===void 0)throw Error(n(407));f=f()}else f=u();var D=!ns((Nt||_).memoizedState,f);if(D&&(_.memoizedState=f,Ki=!0),_=_.queue,xg(Sh.bind(null,g,_,o),[o]),_.getSnapshot!==u||D||bn!==null&&bn.memoizedState.tag&1){if(g.flags|=2048,cl(9,{destroy:void 0},Ah.bind(null,g,_,f,u),null),Kn===null)throw Error(n(349));T||(ui&127)!==0||Ja(g,u,f)}return f}function Ja(o,u,f){o.flags|=16384,o={getSnapshot:u,value:f},u=Et.updateQueue,u===null?(u=nc(),Et.updateQueue=u,u.stores=[o]):(f=u.stores,f===null?u.stores=[o]:f.push(o))}function Ah(o,u,f,g){u.value=f,u.getSnapshot=g,Qf(u)&&Eh(o)}function Sh(o,u,f){return f(function(){Qf(u)&&Eh(o)})}function Qf(o){var u=o.getSnapshot;o=o.value;try{var f=u();return!ns(o,f)}catch{return!0}}function Eh(o){var u=Wa(o,2);u!==null&&Tr(u,o,2)}function Lo(o){var u=Yi();if(typeof o=="function"){var f=o;if(o=f(),Cs){Ft(!0);try{f()}finally{Ft(!1)}}}return u.memoizedState=u.baseState=o,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:o},u}function ep(o,u,f,g){return o.baseState=f,Zl(o,Nt,typeof g=="function"?g:ma)}function tp(o,u,f,g,_){if(rp(o))throw Error(n(485));if(o=u.action,o!==null){var T={payload:_,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){T.listeners.push(D)}};X.T!==null?f(!0):T.isTransition=!1,g(T),f=u.pending,f===null?(T.next=u.pending=T,np(u,T)):(T.next=f.next,u.pending=f.next=T)}}function np(o,u){var f=u.action,g=u.payload,_=o.state;if(u.isTransition){var T=X.T,D={};X.T=D;try{var Y=f(_,g),fe=X.S;fe!==null&&fe(D,Y),Th(o,u,Y)}catch(ke){ul(o,u,ke)}finally{T!==null&&D.types!==null&&(T.types=D.types),X.T=T}}else try{T=f(_,g),Th(o,u,T)}catch(ke){ul(o,u,ke)}}function Th(o,u,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(g){ip(o,u,g)},function(g){return ul(o,u,g)}):ip(o,u,f)}function ip(o,u,f){u.status="fulfilled",u.value=f,ad(u),o.state=f,u=o.pending,u!==null&&(f=u.next,f===u?o.pending=null:(f=f.next,u.next=f,np(o,f)))}function ul(o,u,f){var g=o.pending;if(o.pending=null,g!==null){g=g.next;do u.status="rejected",u.reason=f,ad(u),u=u.next;while(u!==g)}o.action=null}function ad(o){o=o.listeners;for(var u=0;u<o.length;u++)(0,o[u])()}function ic(o,u){return u}function va(o,u){if(on){var f=Kn.formState;if(f!==null){e:{var g=Et;if(on){if(Wn){t:{for(var _=Wn,T=li;_.nodeType!==8;){if(!T){_=null;break t}if(_=ya(_.nextSibling),_===null){_=null;break t}}T=_.data,_=T==="F!"||T==="F"?_:null}if(_){Wn=ya(_.nextSibling),g=_.data==="F!";break e}}Ao(g)}g=!1}g&&(u=f[0])}}return f=Yi(),f.memoizedState=f.baseState=u,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ic,lastRenderedState:u},f.queue=g,f=Dy.bind(null,Et,g),g.dispatch=f,g=Lo(!1),T=Tg.bind(null,Et,!1,g.queue),g=Yi(),_={state:u,dispatch:null,action:o,pending:null},g.queue=_,f=tp.bind(null,Et,_,T,f),_.dispatch=f,g.memoizedState=o,[u,f,!1]}function Xa(o){var u=ci();return Za(u,Nt,o)}function Za(o,u,f){if(u=Zl(o,u,ic)[0],o=id(ma)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var g=Ro(u)}catch(D){throw D===ge?re:D}else g=u;u=ci();var _=u.queue,T=_.dispatch;return f!==u.memoizedState&&(Et.flags|=2048,cl(9,{destroy:void 0},od.bind(null,_,f),null)),[g,T,o]}function od(o,u){o.action=u}function ld(o){var u=ci(),f=Nt;if(f!==null)return Za(u,f,o);ci(),u=u.memoizedState,f=ci();var g=f.queue.dispatch;return f.memoizedState=o,[u,g,!1]}function cl(o,u,f,g){return o={tag:o,create:f,deps:g,inst:u,next:null},u=Et.updateQueue,u===null&&(u=nc(),Et.updateQueue=u),f=u.lastEffect,f===null?u.lastEffect=o.next=o:(g=f.next,f.next=o,o.next=g,u.lastEffect=o),o}function sp(){return ci().memoizedState}function Ql(o,u,f,g){var _=Yi();Et.flags|=o,_.memoizedState=cl(1|u,{destroy:void 0},f,g===void 0?null:g)}function eu(o,u,f,g){var _=ci();g=g===void 0?null:g;var T=_.memoizedState.inst;Nt!==null&&g!==null&&bh(g,Nt.memoizedState.deps)?_.memoizedState=cl(u,T,f,g):(Et.flags|=o,_.memoizedState=cl(1|u,T,f,g))}function xy(o,u){Ql(8390656,8,o,u)}function xg(o,u){eu(2048,8,o,u)}function cT(o){Et.flags|=4;var u=Et.updateQueue;if(u===null)u=nc(),Et.updateQueue=u,u.events=[o];else{var f=u.events;f===null?u.events=[o]:f.push(o)}}function _y(o){var u=ci().memoizedState;return cT({ref:u,nextImpl:o}),function(){if((kn&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}function Ay(o,u){return eu(4,2,o,u)}function Sy(o,u){return eu(4,4,o,u)}function Ey(o,u){if(typeof u=="function"){o=o();var f=u(o);return function(){typeof f=="function"?f():u(null)}}if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function Ty(o,u,f){f=f!=null?f.concat([o]):null,eu(4,4,Ey.bind(null,u,o),f)}function _g(){}function Cy(o,u){var f=ci();u=u===void 0?null:u;var g=f.memoizedState;return u!==null&&bh(u,g[1])?g[0]:(f.memoizedState=[o,u],o)}function Ny(o,u){var f=ci();u=u===void 0?null:u;var g=f.memoizedState;if(u!==null&&bh(u,g[1]))return g[0];if(g=o(),Cs){Ft(!0);try{o()}finally{Ft(!1)}}return f.memoizedState=[g,u],g}function Ag(o,u,f){return f===void 0||(ui&1073741824)!==0&&(cn&261930)===0?o.memoizedState=u:(o.memoizedState=f,o=k2(),Et.lanes|=o,iu|=o,f)}function ky(o,u,f,g){return ns(f,u)?f:sn.current!==null?(o=Ag(o,f,g),ns(o,u)||(Ki=!0),o):(ui&42)===0||(ui&1073741824)!==0&&(cn&261930)===0?(Ki=!0,o.memoizedState=f):(o=k2(),Et.lanes|=o,iu|=o,u)}function Ry(o,u,f,g,_){var T=ue.p;ue.p=T!==0&&8>T?T:8;var D=X.T,Y={};X.T=Y,Tg(o,!1,u,f);try{var fe=_(),ke=X.S;if(ke!==null&&ke(Y,fe),fe!==null&&typeof fe=="object"&&typeof fe.then=="function"){var Fe=U(fe,g);Ch(o,u,Fe,Yr(o))}else Ch(o,u,g,Yr(o))}catch(ze){Ch(o,u,{then:function(){},status:"rejected",reason:ze},Yr())}finally{ue.p=T,D!==null&&Y.types!==null&&(D.types=Y.types),X.T=D}}function dT(){}function Sg(o,u,f,g){if(o.tag!==5)throw Error(n(476));var _=Ly(o).queue;Ry(o,_,u,de,f===null?dT:function(){return Py(o),f(g)})}function Ly(o){var u=o.memoizedState;if(u!==null)return u;u={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:de},next:null};var f={};return u.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:f},next:null},o.memoizedState=u,o=o.alternate,o!==null&&(o.memoizedState=u),u}function Py(o){var u=Ly(o);u.next===null&&(u=o.alternate.memoizedState),Ch(o,u.next.queue,{},Yr())}function Eg(){return as(Vh)}function Iy(){return ci().memoizedState}function My(){return ci().memoizedState}function hT(o){for(var u=o.return;u!==null;){switch(u.tag){case 24:case 3:var f=Yr();o=Mt(f);var g=Xt(u,o,f);g!==null&&(Tr(g,u,f),Cn(g,u,f)),u={cache:Jl()},o.payload=u;return}u=u.return}}function fT(o,u,f){var g=Yr();f={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},rp(o)?Oy(u,f):(f=zc(o,u,f,g),f!==null&&(Tr(f,o,g),By(f,u,g)))}function Dy(o,u,f){var g=Yr();Ch(o,u,f,g)}function Ch(o,u,f,g){var _={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(rp(o))Oy(u,_);else{var T=o.alternate;if(o.lanes===0&&(T===null||T.lanes===0)&&(T=u.lastRenderedReducer,T!==null))try{var D=u.lastRenderedState,Y=T(D,f);if(_.hasEagerState=!0,_.eagerState=Y,ns(Y,D))return Ku(o,u,_,0),Kn===null&&Yu(),!1}catch{}finally{}if(f=zc(o,u,_,g),f!==null)return Tr(f,o,g),By(f,u,g),!0}return!1}function Tg(o,u,f,g){if(g={lane:2,revertLane:sm(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},rp(o)){if(u)throw Error(n(479))}else u=zc(o,f,g,2),u!==null&&Tr(u,o,2)}function rp(o){var u=o.alternate;return o===Et||u!==null&&u===Et}function Oy(o,u){xr=Us=!0;var f=o.pending;f===null?u.next=u:(u.next=f.next,f.next=u),o.pending=u}function By(o,u,f){if((f&4194048)!==0){var g=u.lanes;g&=o.pendingLanes,f|=g,u.lanes=f,Ys(o,f)}}var Nh={readContext:as,use:Xl,useCallback:zn,useContext:zn,useEffect:zn,useImperativeHandle:zn,useLayoutEffect:zn,useInsertionEffect:zn,useMemo:zn,useReducer:zn,useRef:zn,useState:zn,useDebugValue:zn,useDeferredValue:zn,useTransition:zn,useSyncExternalStore:zn,useId:zn,useHostTransitionStatus:zn,useFormState:zn,useActionState:zn,useOptimistic:zn,useMemoCache:zn,useCacheRefresh:zn};Nh.useEffectEvent=zn;var Fy={readContext:as,use:Xl,useCallback:function(o,u){return Yi().memoizedState=[o,u===void 0?null:u],o},useContext:as,useEffect:xy,useImperativeHandle:function(o,u,f){f=f!=null?f.concat([o]):null,Ql(4194308,4,Ey.bind(null,u,o),f)},useLayoutEffect:function(o,u){return Ql(4194308,4,o,u)},useInsertionEffect:function(o,u){Ql(4,2,o,u)},useMemo:function(o,u){var f=Yi();u=u===void 0?null:u;var g=o();if(Cs){Ft(!0);try{o()}finally{Ft(!1)}}return f.memoizedState=[g,u],g},useReducer:function(o,u,f){var g=Yi();if(f!==void 0){var _=f(u);if(Cs){Ft(!0);try{f(u)}finally{Ft(!1)}}}else _=u;return g.memoizedState=g.baseState=_,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:_},g.queue=o,o=o.dispatch=fT.bind(null,Et,o),[g.memoizedState,o]},useRef:function(o){var u=Yi();return o={current:o},u.memoizedState=o},useState:function(o){o=Lo(o);var u=o.queue,f=Dy.bind(null,Et,u);return u.dispatch=f,[o.memoizedState,f]},useDebugValue:_g,useDeferredValue:function(o,u){var f=Yi();return Ag(f,o,u)},useTransition:function(){var o=Lo(!1);return o=Ry.bind(null,Et,o.queue,!0,!1),Yi().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,u,f){var g=Et,_=Yi();if(on){if(f===void 0)throw Error(n(407));f=f()}else{if(f=u(),Kn===null)throw Error(n(349));(cn&127)!==0||Ja(g,u,f)}_.memoizedState=f;var T={value:f,getSnapshot:u};return _.queue=T,xy(Sh.bind(null,g,T,o),[o]),g.flags|=2048,cl(9,{destroy:void 0},Ah.bind(null,g,T,f,u),null),f},useId:function(){var o=Yi(),u=Kn.identifierPrefix;if(on){var f=br,g=yr;f=(g&~(1<<32-nn(g)-1)).toString(32)+f,u="_"+u+"R_"+f,f=Ii++,0<f&&(u+="H"+f.toString(32)),u+="_"}else f=ed++,u="_"+u+"r_"+f.toString(32)+"_";return o.memoizedState=u},useHostTransitionStatus:Eg,useFormState:va,useActionState:va,useOptimistic:function(o){var u=Yi();u.memoizedState=u.baseState=o;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=f,u=Tg.bind(null,Et,!0,f),f.dispatch=u,[o,u]},useMemoCache:ll,useCacheRefresh:function(){return Yi().memoizedState=hT.bind(null,Et)},useEffectEvent:function(o){var u=Yi(),f={impl:o};return u.memoizedState=f,function(){if((kn&2)!==0)throw Error(n(440));return f.impl.apply(void 0,arguments)}}},Cg={readContext:as,use:Xl,useCallback:Cy,useContext:as,useEffect:xg,useImperativeHandle:Ty,useInsertionEffect:Ay,useLayoutEffect:Sy,useMemo:Ny,useReducer:id,useRef:sp,useState:function(){return id(ma)},useDebugValue:_g,useDeferredValue:function(o,u){var f=ci();return ky(f,Nt.memoizedState,o,u)},useTransition:function(){var o=id(ma)[0],u=ci().memoizedState;return[typeof o=="boolean"?o:Ro(o),u]},useSyncExternalStore:rd,useId:Iy,useHostTransitionStatus:Eg,useFormState:Xa,useActionState:Xa,useOptimistic:function(o,u){var f=ci();return ep(f,Nt,o,u)},useMemoCache:ll,useCacheRefresh:My};Cg.useEffectEvent=_y;var Uy={readContext:as,use:Xl,useCallback:Cy,useContext:as,useEffect:xg,useImperativeHandle:Ty,useInsertionEffect:Ay,useLayoutEffect:Sy,useMemo:Ny,useReducer:sd,useRef:sp,useState:function(){return sd(ma)},useDebugValue:_g,useDeferredValue:function(o,u){var f=ci();return Nt===null?Ag(f,o,u):ky(f,Nt.memoizedState,o,u)},useTransition:function(){var o=sd(ma)[0],u=ci().memoizedState;return[typeof o=="boolean"?o:Ro(o),u]},useSyncExternalStore:rd,useId:Iy,useHostTransitionStatus:Eg,useFormState:ld,useActionState:ld,useOptimistic:function(o,u){var f=ci();return Nt!==null?ep(f,Nt,o,u):(f.baseState=o,[o,f.queue.dispatch])},useMemoCache:ll,useCacheRefresh:My};Uy.useEffectEvent=_y;function Ng(o,u,f,g){u=o.memoizedState,f=f(g,u),f=f==null?u:p({},u,f),o.memoizedState=f,o.lanes===0&&(o.updateQueue.baseState=f)}var kg={enqueueSetState:function(o,u,f){o=o._reactInternals;var g=Yr(),_=Mt(g);_.payload=u,f!=null&&(_.callback=f),u=Xt(o,_,g),u!==null&&(Tr(u,o,g),Cn(u,o,g))},enqueueReplaceState:function(o,u,f){o=o._reactInternals;var g=Yr(),_=Mt(g);_.tag=1,_.payload=u,f!=null&&(_.callback=f),u=Xt(o,_,g),u!==null&&(Tr(u,o,g),Cn(u,o,g))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var f=Yr(),g=Mt(f);g.tag=2,u!=null&&(g.callback=u),u=Xt(o,g,f),u!==null&&(Tr(u,o,f),Cn(u,o,f))}};function jy(o,u,f,g,_,T,D){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,T,D):u.prototype&&u.prototype.isPureReactComponent?!za(f,g)||!za(_,T):!0}function qy(o,u,f,g){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,g),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,g),u.state!==o&&kg.enqueueReplaceState(u,u.state,null)}function sc(o,u){var f=u;if("ref"in u){f={};for(var g in u)g!=="ref"&&(f[g]=u[g])}if(o=o.defaultProps){f===u&&(f=p({},f));for(var _ in o)f[_]===void 0&&(f[_]=o[_])}return f}function Hy(o){Wu(o)}function zy(o){console.error(o)}function Vy(o){Wu(o)}function ap(o,u){try{var f=o.onUncaughtError;f(u.value,{componentStack:u.stack})}catch(g){setTimeout(function(){throw g})}}function Gy(o,u,f){try{var g=o.onCaughtError;g(f.value,{componentStack:f.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function Rg(o,u,f){return f=Mt(f),f.tag=3,f.payload={element:null},f.callback=function(){ap(o,u)},f}function $y(o){return o=Mt(o),o.tag=3,o}function Wy(o,u,f,g){var _=f.type.getDerivedStateFromError;if(typeof _=="function"){var T=g.value;o.payload=function(){return _(T)},o.callback=function(){Gy(u,f,g)}}var D=f.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(o.callback=function(){Gy(u,f,g),typeof _!="function"&&(su===null?su=new Set([this]):su.add(this));var Y=g.stack;this.componentDidCatch(g.value,{componentStack:Y!==null?Y:""})})}function pT(o,u,f,g,_){if(f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(u=f.alternate,u!==null&&To(u,f,_,!0),f=si.current,f!==null){switch(f.tag){case 31:case 13:return yn===null?yp():f.alternate===null&&Mi===0&&(Mi=3),f.flags&=-257,f.flags|=65536,f.lanes=_,g===be?f.flags|=16384:(u=f.updateQueue,u===null?f.updateQueue=new Set([g]):u.add(g),tm(o,g,_)),!1;case 22:return f.flags|=65536,g===be?f.flags|=16384:(u=f.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([g])},f.updateQueue=u):(f=u.retryQueue,f===null?u.retryQueue=new Set([g]):f.add(g)),tm(o,g,_)),!1}throw Error(n(435,f.tag))}return tm(o,g,_),yp(),!1}if(on)return u=si.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=_,g!==Gr&&(o=Error(n(422),{cause:g}),Yl(gr(o,f)))):(g!==Gr&&(u=Error(n(423),{cause:g}),Yl(gr(u,f))),o=o.current.alternate,o.flags|=65536,_&=-_,o.lanes|=_,g=gr(g,f),_=Rg(o.stateNode,g,_),Ui(o,_),Mi!==4&&(Mi=2)),!1;var T=Error(n(520),{cause:g});if(T=gr(T,f),Oh===null?Oh=[T]:Oh.push(T),Mi!==4&&(Mi=2),u===null)return!0;g=gr(g,f),f=u;do{switch(f.tag){case 3:return f.flags|=65536,o=_&-_,f.lanes|=o,o=Rg(f.stateNode,g,o),Ui(f,o),!1;case 1:if(u=f.type,T=f.stateNode,(f.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(su===null||!su.has(T))))return f.flags|=65536,_&=-_,f.lanes|=_,_=$y(_),Wy(_,o,f,g),Ui(f,_),!1}f=f.return}while(f!==null);return!1}var Lg=Error(n(461)),Ki=!1;function Ns(o,u,f,g){u.child=o===null?Wt(u,null,f,g):Yn(u,o.child,f,g)}function Yy(o,u,f,g,_){f=f.render;var T=u.ref;if("ref"in g){var D={};for(var Y in g)Y!=="ref"&&(D[Y]=g[Y])}else D=g;return Co(u),g=wh(o,u,f,D,T,_),Y=xh(),o!==null&&!Ki?(_h(o,u,_),dl(o,u,_)):(on&&Y&&mh(u),u.flags|=1,Ns(o,u,g,_),u.child)}function Ky(o,u,f,g,_){if(o===null){var T=f.type;return typeof T=="function"&&!Gc(T)&&T.defaultProps===void 0&&f.compare===null?(u.tag=15,u.type=T,Jy(o,u,T,g,_)):(o=Gl(f.type,null,g,u,u.mode,_),o.ref=u.ref,o.return=u,u.child=o)}if(T=o.child,!Ug(o,_)){var D=T.memoizedProps;if(f=f.compare,f=f!==null?f:za,f(D,g)&&o.ref===u.ref)return dl(o,u,_)}return u.flags|=1,o=pr(T,g),o.ref=u.ref,o.return=u,u.child=o}function Jy(o,u,f,g,_){if(o!==null){var T=o.memoizedProps;if(za(T,g)&&o.ref===u.ref)if(Ki=!1,u.pendingProps=g=T,Ug(o,_))(o.flags&131072)!==0&&(Ki=!0);else return u.lanes=o.lanes,dl(o,u,_)}return Pg(o,u,f,g,_)}function Xy(o,u,f,g){var _=g.children,T=o!==null?o.memoizedState:null;if(o===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((u.flags&128)!==0){if(T=T!==null?T.baseLanes|f:f,o!==null){for(g=u.child=o.child,_=0;g!==null;)_=_|g.lanes|g.childLanes,g=g.sibling;g=_&~T}else g=0,u.child=null;return Zy(o,u,T,f,g)}if((f&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},o!==null&&te(u,T!==null?T.cachePool:null),T!==null?ii(u,T):_n(),Li(u);else return g=u.lanes=536870912,Zy(o,u,T!==null?T.baseLanes|f:f,f,g)}else T!==null?(te(u,T.cachePool),ii(u,T),Pi(),u.memoizedState=null):(o!==null&&te(u,null),_n(),Pi());return Ns(o,u,_,f),u.child}function kh(o,u){return o!==null&&o.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function Zy(o,u,f,g,_){var T=J();return T=T===null?null:{parent:wi._currentValue,pool:T},u.memoizedState={baseLanes:f,cachePool:T},o!==null&&te(u,null),_n(),Li(u),o!==null&&To(o,u,g,!0),u.childLanes=_,null}function op(o,u){return u=up({mode:u.mode,children:u.children},o.mode),u.ref=o.ref,o.child=u,u.return=o,u}function Qy(o,u,f){return Yn(u,o.child,null,f),o=op(u,u.pendingProps),o.flags|=2,Dn(u),u.memoizedState=null,o}function gT(o,u,f){var g=u.pendingProps,_=(u.flags&128)!==0;if(u.flags&=-129,o===null){if(on){if(g.mode==="hidden")return o=op(u,g),u.lanes=536870912,kh(null,o);if(Nn(u),(o=Wn)?(o=db(o,li),o=o!==null&&o.data==="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:_o!==null?{id:yr,overflow:br}:null,retryLane:536870912,hydrationErrors:null},f=$c(o),f.return=u,u.child=f,ss=u,Wn=null)):o=null,o===null)throw Ao(u);return u.lanes=536870912,null}return op(u,g)}var T=o.memoizedState;if(T!==null){var D=T.dehydrated;if(Nn(u),_)if(u.flags&256)u.flags&=-257,u=Qy(o,u,f);else if(u.memoizedState!==null)u.child=o.child,u.flags|=128,u=null;else throw Error(n(558));else if(Ki||To(o,u,f,!1),_=(f&o.childLanes)!==0,Ki||_){if(g=Kn,g!==null&&(D=Ks(g,f),D!==0&&D!==T.retryLane))throw T.retryLane=D,Wa(o,D),Tr(g,o,D),Lg;yp(),u=Qy(o,u,f)}else o=T.treeContext,Wn=ya(D.nextSibling),ss=u,on=!0,Ts=null,li=!1,o!==null&&Xf(u,o),u=op(u,g),u.flags|=4096;return u}return o=pr(o.child,{mode:g.mode,children:g.children}),o.ref=u.ref,u.child=o,o.return=u,o}function lp(o,u){var f=u.ref;if(f===null)o!==null&&o.ref!==null&&(u.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(n(284));(o===null||o.ref!==f)&&(u.flags|=4194816)}}function Pg(o,u,f,g,_){return Co(u),f=wh(o,u,f,g,void 0,_),g=xh(),o!==null&&!Ki?(_h(o,u,_),dl(o,u,_)):(on&&g&&mh(u),u.flags|=1,Ns(o,u,f,_),u.child)}function e2(o,u,f,g,_,T){return Co(u),u.updateQueue=null,f=Ka(u,g,f,_),td(o),g=xh(),o!==null&&!Ki?(_h(o,u,T),dl(o,u,T)):(on&&g&&mh(u),u.flags|=1,Ns(o,u,f,T),u.child)}function t2(o,u,f,g,_){if(Co(u),u.stateNode===null){var T=is,D=f.contextType;typeof D=="object"&&D!==null&&(T=as(D)),T=new f(g,T),u.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=kg,u.stateNode=T,T._reactInternals=u,T=u.stateNode,T.props=g,T.state=u.memoizedState,T.refs={},Xe(u),D=f.contextType,T.context=typeof D=="object"&&D!==null?as(D):is,T.state=u.memoizedState,D=f.getDerivedStateFromProps,typeof D=="function"&&(Ng(u,f,D,g),T.state=u.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(D=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),D!==T.state&&kg.enqueueReplaceState(T,T.state,null),ki(u,g,T,_),Hn(),T.state=u.memoizedState),typeof T.componentDidMount=="function"&&(u.flags|=4194308),g=!0}else if(o===null){T=u.stateNode;var Y=u.memoizedProps,fe=sc(f,Y);T.props=fe;var ke=T.context,Fe=f.contextType;D=is,typeof Fe=="object"&&Fe!==null&&(D=as(Fe));var ze=f.getDerivedStateFromProps;Fe=typeof ze=="function"||typeof T.getSnapshotBeforeUpdate=="function",Y=u.pendingProps!==Y,Fe||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(Y||ke!==D)&&qy(u,T,g,D),it=!1;var Re=u.memoizedState;T.state=Re,ki(u,g,T,_),Hn(),ke=u.memoizedState,Y||Re!==ke||it?(typeof ze=="function"&&(Ng(u,f,ze,g),ke=u.memoizedState),(fe=it||jy(u,f,fe,g,Re,ke,D))?(Fe||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(u.flags|=4194308)):(typeof T.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=g,u.memoizedState=ke),T.props=g,T.state=ke,T.context=D,g=fe):(typeof T.componentDidMount=="function"&&(u.flags|=4194308),g=!1)}else{T=u.stateNode,ni(o,u),D=u.memoizedProps,Fe=sc(f,D),T.props=Fe,ze=u.pendingProps,Re=T.context,ke=f.contextType,fe=is,typeof ke=="object"&&ke!==null&&(fe=as(ke)),Y=f.getDerivedStateFromProps,(ke=typeof Y=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(D!==ze||Re!==fe)&&qy(u,T,g,fe),it=!1,Re=u.memoizedState,T.state=Re,ki(u,g,T,_),Hn();var Pe=u.memoizedState;D!==ze||Re!==Pe||it||o!==null&&o.dependencies!==null&&Xc(o.dependencies)?(typeof Y=="function"&&(Ng(u,f,Y,g),Pe=u.memoizedState),(Fe=it||jy(u,f,Fe,g,Re,Pe,fe)||o!==null&&o.dependencies!==null&&Xc(o.dependencies))?(ke||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(g,Pe,fe),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(g,Pe,fe)),typeof T.componentDidUpdate=="function"&&(u.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof T.componentDidUpdate!="function"||D===o.memoizedProps&&Re===o.memoizedState||(u.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||D===o.memoizedProps&&Re===o.memoizedState||(u.flags|=1024),u.memoizedProps=g,u.memoizedState=Pe),T.props=g,T.state=Pe,T.context=fe,g=Fe):(typeof T.componentDidUpdate!="function"||D===o.memoizedProps&&Re===o.memoizedState||(u.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||D===o.memoizedProps&&Re===o.memoizedState||(u.flags|=1024),g=!1)}return T=g,lp(o,u),g=(u.flags&128)!==0,T||g?(T=u.stateNode,f=g&&typeof f.getDerivedStateFromError!="function"?null:T.render(),u.flags|=1,o!==null&&g?(u.child=Yn(u,o.child,null,_),u.child=Yn(u,null,f,_)):Ns(o,u,f,_),u.memoizedState=T.state,o=u.child):o=dl(o,u,_),o}function n2(o,u,f,g){return al(),u.flags|=256,Ns(o,u,f,g),u.child}var Ig={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Mg(o){return{baseLanes:o,cachePool:ae()}}function Dg(o,u,f){return o=o!==null?o.childLanes&~f:0,u&&(o|=Wr),o}function i2(o,u,f){var g=u.pendingProps,_=!1,T=(u.flags&128)!==0,D;if((D=T)||(D=o!==null&&o.memoizedState===null?!1:(pn.current&2)!==0),D&&(_=!0,u.flags&=-129),D=(u.flags&32)!==0,u.flags&=-33,o===null){if(on){if(_?xi(u):Pi(),(o=Wn)?(o=db(o,li),o=o!==null&&o.data!=="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:_o!==null?{id:yr,overflow:br}:null,retryLane:536870912,hydrationErrors:null},f=$c(o),f.return=u,u.child=f,ss=u,Wn=null)):o=null,o===null)throw Ao(u);return vm(o)?u.lanes=32:u.lanes=536870912,null}var Y=g.children;return g=g.fallback,_?(Pi(),_=u.mode,Y=up({mode:"hidden",children:Y},_),g=xo(g,_,f,null),Y.return=u,g.return=u,Y.sibling=g,u.child=Y,g=u.child,g.memoizedState=Mg(f),g.childLanes=Dg(o,D,f),u.memoizedState=Ig,kh(null,g)):(xi(u),Og(u,Y))}var fe=o.memoizedState;if(fe!==null&&(Y=fe.dehydrated,Y!==null)){if(T)u.flags&256?(xi(u),u.flags&=-257,u=Bg(o,u,f)):u.memoizedState!==null?(Pi(),u.child=o.child,u.flags|=128,u=null):(Pi(),Y=g.fallback,_=u.mode,g=up({mode:"visible",children:g.children},_),Y=xo(Y,_,f,null),Y.flags|=2,g.return=u,Y.return=u,g.sibling=Y,u.child=g,Yn(u,o.child,null,f),g=u.child,g.memoizedState=Mg(f),g.childLanes=Dg(o,D,f),u.memoizedState=Ig,u=kh(null,g));else if(xi(u),vm(Y)){if(D=Y.nextSibling&&Y.nextSibling.dataset,D)var ke=D.dgst;D=ke,g=Error(n(419)),g.stack="",g.digest=D,Yl({value:g,source:null,stack:null}),u=Bg(o,u,f)}else if(Ki||To(o,u,f,!1),D=(f&o.childLanes)!==0,Ki||D){if(D=Kn,D!==null&&(g=Ks(D,f),g!==0&&g!==fe.retryLane))throw fe.retryLane=g,Wa(o,g),Tr(D,o,g),Lg;mm(Y)||yp(),u=Bg(o,u,f)}else mm(Y)?(u.flags|=192,u.child=o.child,u=null):(o=fe.treeContext,Wn=ya(Y.nextSibling),ss=u,on=!0,Ts=null,li=!1,o!==null&&Xf(u,o),u=Og(u,g.children),u.flags|=4096);return u}return _?(Pi(),Y=g.fallback,_=u.mode,fe=o.child,ke=fe.sibling,g=pr(fe,{mode:"hidden",children:g.children}),g.subtreeFlags=fe.subtreeFlags&65011712,ke!==null?Y=pr(ke,Y):(Y=xo(Y,_,f,null),Y.flags|=2),Y.return=u,g.return=u,g.sibling=Y,u.child=g,kh(null,g),g=u.child,Y=o.child.memoizedState,Y===null?Y=Mg(f):(_=Y.cachePool,_!==null?(fe=wi._currentValue,_=_.parent!==fe?{parent:fe,pool:fe}:_):_=ae(),Y={baseLanes:Y.baseLanes|f,cachePool:_}),g.memoizedState=Y,g.childLanes=Dg(o,D,f),u.memoizedState=Ig,kh(o.child,g)):(xi(u),f=o.child,o=f.sibling,f=pr(f,{mode:"visible",children:g.children}),f.return=u,f.sibling=null,o!==null&&(D=u.deletions,D===null?(u.deletions=[o],u.flags|=16):D.push(o)),u.child=f,u.memoizedState=null,f)}function Og(o,u){return u=up({mode:"visible",children:u},o.mode),u.return=o,o.child=u}function up(o,u){return o=ps(22,o,null,u),o.lanes=0,o}function Bg(o,u,f){return Yn(u,o.child,null,f),o=Og(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function s2(o,u,f){o.lanes|=u;var g=o.alternate;g!==null&&(g.lanes|=u),Kl(o.return,u,f)}function Fg(o,u,f,g,_,T){var D=o.memoizedState;D===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:_,treeForkCount:T}:(D.isBackwards=u,D.rendering=null,D.renderingStartTime=0,D.last=g,D.tail=f,D.tailMode=_,D.treeForkCount=T)}function r2(o,u,f){var g=u.pendingProps,_=g.revealOrder,T=g.tail;g=g.children;var D=pn.current,Y=(D&2)!==0;if(Y?(D=D&1|2,u.flags|=128):D&=1,V(pn,D),Ns(o,u,g,f),g=on?Qu:0,!Y&&o!==null&&(o.flags&128)!==0)e:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&s2(o,f,u);else if(o.tag===19)s2(o,f,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break e;for(;o.sibling===null;){if(o.return===null||o.return===u)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(_){case"forwards":for(f=u.child,_=null;f!==null;)o=f.alternate,o!==null&&ms(o)===null&&(_=f),f=f.sibling;f=_,f===null?(_=u.child,u.child=null):(_=f.sibling,f.sibling=null),Fg(u,!1,_,f,T,g);break;case"backwards":case"unstable_legacy-backwards":for(f=null,_=u.child,u.child=null;_!==null;){if(o=_.alternate,o!==null&&ms(o)===null){u.child=_;break}o=_.sibling,_.sibling=f,f=_,_=o}Fg(u,!0,f,null,T,g);break;case"together":Fg(u,!1,null,null,void 0,g);break;default:u.memoizedState=null}return u.child}function dl(o,u,f){if(o!==null&&(u.dependencies=o.dependencies),iu|=u.lanes,(f&u.childLanes)===0)if(o!==null){if(To(o,u,f,!1),(f&u.childLanes)===0)return null}else return null;if(o!==null&&u.child!==o.child)throw Error(n(153));if(u.child!==null){for(o=u.child,f=pr(o,o.pendingProps),u.child=f,f.return=u;o.sibling!==null;)o=o.sibling,f=f.sibling=pr(o,o.pendingProps),f.return=u;f.sibling=null}return u.child}function Ug(o,u){return(o.lanes&u)!==0?!0:(o=o.dependencies,!!(o!==null&&Xc(o)))}function mT(o,u,f){switch(u.tag){case 3:Ae(u,u.stateNode.containerInfo),Eo(u,wi,o.memoizedState.cache),al();break;case 27:case 5:Ie(u);break;case 4:Ae(u,u.stateNode.containerInfo);break;case 10:Eo(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,Nn(u),null;break;case 13:var g=u.memoizedState;if(g!==null)return g.dehydrated!==null?(xi(u),u.flags|=128,null):(f&u.child.childLanes)!==0?i2(o,u,f):(xi(u),o=dl(o,u,f),o!==null?o.sibling:null);xi(u);break;case 19:var _=(o.flags&128)!==0;if(g=(f&u.childLanes)!==0,g||(To(o,u,f,!1),g=(f&u.childLanes)!==0),_){if(g)return r2(o,u,f);u.flags|=128}if(_=u.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),V(pn,pn.current),g)break;return null;case 22:return u.lanes=0,Xy(o,u,f,u.pendingProps);case 24:Eo(u,wi,o.memoizedState.cache)}return dl(o,u,f)}function a2(o,u,f){if(o!==null)if(o.memoizedProps!==u.pendingProps)Ki=!0;else{if(!Ug(o,f)&&(u.flags&128)===0)return Ki=!1,mT(o,u,f);Ki=(o.flags&131072)!==0}else Ki=!1,on&&(u.flags&1048576)!==0&&Jf(u,Qu,u.index);switch(u.lanes=0,u.tag){case 16:e:{var g=u.pendingProps;if(o=Te(u.elementType),u.type=o,typeof o=="function")Gc(o)?(g=sc(o,g),u.tag=1,u=t2(null,u,o,g,f)):(u.tag=0,u=Pg(null,u,o,g,f));else{if(o!=null){var _=o.$$typeof;if(_===O){u.tag=11,u=Yy(null,u,o,g,f);break e}else if(_===W){u.tag=14,u=Ky(null,u,o,g,f);break e}}throw u=ie(o)||o,Error(n(306,u,""))}}return u;case 0:return Pg(o,u,u.type,u.pendingProps,f);case 1:return g=u.type,_=sc(g,u.pendingProps),t2(o,u,g,_,f);case 3:e:{if(Ae(u,u.stateNode.containerInfo),o===null)throw Error(n(387));g=u.pendingProps;var T=u.memoizedState;_=T.element,ni(o,u),ki(u,g,null,f);var D=u.memoizedState;if(g=D.cache,Eo(u,wi,g),g!==T.cache&&ol(u,[wi],f,!0),Hn(),g=D.element,T.isDehydrated)if(T={element:g,isDehydrated:!1,cache:D.cache},u.updateQueue.baseState=T,u.memoizedState=T,u.flags&256){u=n2(o,u,g,f);break e}else if(g!==_){_=gr(Error(n(424)),u),Yl(_),u=n2(o,u,g,f);break e}else{switch(o=u.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Wn=ya(o.firstChild),ss=u,on=!0,Ts=null,li=!0,f=Wt(u,null,g,f),u.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(al(),g===_){u=dl(o,u,f);break e}Ns(o,u,g,f)}u=u.child}return u;case 26:return lp(o,u),o===null?(f=vb(u.type,null,u.pendingProps,null))?u.memoizedState=f:on||(f=u.type,o=u.pendingProps,g=Ep(ce.current).createElement(f),g[Mn]=u,g[ei]=o,ks(g,f,o),mi(g),u.stateNode=g):u.memoizedState=vb(u.type,o.memoizedProps,u.pendingProps,o.memoizedState),null;case 27:return Ie(u),o===null&&on&&(g=u.stateNode=pb(u.type,u.pendingProps,ce.current),ss=u,li=!0,_=Wn,lu(u.type)?(ym=_,Wn=ya(g.firstChild)):Wn=_),Ns(o,u,u.pendingProps.children,f),lp(o,u),o===null&&(u.flags|=4194304),u.child;case 5:return o===null&&on&&((_=g=Wn)&&(g=$T(g,u.type,u.pendingProps,li),g!==null?(u.stateNode=g,ss=u,Wn=ya(g.firstChild),li=!1,_=!0):_=!1),_||Ao(u)),Ie(u),_=u.type,T=u.pendingProps,D=o!==null?o.memoizedProps:null,g=T.children,fm(_,T)?g=null:D!==null&&fm(_,D)&&(u.flags|=32),u.memoizedState!==null&&(_=wh(o,u,wg,null,null,f),Vh._currentValue=_),lp(o,u),Ns(o,u,g,f),u.child;case 6:return o===null&&on&&((o=f=Wn)&&(f=WT(f,u.pendingProps,li),f!==null?(u.stateNode=f,ss=u,Wn=null,o=!0):o=!1),o||Ao(u)),null;case 13:return i2(o,u,f);case 4:return Ae(u,u.stateNode.containerInfo),g=u.pendingProps,o===null?u.child=Yn(u,null,g,f):Ns(o,u,g,f),u.child;case 11:return Yy(o,u,u.type,u.pendingProps,f);case 7:return Ns(o,u,u.pendingProps,f),u.child;case 8:return Ns(o,u,u.pendingProps.children,f),u.child;case 12:return Ns(o,u,u.pendingProps.children,f),u.child;case 10:return g=u.pendingProps,Eo(u,u.type,g.value),Ns(o,u,g.children,f),u.child;case 9:return _=u.type._context,g=u.pendingProps.children,Co(u),_=as(_),g=g(_),u.flags|=1,Ns(o,u,g,f),u.child;case 14:return Ky(o,u,u.type,u.pendingProps,f);case 15:return Jy(o,u,u.type,u.pendingProps,f);case 19:return r2(o,u,f);case 31:return gT(o,u,f);case 22:return Xy(o,u,f,u.pendingProps);case 24:return Co(u),g=as(wi),o===null?(_=J(),_===null&&(_=Kn,T=Jl(),_.pooledCache=T,T.refCount++,T!==null&&(_.pooledCacheLanes|=f),_=T),u.memoizedState={parent:g,cache:_},Xe(u),Eo(u,wi,_)):((o.lanes&f)!==0&&(ni(o,u),ki(u,null,null,f),Hn()),_=o.memoizedState,T=u.memoizedState,_.parent!==g?(_={parent:g,cache:g},u.memoizedState=_,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=_),Eo(u,wi,g)):(g=T.cache,Eo(u,wi,g),g!==_.cache&&ol(u,[wi],f,!0))),Ns(o,u,u.pendingProps.children,f),u.child;case 29:throw u.pendingProps}throw Error(n(156,u.tag))}function hl(o){o.flags|=4}function jg(o,u,f,g,_){if((u=(o.mode&32)!==0)&&(u=!1),u){if(o.flags|=16777216,(_&335544128)===_)if(o.stateNode.complete)o.flags|=8192;else if(I2())o.flags|=8192;else throw Me=be,Ce}else o.flags&=-16777217}function o2(o,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!_b(u))if(I2())o.flags|=8192;else throw Me=be,Ce}function cp(o,u){u!==null&&(o.flags|=4),o.flags&16384&&(u=o.tag!==22?Lr():536870912,o.lanes|=u,hd|=u)}function Rh(o,u){if(!on)switch(o.tailMode){case"hidden":u=o.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?o.tail=null:f.sibling=null;break;case"collapsed":f=o.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function ri(o){var u=o.alternate!==null&&o.alternate.child===o.child,f=0,g=0;if(u)for(var _=o.child;_!==null;)f|=_.lanes|_.childLanes,g|=_.subtreeFlags&65011712,g|=_.flags&65011712,_.return=o,_=_.sibling;else for(_=o.child;_!==null;)f|=_.lanes|_.childLanes,g|=_.subtreeFlags,g|=_.flags,_.return=o,_=_.sibling;return o.subtreeFlags|=g,o.childLanes=f,u}function vT(o,u,f){var g=u.pendingProps;switch(Kc(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ri(u),null;case 1:return ri(u),null;case 3:return f=u.stateNode,g=null,o!==null&&(g=o.memoizedState.cache),u.memoizedState.cache!==g&&(u.flags|=2048),wr(wi),Ee(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(o===null||o.child===null)&&(rs(u)?hl(u):o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,yh())),ri(u),null;case 26:var _=u.type,T=u.memoizedState;return o===null?(hl(u),T!==null?(ri(u),o2(u,T)):(ri(u),jg(u,_,null,g,f))):T?T!==o.memoizedState?(hl(u),ri(u),o2(u,T)):(ri(u),u.flags&=-16777217):(o=o.memoizedProps,o!==g&&hl(u),ri(u),jg(u,_,o,g,f)),null;case 27:if(He(u),f=ce.current,_=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==g&&hl(u);else{if(!g){if(u.stateNode===null)throw Error(n(166));return ri(u),null}o=Z.current,rs(u)?vh(u):(o=pb(_,g,f),u.stateNode=o,hl(u))}return ri(u),null;case 5:if(He(u),_=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==g&&hl(u);else{if(!g){if(u.stateNode===null)throw Error(n(166));return ri(u),null}if(T=Z.current,rs(u))vh(u);else{var D=Ep(ce.current);switch(T){case 1:T=D.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:T=D.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":T=D.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":T=D.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":T=D.createElement("div"),T.innerHTML="<script><\/script>",T=T.removeChild(T.firstChild);break;case"select":T=typeof g.is=="string"?D.createElement("select",{is:g.is}):D.createElement("select"),g.multiple?T.multiple=!0:g.size&&(T.size=g.size);break;default:T=typeof g.is=="string"?D.createElement(_,{is:g.is}):D.createElement(_)}}T[Mn]=u,T[ei]=g;e:for(D=u.child;D!==null;){if(D.tag===5||D.tag===6)T.appendChild(D.stateNode);else if(D.tag!==4&&D.tag!==27&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===u)break e;for(;D.sibling===null;){if(D.return===null||D.return===u)break e;D=D.return}D.sibling.return=D.return,D=D.sibling}u.stateNode=T;e:switch(ks(T,_,g),_){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&hl(u)}}return ri(u),jg(u,u.type,o===null?null:o.memoizedProps,u.pendingProps,f),null;case 6:if(o&&u.stateNode!=null)o.memoizedProps!==g&&hl(u);else{if(typeof g!="string"&&u.stateNode===null)throw Error(n(166));if(o=ce.current,rs(u)){if(o=u.stateNode,f=u.memoizedProps,g=null,_=ss,_!==null)switch(_.tag){case 27:case 5:g=_.memoizedProps}o[Mn]=u,o=!!(o.nodeValue===f||g!==null&&g.suppressHydrationWarning===!0||ib(o.nodeValue,f)),o||Ao(u,!0)}else o=Ep(o).createTextNode(g),o[Mn]=u,u.stateNode=o}return ri(u),null;case 31:if(f=u.memoizedState,o===null||o.memoizedState!==null){if(g=rs(u),f!==null){if(o===null){if(!g)throw Error(n(318));if(o=u.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(557));o[Mn]=u}else al(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;ri(u),o=!1}else f=yh(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=f),o=!0;if(!o)return u.flags&256?(Dn(u),u):(Dn(u),null);if((u.flags&128)!==0)throw Error(n(558))}return ri(u),null;case 13:if(g=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(_=rs(u),g!==null&&g.dehydrated!==null){if(o===null){if(!_)throw Error(n(318));if(_=u.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(n(317));_[Mn]=u}else al(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;ri(u),_=!1}else _=yh(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=_),_=!0;if(!_)return u.flags&256?(Dn(u),u):(Dn(u),null)}return Dn(u),(u.flags&128)!==0?(u.lanes=f,u):(f=g!==null,o=o!==null&&o.memoizedState!==null,f&&(g=u.child,_=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(_=g.alternate.memoizedState.cachePool.pool),T=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(T=g.memoizedState.cachePool.pool),T!==_&&(g.flags|=2048)),f!==o&&f&&(u.child.flags|=8192),cp(u,u.updateQueue),ri(u),null);case 4:return Ee(),o===null&&lm(u.stateNode.containerInfo),ri(u),null;case 10:return wr(u.type),ri(u),null;case 19:if(M(pn),g=u.memoizedState,g===null)return ri(u),null;if(_=(u.flags&128)!==0,T=g.rendering,T===null)if(_)Rh(g,!1);else{if(Mi!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(T=ms(o),T!==null){for(u.flags|=128,Rh(g,!1),o=T.updateQueue,u.updateQueue=o,cp(u,o),u.subtreeFlags=0,o=f,f=u.child;f!==null;)Xu(f,o),f=f.sibling;return V(pn,pn.current&1|2),on&&sr(u,g.treeForkCount),u.child}o=o.sibling}g.tail!==null&&Tt()>gp&&(u.flags|=128,_=!0,Rh(g,!1),u.lanes=4194304)}else{if(!_)if(o=ms(T),o!==null){if(u.flags|=128,_=!0,o=o.updateQueue,u.updateQueue=o,cp(u,o),Rh(g,!0),g.tail===null&&g.tailMode==="hidden"&&!T.alternate&&!on)return ri(u),null}else 2*Tt()-g.renderingStartTime>gp&&f!==536870912&&(u.flags|=128,_=!0,Rh(g,!1),u.lanes=4194304);g.isBackwards?(T.sibling=u.child,u.child=T):(o=g.last,o!==null?o.sibling=T:u.child=T,g.last=T)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=Tt(),o.sibling=null,f=pn.current,V(pn,_?f&1|2:f&1),on&&sr(u,g.treeForkCount),o):(ri(u),null);case 22:case 23:return Dn(u),ji(),g=u.memoizedState!==null,o!==null?o.memoizedState!==null!==g&&(u.flags|=8192):g&&(u.flags|=8192),g?(f&536870912)!==0&&(u.flags&128)===0&&(ri(u),u.subtreeFlags&6&&(u.flags|=8192)):ri(u),f=u.updateQueue,f!==null&&cp(u,f.retryQueue),f=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048),o!==null&&M($),null;case 24:return f=null,o!==null&&(f=o.memoizedState.cache),u.memoizedState.cache!==f&&(u.flags|=2048),wr(wi),ri(u),null;case 25:return null;case 30:return null}throw Error(n(156,u.tag))}function yT(o,u){switch(Kc(u),u.tag){case 1:return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return wr(wi),Ee(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 26:case 27:case 5:return He(u),null;case 31:if(u.memoizedState!==null){if(Dn(u),u.alternate===null)throw Error(n(340));al()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 13:if(Dn(u),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(n(340));al()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return M(pn),null;case 4:return Ee(),null;case 10:return wr(u.type),null;case 22:case 23:return Dn(u),ji(),o!==null&&M($),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 24:return wr(wi),null;case 25:return null;default:return null}}function l2(o,u){switch(Kc(u),u.tag){case 3:wr(wi),Ee();break;case 26:case 27:case 5:He(u);break;case 4:Ee();break;case 31:u.memoizedState!==null&&Dn(u);break;case 13:Dn(u);break;case 19:M(pn);break;case 10:wr(u.type);break;case 22:case 23:Dn(u),ji(),o!==null&&M($);break;case 24:wr(wi)}}function Lh(o,u){try{var f=u.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var _=g.next;f=_;do{if((f.tag&o)===o){g=void 0;var T=f.create,D=f.inst;g=T(),D.destroy=g}f=f.next}while(f!==_)}}catch(Y){Bn(u,u.return,Y)}}function tu(o,u,f){try{var g=u.updateQueue,_=g!==null?g.lastEffect:null;if(_!==null){var T=_.next;g=T;do{if((g.tag&o)===o){var D=g.inst,Y=D.destroy;if(Y!==void 0){D.destroy=void 0,_=u;var fe=f,ke=Y;try{ke()}catch(Fe){Bn(_,fe,Fe)}}}g=g.next}while(g!==T)}}catch(Fe){Bn(u,u.return,Fe)}}function u2(o){var u=o.updateQueue;if(u!==null){var f=o.stateNode;try{Ri(u,f)}catch(g){Bn(o,o.return,g)}}}function c2(o,u,f){f.props=sc(o.type,o.memoizedProps),f.state=o.memoizedState;try{f.componentWillUnmount()}catch(g){Bn(o,u,g)}}function Ph(o,u){try{var f=o.ref;if(f!==null){switch(o.tag){case 26:case 27:case 5:var g=o.stateNode;break;case 30:g=o.stateNode;break;default:g=o.stateNode}typeof f=="function"?o.refCleanup=f(g):f.current=g}}catch(_){Bn(o,u,_)}}function Po(o,u){var f=o.ref,g=o.refCleanup;if(f!==null)if(typeof g=="function")try{g()}catch(_){Bn(o,u,_)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(_){Bn(o,u,_)}else f.current=null}function d2(o){var u=o.type,f=o.memoizedProps,g=o.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":f.autoFocus&&g.focus();break e;case"img":f.src?g.src=f.src:f.srcSet&&(g.srcset=f.srcSet)}}catch(_){Bn(o,o.return,_)}}function qg(o,u,f){try{var g=o.stateNode;jT(g,o.type,f,u),g[ei]=u}catch(_){Bn(o,o.return,_)}}function h2(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&lu(o.type)||o.tag===4}function Hg(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||h2(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&lu(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function zg(o,u,f){var g=o.tag;if(g===5||g===6)o=o.stateNode,u?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(o,u):(u=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,u.appendChild(o),f=f._reactRootContainer,f!=null||u.onclick!==null||(u.onclick=Ur));else if(g!==4&&(g===27&&lu(o.type)&&(f=o.stateNode,u=null),o=o.child,o!==null))for(zg(o,u,f),o=o.sibling;o!==null;)zg(o,u,f),o=o.sibling}function dp(o,u,f){var g=o.tag;if(g===5||g===6)o=o.stateNode,u?f.insertBefore(o,u):f.appendChild(o);else if(g!==4&&(g===27&&lu(o.type)&&(f=o.stateNode),o=o.child,o!==null))for(dp(o,u,f),o=o.sibling;o!==null;)dp(o,u,f),o=o.sibling}function f2(o){var u=o.stateNode,f=o.memoizedProps;try{for(var g=o.type,_=u.attributes;_.length;)u.removeAttributeNode(_[0]);ks(u,g,f),u[Mn]=o,u[ei]=f}catch(T){Bn(o,o.return,T)}}var fl=!1,Ji=!1,Vg=!1,p2=typeof WeakSet=="function"?WeakSet:Set,vs=null;function bT(o,u){if(o=o.containerInfo,dm=Pp,o=Ga(o),fa(o)){if("selectionStart"in o)var f={start:o.selectionStart,end:o.selectionEnd};else e:{f=(f=o.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var _=g.anchorOffset,T=g.focusNode;g=g.focusOffset;try{f.nodeType,T.nodeType}catch{f=null;break e}var D=0,Y=-1,fe=-1,ke=0,Fe=0,ze=o,Re=null;t:for(;;){for(var Pe;ze!==f||_!==0&&ze.nodeType!==3||(Y=D+_),ze!==T||g!==0&&ze.nodeType!==3||(fe=D+g),ze.nodeType===3&&(D+=ze.nodeValue.length),(Pe=ze.firstChild)!==null;)Re=ze,ze=Pe;for(;;){if(ze===o)break t;if(Re===f&&++ke===_&&(Y=D),Re===T&&++Fe===g&&(fe=D),(Pe=ze.nextSibling)!==null)break;ze=Re,Re=ze.parentNode}ze=Pe}f=Y===-1||fe===-1?null:{start:Y,end:fe}}else f=null}f=f||{start:0,end:0}}else f=null;for(hm={focusedElem:o,selectionRange:f},Pp=!1,vs=u;vs!==null;)if(u=vs,o=u.child,(u.subtreeFlags&1028)!==0&&o!==null)o.return=u,vs=o;else for(;vs!==null;){switch(u=vs,T=u.alternate,o=u.flags,u.tag){case 0:if((o&4)!==0&&(o=u.updateQueue,o=o!==null?o.events:null,o!==null))for(f=0;f<o.length;f++)_=o[f],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&T!==null){o=void 0,f=u,_=T.memoizedProps,T=T.memoizedState,g=f.stateNode;try{var dt=sc(f.type,_);o=g.getSnapshotBeforeUpdate(dt,T),g.__reactInternalSnapshotBeforeUpdate=o}catch(Bt){Bn(f,f.return,Bt)}}break;case 3:if((o&1024)!==0){if(o=u.stateNode.containerInfo,f=o.nodeType,f===9)gm(o);else if(f===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":gm(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(n(163))}if(o=u.sibling,o!==null){o.return=u.return,vs=o;break}vs=u.return}}function g2(o,u,f){var g=f.flags;switch(f.tag){case 0:case 11:case 15:gl(o,f),g&4&&Lh(5,f);break;case 1:if(gl(o,f),g&4)if(o=f.stateNode,u===null)try{o.componentDidMount()}catch(D){Bn(f,f.return,D)}else{var _=sc(f.type,u.memoizedProps);u=u.memoizedState;try{o.componentDidUpdate(_,u,o.__reactInternalSnapshotBeforeUpdate)}catch(D){Bn(f,f.return,D)}}g&64&&u2(f),g&512&&Ph(f,f.return);break;case 3:if(gl(o,f),g&64&&(o=f.updateQueue,o!==null)){if(u=null,f.child!==null)switch(f.child.tag){case 27:case 5:u=f.child.stateNode;break;case 1:u=f.child.stateNode}try{Ri(o,u)}catch(D){Bn(f,f.return,D)}}break;case 27:u===null&&g&4&&f2(f);case 26:case 5:gl(o,f),u===null&&g&4&&d2(f),g&512&&Ph(f,f.return);break;case 12:gl(o,f);break;case 31:gl(o,f),g&4&&y2(o,f);break;case 13:gl(o,f),g&4&&b2(o,f),g&64&&(o=f.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(f=NT.bind(null,f),YT(o,f))));break;case 22:if(g=f.memoizedState!==null||fl,!g){u=u!==null&&u.memoizedState!==null||Ji,_=fl;var T=Ji;fl=g,(Ji=u)&&!T?ml(o,f,(f.subtreeFlags&8772)!==0):gl(o,f),fl=_,Ji=T}break;case 30:break;default:gl(o,f)}}function m2(o){var u=o.alternate;u!==null&&(o.alternate=null,m2(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&go(u)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var di=null,_r=!1;function pl(o,u,f){for(f=f.child;f!==null;)v2(o,u,f),f=f.sibling}function v2(o,u,f){if(Ct&&typeof Ct.onCommitFiberUnmount=="function")try{Ct.onCommitFiberUnmount(bt,f)}catch{}switch(f.tag){case 26:Ji||Po(f,u),pl(o,u,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Ji||Po(f,u);var g=di,_=_r;lu(f.type)&&(di=f.stateNode,_r=!1),pl(o,u,f),qh(f.stateNode),di=g,_r=_;break;case 5:Ji||Po(f,u);case 6:if(g=di,_=_r,di=null,pl(o,u,f),di=g,_r=_,di!==null)if(_r)try{(di.nodeType===9?di.body:di.nodeName==="HTML"?di.ownerDocument.body:di).removeChild(f.stateNode)}catch(T){Bn(f,u,T)}else try{di.removeChild(f.stateNode)}catch(T){Bn(f,u,T)}break;case 18:di!==null&&(_r?(o=di,ub(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,f.stateNode),wd(o)):ub(di,f.stateNode));break;case 4:g=di,_=_r,di=f.stateNode.containerInfo,_r=!0,pl(o,u,f),di=g,_r=_;break;case 0:case 11:case 14:case 15:tu(2,f,u),Ji||tu(4,f,u),pl(o,u,f);break;case 1:Ji||(Po(f,u),g=f.stateNode,typeof g.componentWillUnmount=="function"&&c2(f,u,g)),pl(o,u,f);break;case 21:pl(o,u,f);break;case 22:Ji=(g=Ji)||f.memoizedState!==null,pl(o,u,f),Ji=g;break;default:pl(o,u,f)}}function y2(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{wd(o)}catch(f){Bn(u,u.return,f)}}}function b2(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{wd(o)}catch(f){Bn(u,u.return,f)}}function wT(o){switch(o.tag){case 31:case 13:case 19:var u=o.stateNode;return u===null&&(u=o.stateNode=new p2),u;case 22:return o=o.stateNode,u=o._retryCache,u===null&&(u=o._retryCache=new p2),u;default:throw Error(n(435,o.tag))}}function hp(o,u){var f=wT(o);u.forEach(function(g){if(!f.has(g)){f.add(g);var _=kT.bind(null,o,g);g.then(_,_)}})}function Ar(o,u){var f=u.deletions;if(f!==null)for(var g=0;g<f.length;g++){var _=f[g],T=o,D=u,Y=D;e:for(;Y!==null;){switch(Y.tag){case 27:if(lu(Y.type)){di=Y.stateNode,_r=!1;break e}break;case 5:di=Y.stateNode,_r=!1;break e;case 3:case 4:di=Y.stateNode.containerInfo,_r=!0;break e}Y=Y.return}if(di===null)throw Error(n(160));v2(T,D,_),di=null,_r=!1,T=_.alternate,T!==null&&(T.return=null),_.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)w2(u,o),u=u.sibling}var Qa=null;function w2(o,u){var f=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Ar(u,o),Sr(o),g&4&&(tu(3,o,o.return),Lh(3,o),tu(5,o,o.return));break;case 1:Ar(u,o),Sr(o),g&512&&(Ji||f===null||Po(f,f.return)),g&64&&fl&&(o=o.updateQueue,o!==null&&(g=o.callbacks,g!==null&&(f=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=f===null?g:f.concat(g))));break;case 26:var _=Qa;if(Ar(u,o),Sr(o),g&512&&(Ji||f===null||Po(f,f.return)),g&4){var T=f!==null?f.memoizedState:null;if(g=o.memoizedState,f===null)if(g===null)if(o.stateNode===null){e:{g=o.type,f=o.memoizedProps,_=_.ownerDocument||_;t:switch(g){case"title":T=_.getElementsByTagName("title")[0],(!T||T[Ir]||T[Mn]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=_.createElement(g),_.head.insertBefore(T,_.querySelector("head > title"))),ks(T,g,f),T[Mn]=o,mi(T),g=T;break e;case"link":var D=wb("link","href",_).get(g+(f.href||""));if(D){for(var Y=0;Y<D.length;Y++)if(T=D[Y],T.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&T.getAttribute("rel")===(f.rel==null?null:f.rel)&&T.getAttribute("title")===(f.title==null?null:f.title)&&T.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){D.splice(Y,1);break t}}T=_.createElement(g),ks(T,g,f),_.head.appendChild(T);break;case"meta":if(D=wb("meta","content",_).get(g+(f.content||""))){for(Y=0;Y<D.length;Y++)if(T=D[Y],T.getAttribute("content")===(f.content==null?null:""+f.content)&&T.getAttribute("name")===(f.name==null?null:f.name)&&T.getAttribute("property")===(f.property==null?null:f.property)&&T.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&T.getAttribute("charset")===(f.charSet==null?null:f.charSet)){D.splice(Y,1);break t}}T=_.createElement(g),ks(T,g,f),_.head.appendChild(T);break;default:throw Error(n(468,g))}T[Mn]=o,mi(T),g=T}o.stateNode=g}else xb(_,o.type,o.stateNode);else o.stateNode=bb(_,g,o.memoizedProps);else T!==g?(T===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):T.count--,g===null?xb(_,o.type,o.stateNode):bb(_,g,o.memoizedProps)):g===null&&o.stateNode!==null&&qg(o,o.memoizedProps,f.memoizedProps)}break;case 27:Ar(u,o),Sr(o),g&512&&(Ji||f===null||Po(f,f.return)),f!==null&&g&4&&qg(o,o.memoizedProps,f.memoizedProps);break;case 5:if(Ar(u,o),Sr(o),g&512&&(Ji||f===null||Po(f,f.return)),o.flags&32){_=o.stateNode;try{Fr(_,"")}catch(dt){Bn(o,o.return,dt)}}g&4&&o.stateNode!=null&&(_=o.memoizedProps,qg(o,_,f!==null?f.memoizedProps:_)),g&1024&&(Vg=!0);break;case 6:if(Ar(u,o),Sr(o),g&4){if(o.stateNode===null)throw Error(n(162));g=o.memoizedProps,f=o.stateNode;try{f.nodeValue=g}catch(dt){Bn(o,o.return,dt)}}break;case 3:if(Np=null,_=Qa,Qa=Tp(u.containerInfo),Ar(u,o),Qa=_,Sr(o),g&4&&f!==null&&f.memoizedState.isDehydrated)try{wd(u.containerInfo)}catch(dt){Bn(o,o.return,dt)}Vg&&(Vg=!1,x2(o));break;case 4:g=Qa,Qa=Tp(o.stateNode.containerInfo),Ar(u,o),Sr(o),Qa=g;break;case 12:Ar(u,o),Sr(o);break;case 31:Ar(u,o),Sr(o),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,hp(o,g)));break;case 13:Ar(u,o),Sr(o),o.child.flags&8192&&o.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(pp=Tt()),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,hp(o,g)));break;case 22:_=o.memoizedState!==null;var fe=f!==null&&f.memoizedState!==null,ke=fl,Fe=Ji;if(fl=ke||_,Ji=Fe||fe,Ar(u,o),Ji=Fe,fl=ke,Sr(o),g&8192)e:for(u=o.stateNode,u._visibility=_?u._visibility&-2:u._visibility|1,_&&(f===null||fe||fl||Ji||rc(o)),f=null,u=o;;){if(u.tag===5||u.tag===26){if(f===null){fe=f=u;try{if(T=fe.stateNode,_)D=T.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{Y=fe.stateNode;var ze=fe.memoizedProps.style,Re=ze!=null&&ze.hasOwnProperty("display")?ze.display:null;Y.style.display=Re==null||typeof Re=="boolean"?"":(""+Re).trim()}}catch(dt){Bn(fe,fe.return,dt)}}}else if(u.tag===6){if(f===null){fe=u;try{fe.stateNode.nodeValue=_?"":fe.memoizedProps}catch(dt){Bn(fe,fe.return,dt)}}}else if(u.tag===18){if(f===null){fe=u;try{var Pe=fe.stateNode;_?cb(Pe,!0):cb(fe.stateNode,!1)}catch(dt){Bn(fe,fe.return,dt)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===o)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break e;for(;u.sibling===null;){if(u.return===null||u.return===o)break e;f===u&&(f=null),u=u.return}f===u&&(f=null),u.sibling.return=u.return,u=u.sibling}g&4&&(g=o.updateQueue,g!==null&&(f=g.retryQueue,f!==null&&(g.retryQueue=null,hp(o,f))));break;case 19:Ar(u,o),Sr(o),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,hp(o,g)));break;case 30:break;case 21:break;default:Ar(u,o),Sr(o)}}function Sr(o){var u=o.flags;if(u&2){try{for(var f,g=o.return;g!==null;){if(h2(g)){f=g;break}g=g.return}if(f==null)throw Error(n(160));switch(f.tag){case 27:var _=f.stateNode,T=Hg(o);dp(o,T,_);break;case 5:var D=f.stateNode;f.flags&32&&(Fr(D,""),f.flags&=-33);var Y=Hg(o);dp(o,Y,D);break;case 3:case 4:var fe=f.stateNode.containerInfo,ke=Hg(o);zg(o,ke,fe);break;default:throw Error(n(161))}}catch(Fe){Bn(o,o.return,Fe)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function x2(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var u=o;x2(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),o=o.sibling}}function gl(o,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)g2(o,u.alternate,u),u=u.sibling}function rc(o){for(o=o.child;o!==null;){var u=o;switch(u.tag){case 0:case 11:case 14:case 15:tu(4,u,u.return),rc(u);break;case 1:Po(u,u.return);var f=u.stateNode;typeof f.componentWillUnmount=="function"&&c2(u,u.return,f),rc(u);break;case 27:qh(u.stateNode);case 26:case 5:Po(u,u.return),rc(u);break;case 22:u.memoizedState===null&&rc(u);break;case 30:rc(u);break;default:rc(u)}o=o.sibling}}function ml(o,u,f){for(f=f&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var g=u.alternate,_=o,T=u,D=T.flags;switch(T.tag){case 0:case 11:case 15:ml(_,T,f),Lh(4,T);break;case 1:if(ml(_,T,f),g=T,_=g.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(ke){Bn(g,g.return,ke)}if(g=T,_=g.updateQueue,_!==null){var Y=g.stateNode;try{var fe=_.shared.hiddenCallbacks;if(fe!==null)for(_.shared.hiddenCallbacks=null,_=0;_<fe.length;_++)gs(fe[_],Y)}catch(ke){Bn(g,g.return,ke)}}f&&D&64&&u2(T),Ph(T,T.return);break;case 27:f2(T);case 26:case 5:ml(_,T,f),f&&g===null&&D&4&&d2(T),Ph(T,T.return);break;case 12:ml(_,T,f);break;case 31:ml(_,T,f),f&&D&4&&y2(_,T);break;case 13:ml(_,T,f),f&&D&4&&b2(_,T);break;case 22:T.memoizedState===null&&ml(_,T,f),Ph(T,T.return);break;case 30:break;default:ml(_,T,f)}u=u.sibling}}function Gg(o,u){var f=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),o=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(o=u.memoizedState.cachePool.pool),o!==f&&(o!=null&&o.refCount++,f!=null&&ec(f))}function $g(o,u){o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&ec(o))}function eo(o,u,f,g){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)_2(o,u,f,g),u=u.sibling}function _2(o,u,f,g){var _=u.flags;switch(u.tag){case 0:case 11:case 15:eo(o,u,f,g),_&2048&&Lh(9,u);break;case 1:eo(o,u,f,g);break;case 3:eo(o,u,f,g),_&2048&&(o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&ec(o)));break;case 12:if(_&2048){eo(o,u,f,g),o=u.stateNode;try{var T=u.memoizedProps,D=T.id,Y=T.onPostCommit;typeof Y=="function"&&Y(D,u.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(fe){Bn(u,u.return,fe)}}else eo(o,u,f,g);break;case 31:eo(o,u,f,g);break;case 13:eo(o,u,f,g);break;case 23:break;case 22:T=u.stateNode,D=u.alternate,u.memoizedState!==null?T._visibility&2?eo(o,u,f,g):Ih(o,u):T._visibility&2?eo(o,u,f,g):(T._visibility|=2,ud(o,u,f,g,(u.subtreeFlags&10256)!==0||!1)),_&2048&&Gg(D,u);break;case 24:eo(o,u,f,g),_&2048&&$g(u.alternate,u);break;default:eo(o,u,f,g)}}function ud(o,u,f,g,_){for(_=_&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var T=o,D=u,Y=f,fe=g,ke=D.flags;switch(D.tag){case 0:case 11:case 15:ud(T,D,Y,fe,_),Lh(8,D);break;case 23:break;case 22:var Fe=D.stateNode;D.memoizedState!==null?Fe._visibility&2?ud(T,D,Y,fe,_):Ih(T,D):(Fe._visibility|=2,ud(T,D,Y,fe,_)),_&&ke&2048&&Gg(D.alternate,D);break;case 24:ud(T,D,Y,fe,_),_&&ke&2048&&$g(D.alternate,D);break;default:ud(T,D,Y,fe,_)}u=u.sibling}}function Ih(o,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var f=o,g=u,_=g.flags;switch(g.tag){case 22:Ih(f,g),_&2048&&Gg(g.alternate,g);break;case 24:Ih(f,g),_&2048&&$g(g.alternate,g);break;default:Ih(f,g)}u=u.sibling}}var Mh=8192;function cd(o,u,f){if(o.subtreeFlags&Mh)for(o=o.child;o!==null;)A2(o,u,f),o=o.sibling}function A2(o,u,f){switch(o.tag){case 26:cd(o,u,f),o.flags&Mh&&o.memoizedState!==null&&aC(f,Qa,o.memoizedState,o.memoizedProps);break;case 5:cd(o,u,f);break;case 3:case 4:var g=Qa;Qa=Tp(o.stateNode.containerInfo),cd(o,u,f),Qa=g;break;case 22:o.memoizedState===null&&(g=o.alternate,g!==null&&g.memoizedState!==null?(g=Mh,Mh=16777216,cd(o,u,f),Mh=g):cd(o,u,f));break;default:cd(o,u,f)}}function S2(o){var u=o.alternate;if(u!==null&&(o=u.child,o!==null)){u.child=null;do u=o.sibling,o.sibling=null,o=u;while(o!==null)}}function Dh(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];vs=g,T2(g,o)}S2(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)E2(o),o=o.sibling}function E2(o){switch(o.tag){case 0:case 11:case 15:Dh(o),o.flags&2048&&tu(9,o,o.return);break;case 3:Dh(o);break;case 12:Dh(o);break;case 22:var u=o.stateNode;o.memoizedState!==null&&u._visibility&2&&(o.return===null||o.return.tag!==13)?(u._visibility&=-3,fp(o)):Dh(o);break;default:Dh(o)}}function fp(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];vs=g,T2(g,o)}S2(o)}for(o=o.child;o!==null;){switch(u=o,u.tag){case 0:case 11:case 15:tu(8,u,u.return),fp(u);break;case 22:f=u.stateNode,f._visibility&2&&(f._visibility&=-3,fp(u));break;default:fp(u)}o=o.sibling}}function T2(o,u){for(;vs!==null;){var f=vs;switch(f.tag){case 0:case 11:case 15:tu(8,f,u);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var g=f.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:ec(f.memoizedState.cache)}if(g=f.child,g!==null)g.return=f,vs=g;else e:for(f=o;vs!==null;){g=vs;var _=g.sibling,T=g.return;if(m2(g),g===f){vs=null;break e}if(_!==null){_.return=T,vs=_;break e}vs=T}}}var xT={getCacheForType:function(o){var u=as(wi),f=u.data.get(o);return f===void 0&&(f=o(),u.data.set(o,f)),f},cacheSignal:function(){return as(wi).controller.signal}},_T=typeof WeakMap=="function"?WeakMap:Map,kn=0,Kn=null,ln=null,cn=0,On=0,$r=null,nu=!1,dd=!1,Wg=!1,vl=0,Mi=0,iu=0,ac=0,Yg=0,Wr=0,hd=0,Oh=null,Er=null,Kg=!1,pp=0,C2=0,gp=1/0,mp=null,su=null,ls=0,ru=null,fd=null,yl=0,Jg=0,Xg=null,N2=null,Bh=0,Zg=null;function Yr(){return(kn&2)!==0&&cn!==0?cn&-cn:X.T!==null?sm():Gi()}function k2(){if(Wr===0)if((cn&536870912)===0||on){var o=An;An<<=1,(An&3932160)===0&&(An=262144),Wr=o}else Wr=536870912;return o=si.current,o!==null&&(o.flags|=32),Wr}function Tr(o,u,f){(o===Kn&&(On===2||On===9)||o.cancelPendingCommit!==null)&&(pd(o,0),au(o,cn,Wr,!1)),wt(o,f),((kn&2)===0||o!==Kn)&&(o===Kn&&((kn&2)===0&&(ac|=f),Mi===4&&au(o,cn,Wr,!1)),Io(o))}function R2(o,u,f){if((kn&6)!==0)throw Error(n(327));var g=!f&&(u&127)===0&&(u&o.expiredLanes)===0||Ws(o,u),_=g?ET(o,u):em(o,u,!0),T=g;do{if(_===0){dd&&!g&&au(o,u,0,!1);break}else{if(f=o.current.alternate,T&&!AT(f)){_=em(o,u,!1),T=!1;continue}if(_===2){if(T=u,o.errorRecoveryDisabledLanes&T)var D=0;else D=o.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){u=D;e:{var Y=o;_=Oh;var fe=Y.current.memoizedState.isDehydrated;if(fe&&(pd(Y,D).flags|=256),D=em(Y,D,!1),D!==2){if(Wg&&!fe){Y.errorRecoveryDisabledLanes|=T,ac|=T,_=4;break e}T=Er,Er=_,T!==null&&(Er===null?Er=T:Er.push.apply(Er,T))}_=D}if(T=!1,_!==2)continue}}if(_===1){pd(o,0),au(o,u,0,!0);break}e:{switch(g=o,T=_,T){case 0:case 1:throw Error(n(345));case 4:if((u&4194048)!==u)break;case 6:au(g,u,Wr,!nu);break e;case 2:Er=null;break;case 3:case 5:break;default:throw Error(n(329))}if((u&62914560)===u&&(_=pp+300-Tt(),10<_)){if(au(g,u,Wr,!nu),rn(g,0,!0)!==0)break e;yl=u,g.timeoutHandle=ob(L2.bind(null,g,f,Er,mp,Kg,u,Wr,ac,hd,nu,T,"Throttled",-0,0),_);break e}L2(g,f,Er,mp,Kg,u,Wr,ac,hd,nu,T,null,-0,0)}}break}while(!0);Io(o)}function L2(o,u,f,g,_,T,D,Y,fe,ke,Fe,ze,Re,Pe){if(o.timeoutHandle=-1,ze=u.subtreeFlags,ze&8192||(ze&16785408)===16785408){ze={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ur},A2(u,T,ze);var dt=(T&62914560)===T?pp-Tt():(T&4194048)===T?C2-Tt():0;if(dt=oC(ze,dt),dt!==null){yl=T,o.cancelPendingCommit=dt(U2.bind(null,o,u,T,f,g,_,D,Y,fe,Fe,ze,null,Re,Pe)),au(o,T,D,!ke);return}}U2(o,u,T,f,g,_,D,Y,fe)}function AT(o){for(var u=o;;){var f=u.tag;if((f===0||f===11||f===15)&&u.flags&16384&&(f=u.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var g=0;g<f.length;g++){var _=f[g],T=_.getSnapshot;_=_.value;try{if(!ns(T(),_))return!1}catch{return!1}}if(f=u.child,u.subtreeFlags&16384&&f!==null)f.return=u,u=f;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function au(o,u,f,g){u&=~Yg,u&=~ac,o.suspendedLanes|=u,o.pingedLanes&=~u,g&&(o.warmLanes|=u),g=o.expirationTimes;for(var _=u;0<_;){var T=31-nn(_),D=1<<T;g[T]=-1,_&=~D}f!==0&&na(o,f,u)}function vp(){return(kn&6)===0?(Fh(0),!1):!0}function Qg(){if(ln!==null){if(On===0)var o=ln.return;else o=ln,ga=So=null,nd(o),Ve=null,ft=0,o=ln;for(;o!==null;)l2(o.alternate,o),o=o.return;ln=null}}function pd(o,u){var f=o.timeoutHandle;f!==-1&&(o.timeoutHandle=-1,zT(f)),f=o.cancelPendingCommit,f!==null&&(o.cancelPendingCommit=null,f()),yl=0,Qg(),Kn=o,ln=f=pr(o.current,null),cn=u,On=0,$r=null,nu=!1,dd=Ws(o,u),Wg=!1,hd=Wr=Yg=ac=iu=Mi=0,Er=Oh=null,Kg=!1,(u&8)!==0&&(u|=u&32);var g=o.entangledLanes;if(g!==0)for(o=o.entanglements,g&=u;0<g;){var _=31-nn(g),T=1<<_;u|=o[_],g&=~T}return vl=u,Yu(),f}function P2(o,u){Et=null,X.H=Nh,u===ge||u===re?(u=je(),On=3):u===Ce?(u=je(),On=4):On=u===Lg?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,$r=u,ln===null&&(Mi=1,ap(o,gr(u,o.current)))}function I2(){var o=si.current;return o===null?!0:(cn&4194048)===cn?yn===null:(cn&62914560)===cn||(cn&536870912)!==0?o===yn:!1}function M2(){var o=X.H;return X.H=Nh,o===null?Nh:o}function D2(){var o=X.A;return X.A=xT,o}function yp(){Mi=4,nu||(cn&4194048)!==cn&&si.current!==null||(dd=!0),(iu&134217727)===0&&(ac&134217727)===0||Kn===null||au(Kn,cn,Wr,!1)}function em(o,u,f){var g=kn;kn|=2;var _=M2(),T=D2();(Kn!==o||cn!==u)&&(mp=null,pd(o,u)),u=!1;var D=Mi;e:do try{if(On!==0&&ln!==null){var Y=ln,fe=$r;switch(On){case 8:Qg(),D=6;break e;case 3:case 2:case 9:case 6:si.current===null&&(u=!0);var ke=On;if(On=0,$r=null,gd(o,Y,fe,ke),f&&dd){D=0;break e}break;default:ke=On,On=0,$r=null,gd(o,Y,fe,ke)}}ST(),D=Mi;break}catch(Fe){P2(o,Fe)}while(!0);return u&&o.shellSuspendCounter++,ga=So=null,kn=g,X.H=_,X.A=T,ln===null&&(Kn=null,cn=0,Yu()),D}function ST(){for(;ln!==null;)O2(ln)}function ET(o,u){var f=kn;kn|=2;var g=M2(),_=D2();Kn!==o||cn!==u?(mp=null,gp=Tt()+500,pd(o,u)):dd=Ws(o,u);e:do try{if(On!==0&&ln!==null){u=ln;var T=$r;t:switch(On){case 1:On=0,$r=null,gd(o,u,T,1);break;case 2:case 9:if(Se(T)){On=0,$r=null,B2(u);break}u=function(){On!==2&&On!==9||Kn!==o||(On=7),Io(o)},T.then(u,u);break e;case 3:On=7;break e;case 4:On=5;break e;case 7:Se(T)?(On=0,$r=null,B2(u)):(On=0,$r=null,gd(o,u,T,7));break;case 5:var D=null;switch(ln.tag){case 26:D=ln.memoizedState;case 5:case 27:var Y=ln;if(D?_b(D):Y.stateNode.complete){On=0,$r=null;var fe=Y.sibling;if(fe!==null)ln=fe;else{var ke=Y.return;ke!==null?(ln=ke,bp(ke)):ln=null}break t}}On=0,$r=null,gd(o,u,T,5);break;case 6:On=0,$r=null,gd(o,u,T,6);break;case 8:Qg(),Mi=6;break e;default:throw Error(n(462))}}TT();break}catch(Fe){P2(o,Fe)}while(!0);return ga=So=null,X.H=g,X.A=_,kn=f,ln!==null?0:(Kn=null,cn=0,Yu(),Mi)}function TT(){for(;ln!==null&&!Qe();)O2(ln)}function O2(o){var u=a2(o.alternate,o,vl);o.memoizedProps=o.pendingProps,u===null?bp(o):ln=u}function B2(o){var u=o,f=u.alternate;switch(u.tag){case 15:case 0:u=e2(f,u,u.pendingProps,u.type,void 0,cn);break;case 11:u=e2(f,u,u.pendingProps,u.type.render,u.ref,cn);break;case 5:nd(u);default:l2(f,u),u=ln=Xu(u,vl),u=a2(f,u,vl)}o.memoizedProps=o.pendingProps,u===null?bp(o):ln=u}function gd(o,u,f,g){ga=So=null,nd(u),Ve=null,ft=0;var _=u.return;try{if(pT(o,_,u,f,cn)){Mi=1,ap(o,gr(f,o.current)),ln=null;return}}catch(T){if(_!==null)throw ln=_,T;Mi=1,ap(o,gr(f,o.current)),ln=null;return}u.flags&32768?(on||g===1?o=!0:dd||(cn&536870912)!==0?o=!1:(nu=o=!0,(g===2||g===9||g===3||g===6)&&(g=si.current,g!==null&&g.tag===13&&(g.flags|=16384))),F2(u,o)):bp(u)}function bp(o){var u=o;do{if((u.flags&32768)!==0){F2(u,nu);return}o=u.return;var f=vT(u.alternate,u,vl);if(f!==null){ln=f;return}if(u=u.sibling,u!==null){ln=u;return}ln=u=o}while(u!==null);Mi===0&&(Mi=5)}function F2(o,u){do{var f=yT(o.alternate,o);if(f!==null){f.flags&=32767,ln=f;return}if(f=o.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!u&&(o=o.sibling,o!==null)){ln=o;return}ln=o=f}while(o!==null);Mi=6,ln=null}function U2(o,u,f,g,_,T,D,Y,fe){o.cancelPendingCommit=null;do wp();while(ls!==0);if((kn&6)!==0)throw Error(n(327));if(u!==null){if(u===o.current)throw Error(n(177));if(T=u.lanes|u.childLanes,T|=Hc,Ca(o,f,T,D,Y,fe),o===Kn&&(ln=Kn=null,cn=0),fd=u,ru=o,yl=f,Jg=T,Xg=_,N2=g,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,RT(Vt,function(){return V2(),null})):(o.callbackNode=null,o.callbackPriority=0),g=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||g){g=X.T,X.T=null,_=ue.p,ue.p=2,D=kn,kn|=4;try{bT(o,u,f)}finally{kn=D,ue.p=_,X.T=g}}ls=1,j2(),q2(),H2()}}function j2(){if(ls===1){ls=0;var o=ru,u=fd,f=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||f){f=X.T,X.T=null;var g=ue.p;ue.p=2;var _=kn;kn|=4;try{w2(u,o);var T=hm,D=Ga(o.containerInfo),Y=T.focusedElem,fe=T.selectionRange;if(D!==Y&&Y&&Y.ownerDocument&&Va(Y.ownerDocument.documentElement,Y)){if(fe!==null&&fa(Y)){var ke=fe.start,Fe=fe.end;if(Fe===void 0&&(Fe=ke),"selectionStart"in Y)Y.selectionStart=ke,Y.selectionEnd=Math.min(Fe,Y.value.length);else{var ze=Y.ownerDocument||document,Re=ze&&ze.defaultView||window;if(Re.getSelection){var Pe=Re.getSelection(),dt=Y.textContent.length,Bt=Math.min(fe.start,dt),Gn=fe.end===void 0?Bt:Math.min(fe.end,dt);!Pe.extend&&Bt>Gn&&(D=Gn,Gn=Bt,Bt=D);var _e=Vl(Y,Bt),ve=Vl(Y,Gn);if(_e&&ve&&(Pe.rangeCount!==1||Pe.anchorNode!==_e.node||Pe.anchorOffset!==_e.offset||Pe.focusNode!==ve.node||Pe.focusOffset!==ve.offset)){var Ne=ze.createRange();Ne.setStart(_e.node,_e.offset),Pe.removeAllRanges(),Bt>Gn?(Pe.addRange(Ne),Pe.extend(ve.node,ve.offset)):(Ne.setEnd(ve.node,ve.offset),Pe.addRange(Ne))}}}}for(ze=[],Pe=Y;Pe=Pe.parentNode;)Pe.nodeType===1&&ze.push({element:Pe,left:Pe.scrollLeft,top:Pe.scrollTop});for(typeof Y.focus=="function"&&Y.focus(),Y=0;Y<ze.length;Y++){var qe=ze[Y];qe.element.scrollLeft=qe.left,qe.element.scrollTop=qe.top}}Pp=!!dm,hm=dm=null}finally{kn=_,ue.p=g,X.T=f}}o.current=u,ls=2}}function q2(){if(ls===2){ls=0;var o=ru,u=fd,f=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||f){f=X.T,X.T=null;var g=ue.p;ue.p=2;var _=kn;kn|=4;try{g2(o,u.alternate,u)}finally{kn=_,ue.p=g,X.T=f}}ls=3}}function H2(){if(ls===4||ls===3){ls=0,rt();var o=ru,u=fd,f=yl,g=N2;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?ls=5:(ls=0,fd=ru=null,z2(o,o.pendingLanes));var _=o.pendingLanes;if(_===0&&(su=null),Ti(f),u=u.stateNode,Ct&&typeof Ct.onCommitFiberRoot=="function")try{Ct.onCommitFiberRoot(bt,u,void 0,(u.current.flags&128)===128)}catch{}if(g!==null){u=X.T,_=ue.p,ue.p=2,X.T=null;try{for(var T=o.onRecoverableError,D=0;D<g.length;D++){var Y=g[D];T(Y.value,{componentStack:Y.stack})}}finally{X.T=u,ue.p=_}}(yl&3)!==0&&wp(),Io(o),_=o.pendingLanes,(f&261930)!==0&&(_&42)!==0?o===Zg?Bh++:(Bh=0,Zg=o):Bh=0,Fh(0)}}function z2(o,u){(o.pooledCacheLanes&=u)===0&&(u=o.pooledCache,u!=null&&(o.pooledCache=null,ec(u)))}function wp(){return j2(),q2(),H2(),V2()}function V2(){if(ls!==5)return!1;var o=ru,u=Jg;Jg=0;var f=Ti(yl),g=X.T,_=ue.p;try{ue.p=32>f?32:f,X.T=null,f=Xg,Xg=null;var T=ru,D=yl;if(ls=0,fd=ru=null,yl=0,(kn&6)!==0)throw Error(n(331));var Y=kn;if(kn|=4,E2(T.current),_2(T,T.current,D,f),kn=Y,Fh(0,!1),Ct&&typeof Ct.onPostCommitFiberRoot=="function")try{Ct.onPostCommitFiberRoot(bt,T)}catch{}return!0}finally{ue.p=_,X.T=g,z2(o,u)}}function G2(o,u,f){u=gr(f,u),u=Rg(o.stateNode,u,2),o=Xt(o,u,2),o!==null&&(wt(o,2),Io(o))}function Bn(o,u,f){if(o.tag===3)G2(o,o,f);else for(;u!==null;){if(u.tag===3){G2(u,o,f);break}else if(u.tag===1){var g=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(su===null||!su.has(g))){o=gr(f,o),f=$y(2),g=Xt(u,f,2),g!==null&&(Wy(f,g,u,o),wt(g,2),Io(g));break}}u=u.return}}function tm(o,u,f){var g=o.pingCache;if(g===null){g=o.pingCache=new _T;var _=new Set;g.set(u,_)}else _=g.get(u),_===void 0&&(_=new Set,g.set(u,_));_.has(f)||(Wg=!0,_.add(f),o=CT.bind(null,o,u,f),u.then(o,o))}function CT(o,u,f){var g=o.pingCache;g!==null&&g.delete(u),o.pingedLanes|=o.suspendedLanes&f,o.warmLanes&=~f,Kn===o&&(cn&f)===f&&(Mi===4||Mi===3&&(cn&62914560)===cn&&300>Tt()-pp?(kn&2)===0&&pd(o,0):Yg|=f,hd===cn&&(hd=0)),Io(o)}function $2(o,u){u===0&&(u=Lr()),o=Wa(o,u),o!==null&&(wt(o,u),Io(o))}function NT(o){var u=o.memoizedState,f=0;u!==null&&(f=u.retryLane),$2(o,f)}function kT(o,u){var f=0;switch(o.tag){case 31:case 13:var g=o.stateNode,_=o.memoizedState;_!==null&&(f=_.retryLane);break;case 19:g=o.stateNode;break;case 22:g=o.stateNode._retryCache;break;default:throw Error(n(314))}g!==null&&g.delete(u),$2(o,f)}function RT(o,u){return at(o,u)}var xp=null,md=null,nm=!1,_p=!1,im=!1,ou=0;function Io(o){o!==md&&o.next===null&&(md===null?xp=md=o:md=md.next=o),_p=!0,nm||(nm=!0,PT())}function Fh(o,u){if(!im&&_p){im=!0;do for(var f=!1,g=xp;g!==null;){if(o!==0){var _=g.pendingLanes;if(_===0)var T=0;else{var D=g.suspendedLanes,Y=g.pingedLanes;T=(1<<31-nn(42|o)+1)-1,T&=_&~(D&~Y),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(f=!0,J2(g,T))}else T=cn,T=rn(g,g===Kn?T:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(T&3)===0||Ws(g,T)||(f=!0,J2(g,T));g=g.next}while(f);im=!1}}function LT(){W2()}function W2(){_p=nm=!1;var o=0;ou!==0&&HT()&&(o=ou);for(var u=Tt(),f=null,g=xp;g!==null;){var _=g.next,T=Y2(g,u);T===0?(g.next=null,f===null?xp=_:f.next=_,_===null&&(md=f)):(f=g,(o!==0||(T&3)!==0)&&(_p=!0)),g=_}ls!==0&&ls!==5||Fh(o),ou!==0&&(ou=0)}function Y2(o,u){for(var f=o.suspendedLanes,g=o.pingedLanes,_=o.expirationTimes,T=o.pendingLanes&-62914561;0<T;){var D=31-nn(T),Y=1<<D,fe=_[D];fe===-1?((Y&f)===0||(Y&g)!==0)&&(_[D]=Un(Y,u)):fe<=u&&(o.expiredLanes|=Y),T&=~Y}if(u=Kn,f=cn,f=rn(o,o===u?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),g=o.callbackNode,f===0||o===u&&(On===2||On===9)||o.cancelPendingCommit!==null)return g!==null&&g!==null&&Ke(g),o.callbackNode=null,o.callbackPriority=0;if((f&3)===0||Ws(o,f)){if(u=f&-f,u===o.callbackPriority)return u;switch(g!==null&&Ke(g),Ti(f)){case 2:case 8:f=tn;break;case 32:f=Vt;break;case 268435456:f=Pt;break;default:f=Vt}return g=K2.bind(null,o),f=at(f,g),o.callbackPriority=u,o.callbackNode=f,u}return g!==null&&g!==null&&Ke(g),o.callbackPriority=2,o.callbackNode=null,2}function K2(o,u){if(ls!==0&&ls!==5)return o.callbackNode=null,o.callbackPriority=0,null;var f=o.callbackNode;if(wp()&&o.callbackNode!==f)return null;var g=cn;return g=rn(o,o===Kn?g:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),g===0?null:(R2(o,g,u),Y2(o,Tt()),o.callbackNode!=null&&o.callbackNode===f?K2.bind(null,o):null)}function J2(o,u){if(wp())return null;R2(o,u,!0)}function PT(){VT(function(){(kn&6)!==0?at(At,LT):W2()})}function sm(){if(ou===0){var o=b;o===0&&(o=Ot,Ot<<=1,(Ot&261888)===0&&(Ot=256)),ou=o}return ou}function X2(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Bs(""+o)}function Z2(o,u){var f=u.ownerDocument.createElement("input");return f.name=u.name,f.value=u.value,o.id&&f.setAttribute("form",o.id),u.parentNode.insertBefore(f,u),o=new FormData(o),f.parentNode.removeChild(f),o}function IT(o,u,f,g,_){if(u==="submit"&&f&&f.stateNode===_){var T=X2((_[ei]||null).action),D=g.submitter;D&&(u=(u=D[ei]||null)?X2(u.formAction):D.getAttribute("formAction"),u!==null&&(T=u,D=null));var Y=new dr("action","action",null,g,_);o.push({event:Y,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(ou!==0){var fe=D?Z2(_,D):new FormData(_);Sg(f,{pending:!0,data:fe,method:_.method,action:T},null,fe)}}else typeof T=="function"&&(Y.preventDefault(),fe=D?Z2(_,D):new FormData(_),Sg(f,{pending:!0,data:fe,method:_.method,action:T},T,fe))},currentTarget:_}]})}}for(var rm=0;rm<il.length;rm++){var am=il[rm],MT=am.toLowerCase(),DT=am[0].toUpperCase()+am.slice(1);fr(MT,"on"+DT)}fr(nl,"onAnimationEnd"),fr($u,"onAnimationIteration"),fr(fh,"onAnimationStart"),fr("dblclick","onDoubleClick"),fr("focusin","onFocus"),fr("focusout","onBlur"),fr(Wf,"onTransitionRun"),fr(Yf,"onTransitionStart"),fr(Kf,"onTransitionCancel"),fr(ph,"onTransitionEnd"),Na("onMouseEnter",["mouseout","mouseover"]),Na("onMouseLeave",["mouseout","mouseover"]),Na("onPointerEnter",["pointerout","pointerover"]),Na("onPointerLeave",["pointerout","pointerover"]),Or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Or("onBeforeInput",["compositionend","keypress","textInput","paste"]),Or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Uh));function Q2(o,u){u=(u&4)!==0;for(var f=0;f<o.length;f++){var g=o[f],_=g.event;g=g.listeners;e:{var T=void 0;if(u)for(var D=g.length-1;0<=D;D--){var Y=g[D],fe=Y.instance,ke=Y.currentTarget;if(Y=Y.listener,fe!==T&&_.isPropagationStopped())break e;T=Y,_.currentTarget=ke;try{T(_)}catch(Fe){Wu(Fe)}_.currentTarget=null,T=fe}else for(D=0;D<g.length;D++){if(Y=g[D],fe=Y.instance,ke=Y.currentTarget,Y=Y.listener,fe!==T&&_.isPropagationStopped())break e;T=Y,_.currentTarget=ke;try{T(_)}catch(Fe){Wu(Fe)}_.currentTarget=null,T=fe}}}}function un(o,u){var f=u[Js];f===void 0&&(f=u[Js]=new Set);var g=o+"__bubble";f.has(g)||(eb(u,o,2,!1),f.add(g))}function om(o,u,f){var g=0;u&&(g|=4),eb(f,o,g,u)}var Ap="_reactListening"+Math.random().toString(36).slice(2);function lm(o){if(!o[Ap]){o[Ap]=!0,ku.forEach(function(f){f!=="selectionchange"&&(OT.has(f)||om(f,!1,o),om(f,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[Ap]||(u[Ap]=!0,om("selectionchange",!1,u))}}function eb(o,u,f,g){switch(kb(u)){case 2:var _=cC;break;case 8:_=dC;break;default:_=Am}f=_.bind(null,u,f,o),_=void 0,!qu||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(_=!0),g?_!==void 0?o.addEventListener(u,f,{capture:!0,passive:_}):o.addEventListener(u,f,!0):_!==void 0?o.addEventListener(u,f,{passive:_}):o.addEventListener(u,f,!1)}function um(o,u,f,g,_){var T=g;if((u&1)===0&&(u&2)===0&&g!==null)e:for(;;){if(g===null)return;var D=g.tag;if(D===3||D===4){var Y=g.stateNode.containerInfo;if(Y===_)break;if(D===4)for(D=g.return;D!==null;){var fe=D.tag;if((fe===3||fe===4)&&D.stateNode.containerInfo===_)return;D=D.return}for(;Y!==null;){if(D=Mr(Y),D===null)return;if(fe=D.tag,fe===5||fe===6||fe===26||fe===27){g=T=D;continue e}Y=Y.parentNode}}g=g.return}Bc(function(){var ke=T,Fe=Ko(f),ze=[];e:{var Re=gh.get(o);if(Re!==void 0){var Pe=dr,dt=o;switch(o){case"keypress":if(cr(f)===0)break e;case"keydown":case"keyup":Pe=hn;break;case"focusin":dt="focus",Pe=Oa;break;case"focusout":dt="blur",Pe=Oa;break;case"beforeblur":case"afterblur":Pe=Oa;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Pe=Hu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Pe=Da;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Pe=Fi;break;case nl:case $u:case fh:Pe=k;break;case ph:Pe=ts;break;case"scroll":case"scrollend":Pe=Bl;break;case"wheel":Pe=jr;break;case"copy":case"cut":case"paste":Pe=oe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Pe=vi;break;case"toggle":case"beforetoggle":Pe=zu}var Bt=(u&4)!==0,Gn=!Bt&&(o==="scroll"||o==="scrollend"),_e=Bt?Re!==null?Re+"Capture":null:Re;Bt=[];for(var ve=ke,Ne;ve!==null;){var qe=ve;if(Ne=qe.stateNode,qe=qe.tag,qe!==5&&qe!==26&&qe!==27||Ne===null||_e===null||(qe=Qs(ve,_e),qe!=null&&Bt.push(jh(ve,qe,Ne))),Gn)break;ve=ve.return}0<Bt.length&&(Re=new Pe(Re,dt,null,f,Fe),ze.push({event:Re,listeners:Bt}))}}if((u&7)===0){e:{if(Re=o==="mouseover"||o==="pointerover",Pe=o==="mouseout"||o==="pointerout",Re&&f!==Ra&&(dt=f.relatedTarget||f.fromElement)&&(Mr(dt)||dt[ds]))break e;if((Pe||Re)&&(Re=Fe.window===Fe?Fe:(Re=Fe.ownerDocument)?Re.defaultView||Re.parentWindow:window,Pe?(dt=f.relatedTarget||f.toElement,Pe=ke,dt=dt?Mr(dt):null,dt!==null&&(Gn=r(dt),Bt=dt.tag,dt!==Gn||Bt!==5&&Bt!==27&&Bt!==6)&&(dt=null)):(Pe=null,dt=ke),Pe!==dt)){if(Bt=Hu,qe="onMouseLeave",_e="onMouseEnter",ve="mouse",(o==="pointerout"||o==="pointerover")&&(Bt=vi,qe="onPointerLeave",_e="onPointerEnter",ve="pointer"),Gn=Pe==null?Re:Wo(Pe),Ne=dt==null?Re:Wo(dt),Re=new Bt(qe,ve+"leave",Pe,f,Fe),Re.target=Gn,Re.relatedTarget=Ne,qe=null,Mr(Fe)===ke&&(Bt=new Bt(_e,ve+"enter",dt,f,Fe),Bt.target=Ne,Bt.relatedTarget=Gn,qe=Bt),Gn=qe,Pe&&dt)t:{for(Bt=BT,_e=Pe,ve=dt,Ne=0,qe=_e;qe;qe=Bt(qe))Ne++;qe=0;for(var kt=ve;kt;kt=Bt(kt))qe++;for(;0<Ne-qe;)_e=Bt(_e),Ne--;for(;0<qe-Ne;)ve=Bt(ve),qe--;for(;Ne--;){if(_e===ve||ve!==null&&_e===ve.alternate){Bt=_e;break t}_e=Bt(_e),ve=Bt(ve)}Bt=null}else Bt=null;Pe!==null&&tb(ze,Re,Pe,Bt,!1),dt!==null&&Gn!==null&&tb(ze,Gn,dt,Bt,!0)}}e:{if(Re=ke?Wo(ke):window,Pe=Re.nodeName&&Re.nodeName.toLowerCase(),Pe==="select"||Pe==="input"&&Re.type==="file")var Sn=wo;else if(Vu(Re))if(Fs)Sn=da;else{Sn=yi;var vt=Hl}else Pe=Re.nodeName,!Pe||Pe.toLowerCase()!=="input"||Re.type!=="checkbox"&&Re.type!=="radio"?ke&&Fu(ke.elementType)&&(Sn=wo):Sn=qc;if(Sn&&(Sn=Sn(o,ke))){tr(ze,Sn,f,Fe);break e}vt&&vt(o,Re,ke),o==="focusout"&&ke&&Re.type==="number"&&ke.memoizedProps.value!=null&&Du(Re,"number",Re.value)}switch(vt=ke?Wo(ke):window,o){case"focusin":(Vu(vt)||vt.contentEditable==="true")&&(nr=vt,$a=ke,hs=null);break;case"focusout":hs=$a=nr=null;break;case"mousedown":hr=!0;break;case"contextmenu":case"mouseup":case"dragend":hr=!1,xn(ze,f,Fe);break;case"selectionchange":if(tl)break;case"keydown":case"keyup":xn(ze,f,Fe)}var en;if(oa)e:{switch(o){case"compositionstart":var dn="onCompositionStart";break e;case"compositionend":dn="onCompositionEnd";break e;case"compositionupdate":dn="onCompositionUpdate";break e}dn=void 0}else la?bo(o,f)&&(dn="onCompositionEnd"):o==="keydown"&&f.keyCode===229&&(dn="onCompositionStart");dn&&(Ua&&f.locale!=="ko"&&(la||dn!=="onCompositionStart"?dn==="onCompositionEnd"&&la&&(en=Fc()):(er=Fe,Xo="value"in er?er.value:er.textContent,la=!0)),vt=Sp(ke,dn),0<vt.length&&(dn=new xe(dn,o,null,f,Fe),ze.push({event:dn,listeners:vt}),en?dn.data=en:(en=Ul(f),en!==null&&(dn.data=en)))),(en=el?Ss(o,f):ja(o,f))&&(dn=Sp(ke,"onBeforeInput"),0<dn.length&&(vt=new xe("onBeforeInput","beforeinput",null,f,Fe),ze.push({event:vt,listeners:dn}),vt.data=en)),IT(ze,o,ke,f,Fe)}Q2(ze,u)})}function jh(o,u,f){return{instance:o,listener:u,currentTarget:f}}function Sp(o,u){for(var f=u+"Capture",g=[];o!==null;){var _=o,T=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||T===null||(_=Qs(o,f),_!=null&&g.unshift(jh(o,_,T)),_=Qs(o,u),_!=null&&g.push(jh(o,_,T))),o.tag===3)return g;o=o.return}return[]}function BT(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function tb(o,u,f,g,_){for(var T=u._reactName,D=[];f!==null&&f!==g;){var Y=f,fe=Y.alternate,ke=Y.stateNode;if(Y=Y.tag,fe!==null&&fe===g)break;Y!==5&&Y!==26&&Y!==27||ke===null||(fe=ke,_?(ke=Qs(f,T),ke!=null&&D.unshift(jh(f,ke,fe))):_||(ke=Qs(f,T),ke!=null&&D.push(jh(f,ke,fe)))),f=f.return}D.length!==0&&o.push({event:u,listeners:D})}var FT=/\r\n?/g,UT=/\u0000|\uFFFD/g;function nb(o){return(typeof o=="string"?o:""+o).replace(FT,`
`).replace(UT,"")}function ib(o,u){return u=nb(u),nb(o)===u}function Vn(o,u,f,g,_,T){switch(f){case"children":typeof g=="string"?u==="body"||u==="textarea"&&g===""||Fr(o,g):(typeof g=="number"||typeof g=="bigint")&&u!=="body"&&Fr(o,""+g);break;case"className":ka(o,"class",g);break;case"tabIndex":ka(o,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":ka(o,f,g);break;case"style":Mc(o,g,T);break;case"data":if(u!=="object"){ka(o,"data",g);break}case"src":case"href":if(g===""&&(u!=="a"||f!=="href")){o.removeAttribute(f);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){o.removeAttribute(f);break}g=Bs(""+g),o.setAttribute(f,g);break;case"action":case"formAction":if(typeof g=="function"){o.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(f==="formAction"?(u!=="input"&&Vn(o,u,"name",_.name,_,null),Vn(o,u,"formEncType",_.formEncType,_,null),Vn(o,u,"formMethod",_.formMethod,_,null),Vn(o,u,"formTarget",_.formTarget,_,null)):(Vn(o,u,"encType",_.encType,_,null),Vn(o,u,"method",_.method,_,null),Vn(o,u,"target",_.target,_,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){o.removeAttribute(f);break}g=Bs(""+g),o.setAttribute(f,g);break;case"onClick":g!=null&&(o.onclick=Ur);break;case"onScroll":g!=null&&un("scroll",o);break;case"onScrollEnd":g!=null&&un("scrollend",o);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(f=g.__html,f!=null){if(_.children!=null)throw Error(n(60));o.innerHTML=f}}break;case"multiple":o.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":o.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){o.removeAttribute("xlink:href");break}f=Bs(""+g),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(f,""+g):o.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(f,""):o.removeAttribute(f);break;case"capture":case"download":g===!0?o.setAttribute(f,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(f,g):o.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?o.setAttribute(f,g):o.removeAttribute(f);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?o.removeAttribute(f):o.setAttribute(f,g);break;case"popover":un("beforetoggle",o),un("toggle",o),Zs(o,"popover",g);break;case"xlinkActuate":Br(o,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Br(o,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Br(o,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Br(o,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Br(o,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Br(o,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Br(o,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Br(o,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Br(o,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Zs(o,"is",g);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=Uu.get(f)||f,Zs(o,f,g))}}function cm(o,u,f,g,_,T){switch(f){case"style":Mc(o,g,T);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(f=g.__html,f!=null){if(_.children!=null)throw Error(n(60));o.innerHTML=f}}break;case"children":typeof g=="string"?Fr(o,g):(typeof g=="number"||typeof g=="bigint")&&Fr(o,""+g);break;case"onScroll":g!=null&&un("scroll",o);break;case"onScrollEnd":g!=null&&un("scrollend",o);break;case"onClick":g!=null&&(o.onclick=Ur);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xs.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(_=f.endsWith("Capture"),u=f.slice(2,_?f.length-7:void 0),T=o[ei]||null,T=T!=null?T[f]:null,typeof T=="function"&&o.removeEventListener(u,T,_),typeof g=="function")){typeof T!="function"&&T!==null&&(f in o?o[f]=null:o.hasAttribute(f)&&o.removeAttribute(f)),o.addEventListener(u,g,_);break e}f in o?o[f]=g:g===!0?o.setAttribute(f,""):Zs(o,f,g)}}}function ks(o,u,f){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":un("error",o),un("load",o);var g=!1,_=!1,T;for(T in f)if(f.hasOwnProperty(T)){var D=f[T];if(D!=null)switch(T){case"src":g=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:Vn(o,u,T,D,f,null)}}_&&Vn(o,u,"srcSet",f.srcSet,f,null),g&&Vn(o,u,"src",f.src,f,null);return;case"input":un("invalid",o);var Y=T=D=_=null,fe=null,ke=null;for(g in f)if(f.hasOwnProperty(g)){var Fe=f[g];if(Fe!=null)switch(g){case"name":_=Fe;break;case"type":D=Fe;break;case"checked":fe=Fe;break;case"defaultChecked":ke=Fe;break;case"value":T=Fe;break;case"defaultValue":Y=Fe;break;case"children":case"dangerouslySetInnerHTML":if(Fe!=null)throw Error(n(137,u));break;default:Vn(o,u,g,Fe,f,null)}}Pc(o,T,Y,fe,ke,D,_,!1);return;case"select":un("invalid",o),g=D=T=null;for(_ in f)if(f.hasOwnProperty(_)&&(Y=f[_],Y!=null))switch(_){case"value":T=Y;break;case"defaultValue":D=Y;break;case"multiple":g=Y;default:Vn(o,u,_,Y,f,null)}u=T,f=D,o.multiple=!!g,u!=null?As(o,!!g,u,!1):f!=null&&As(o,!!g,f,!0);return;case"textarea":un("invalid",o),T=_=g=null;for(D in f)if(f.hasOwnProperty(D)&&(Y=f[D],Y!=null))switch(D){case"value":g=Y;break;case"defaultValue":_=Y;break;case"children":T=Y;break;case"dangerouslySetInnerHTML":if(Y!=null)throw Error(n(91));break;default:Vn(o,u,D,Y,f,null)}Bu(o,g,_,T);return;case"option":for(fe in f)if(f.hasOwnProperty(fe)&&(g=f[fe],g!=null))switch(fe){case"selected":o.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:Vn(o,u,fe,g,f,null)}return;case"dialog":un("beforetoggle",o),un("toggle",o),un("cancel",o),un("close",o);break;case"iframe":case"object":un("load",o);break;case"video":case"audio":for(g=0;g<Uh.length;g++)un(Uh[g],o);break;case"image":un("error",o),un("load",o);break;case"details":un("toggle",o);break;case"embed":case"source":case"link":un("error",o),un("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ke in f)if(f.hasOwnProperty(ke)&&(g=f[ke],g!=null))switch(ke){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:Vn(o,u,ke,g,f,null)}return;default:if(Fu(u)){for(Fe in f)f.hasOwnProperty(Fe)&&(g=f[Fe],g!==void 0&&cm(o,u,Fe,g,f,void 0));return}}for(Y in f)f.hasOwnProperty(Y)&&(g=f[Y],g!=null&&Vn(o,u,Y,g,f,null))}function jT(o,u,f,g){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,T=null,D=null,Y=null,fe=null,ke=null,Fe=null;for(Pe in f){var ze=f[Pe];if(f.hasOwnProperty(Pe)&&ze!=null)switch(Pe){case"checked":break;case"value":break;case"defaultValue":fe=ze;default:g.hasOwnProperty(Pe)||Vn(o,u,Pe,null,g,ze)}}for(var Re in g){var Pe=g[Re];if(ze=f[Re],g.hasOwnProperty(Re)&&(Pe!=null||ze!=null))switch(Re){case"type":T=Pe;break;case"name":_=Pe;break;case"checked":ke=Pe;break;case"defaultChecked":Fe=Pe;break;case"value":D=Pe;break;case"defaultValue":Y=Pe;break;case"children":case"dangerouslySetInnerHTML":if(Pe!=null)throw Error(n(137,u));break;default:Pe!==ze&&Vn(o,u,Re,Pe,g,ze)}}Ml(o,D,Y,fe,ke,Fe,T,_);return;case"select":Pe=D=Y=Re=null;for(T in f)if(fe=f[T],f.hasOwnProperty(T)&&fe!=null)switch(T){case"value":break;case"multiple":Pe=fe;default:g.hasOwnProperty(T)||Vn(o,u,T,null,g,fe)}for(_ in g)if(T=g[_],fe=f[_],g.hasOwnProperty(_)&&(T!=null||fe!=null))switch(_){case"value":Re=T;break;case"defaultValue":Y=T;break;case"multiple":D=T;default:T!==fe&&Vn(o,u,_,T,g,fe)}u=Y,f=D,g=Pe,Re!=null?As(o,!!f,Re,!1):!!g!=!!f&&(u!=null?As(o,!!f,u,!0):As(o,!!f,f?[]:"",!1));return;case"textarea":Pe=Re=null;for(Y in f)if(_=f[Y],f.hasOwnProperty(Y)&&_!=null&&!g.hasOwnProperty(Y))switch(Y){case"value":break;case"children":break;default:Vn(o,u,Y,null,g,_)}for(D in g)if(_=g[D],T=f[D],g.hasOwnProperty(D)&&(_!=null||T!=null))switch(D){case"value":Re=_;break;case"defaultValue":Pe=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(n(91));break;default:_!==T&&Vn(o,u,D,_,g,T)}Ou(o,Re,Pe);return;case"option":for(var dt in f)if(Re=f[dt],f.hasOwnProperty(dt)&&Re!=null&&!g.hasOwnProperty(dt))switch(dt){case"selected":o.selected=!1;break;default:Vn(o,u,dt,null,g,Re)}for(fe in g)if(Re=g[fe],Pe=f[fe],g.hasOwnProperty(fe)&&Re!==Pe&&(Re!=null||Pe!=null))switch(fe){case"selected":o.selected=Re&&typeof Re!="function"&&typeof Re!="symbol";break;default:Vn(o,u,fe,Re,g,Pe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Bt in f)Re=f[Bt],f.hasOwnProperty(Bt)&&Re!=null&&!g.hasOwnProperty(Bt)&&Vn(o,u,Bt,null,g,Re);for(ke in g)if(Re=g[ke],Pe=f[ke],g.hasOwnProperty(ke)&&Re!==Pe&&(Re!=null||Pe!=null))switch(ke){case"children":case"dangerouslySetInnerHTML":if(Re!=null)throw Error(n(137,u));break;default:Vn(o,u,ke,Re,g,Pe)}return;default:if(Fu(u)){for(var Gn in f)Re=f[Gn],f.hasOwnProperty(Gn)&&Re!==void 0&&!g.hasOwnProperty(Gn)&&cm(o,u,Gn,void 0,g,Re);for(Fe in g)Re=g[Fe],Pe=f[Fe],!g.hasOwnProperty(Fe)||Re===Pe||Re===void 0&&Pe===void 0||cm(o,u,Fe,Re,g,Pe);return}}for(var _e in f)Re=f[_e],f.hasOwnProperty(_e)&&Re!=null&&!g.hasOwnProperty(_e)&&Vn(o,u,_e,null,g,Re);for(ze in g)Re=g[ze],Pe=f[ze],!g.hasOwnProperty(ze)||Re===Pe||Re==null&&Pe==null||Vn(o,u,ze,Re,g,Pe)}function sb(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function qT(){if(typeof performance.getEntriesByType=="function"){for(var o=0,u=0,f=performance.getEntriesByType("resource"),g=0;g<f.length;g++){var _=f[g],T=_.transferSize,D=_.initiatorType,Y=_.duration;if(T&&Y&&sb(D)){for(D=0,Y=_.responseEnd,g+=1;g<f.length;g++){var fe=f[g],ke=fe.startTime;if(ke>Y)break;var Fe=fe.transferSize,ze=fe.initiatorType;Fe&&sb(ze)&&(fe=fe.responseEnd,D+=Fe*(fe<Y?1:(Y-ke)/(fe-ke)))}if(--g,u+=8*(T+D)/(_.duration/1e3),o++,10<o)break}}if(0<o)return u/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var dm=null,hm=null;function Ep(o){return o.nodeType===9?o:o.ownerDocument}function rb(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ab(o,u){if(o===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&u==="foreignObject"?0:o}function fm(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var pm=null;function HT(){var o=window.event;return o&&o.type==="popstate"?o===pm?!1:(pm=o,!0):(pm=null,!1)}var ob=typeof setTimeout=="function"?setTimeout:void 0,zT=typeof clearTimeout=="function"?clearTimeout:void 0,lb=typeof Promise=="function"?Promise:void 0,VT=typeof queueMicrotask=="function"?queueMicrotask:typeof lb<"u"?function(o){return lb.resolve(null).then(o).catch(GT)}:ob;function GT(o){setTimeout(function(){throw o})}function lu(o){return o==="head"}function ub(o,u){var f=u,g=0;do{var _=f.nextSibling;if(o.removeChild(f),_&&_.nodeType===8)if(f=_.data,f==="/$"||f==="/&"){if(g===0){o.removeChild(_),wd(u);return}g--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")g++;else if(f==="html")qh(o.ownerDocument.documentElement);else if(f==="head"){f=o.ownerDocument.head,qh(f);for(var T=f.firstChild;T;){var D=T.nextSibling,Y=T.nodeName;T[Ir]||Y==="SCRIPT"||Y==="STYLE"||Y==="LINK"&&T.rel.toLowerCase()==="stylesheet"||f.removeChild(T),T=D}}else f==="body"&&qh(o.ownerDocument.body);f=_}while(f);wd(u)}function cb(o,u){var f=o;o=0;do{var g=f.nextSibling;if(f.nodeType===1?u?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(u?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),g&&g.nodeType===8)if(f=g.data,f==="/$"){if(o===0)break;o--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||o++;f=g}while(f)}function gm(o){var u=o.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var f=u;switch(u=u.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":gm(f),go(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}o.removeChild(f)}}function $T(o,u,f,g){for(;o.nodeType===1;){var _=f;if(o.nodeName.toLowerCase()!==u.toLowerCase()){if(!g&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(g){if(!o[Ir])switch(u){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(T=o.getAttribute("rel"),T==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(T!==_.rel||o.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||o.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||o.getAttribute("title")!==(_.title==null?null:_.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(T=o.getAttribute("src"),(T!==(_.src==null?null:_.src)||o.getAttribute("type")!==(_.type==null?null:_.type)||o.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&T&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(u==="input"&&o.type==="hidden"){var T=_.name==null?null:""+_.name;if(_.type==="hidden"&&o.getAttribute("name")===T)return o}else return o;if(o=ya(o.nextSibling),o===null)break}return null}function WT(o,u,f){if(u==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!f||(o=ya(o.nextSibling),o===null))return null;return o}function db(o,u){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!u||(o=ya(o.nextSibling),o===null))return null;return o}function mm(o){return o.data==="$?"||o.data==="$~"}function vm(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function YT(o,u){var f=o.ownerDocument;if(o.data==="$~")o._reactRetry=u;else if(o.data!=="$?"||f.readyState!=="loading")u();else{var g=function(){u(),f.removeEventListener("DOMContentLoaded",g)};f.addEventListener("DOMContentLoaded",g),o._reactRetry=g}}function ya(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return o}var ym=null;function hb(o){o=o.nextSibling;for(var u=0;o;){if(o.nodeType===8){var f=o.data;if(f==="/$"||f==="/&"){if(u===0)return ya(o.nextSibling);u--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||u++}o=o.nextSibling}return null}function fb(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var f=o.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(u===0)return o;u--}else f!=="/$"&&f!=="/&"||u++}o=o.previousSibling}return null}function pb(o,u,f){switch(u=Ep(f),o){case"html":if(o=u.documentElement,!o)throw Error(n(452));return o;case"head":if(o=u.head,!o)throw Error(n(453));return o;case"body":if(o=u.body,!o)throw Error(n(454));return o;default:throw Error(n(451))}}function qh(o){for(var u=o.attributes;u.length;)o.removeAttributeNode(u[0]);go(o)}var ba=new Map,gb=new Set;function Tp(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var bl=ue.d;ue.d={f:KT,r:JT,D:XT,C:ZT,L:QT,m:eC,X:nC,S:tC,M:iC};function KT(){var o=bl.f(),u=vp();return o||u}function JT(o){var u=Dr(o);u!==null&&u.tag===5&&u.type==="form"?Py(u):bl.r(o)}var vd=typeof document>"u"?null:document;function mb(o,u,f){var g=vd;if(g&&typeof u=="string"&&u){var _=Ci(u);_='link[rel="'+o+'"][href="'+_+'"]',typeof f=="string"&&(_+='[crossorigin="'+f+'"]'),gb.has(_)||(gb.add(_),o={rel:o,crossOrigin:f,href:u},g.querySelector(_)===null&&(u=g.createElement("link"),ks(u,"link",o),mi(u),g.head.appendChild(u)))}}function XT(o){bl.D(o),mb("dns-prefetch",o,null)}function ZT(o,u){bl.C(o,u),mb("preconnect",o,u)}function QT(o,u,f){bl.L(o,u,f);var g=vd;if(g&&o&&u){var _='link[rel="preload"][as="'+Ci(u)+'"]';u==="image"&&f&&f.imageSrcSet?(_+='[imagesrcset="'+Ci(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(_+='[imagesizes="'+Ci(f.imageSizes)+'"]')):_+='[href="'+Ci(o)+'"]';var T=_;switch(u){case"style":T=yd(o);break;case"script":T=bd(o)}ba.has(T)||(o=p({rel:"preload",href:u==="image"&&f&&f.imageSrcSet?void 0:o,as:u},f),ba.set(T,o),g.querySelector(_)!==null||u==="style"&&g.querySelector(Hh(T))||u==="script"&&g.querySelector(zh(T))||(u=g.createElement("link"),ks(u,"link",o),mi(u),g.head.appendChild(u)))}}function eC(o,u){bl.m(o,u);var f=vd;if(f&&o){var g=u&&typeof u.as=="string"?u.as:"script",_='link[rel="modulepreload"][as="'+Ci(g)+'"][href="'+Ci(o)+'"]',T=_;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=bd(o)}if(!ba.has(T)&&(o=p({rel:"modulepreload",href:o},u),ba.set(T,o),f.querySelector(_)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(zh(T)))return}g=f.createElement("link"),ks(g,"link",o),mi(g),f.head.appendChild(g)}}}function tC(o,u,f){bl.S(o,u,f);var g=vd;if(g&&o){var _=ia(g).hoistableStyles,T=yd(o);u=u||"default";var D=_.get(T);if(!D){var Y={loading:0,preload:null};if(D=g.querySelector(Hh(T)))Y.loading=5;else{o=p({rel:"stylesheet",href:o,"data-precedence":u},f),(f=ba.get(T))&&bm(o,f);var fe=D=g.createElement("link");mi(fe),ks(fe,"link",o),fe._p=new Promise(function(ke,Fe){fe.onload=ke,fe.onerror=Fe}),fe.addEventListener("load",function(){Y.loading|=1}),fe.addEventListener("error",function(){Y.loading|=2}),Y.loading|=4,Cp(D,u,g)}D={type:"stylesheet",instance:D,count:1,state:Y},_.set(T,D)}}}function nC(o,u){bl.X(o,u);var f=vd;if(f&&o){var g=ia(f).hoistableScripts,_=bd(o),T=g.get(_);T||(T=f.querySelector(zh(_)),T||(o=p({src:o,async:!0},u),(u=ba.get(_))&&wm(o,u),T=f.createElement("script"),mi(T),ks(T,"link",o),f.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},g.set(_,T))}}function iC(o,u){bl.M(o,u);var f=vd;if(f&&o){var g=ia(f).hoistableScripts,_=bd(o),T=g.get(_);T||(T=f.querySelector(zh(_)),T||(o=p({src:o,async:!0,type:"module"},u),(u=ba.get(_))&&wm(o,u),T=f.createElement("script"),mi(T),ks(T,"link",o),f.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},g.set(_,T))}}function vb(o,u,f,g){var _=(_=ce.current)?Tp(_):null;if(!_)throw Error(n(446));switch(o){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(u=yd(f.href),f=ia(_).hoistableStyles,g=f.get(u),g||(g={type:"style",instance:null,count:0,state:null},f.set(u,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){o=yd(f.href);var T=ia(_).hoistableStyles,D=T.get(o);if(D||(_=_.ownerDocument||_,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(o,D),(T=_.querySelector(Hh(o)))&&!T._p&&(D.instance=T,D.state.loading=5),ba.has(o)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},ba.set(o,f),T||sC(_,o,f,D.state))),u&&g===null)throw Error(n(528,""));return D}if(u&&g!==null)throw Error(n(529,""));return null;case"script":return u=f.async,f=f.src,typeof f=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=bd(f),f=ia(_).hoistableScripts,g=f.get(u),g||(g={type:"script",instance:null,count:0,state:null},f.set(u,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,o))}}function yd(o){return'href="'+Ci(o)+'"'}function Hh(o){return'link[rel="stylesheet"]['+o+"]"}function yb(o){return p({},o,{"data-precedence":o.precedence,precedence:null})}function sC(o,u,f,g){o.querySelector('link[rel="preload"][as="style"]['+u+"]")?g.loading=1:(u=o.createElement("link"),g.preload=u,u.addEventListener("load",function(){return g.loading|=1}),u.addEventListener("error",function(){return g.loading|=2}),ks(u,"link",f),mi(u),o.head.appendChild(u))}function bd(o){return'[src="'+Ci(o)+'"]'}function zh(o){return"script[async]"+o}function bb(o,u,f){if(u.count++,u.instance===null)switch(u.type){case"style":var g=o.querySelector('style[data-href~="'+Ci(f.href)+'"]');if(g)return u.instance=g,mi(g),g;var _=p({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return g=(o.ownerDocument||o).createElement("style"),mi(g),ks(g,"style",_),Cp(g,f.precedence,o),u.instance=g;case"stylesheet":_=yd(f.href);var T=o.querySelector(Hh(_));if(T)return u.state.loading|=4,u.instance=T,mi(T),T;g=yb(f),(_=ba.get(_))&&bm(g,_),T=(o.ownerDocument||o).createElement("link"),mi(T);var D=T;return D._p=new Promise(function(Y,fe){D.onload=Y,D.onerror=fe}),ks(T,"link",g),u.state.loading|=4,Cp(T,f.precedence,o),u.instance=T;case"script":return T=bd(f.src),(_=o.querySelector(zh(T)))?(u.instance=_,mi(_),_):(g=f,(_=ba.get(T))&&(g=p({},f),wm(g,_)),o=o.ownerDocument||o,_=o.createElement("script"),mi(_),ks(_,"link",g),o.head.appendChild(_),u.instance=_);case"void":return null;default:throw Error(n(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(g=u.instance,u.state.loading|=4,Cp(g,f.precedence,o));return u.instance}function Cp(o,u,f){for(var g=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=g.length?g[g.length-1]:null,T=_,D=0;D<g.length;D++){var Y=g[D];if(Y.dataset.precedence===u)T=Y;else if(T!==_)break}T?T.parentNode.insertBefore(o,T.nextSibling):(u=f.nodeType===9?f.head:f,u.insertBefore(o,u.firstChild))}function bm(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.title==null&&(o.title=u.title)}function wm(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.integrity==null&&(o.integrity=u.integrity)}var Np=null;function wb(o,u,f){if(Np===null){var g=new Map,_=Np=new Map;_.set(f,g)}else _=Np,g=_.get(f),g||(g=new Map,_.set(f,g));if(g.has(o))return g;for(g.set(o,null),f=f.getElementsByTagName(o),_=0;_<f.length;_++){var T=f[_];if(!(T[Ir]||T[Mn]||o==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var D=T.getAttribute(u)||"";D=o+D;var Y=g.get(D);Y?Y.push(T):g.set(D,[T])}}return g}function xb(o,u,f){o=o.ownerDocument||o,o.head.insertBefore(f,u==="title"?o.querySelector("head > title"):null)}function rC(o,u,f){if(f===1||u.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return o=u.disabled,typeof u.precedence=="string"&&o==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function _b(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function aC(o,u,f,g){if(f.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var _=yd(g.href),T=u.querySelector(Hh(_));if(T){u=T._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(o.count++,o=kp.bind(o),u.then(o,o)),f.state.loading|=4,f.instance=T,mi(T);return}T=u.ownerDocument||u,g=yb(g),(_=ba.get(_))&&bm(g,_),T=T.createElement("link"),mi(T);var D=T;D._p=new Promise(function(Y,fe){D.onload=Y,D.onerror=fe}),ks(T,"link",g),f.instance=T}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(f,u),(u=f.state.preload)&&(f.state.loading&3)===0&&(o.count++,f=kp.bind(o),u.addEventListener("load",f),u.addEventListener("error",f))}}var xm=0;function oC(o,u){return o.stylesheets&&o.count===0&&Lp(o,o.stylesheets),0<o.count||0<o.imgCount?function(f){var g=setTimeout(function(){if(o.stylesheets&&Lp(o,o.stylesheets),o.unsuspend){var T=o.unsuspend;o.unsuspend=null,T()}},6e4+u);0<o.imgBytes&&xm===0&&(xm=62500*qT());var _=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&Lp(o,o.stylesheets),o.unsuspend)){var T=o.unsuspend;o.unsuspend=null,T()}},(o.imgBytes>xm?50:800)+u);return o.unsuspend=f,function(){o.unsuspend=null,clearTimeout(g),clearTimeout(_)}}:null}function kp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Lp(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Rp=null;function Lp(o,u){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Rp=new Map,u.forEach(lC,o),Rp=null,kp.call(o))}function lC(o,u){if(!(u.state.loading&4)){var f=Rp.get(o);if(f)var g=f.get(null);else{f=new Map,Rp.set(o,f);for(var _=o.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<_.length;T++){var D=_[T];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(f.set(D.dataset.precedence,D),g=D)}g&&f.set(null,g)}_=u.instance,D=_.getAttribute("data-precedence"),T=f.get(D)||g,T===g&&f.set(null,_),f.set(D,_),this.count++,g=kp.bind(this),_.addEventListener("load",g),_.addEventListener("error",g),T?T.parentNode.insertBefore(_,T.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(_,o.firstChild)),u.state.loading|=4}}var Vh={$$typeof:L,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function uC(o,u,f,g,_,T,D,Y,fe){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Os(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Os(0),this.hiddenUpdates=Os(null),this.identifierPrefix=g,this.onUncaughtError=_,this.onCaughtError=T,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=fe,this.incompleteTransitions=new Map}function Ab(o,u,f,g,_,T,D,Y,fe,ke,Fe,ze){return o=new uC(o,u,f,D,fe,ke,Fe,ze,Y),u=1,T===!0&&(u|=24),T=ps(3,null,null,u),o.current=T,T.stateNode=o,u=Jl(),u.refCount++,o.pooledCache=u,u.refCount++,T.memoizedState={element:g,isDehydrated:f,cache:u},Xe(T),o}function Sb(o){return o?(o=is,o):is}function Eb(o,u,f,g,_,T){_=Sb(_),g.context===null?g.context=_:g.pendingContext=_,g=Mt(u),g.payload={element:f},T=T===void 0?null:T,T!==null&&(g.callback=T),f=Xt(o,g,u),f!==null&&(Tr(f,o,u),Cn(f,o,u))}function Tb(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var f=o.retryLane;o.retryLane=f!==0&&f<u?f:u}}function _m(o,u){Tb(o,u),(o=o.alternate)&&Tb(o,u)}function Cb(o){if(o.tag===13||o.tag===31){var u=Wa(o,67108864);u!==null&&Tr(u,o,67108864),_m(o,67108864)}}function Nb(o){if(o.tag===13||o.tag===31){var u=Yr();u=Zn(u);var f=Wa(o,u);f!==null&&Tr(f,o,u),_m(o,u)}}var Pp=!0;function cC(o,u,f,g){var _=X.T;X.T=null;var T=ue.p;try{ue.p=2,Am(o,u,f,g)}finally{ue.p=T,X.T=_}}function dC(o,u,f,g){var _=X.T;X.T=null;var T=ue.p;try{ue.p=8,Am(o,u,f,g)}finally{ue.p=T,X.T=_}}function Am(o,u,f,g){if(Pp){var _=Sm(g);if(_===null)um(o,u,g,Ip,f),Rb(o,g);else if(fC(_,o,u,f,g))g.stopPropagation();else if(Rb(o,g),u&4&&-1<hC.indexOf(o)){for(;_!==null;){var T=Dr(_);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var D=gt(T.pendingLanes);if(D!==0){var Y=T;for(Y.pendingLanes|=2,Y.entangledLanes|=2;D;){var fe=1<<31-nn(D);Y.entanglements[1]|=fe,D&=~fe}Io(T),(kn&6)===0&&(gp=Tt()+500,Fh(0))}}break;case 31:case 13:Y=Wa(T,2),Y!==null&&Tr(Y,T,2),vp(),_m(T,2)}if(T=Sm(g),T===null&&um(o,u,g,Ip,f),T===_)break;_=T}_!==null&&g.stopPropagation()}else um(o,u,g,null,f)}}function Sm(o){return o=Ko(o),Em(o)}var Ip=null;function Em(o){if(Ip=null,o=Mr(o),o!==null){var u=r(o);if(u===null)o=null;else{var f=u.tag;if(f===13){if(o=a(u),o!==null)return o;o=null}else if(f===31){if(o=l(u),o!==null)return o;o=null}else if(f===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null)}}return Ip=o,null}function kb(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zt()){case At:return 2;case tn:return 8;case Vt:case ut:return 32;case Pt:return 268435456;default:return 32}default:return 32}}var Tm=!1,uu=null,cu=null,du=null,Gh=new Map,$h=new Map,hu=[],hC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Rb(o,u){switch(o){case"focusin":case"focusout":uu=null;break;case"dragenter":case"dragleave":cu=null;break;case"mouseover":case"mouseout":du=null;break;case"pointerover":case"pointerout":Gh.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":$h.delete(u.pointerId)}}function Wh(o,u,f,g,_,T){return o===null||o.nativeEvent!==T?(o={blockedOn:u,domEventName:f,eventSystemFlags:g,nativeEvent:T,targetContainers:[_]},u!==null&&(u=Dr(u),u!==null&&Cb(u)),o):(o.eventSystemFlags|=g,u=o.targetContainers,_!==null&&u.indexOf(_)===-1&&u.push(_),o)}function fC(o,u,f,g,_){switch(u){case"focusin":return uu=Wh(uu,o,u,f,g,_),!0;case"dragenter":return cu=Wh(cu,o,u,f,g,_),!0;case"mouseover":return du=Wh(du,o,u,f,g,_),!0;case"pointerover":var T=_.pointerId;return Gh.set(T,Wh(Gh.get(T)||null,o,u,f,g,_)),!0;case"gotpointercapture":return T=_.pointerId,$h.set(T,Wh($h.get(T)||null,o,u,f,g,_)),!0}return!1}function Lb(o){var u=Mr(o.target);if(u!==null){var f=r(u);if(f!==null){if(u=f.tag,u===13){if(u=a(f),u!==null){o.blockedOn=u,po(o.priority,function(){Nb(f)});return}}else if(u===31){if(u=l(f),u!==null){o.blockedOn=u,po(o.priority,function(){Nb(f)});return}}else if(u===3&&f.stateNode.current.memoizedState.isDehydrated){o.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Mp(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var f=Sm(o.nativeEvent);if(f===null){f=o.nativeEvent;var g=new f.constructor(f.type,f);Ra=g,f.target.dispatchEvent(g),Ra=null}else return u=Dr(f),u!==null&&Cb(u),o.blockedOn=f,!1;u.shift()}return!0}function Pb(o,u,f){Mp(o)&&f.delete(u)}function pC(){Tm=!1,uu!==null&&Mp(uu)&&(uu=null),cu!==null&&Mp(cu)&&(cu=null),du!==null&&Mp(du)&&(du=null),Gh.forEach(Pb),$h.forEach(Pb)}function Dp(o,u){o.blockedOn===u&&(o.blockedOn=null,Tm||(Tm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,pC)))}var Op=null;function Ib(o){Op!==o&&(Op=o,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Op===o&&(Op=null);for(var u=0;u<o.length;u+=3){var f=o[u],g=o[u+1],_=o[u+2];if(typeof g!="function"){if(Em(g||f)===null)continue;break}var T=Dr(f);T!==null&&(o.splice(u,3),u-=3,Sg(T,{pending:!0,data:_,method:f.method,action:g},g,_))}}))}function wd(o){function u(fe){return Dp(fe,o)}uu!==null&&Dp(uu,o),cu!==null&&Dp(cu,o),du!==null&&Dp(du,o),Gh.forEach(u),$h.forEach(u);for(var f=0;f<hu.length;f++){var g=hu[f];g.blockedOn===o&&(g.blockedOn=null)}for(;0<hu.length&&(f=hu[0],f.blockedOn===null);)Lb(f),f.blockedOn===null&&hu.shift();if(f=(o.ownerDocument||o).$$reactFormReplay,f!=null)for(g=0;g<f.length;g+=3){var _=f[g],T=f[g+1],D=_[ei]||null;if(typeof T=="function")D||Ib(f);else if(D){var Y=null;if(T&&T.hasAttribute("formAction")){if(_=T,D=T[ei]||null)Y=D.formAction;else if(Em(_)!==null)continue}else Y=D.action;typeof Y=="function"?f[g+1]=Y:(f.splice(g,3),g-=3),Ib(f)}}}function Mb(){function o(T){T.canIntercept&&T.info==="react-transition"&&T.intercept({handler:function(){return new Promise(function(D){return _=D})},focusReset:"manual",scroll:"manual"})}function u(){_!==null&&(_(),_=null),g||setTimeout(f,20)}function f(){if(!g&&!navigation.transition){var T=navigation.currentEntry;T&&T.url!=null&&navigation.navigate(T.url,{state:T.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,_=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(f,100),function(){g=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),_!==null&&(_(),_=null)}}}function Cm(o){this._internalRoot=o}Bp.prototype.render=Cm.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(n(409));var f=u.current,g=Yr();Eb(f,g,o,u,null,null)},Bp.prototype.unmount=Cm.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;Eb(o.current,2,null,o,null,null),vp(),u[ds]=null}};function Bp(o){this._internalRoot=o}Bp.prototype.unstable_scheduleHydration=function(o){if(o){var u=Gi();o={blockedOn:null,target:o,priority:u};for(var f=0;f<hu.length&&u!==0&&u<hu[f].priority;f++);hu.splice(f,0,o),f===0&&Lb(o)}};var Db=e.version;if(Db!=="19.2.0")throw Error(n(527,Db,"19.2.0"));ue.findDOMNode=function(o){var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=d(u),o=o!==null?h(o):null,o=o===null?null:o.stateNode,o};var gC={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fp.isDisabled&&Fp.supportsFiber)try{bt=Fp.inject(gC),Ct=Fp}catch{}}return Kh.createRoot=function(o,u){if(!s(o))throw Error(n(299));var f=!1,g="",_=Hy,T=zy,D=Vy;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(T=u.onCaughtError),u.onRecoverableError!==void 0&&(D=u.onRecoverableError)),u=Ab(o,1,!1,null,null,f,g,null,_,T,D,Mb),o[ds]=u.current,lm(o),new Cm(u)},Kh.hydrateRoot=function(o,u,f){if(!s(o))throw Error(n(299));var g=!1,_="",T=Hy,D=zy,Y=Vy,fe=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(_=f.identifierPrefix),f.onUncaughtError!==void 0&&(T=f.onUncaughtError),f.onCaughtError!==void 0&&(D=f.onCaughtError),f.onRecoverableError!==void 0&&(Y=f.onRecoverableError),f.formState!==void 0&&(fe=f.formState)),u=Ab(o,1,!0,u,f??null,g,_,fe,T,D,Y,Mb),u.context=Sb(null),f=u.current,g=Yr(),g=Zn(g),_=Mt(g),_.callback=null,Xt(f,_,g),f=g,u.current.lanes=f,wt(u,f),Io(u),o[ds]=u.current,lm(o),new Bp(u)},Kh.version="19.2.0",Kh}var Wb;function CC(){if(Wb)return Lm.exports;Wb=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Lm.exports=TC(),Lm.exports}var NC=CC();const kC=Cv(NC);var Yb="popstate";function RC(i={}){function e(n,s){let{pathname:r,search:a,hash:l}=n.location;return T1("",{pathname:r,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(n,s){return typeof s=="string"?s:xf(s)}return PC(e,t,null,i)}function gi(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Sa(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function LC(){return Math.random().toString(36).substring(2,10)}function Kb(i,e){return{usr:i.state,key:i.key,idx:e}}function T1(i,e,t=null,n){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?sh(e):e,state:t,key:e&&e.key||n||LC()}}function xf({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function sh(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let n=i.indexOf("?");n>=0&&(e.search=i.substring(n),i=i.substring(0,n)),i&&(e.pathname=i)}return e}function PC(i,e,t,n={}){let{window:s=document.defaultView,v5Compat:r=!1}=n,a=s.history,l="POP",c=null,d=h();d==null&&(d=0,a.replaceState({...a.state,idx:d},""));function h(){return(a.state||{idx:null}).idx}function p(){l="POP";let N=h(),C=N==null?null:N-d;d=N,c&&c({action:l,location:S.location,delta:C})}function v(N,C){l="PUSH";let P=T1(S.location,N,C);d=h()+1;let L=Kb(P,d),O=S.createHref(P);try{a.pushState(L,"",O)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;s.location.assign(O)}r&&c&&c({action:l,location:S.location,delta:1})}function m(N,C){l="REPLACE";let P=T1(S.location,N,C);d=h();let L=Kb(P,d),O=S.createHref(P);a.replaceState(L,"",O),r&&c&&c({action:l,location:S.location,delta:0})}function E(N){return IC(N)}let S={get action(){return l},get location(){return i(s,a)},listen(N){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Yb,p),c=N,()=>{s.removeEventListener(Yb,p),c=null}},createHref(N){return e(s,N)},createURL:E,encodeLocation(N){let C=E(N);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:v,replace:m,go(N){return a.go(N)}};return S}function IC(i,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),gi(t,"No window.location.(origin|href) available to create URL");let n=typeof i=="string"?i:xf(i);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function Y_(i,e,t="/"){return MC(i,e,t,!1)}function MC(i,e,t,n){let s=typeof e=="string"?sh(e):e,r=kl(s.pathname||"/",t);if(r==null)return null;let a=K_(i);DC(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let d=$C(r);l=VC(a[c],d,n)}return l}function K_(i,e=[],t=[],n="",s=!1){let r=(a,l,c=s,d)=>{let h={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(n)&&c)return;gi(h.relativePath.startsWith(n),`Absolute route path "${h.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(n.length)}let p=Cl([n,h.relativePath]),v=t.concat(h);a.children&&a.children.length>0&&(gi(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),K_(a.children,e,v,p,c)),!(a.path==null&&!a.index)&&e.push({path:p,score:HC(p,a.index),routesMeta:v})};return i.forEach((a,l)=>{if(a.path===""||!a.path?.includes("?"))r(a,l);else for(let c of J_(a.path))r(a,l,!0,c)}),e}function J_(i){let e=i.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),r=t.replace(/\?$/,"");if(n.length===0)return s?[r,""]:[r];let a=J_(n.join("/")),l=[];return l.push(...a.map(c=>c===""?r:[r,c].join("/"))),s&&l.push(...a),l.map(c=>i.startsWith("/")&&c===""?"/":c)}function DC(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:zC(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var OC=/^:[\w-]+$/,BC=3,FC=2,UC=1,jC=10,qC=-2,Jb=i=>i==="*";function HC(i,e){let t=i.split("/"),n=t.length;return t.some(Jb)&&(n+=qC),e&&(n+=FC),t.filter(s=>!Jb(s)).reduce((s,r)=>s+(OC.test(r)?BC:r===""?UC:jC),n)}function zC(i,e){return i.length===e.length&&i.slice(0,-1).every((n,s)=>n===e[s])?i[i.length-1]-e[e.length-1]:0}function VC(i,e,t=!1){let{routesMeta:n}=i,s={},r="/",a=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,h=r==="/"?e:e.slice(r.length)||"/",p=L0({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),v=c.route;if(!p&&d&&t&&!n[n.length-1].route.index&&(p=L0({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!p)return null;Object.assign(s,p.params),a.push({params:s,pathname:Cl([r,p.pathname]),pathnameBase:XC(Cl([r,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(r=Cl([r,p.pathnameBase]))}return a}function L0(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,n]=GC(i.path,i.caseSensitive,i.end),s=e.match(t);if(!s)return null;let r=s[0],a=r.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((d,{paramName:h,isOptional:p},v)=>{if(h==="*"){let E=l[v]||"";a=r.slice(0,r.length-E.length).replace(/(.)\/+$/,"$1")}const m=l[v];return p&&!m?d[h]=void 0:d[h]=(m||"").replace(/%2F/g,"/"),d},{}),pathname:r,pathnameBase:a,pattern:i}}function GC(i,e=!1,t=!0){Sa(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let n=[],s="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(n.push({paramName:"*"}),s+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":i!==""&&i!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function $C(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Sa(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function kl(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=i.charAt(t);return n&&n!=="/"?null:i.slice(t)||"/"}var WC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,YC=i=>WC.test(i);function KC(i,e="/"){let{pathname:t,search:n="",hash:s=""}=typeof i=="string"?sh(i):i,r;if(t)if(YC(t))r=t;else{if(t.includes("//")){let a=t;t=t.replace(/\/\/+/g,"/"),Sa(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${t}`)}t.startsWith("/")?r=Xb(t.substring(1),"/"):r=Xb(t,e)}else r=e;return{pathname:r,search:ZC(n),hash:QC(s)}}function Xb(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Dm(i,e,t,n){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function JC(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function kv(i){let e=JC(i);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function Rv(i,e,t,n=!1){let s;typeof i=="string"?s=sh(i):(s={...i},gi(!s.pathname||!s.pathname.includes("?"),Dm("?","pathname","search",s)),gi(!s.pathname||!s.pathname.includes("#"),Dm("#","pathname","hash",s)),gi(!s.search||!s.search.includes("#"),Dm("#","search","hash",s)));let r=i===""||s.pathname==="",a=r?"/":s.pathname,l;if(a==null)l=t;else{let p=e.length-1;if(!n&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),p-=1;s.pathname=v.join("/")}l=p>=0?e[p]:"/"}let c=KC(s,l),d=a&&a!=="/"&&a.endsWith("/"),h=(r||a===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}var Cl=i=>i.join("/").replace(/\/\/+/g,"/"),XC=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),ZC=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,QC=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function e3(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var X_=["POST","PUT","PATCH","DELETE"];new Set(X_);var t3=["GET",...X_];new Set(t3);var rh=me.createContext(null);rh.displayName="DataRouter";var eg=me.createContext(null);eg.displayName="DataRouterState";me.createContext(!1);var Z_=me.createContext({isTransitioning:!1});Z_.displayName="ViewTransition";var n3=me.createContext(new Map);n3.displayName="Fetchers";var i3=me.createContext(null);i3.displayName="Await";var lo=me.createContext(null);lo.displayName="Navigation";var Mf=me.createContext(null);Mf.displayName="Location";var Vo=me.createContext({outlet:null,matches:[],isDataRoute:!1});Vo.displayName="Route";var Lv=me.createContext(null);Lv.displayName="RouteError";function s3(i,{relative:e}={}){gi(ah(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=me.useContext(lo),{hash:s,pathname:r,search:a}=Df(i,{relative:e}),l=r;return t!=="/"&&(l=r==="/"?t:Cl([t,r])),n.createHref({pathname:l,search:a,hash:s})}function ah(){return me.useContext(Mf)!=null}function Ll(){return gi(ah(),"useLocation() may be used only in the context of a <Router> component."),me.useContext(Mf).location}var Q_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function eA(i){me.useContext(lo).static||me.useLayoutEffect(i)}function uo(){let{isDataRoute:i}=me.useContext(Vo);return i?v3():r3()}function r3(){gi(ah(),"useNavigate() may be used only in the context of a <Router> component.");let i=me.useContext(rh),{basename:e,navigator:t}=me.useContext(lo),{matches:n}=me.useContext(Vo),{pathname:s}=Ll(),r=JSON.stringify(kv(n)),a=me.useRef(!1);return eA(()=>{a.current=!0}),me.useCallback((c,d={})=>{if(Sa(a.current,Q_),!a.current)return;if(typeof c=="number"){t.go(c);return}let h=Rv(c,JSON.parse(r),s,d.relative==="path");i==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Cl([e,h.pathname])),(d.replace?t.replace:t.push)(h,d.state,d)},[e,t,r,s,i])}me.createContext(null);function Df(i,{relative:e}={}){let{matches:t}=me.useContext(Vo),{pathname:n}=Ll(),s=JSON.stringify(kv(t));return me.useMemo(()=>Rv(i,JSON.parse(s),n,e==="path"),[i,s,n,e])}function a3(i,e){return tA(i,e)}function tA(i,e,t,n,s){gi(ah(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=me.useContext(lo),{matches:a}=me.useContext(Vo),l=a[a.length-1],c=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",p=l&&l.route;{let P=p&&p.path||"";nA(d,!p||P.endsWith("*")||P.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${P}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${P}"> to <Route path="${P==="/"?"*":`${P}/*`}">.`)}let v=Ll(),m;if(e){let P=typeof e=="string"?sh(e):e;gi(h==="/"||P.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${P.pathname}" was given in the \`location\` prop.`),m=P}else m=v;let E=m.pathname||"/",S=E;if(h!=="/"){let P=h.replace(/^\//,"").split("/");S="/"+E.replace(/^\//,"").split("/").slice(P.length).join("/")}let N=Y_(i,{pathname:S});Sa(p||N!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Sa(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=d3(N&&N.map(P=>Object.assign({},P,{params:Object.assign({},c,P.params),pathname:Cl([h,r.encodeLocation?r.encodeLocation(P.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?h:Cl([h,r.encodeLocation?r.encodeLocation(P.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:P.pathnameBase])})),a,t,n,s);return e&&C?me.createElement(Mf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},C):C}function o3(){let i=m3(),e=e3(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},r={padding:"2px 4px",backgroundColor:n},a=null;return console.error("Error handled by React Router default ErrorBoundary:",i),a=me.createElement(me.Fragment,null,me.createElement("p",null," Hey developer "),me.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",me.createElement("code",{style:r},"ErrorBoundary")," or"," ",me.createElement("code",{style:r},"errorElement")," prop on your route.")),me.createElement(me.Fragment,null,me.createElement("h2",null,"Unexpected Application Error!"),me.createElement("h3",{style:{fontStyle:"italic"}},e),t?me.createElement("pre",{style:s},t):null,a)}var l3=me.createElement(o3,null),u3=class extends me.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.onError?this.props.onError(i,e):console.error("React Router caught the following error during render",i)}render(){return this.state.error!==void 0?me.createElement(Vo.Provider,{value:this.props.routeContext},me.createElement(Lv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function c3({routeContext:i,match:e,children:t}){let n=me.useContext(rh);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),me.createElement(Vo.Provider,{value:i},t)}function d3(i,e=[],t=null,n=null,s=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let r=i,a=t?.errors;if(a!=null){let h=r.findIndex(p=>p.route.id&&a?.[p.route.id]!==void 0);gi(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),r=r.slice(0,Math.min(r.length,h+1))}let l=!1,c=-1;if(t)for(let h=0;h<r.length;h++){let p=r[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=h),p.route.id){let{loaderData:v,errors:m}=t,E=p.route.loader&&!v.hasOwnProperty(p.route.id)&&(!m||m[p.route.id]===void 0);if(p.route.lazy||E){l=!0,c>=0?r=r.slice(0,c+1):r=[r[0]];break}}}let d=t&&n?(h,p)=>{n(h,{location:t.location,params:t.matches?.[0]?.params??{},errorInfo:p})}:void 0;return r.reduceRight((h,p,v)=>{let m,E=!1,S=null,N=null;t&&(m=a&&p.route.id?a[p.route.id]:void 0,S=p.route.errorElement||l3,l&&(c<0&&v===0?(nA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,N=null):c===v&&(E=!0,N=p.route.hydrateFallbackElement||null)));let C=e.concat(r.slice(0,v+1)),P=()=>{let L;return m?L=S:E?L=N:p.route.Component?L=me.createElement(p.route.Component,null):p.route.element?L=p.route.element:L=h,me.createElement(c3,{match:p,routeContext:{outlet:h,matches:C,isDataRoute:t!=null},children:L})};return t&&(p.route.ErrorBoundary||p.route.errorElement||v===0)?me.createElement(u3,{location:t.location,revalidation:t.revalidation,component:S,error:m,children:P(),routeContext:{outlet:null,matches:C,isDataRoute:!0},onError:d}):P()},null)}function Pv(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function h3(i){let e=me.useContext(rh);return gi(e,Pv(i)),e}function f3(i){let e=me.useContext(eg);return gi(e,Pv(i)),e}function p3(i){let e=me.useContext(Vo);return gi(e,Pv(i)),e}function Iv(i){let e=p3(i),t=e.matches[e.matches.length-1];return gi(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function g3(){return Iv("useRouteId")}function m3(){let i=me.useContext(Lv),e=f3("useRouteError"),t=Iv("useRouteError");return i!==void 0?i:e.errors?.[t]}function v3(){let{router:i}=h3("useNavigate"),e=Iv("useNavigate"),t=me.useRef(!1);return eA(()=>{t.current=!0}),me.useCallback(async(s,r={})=>{Sa(t.current,Q_),t.current&&(typeof s=="number"?i.navigate(s):await i.navigate(s,{fromRouteId:e,...r}))},[i,e])}var Zb={};function nA(i,e,t){!e&&!Zb[i]&&(Zb[i]=!0,Sa(!1,t))}me.memo(y3);function y3({routes:i,future:e,state:t,unstable_onError:n}){return tA(i,void 0,t,n,e)}function ff({to:i,replace:e,state:t,relative:n}){gi(ah(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=me.useContext(lo);Sa(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:r}=me.useContext(Vo),{pathname:a}=Ll(),l=uo(),c=Rv(i,kv(r),a,n==="path"),d=JSON.stringify(c);return me.useEffect(()=>{l(JSON.parse(d),{replace:e,state:t,relative:n})},[l,d,n,e,t]),null}function Is(i){gi(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function b3({basename:i="/",children:e=null,location:t,navigationType:n="POP",navigator:s,static:r=!1}){gi(!ah(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=i.replace(/^\/*/,"/"),l=me.useMemo(()=>({basename:a,navigator:s,static:r,future:{}}),[a,s,r]);typeof t=="string"&&(t=sh(t));let{pathname:c="/",search:d="",hash:h="",state:p=null,key:v="default"}=t,m=me.useMemo(()=>{let E=kl(c,a);return E==null?null:{location:{pathname:E,search:d,hash:h,state:p,key:v},navigationType:n}},[a,c,d,h,p,v,n]);return Sa(m!=null,`<Router basename="${a}"> is not able to match the URL "${c}${d}${h}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:me.createElement(lo.Provider,{value:l},me.createElement(Mf.Provider,{children:e,value:m}))}function iA({children:i,location:e}){return a3(C1(i),e)}function C1(i,e=[]){let t=[];return me.Children.forEach(i,(n,s)=>{if(!me.isValidElement(n))return;let r=[...e,s];if(n.type===me.Fragment){t.push.apply(t,C1(n.props.children,r));return}gi(n.type===Is,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gi(!n.props.index||!n.props.children,"An index route cannot have child routes.");let a={id:n.props.id||r.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=C1(n.props.children,r)),t.push(a)}),t}var v0="get",y0="application/x-www-form-urlencoded";function tg(i){return i!=null&&typeof i.tagName=="string"}function w3(i){return tg(i)&&i.tagName.toLowerCase()==="button"}function x3(i){return tg(i)&&i.tagName.toLowerCase()==="form"}function _3(i){return tg(i)&&i.tagName.toLowerCase()==="input"}function A3(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function S3(i,e){return i.button===0&&(!e||e==="_self")&&!A3(i)}var Up=null;function E3(){if(Up===null)try{new FormData(document.createElement("form"),0),Up=!1}catch{Up=!0}return Up}var T3=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Om(i){return i!=null&&!T3.has(i)?(Sa(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${y0}"`),null):i}function C3(i,e){let t,n,s,r,a;if(x3(i)){let l=i.getAttribute("action");n=l?kl(l,e):null,t=i.getAttribute("method")||v0,s=Om(i.getAttribute("enctype"))||y0,r=new FormData(i)}else if(w3(i)||_3(i)&&(i.type==="submit"||i.type==="image")){let l=i.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=i.getAttribute("formaction")||l.getAttribute("action");if(n=c?kl(c,e):null,t=i.getAttribute("formmethod")||l.getAttribute("method")||v0,s=Om(i.getAttribute("formenctype"))||Om(l.getAttribute("enctype"))||y0,r=new FormData(l,i),!E3()){let{name:d,type:h,value:p}=i;if(h==="image"){let v=d?`${d}.`:"";r.append(`${v}x`,"0"),r.append(`${v}y`,"0")}else d&&r.append(d,p)}}else{if(tg(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=v0,n=null,s=y0,a=i}return r&&s==="text/plain"&&(a=r,r=void 0),{action:n,method:t.toLowerCase(),encType:s,formData:r,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Mv(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function N3(i,e,t){let n=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n.pathname==="/"?n.pathname=`_root.${t}`:e&&kl(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${t}`,n}async function k3(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function R3(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function L3(i,e,t){let n=await Promise.all(i.map(async s=>{let r=e.routes[s.route.id];if(r){let a=await k3(r,t);return a.links?a.links():[]}return[]}));return D3(n.flat(1).filter(R3).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Qb(i,e,t,n,s,r){let a=(c,d)=>t[d]?c.route.id!==t[d].route.id:!0,l=(c,d)=>t[d].pathname!==c.pathname||t[d].route.path?.endsWith("*")&&t[d].params["*"]!==c.params["*"];return r==="assets"?e.filter((c,d)=>a(c,d)||l(c,d)):r==="data"?e.filter((c,d)=>{let h=n.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(a(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let p=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function P3(i,e,{includeHydrateFallback:t}={}){return I3(i.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let r=[s.module];return s.clientActionModule&&(r=r.concat(s.clientActionModule)),s.clientLoaderModule&&(r=r.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(r=r.concat(s.hydrateFallbackModule)),s.imports&&(r=r.concat(s.imports)),r}).flat(1))}function I3(i){return[...new Set(i)]}function M3(i){let e={},t=Object.keys(i).sort();for(let n of t)e[n]=i[n];return e}function D3(i,e){let t=new Set;return new Set(e),i.reduce((n,s)=>{let r=JSON.stringify(M3(s));return t.has(r)||(t.add(r),n.push({key:r,link:s})),n},[])}function sA(){let i=me.useContext(rh);return Mv(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function O3(){let i=me.useContext(eg);return Mv(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Dv=me.createContext(void 0);Dv.displayName="FrameworkContext";function rA(){let i=me.useContext(Dv);return Mv(i,"You must render this element inside a <HydratedRouter> element"),i}function B3(i,e){let t=me.useContext(Dv),[n,s]=me.useState(!1),[r,a]=me.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:h,onTouchStart:p}=e,v=me.useRef(null);me.useEffect(()=>{if(i==="render"&&a(!0),i==="viewport"){let S=C=>{C.forEach(P=>{a(P.isIntersecting)})},N=new IntersectionObserver(S,{threshold:.5});return v.current&&N.observe(v.current),()=>{N.disconnect()}}},[i]),me.useEffect(()=>{if(n){let S=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(S)}}},[n]);let m=()=>{s(!0)},E=()=>{s(!1),a(!1)};return t?i!=="intent"?[r,v,{}]:[r,v,{onFocus:Jh(l,m),onBlur:Jh(c,E),onMouseEnter:Jh(d,m),onMouseLeave:Jh(h,E),onTouchStart:Jh(p,m)}]:[!1,v,{}]}function Jh(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function F3({page:i,...e}){let{router:t}=sA(),n=me.useMemo(()=>Y_(t.routes,i,t.basename),[t.routes,i,t.basename]);return n?me.createElement(j3,{page:i,matches:n,...e}):null}function U3(i){let{manifest:e,routeModules:t}=rA(),[n,s]=me.useState([]);return me.useEffect(()=>{let r=!1;return L3(i,e,t).then(a=>{r||s(a)}),()=>{r=!0}},[i,e,t]),n}function j3({page:i,matches:e,...t}){let n=Ll(),{manifest:s,routeModules:r}=rA(),{basename:a}=sA(),{loaderData:l,matches:c}=O3(),d=me.useMemo(()=>Qb(i,e,c,s,n,"data"),[i,e,c,s,n]),h=me.useMemo(()=>Qb(i,e,c,s,n,"assets"),[i,e,c,s,n]),p=me.useMemo(()=>{if(i===n.pathname+n.search+n.hash)return[];let E=new Set,S=!1;if(e.forEach(C=>{let P=s.routes[C.route.id];!P||!P.hasLoader||(!d.some(L=>L.route.id===C.route.id)&&C.route.id in l&&r[C.route.id]?.shouldRevalidate||P.hasClientLoader?S=!0:E.add(C.route.id))}),E.size===0)return[];let N=N3(i,a,"data");return S&&E.size>0&&N.searchParams.set("_routes",e.filter(C=>E.has(C.route.id)).map(C=>C.route.id).join(",")),[N.pathname+N.search]},[a,l,n,s,d,e,i,r]),v=me.useMemo(()=>P3(h,s),[h,s]),m=U3(h);return me.createElement(me.Fragment,null,p.map(E=>me.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...t})),v.map(E=>me.createElement("link",{key:E,rel:"modulepreload",href:E,...t})),m.map(({key:E,link:S})=>me.createElement("link",{key:E,nonce:t.nonce,...S})))}function q3(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var aA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{aA&&(window.__reactRouterVersion="7.9.6")}catch{}function H3({basename:i,children:e,window:t}){let n=me.useRef();n.current==null&&(n.current=RC({window:t,v5Compat:!0}));let s=n.current,[r,a]=me.useState({action:s.action,location:s.location}),l=me.useCallback(c=>{me.startTransition(()=>a(c))},[a]);return me.useLayoutEffect(()=>s.listen(l),[s,l]),me.createElement(b3,{basename:i,children:e,location:r.location,navigationType:r.action,navigator:s})}var oA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vu=me.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:s,reloadDocument:r,replace:a,state:l,target:c,to:d,preventScrollReset:h,viewTransition:p,...v},m){let{basename:E}=me.useContext(lo),S=typeof d=="string"&&oA.test(d),N,C=!1;if(typeof d=="string"&&S&&(N=d,aA))try{let j=new URL(window.location.href),ee=d.startsWith("//")?new URL(j.protocol+d):new URL(d),B=kl(ee.pathname,E);ee.origin===j.origin&&B!=null?d=B+ee.search+ee.hash:C=!0}catch{Sa(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let P=s3(d,{relative:s}),[L,O,q]=B3(n,v),G=G3(d,{replace:a,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:p});function W(j){e&&e(j),j.defaultPrevented||G(j)}let K=me.createElement("a",{...v,...q,href:N||P,onClick:C||r?e:W,ref:q3(m,O),target:c,"data-discover":!S&&t==="render"?"true":void 0});return L&&!S?me.createElement(me.Fragment,null,K,me.createElement(F3,{page:P})):K});vu.displayName="Link";var of=me.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:s=!1,style:r,to:a,viewTransition:l,children:c,...d},h){let p=Df(a,{relative:d.relative}),v=Ll(),m=me.useContext(eg),{navigator:E,basename:S}=me.useContext(lo),N=m!=null&&J3(p)&&l===!0,C=E.encodeLocation?E.encodeLocation(p).pathname:p.pathname,P=v.pathname,L=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;t||(P=P.toLowerCase(),L=L?L.toLowerCase():null,C=C.toLowerCase()),L&&S&&(L=kl(L,S)||L);const O=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let q=P===C||!s&&P.startsWith(C)&&P.charAt(O)==="/",G=L!=null&&(L===C||!s&&L.startsWith(C)&&L.charAt(C.length)==="/"),W={isActive:q,isPending:G,isTransitioning:N},K=q?e:void 0,j;typeof n=="function"?j=n(W):j=[n,q?"active":null,G?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let ee=typeof r=="function"?r(W):r;return me.createElement(vu,{...d,"aria-current":K,className:j,ref:h,style:ee,to:a,viewTransition:l},typeof c=="function"?c(W):c)});of.displayName="NavLink";var z3=me.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:s,state:r,method:a=v0,action:l,onSubmit:c,relative:d,preventScrollReset:h,viewTransition:p,...v},m)=>{let E=Y3(),S=K3(l,{relative:d}),N=a.toLowerCase()==="get"?"get":"post",C=typeof l=="string"&&oA.test(l),P=L=>{if(c&&c(L),L.defaultPrevented)return;L.preventDefault();let O=L.nativeEvent.submitter,q=O?.getAttribute("formmethod")||a;E(O||L.currentTarget,{fetcherKey:e,method:q,navigate:t,replace:s,state:r,relative:d,preventScrollReset:h,viewTransition:p})};return me.createElement("form",{ref:m,method:N,action:S,onSubmit:n?c:P,...v,"data-discover":!C&&i==="render"?"true":void 0})});z3.displayName="Form";function V3(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lA(i){let e=me.useContext(rh);return gi(e,V3(i)),e}function G3(i,{target:e,replace:t,state:n,preventScrollReset:s,relative:r,viewTransition:a}={}){let l=uo(),c=Ll(),d=Df(i,{relative:r});return me.useCallback(h=>{if(S3(h,e)){h.preventDefault();let p=t!==void 0?t:xf(c)===xf(d);l(i,{replace:p,state:n,preventScrollReset:s,relative:r,viewTransition:a})}},[c,l,d,t,n,e,i,s,r,a])}var $3=0,W3=()=>`__${String(++$3)}__`;function Y3(){let{router:i}=lA("useSubmit"),{basename:e}=me.useContext(lo),t=g3();return me.useCallback(async(n,s={})=>{let{action:r,method:a,encType:l,formData:c,body:d}=C3(n,e);if(s.navigate===!1){let h=s.fetcherKey||W3();await i.fetch(h,t,s.action||r,{preventScrollReset:s.preventScrollReset,formData:c,body:d,formMethod:s.method||a,formEncType:s.encType||l,flushSync:s.flushSync})}else await i.navigate(s.action||r,{preventScrollReset:s.preventScrollReset,formData:c,body:d,formMethod:s.method||a,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[i,e,t])}function K3(i,{relative:e}={}){let{basename:t}=me.useContext(lo),n=me.useContext(Vo);gi(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),r={...Df(i||".",{relative:e})},a=Ll();if(i==null){r.search=a.search;let l=new URLSearchParams(r.search),c=l.getAll("index");if(c.some(h=>h==="")){l.delete("index"),c.filter(p=>p).forEach(p=>l.append("index",p));let h=l.toString();r.search=h?`?${h}`:""}}return(!i||i===".")&&s.route.index&&(r.search=r.search?r.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(r.pathname=r.pathname==="/"?t:Cl([t,r.pathname])),xf(r)}function J3(i,{relative:e}={}){let t=me.useContext(Z_);gi(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=lA("useViewTransitionState"),s=Df(i,{relative:e});if(!t.isTransitioning)return!1;let r=kl(t.currentLocation.pathname,n)||t.currentLocation.pathname,a=kl(t.nextLocation.pathname,n)||t.nextLocation.pathname;return L0(s.pathname,a)!=null||L0(s.pathname,r)!=null}function xd(i,e){const[t,n]=me.useState(()=>{try{const r=window.localStorage.getItem(i);return r?JSON.parse(r):e}catch(r){return console.error(r),e}});return[t,r=>{try{const a=r instanceof Function?r(t):r;n(a),window.localStorage.setItem(i,JSON.stringify(a))}catch(a){console.error(a)}}]}var N1=function(i,e){return N1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])},N1(i,e)};function uA(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");N1(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var P0=function(){return P0=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},P0.apply(this,arguments)};function oh(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t}function cA(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var l=i.length-1;l>=0;l--)(a=i[l])&&(r=(s<3?a(r):s>3?a(e,t,r):a(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r}function dA(i,e){return function(t,n){e(t,n,i)}}function hA(i,e,t,n,s,r){function a(C){if(C!==void 0&&typeof C!="function")throw new TypeError("Function expected");return C}for(var l=n.kind,c=l==="getter"?"get":l==="setter"?"set":"value",d=!e&&i?n.static?i:i.prototype:null,h=e||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),p,v=!1,m=t.length-1;m>=0;m--){var E={};for(var S in n)E[S]=S==="access"?{}:n[S];for(var S in n.access)E.access[S]=n.access[S];E.addInitializer=function(C){if(v)throw new TypeError("Cannot add initializers after decoration has completed");r.push(a(C||null))};var N=(0,t[m])(l==="accessor"?{get:h.get,set:h.set}:h[c],E);if(l==="accessor"){if(N===void 0)continue;if(N===null||typeof N!="object")throw new TypeError("Object expected");(p=a(N.get))&&(h.get=p),(p=a(N.set))&&(h.set=p),(p=a(N.init))&&s.unshift(p)}else(p=a(N))&&(l==="field"?s.unshift(p):h[c]=p)}d&&Object.defineProperty(d,n.name,h),v=!0}function fA(i,e,t){for(var n=arguments.length>2,s=0;s<e.length;s++)t=n?e[s].call(i,t):e[s].call(i);return n?t:void 0}function pA(i){return typeof i=="symbol"?i:"".concat(i)}function gA(i,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(i,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function mA(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function yt(i,e,t,n){function s(r){return r instanceof t?r:new t(function(a){a(r)})}return new(t||(t=Promise))(function(r,a){function l(h){try{d(n.next(h))}catch(p){a(p)}}function c(h){try{d(n.throw(h))}catch(p){a(p)}}function d(h){h.done?r(h.value):s(h.value).then(l,c)}d((n=n.apply(i,e||[])).next())})}function vA(i,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},n,s,r,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(d){return function(h){return c([d,h])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(t=0)),t;)try{if(n=1,s&&(r=d[0]&2?s.return:d[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,d[1])).done)return r;switch(s=0,r&&(d=[d[0]&2,r.value]),d[0]){case 0:case 1:r=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,s=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!r||d[1]>r[0]&&d[1]<r[3])){t.label=d[1];break}if(d[0]===6&&t.label<r[1]){t.label=r[1],r=d;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(d);break}r[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(i,t)}catch(h){d=[6,h],s=0}finally{n=r=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var ng=Object.create?(function(i,e,t,n){n===void 0&&(n=t);var s=Object.getOwnPropertyDescriptor(e,t);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(i,n,s)}):(function(i,e,t,n){n===void 0&&(n=t),i[n]=e[t]});function yA(i,e){for(var t in i)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&ng(e,i,t)}function I0(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],n=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ov(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var n=t.call(i),s,r=[],a;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)r.push(s.value)}catch(l){a={error:l}}finally{try{s&&!s.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return r}function bA(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(Ov(arguments[e]));return i}function wA(){for(var i=0,e=0,t=arguments.length;e<t;e++)i+=arguments[e].length;for(var n=Array(i),s=0,e=0;e<t;e++)for(var r=arguments[e],a=0,l=r.length;a<l;a++,s++)n[s]=r[a];return n}function xA(i,e,t){if(t||arguments.length===2)for(var n=0,s=e.length,r;n<s;n++)(r||!(n in e))&&(r||(r=Array.prototype.slice.call(e,0,n)),r[n]=e[n]);return i.concat(r||Array.prototype.slice.call(e))}function nh(i){return this instanceof nh?(this.v=i,this):new nh(i)}function _A(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(i,e||[]),s,r=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",a),s[Symbol.asyncIterator]=function(){return this},s;function a(m){return function(E){return Promise.resolve(E).then(m,p)}}function l(m,E){n[m]&&(s[m]=function(S){return new Promise(function(N,C){r.push([m,S,N,C])>1||c(m,S)})},E&&(s[m]=E(s[m])))}function c(m,E){try{d(n[m](E))}catch(S){v(r[0][3],S)}}function d(m){m.value instanceof nh?Promise.resolve(m.value.v).then(h,p):v(r[0][2],m)}function h(m){c("next",m)}function p(m){c("throw",m)}function v(m,E){m(E),r.shift(),r.length&&c(r[0][0],r[0][1])}}function AA(i){var e,t;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,r){e[s]=i[s]?function(a){return(t=!t)?{value:nh(i[s](a)),done:!1}:r?r(a):a}:r}}function SA(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof I0=="function"?I0(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=i[r]&&function(a){return new Promise(function(l,c){a=i[r](a),s(l,c,a.done,a.value)})}}function s(r,a,l,c){Promise.resolve(c).then(function(d){r({value:d,done:l})},a)}}function EA(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i}var X3=Object.create?(function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}):function(i,e){i.default=e},k1=function(i){return k1=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},k1(i)};function TA(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t=k1(i),n=0;n<t.length;n++)t[n]!=="default"&&ng(e,i,t[n]);return X3(e,i),e}function CA(i){return i&&i.__esModule?i:{default:i}}function NA(i,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!n:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(i):n?n.value:e.get(i)}function kA(i,e,t,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!s:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(i,t):s?s.value=t:e.set(i,t),t}function RA(i,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof i=="function"?e===i:i.has(e)}function LA(i,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,s;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],t&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(r){return Promise.reject(r)}}),i.stack.push({value:e,dispose:n,async:t})}else t&&i.stack.push({async:!0});return e}var Z3=typeof SuppressedError=="function"?SuppressedError:function(i,e,t){var n=new Error(t);return n.name="SuppressedError",n.error=i,n.suppressed=e,n};function PA(i){function e(r){i.error=i.hasError?new Z3(r,i.error,"An error was suppressed during disposal."):r,i.hasError=!0}var t,n=0;function s(){for(;t=i.stack.pop();)try{if(!t.async&&n===1)return n=0,i.stack.push(t),Promise.resolve().then(s);if(t.dispose){var r=t.dispose.call(t.value);if(t.async)return n|=2,Promise.resolve(r).then(s,function(a){return e(a),s()})}else n|=1}catch(a){e(a)}if(n===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return s()}function IA(i,e){return typeof i=="string"&&/^\.\.?\//.test(i)?i.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,n,s,r,a){return n?e?".jsx":".js":s&&(!r||!a)?t:s+r+"."+a.toLowerCase()+"js"}):i}const Q3={__extends:uA,__assign:P0,__rest:oh,__decorate:cA,__param:dA,__esDecorate:hA,__runInitializers:fA,__propKey:pA,__setFunctionName:gA,__metadata:mA,__awaiter:yt,__generator:vA,__createBinding:ng,__exportStar:yA,__values:I0,__read:Ov,__spread:bA,__spreadArrays:wA,__spreadArray:xA,__await:nh,__asyncGenerator:_A,__asyncDelegator:AA,__asyncValues:SA,__makeTemplateObject:EA,__importStar:TA,__importDefault:CA,__classPrivateFieldGet:NA,__classPrivateFieldSet:kA,__classPrivateFieldIn:RA,__addDisposableResource:LA,__disposeResources:PA,__rewriteRelativeImportExtension:IA},eN=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:LA,get __assign(){return P0},__asyncDelegator:AA,__asyncGenerator:_A,__asyncValues:SA,__await:nh,__awaiter:yt,__classPrivateFieldGet:NA,__classPrivateFieldIn:RA,__classPrivateFieldSet:kA,__createBinding:ng,__decorate:cA,__disposeResources:PA,__esDecorate:hA,__exportStar:yA,__extends:uA,__generator:vA,__importDefault:CA,__importStar:TA,__makeTemplateObject:EA,__metadata:mA,__param:dA,__propKey:pA,__read:Ov,__rest:oh,__rewriteRelativeImportExtension:IA,__runInitializers:fA,__setFunctionName:gA,__spread:bA,__spreadArray:xA,__spreadArrays:wA,__values:I0,default:Q3},Symbol.toStringTag,{value:"Module"})),tN=i=>i?(...e)=>i(...e):(...e)=>fetch(...e);class Bv extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class nN extends Bv{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class e5 extends Bv{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class t5 extends Bv{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var R1;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(R1||(R1={}));class iN{constructor(e,{headers:t={},customFetch:n,region:s=R1.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=tN(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return yt(this,arguments,void 0,function*(t,n={}){var s;let r,a;try{const{headers:l,method:c,body:d,signal:h,timeout:p}=n;let v={},{region:m}=n;m||(m=this.region);const E=new URL(`${this.url}/${t}`);m&&m!=="any"&&(v["x-region"]=m,E.searchParams.set("forceFunctionRegion",m));let S;d&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(v["Content-Type"]="application/octet-stream",S=d):typeof d=="string"?(v["Content-Type"]="text/plain",S=d):typeof FormData<"u"&&d instanceof FormData?S=d:(v["Content-Type"]="application/json",S=JSON.stringify(d)):S=d;let N=h;p&&(a=new AbortController,r=setTimeout(()=>a.abort(),p),h?(N=a.signal,h.addEventListener("abort",()=>a.abort())):N=a.signal);const C=yield this.fetch(E.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},v),this.headers),l),body:S,signal:N}).catch(q=>{throw new nN(q)}),P=C.headers.get("x-relay-error");if(P&&P==="true")throw new e5(C);if(!C.ok)throw new t5(C);let L=((s=C.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),O;return L==="application/json"?O=yield C.json():L==="application/octet-stream"||L==="application/pdf"?O=yield C.blob():L==="text/event-stream"?O=C:L==="multipart/form-data"?O=yield C.formData():O=yield C.text(),{data:O,error:null,response:C}}catch(l){return{data:null,error:l,response:l instanceof t5||l instanceof e5?l.context:void 0}}finally{r&&clearTimeout(r)}})}}var qs={};const lh=yC(eN);var jp={},qp={},Hp={},zp={},Vp={},Gp={},n5;function MA(){if(n5)return Gp;n5=1,Object.defineProperty(Gp,"__esModule",{value:!0});class i extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Gp.default=i,Gp}var i5;function DA(){if(i5)return Vp;i5=1,Object.defineProperty(Vp,"__esModule",{value:!0});const e=lh.__importDefault(MA());class t{constructor(s){var r,a;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(r=s.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=s.signal,this.isMaybeSingle=(a=s.isMaybeSingle)!==null&&a!==void 0?a:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,r){return this.headers=new Headers(this.headers),this.headers.set(s,r),this}then(s,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var d,h,p,v;let m=null,E=null,S=null,N=c.status,C=c.statusText;if(c.ok){if(this.method!=="HEAD"){const q=await c.text();q===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?E=q:E=JSON.parse(q))}const L=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),O=(p=c.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");L&&O&&O.length>1&&(S=parseInt(O[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(E)&&(E.length>1?(m={code:"PGRST116",details:`Results contain ${E.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},E=null,S=null,N=406,C="Not Acceptable"):E.length===1?E=E[0]:E=null)}else{const L=await c.text();try{m=JSON.parse(L),Array.isArray(m)&&c.status===404&&(E=[],m=null,N=200,C="OK")}catch{c.status===404&&L===""?(N=204,C="No Content"):m={message:L}}if(m&&this.isMaybeSingle&&(!((v=m?.details)===null||v===void 0)&&v.includes("0 rows"))&&(m=null,N=200,C="OK"),m&&this.shouldThrowOnError)throw new e.default(m)}return{error:m,data:E,count:S,status:N,statusText:C}});return this.shouldThrowOnError||(l=l.catch(c=>{var d,h,p,v,m,E;let S="";const N=c?.cause;if(N){const C=(d=N?.message)!==null&&d!==void 0?d:"",P=(h=N?.code)!==null&&h!==void 0?h:"";S=`${(p=c?.name)!==null&&p!==void 0?p:"FetchError"}: ${c?.message}`,S+=`

Caused by: ${(v=N?.name)!==null&&v!==void 0?v:"Error"}: ${C}`,P&&(S+=` (${P})`),N?.stack&&(S+=`
${N.stack}`)}else S=(m=c?.stack)!==null&&m!==void 0?m:"";return{error:{message:`${(E=c?.name)!==null&&E!==void 0?E:"FetchError"}: ${c?.message}`,details:S,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),l.then(s,r)}returns(){return this}overrideTypes(){return this}}return Vp.default=t,Vp}var s5;function OA(){if(s5)return zp;s5=1,Object.defineProperty(zp,"__esModule",{value:!0});const e=lh.__importDefault(DA());class t extends e.default{select(s){let r=!1;const a=(s??"*").split("").map(l=>/\s/.test(l)&&!r?"":(l==='"'&&(r=!r),l)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:r=!0,nullsFirst:a,foreignTable:l,referencedTable:c=l}={}){const d=c?`${c}.order`:"order",h=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${h?`${h},`:""}${s}.${r?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:r,referencedTable:a=r}={}){const l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${s}`),this}range(s,r,{foreignTable:a,referencedTable:l=a}={}){const c=typeof l>"u"?"offset":`${l}.offset`,d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${s}`),this.url.searchParams.set(d,`${r-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:r=!1,settings:a=!1,buffers:l=!1,wal:c=!1,format:d="text"}={}){var h;const p=[s?"analyze":null,r?"verbose":null,a?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),v=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${v}"; options=${p};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return zp.default=t,zp}var r5;function Fv(){if(r5)return Hp;r5=1,Object.defineProperty(Hp,"__esModule",{value:!0});const e=lh.__importDefault(OA()),t=new RegExp("[,()]");class n extends e.default{eq(r,a){return this.url.searchParams.append(r,`eq.${a}`),this}neq(r,a){return this.url.searchParams.append(r,`neq.${a}`),this}gt(r,a){return this.url.searchParams.append(r,`gt.${a}`),this}gte(r,a){return this.url.searchParams.append(r,`gte.${a}`),this}lt(r,a){return this.url.searchParams.append(r,`lt.${a}`),this}lte(r,a){return this.url.searchParams.append(r,`lte.${a}`),this}like(r,a){return this.url.searchParams.append(r,`like.${a}`),this}likeAllOf(r,a){return this.url.searchParams.append(r,`like(all).{${a.join(",")}}`),this}likeAnyOf(r,a){return this.url.searchParams.append(r,`like(any).{${a.join(",")}}`),this}ilike(r,a){return this.url.searchParams.append(r,`ilike.${a}`),this}ilikeAllOf(r,a){return this.url.searchParams.append(r,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(r,a){return this.url.searchParams.append(r,`ilike(any).{${a.join(",")}}`),this}regexMatch(r,a){return this.url.searchParams.append(r,`match.${a}`),this}regexIMatch(r,a){return this.url.searchParams.append(r,`imatch.${a}`),this}is(r,a){return this.url.searchParams.append(r,`is.${a}`),this}isDistinct(r,a){return this.url.searchParams.append(r,`isdistinct.${a}`),this}in(r,a){const l=Array.from(new Set(a)).map(c=>typeof c=="string"&&t.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(r,`in.(${l})`),this}contains(r,a){return typeof a=="string"?this.url.searchParams.append(r,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(r,`cs.{${a.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(a)}`),this}containedBy(r,a){return typeof a=="string"?this.url.searchParams.append(r,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(r,`cd.{${a.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(a)}`),this}rangeGt(r,a){return this.url.searchParams.append(r,`sr.${a}`),this}rangeGte(r,a){return this.url.searchParams.append(r,`nxl.${a}`),this}rangeLt(r,a){return this.url.searchParams.append(r,`sl.${a}`),this}rangeLte(r,a){return this.url.searchParams.append(r,`nxr.${a}`),this}rangeAdjacent(r,a){return this.url.searchParams.append(r,`adj.${a}`),this}overlaps(r,a){return typeof a=="string"?this.url.searchParams.append(r,`ov.${a}`):this.url.searchParams.append(r,`ov.{${a.join(",")}}`),this}textSearch(r,a,{config:l,type:c}={}){let d="";c==="plain"?d="pl":c==="phrase"?d="ph":c==="websearch"&&(d="w");const h=l===void 0?"":`(${l})`;return this.url.searchParams.append(r,`${d}fts${h}.${a}`),this}match(r){return Object.entries(r).forEach(([a,l])=>{this.url.searchParams.append(a,`eq.${l}`)}),this}not(r,a,l){return this.url.searchParams.append(r,`not.${a}.${l}`),this}or(r,{foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${r})`),this}filter(r,a,l){return this.url.searchParams.append(r,`${a}.${l}`),this}}return Hp.default=n,Hp}var a5;function BA(){if(a5)return qp;a5=1,Object.defineProperty(qp,"__esModule",{value:!0});const e=lh.__importDefault(Fv());class t{constructor(s,{headers:r={},schema:a,fetch:l}){this.url=s,this.headers=new Headers(r),this.schema=a,this.fetch=l}select(s,r){const{head:a=!1,count:l}=r??{},c=a?"HEAD":"GET";let d=!1;const h=(s??"*").split("").map(p=>/\s/.test(p)&&!d?"":(p==='"'&&(d=!d),p)).join("");return this.url.searchParams.set("select",h),l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:r,defaultToNull:a=!0}={}){var l;const c="POST";if(r&&this.headers.append("Prefer",`count=${r}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const d=s.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(d.length>0){const h=[...new Set(d)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(s,{onConflict:r,ignoreDuplicates:a=!1,count:l,defaultToNull:c=!0}={}){var d;const h="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const p=s.reduce((v,m)=>v.concat(Object.keys(m)),[]);if(p.length>0){const v=[...new Set(p)].map(m=>`"${m}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(s,{count:r}={}){var a;const l="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:s}={}){var r;const a="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}}return qp.default=t,qp}var o5;function sN(){if(o5)return jp;o5=1,Object.defineProperty(jp,"__esModule",{value:!0});const i=lh,e=i.__importDefault(BA()),t=i.__importDefault(Fv());class n{constructor(r,{headers:a={},schema:l,fetch:c}={}){this.url=r,this.headers=new Headers(a),this.schemaName=l,this.fetch=c}from(r){if(!r||typeof r!="string"||r.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const a=new URL(`${this.url}/${r}`);return new e.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(r){return new n(this.url,{headers:this.headers,schema:r,fetch:this.fetch})}rpc(r,a={},{head:l=!1,get:c=!1,count:d}={}){var h;let p;const v=new URL(`${this.url}/rpc/${r}`);let m;l||c?(p=l?"HEAD":"GET",Object.entries(a).filter(([S,N])=>N!==void 0).map(([S,N])=>[S,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([S,N])=>{v.searchParams.append(S,N)})):(p="POST",m=a);const E=new Headers(this.headers);return d&&E.set("Prefer",`count=${d}`),new t.default({method:p,url:v,headers:E,schema:this.schemaName,body:m,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}}return jp.default=n,jp}var l5;function rN(){if(l5)return qs;l5=1,Object.defineProperty(qs,"__esModule",{value:!0}),qs.PostgrestError=qs.PostgrestBuilder=qs.PostgrestTransformBuilder=qs.PostgrestFilterBuilder=qs.PostgrestQueryBuilder=qs.PostgrestClient=void 0;const i=lh,e=i.__importDefault(sN());qs.PostgrestClient=e.default;const t=i.__importDefault(BA());qs.PostgrestQueryBuilder=t.default;const n=i.__importDefault(Fv());qs.PostgrestFilterBuilder=n.default;const s=i.__importDefault(OA());qs.PostgrestTransformBuilder=s.default;const r=i.__importDefault(DA());qs.PostgrestBuilder=r.default;const a=i.__importDefault(MA());return qs.PostgrestError=a.default,qs.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:r.default,PostgrestError:a.default},qs}var FA=rN();const UA=Cv(FA),aN=vC({__proto__:null,default:UA},[FA]),{PostgrestClient:oN,PostgrestQueryBuilder:jF,PostgrestFilterBuilder:qF,PostgrestTransformBuilder:HF,PostgrestBuilder:zF,PostgrestError:VF}=UA||aN;class lN{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const n=t.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const n=this.getWebSocketConstructor();return new n(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const uN="2.84.0",cN=`realtime-js/${uN}`,jA="1.0.0",dN="2.0.0",u5=jA,L1=1e4,hN=1e3,fN=100;var dc;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(dc||(dc={}));var us;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(us||(us={}));var ro;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(ro||(ro={}));var P1;(function(i){i.websocket="websocket"})(P1||(P1={}));var hc;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(hc||(hc={}));class pN{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast"}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,n,s,r;const a=e.topic,l=(t=e.ref)!==null&&t!==void 0?t:"",c=(n=e.join_ref)!==null&&n!==void 0?n:"",d=e.payload.event,h=(r=(s=e.payload)===null||s===void 0?void 0:s.payload)!==null&&r!==void 0?r:new ArrayBuffer(0),p=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+a.length+d.length,v=new ArrayBuffer(this.HEADER_LENGTH+p);let m=new DataView(v),E=0;m.setUint8(E++,this.KINDS.userBroadcastPush),m.setUint8(E++,c.length),m.setUint8(E++,l.length),m.setUint8(E++,a.length),m.setUint8(E++,d.length),m.setUint8(E++,this.BINARY_ENCODING),Array.from(c,N=>m.setUint8(E++,N.charCodeAt(0))),Array.from(l,N=>m.setUint8(E++,N.charCodeAt(0))),Array.from(a,N=>m.setUint8(E++,N.charCodeAt(0))),Array.from(d,N=>m.setUint8(E++,N.charCodeAt(0)));var S=new Uint8Array(v.byteLength+h.byteLength);return S.set(new Uint8Array(v),0),S.set(new Uint8Array(h),v.byteLength),S.buffer}_encodeJsonUserBroadcastPush(e){var t,n,s,r;const a=e.topic,l=(t=e.ref)!==null&&t!==void 0?t:"",c=(n=e.join_ref)!==null&&n!==void 0?n:"",d=e.payload.event,h=(r=(s=e.payload)===null||s===void 0?void 0:s.payload)!==null&&r!==void 0?r:{},v=new TextEncoder().encode(JSON.stringify(h)).buffer,m=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+a.length+d.length,E=new ArrayBuffer(this.HEADER_LENGTH+m);let S=new DataView(E),N=0;S.setUint8(N++,this.KINDS.userBroadcastPush),S.setUint8(N++,c.length),S.setUint8(N++,l.length),S.setUint8(N++,a.length),S.setUint8(N++,d.length),S.setUint8(N++,this.JSON_ENCODING),Array.from(c,P=>S.setUint8(N++,P.charCodeAt(0))),Array.from(l,P=>S.setUint8(N++,P.charCodeAt(0))),Array.from(a,P=>S.setUint8(N++,P.charCodeAt(0))),Array.from(d,P=>S.setUint8(N++,P.charCodeAt(0)));var C=new Uint8Array(E.byteLength+v.byteLength);return C.set(new Uint8Array(E),0),C.set(new Uint8Array(v),E.byteLength),C.buffer}decode(e,t){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return t(n)}if(typeof e=="string"){const n=JSON.parse(e),[s,r,a,l,c]=n;return t({join_ref:s,ref:r,topic:a,event:l,payload:c})}return t({})}_binaryDecode(e){const t=new DataView(e),n=t.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,s)}}_decodeUserBroadcast(e,t,n){const s=t.getUint8(1),r=t.getUint8(2),a=t.getUint8(3),l=t.getUint8(4);let c=this.HEADER_LENGTH+4;const d=n.decode(e.slice(c,c+s));c=c+s;const h=n.decode(e.slice(c,c+r));c=c+r;const p=n.decode(e.slice(c,c+a));c=c+a;const v=e.slice(c,e.byteLength),m=l===this.JSON_ENCODING?JSON.parse(n.decode(v)):v,E={type:this.BROADCAST_EVENT,event:h,payload:m};return a>0&&(E.meta=JSON.parse(p)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST_EVENT,payload:E}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e?.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}}class qA{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Qn;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(Qn||(Qn={}));const c5=(i,e,t={})=>{var n;const s=(n=t.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((r,a)=>(r[a]=gN(a,i,e,s),r),{}):{}},gN=(i,e,t,n)=>{const s=e.find(l=>l.name===i),r=s?.type,a=t[i];return r&&!n.includes(r)?HA(r,a):I1(a)},HA=(i,e)=>{if(i.charAt(0)==="_"){const t=i.slice(1,i.length);return bN(e,t)}switch(i){case Qn.bool:return mN(e);case Qn.float4:case Qn.float8:case Qn.int2:case Qn.int4:case Qn.int8:case Qn.numeric:case Qn.oid:return vN(e);case Qn.json:case Qn.jsonb:return yN(e);case Qn.timestamp:return wN(e);case Qn.abstime:case Qn.date:case Qn.daterange:case Qn.int4range:case Qn.int8range:case Qn.money:case Qn.reltime:case Qn.text:case Qn.time:case Qn.timestamptz:case Qn.timetz:case Qn.tsrange:case Qn.tstzrange:return I1(e);default:return I1(e)}},I1=i=>i,mN=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},vN=i=>{if(typeof i=="string"){const e=parseFloat(i);if(!Number.isNaN(e))return e}return i},yN=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(e){return console.log(`JSON parse error: ${e}`),i}return i},bN=(i,e)=>{if(typeof i!="string")return i;const t=i.length-1,n=i[t];if(i[0]==="{"&&n==="}"){let r;const a=i.slice(1,t);try{r=JSON.parse("["+a+"]")}catch{r=a?a.split(","):[]}return r.map(l=>HA(e,l))}return i},wN=i=>typeof i=="string"?i.replace(" ","T"):i,zA=i=>{const e=new URL(i);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Bm{constructor(e,t,n={},s=L1){this.channel=e,this.event=t,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var d5;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(d5||(d5={}));class pf{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:r,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=pf.syncState(this.state,s,r,a),this.pendingDiffs.forEach(c=>{this.state=pf.syncDiff(this.state,c,r,a)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:r,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=pf.syncDiff(this.state,s,r,a),l())}),this.onJoin((s,r,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:r,newPresences:a})}),this.onLeave((s,r,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:r,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,s){const r=this.cloneDeep(e),a=this.transformState(t),l={},c={};return this.map(r,(d,h)=>{a[d]||(c[d]=h)}),this.map(a,(d,h)=>{const p=r[d];if(p){const v=h.map(N=>N.presence_ref),m=p.map(N=>N.presence_ref),E=h.filter(N=>m.indexOf(N.presence_ref)<0),S=p.filter(N=>v.indexOf(N.presence_ref)<0);E.length>0&&(l[d]=E),S.length>0&&(c[d]=S)}else l[d]=h}),this.syncDiff(r,{joins:l,leaves:c},n,s)}static syncDiff(e,t,n,s){const{joins:r,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(r,(l,c)=>{var d;const h=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),h.length>0){const p=e[l].map(m=>m.presence_ref),v=h.filter(m=>p.indexOf(m.presence_ref)<0);e[l].unshift(...v)}n(l,h,c)}),this.map(a,(l,c)=>{let d=e[l];if(!d)return;const h=c.map(p=>p.presence_ref);d=d.filter(p=>h.indexOf(p.presence_ref)<0),e[l]=d,s(l,d,c),d.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const s=e[n];return"metas"in s?t[n]=s.metas.map(r=>(r.presence_ref=r.phx_ref,delete r.phx_ref,delete r.phx_ref_prev,r)):t[n]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var h5;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(h5||(h5={}));var gf;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(gf||(gf={}));var Al;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(Al||(Al={}));class Uv{constructor(e,t={config:{}},n){var s,r;if(this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=us.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Bm(this,ro.join,this.params,this.timeout),this.rejoinTimer=new qA(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=us.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=us.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=us.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=us.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=us.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ro.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new pf(this),this.broadcastEndpointURL=zA(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((r=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||r===void 0)&&r.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var n,s,r;if(this.socket.isConnected()||this.socket.connect(),this.state==us.closed){const{config:{broadcast:a,presence:l,private:c}}=this.params,d=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&s!==void 0?s:[],h=!!this.bindings[gf.PRESENCE]&&this.bindings[gf.PRESENCE].length>0||((r=this.params.config.presence)===null||r===void 0?void 0:r.enabled)===!0,p={},v={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:h}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(m=>e?.(Al.CHANNEL_ERROR,m)),this._onClose(()=>e?.(Al.CLOSED)),this.updateJoinPayload(Object.assign({config:v},p)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:m})=>{var E;if(this.socket.setAuth(),m===void 0){e?.(Al.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,N=(E=S?.length)!==null&&E!==void 0?E:0,C=[];for(let P=0;P<N;P++){const L=S[P],{filter:{event:O,schema:q,table:G,filter:W}}=L,K=m&&m[P];if(K&&K.event===O&&K.schema===q&&K.table===G&&K.filter===W)C.push(Object.assign(Object.assign({},L),{id:K.id}));else{this.unsubscribe(),this.state=us.errored,e?.(Al.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,e&&e(Al.SUBSCRIBED);return}}).receive("error",m=>{this.state=us.errored,e?.(Al.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e?.(Al.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===us.joined&&e===gf.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}async httpSend(e,t,n={}){var s;const r=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:r,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const d=await l.json();c=d.error||d.message||c}catch{}return Promise.reject(new Error(c))}async send(e,t={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:r,payload:a}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:a,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=d.body)===null||s===void 0?void 0:s.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(r=>{var a,l,c;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&r("ok"),d.receive("ok",()=>r("ok")),d.receive("error",()=>r("error")),d.receive("timeout",()=>r("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=us.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ro.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Bm(this,ro.leave,{},e),n.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=us.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const s=new AbortController,r=setTimeout(()=>s.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(r),a}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Bm(this,e,t,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>fN){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var s,r;const a=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:h}=ro;if(n&&[l,c,d,h].indexOf(a)>=0&&n!==this._joinRef())return;let v=this._onMessage(a,t,n);if(t&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var E,S,N;return((E=m.filter)===null||E===void 0?void 0:E.event)==="*"||((N=(S=m.filter)===null||S===void 0?void 0:S.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===a}).map(m=>m.callback(v,n)):(r=this.bindings[a])===null||r===void 0||r.filter(m=>{var E,S,N,C,P,L;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in m){const O=m.id,q=(E=m.filter)===null||E===void 0?void 0:E.event;return O&&((S=t.ids)===null||S===void 0?void 0:S.includes(O))&&(q==="*"||q?.toLocaleLowerCase()===((N=t.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const O=(P=(C=m?.filter)===null||C===void 0?void 0:C.event)===null||P===void 0?void 0:P.toLocaleLowerCase();return O==="*"||O===((L=t?.event)===null||L===void 0?void 0:L.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===a}).map(m=>{if(typeof v=="object"&&"ids"in v){const E=v.data,{schema:S,table:N,commit_timestamp:C,type:P,errors:L}=E;v=Object.assign(Object.assign({},{schema:S,table:N,commit_timestamp:C,eventType:P,new:{},old:{},errors:L}),this._getPayloadRecords(E))}m.callback(v,n)})}_isClosed(){return this.state===us.closed}_isJoined(){return this.state===us.joined}_isJoining(){return this.state===us.joining}_isLeaving(){return this.state===us.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const s=e.toLocaleLowerCase(),r={type:s,filter:t,callback:n};return this.bindings[s]?this.bindings[s].push(r):this.bindings[s]=[r],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var r;return!(((r=s.type)===null||r===void 0?void 0:r.toLocaleLowerCase())===n&&Uv.isEqual(s.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ro.close,{},e)}_onError(e){this._on(ro.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=us.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=c5(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=c5(e.columns,e.old_record)),t}}const Fm=()=>{},$p={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},xN=[1e3,2e3,5e3,1e4],_N=1e4,AN=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class SN{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=L1,this.transport=null,this.heartbeatIntervalMs=$p.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Fm,this.ref=0,this.reconnectTimer=null,this.vsn=u5,this.logger=Fm,this.conn=null,this.sendBuffer=[],this.serializer=new pN,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...r)=>s(...r):(...r)=>fetch(...r),!(!((n=t?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${P1.websocket}`,this.httpEndpoint=zA(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=lN.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case dc.connecting:return hc.Connecting;case dc.open:return hc.Open;case dc.closing:return hc.Closing;default:return hc.Closed}}isConnected(){return this.connectionState()===hc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(r=>r.topic===n);if(s)return s;{const r=new Uv(`realtime:${e}`,t,this);return this.channels.push(r),r}}push(e){const{topic:t,event:n,payload:s,ref:r}=e,a=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${t} ${n} (${r})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(hN,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},$p.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:r,ref:a}=t,l=a?`(${a})`:"",c=r.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),r),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(s,r,a)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===dc.open||this.conn.readyState===dc.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ro.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${n}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([AN],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(n=>{const s={access_token:t,version:cN};t&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(ro.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new qA(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},$p.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,s,r,a,l,c,d,h,p,v,m;switch(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(n=e?.timeout)!==null&&n!==void 0?n:L1,this.heartbeatIntervalMs=(s=e?.heartbeatIntervalMs)!==null&&s!==void 0?s:$p.HEARTBEAT_INTERVAL,this.worker=(r=e?.worker)!==null&&r!==void 0?r:!1,this.accessToken=(a=e?.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(l=e?.heartbeatCallback)!==null&&l!==void 0?l:Fm,this.vsn=(c=e?.vsn)!==null&&c!==void 0?c:u5,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=e?.reconnectAfterMs)!==null&&d!==void 0?d:(E=>xN[E-1]||_N),this.vsn){case jA:this.encode=(h=e?.encode)!==null&&h!==void 0?h:((E,S)=>S(JSON.stringify(E))),this.decode=(p=e?.decode)!==null&&p!==void 0?p:((E,S)=>S(JSON.parse(E)));break;case dN:this.encode=(v=e?.encode)!==null&&v!==void 0?v:this.serializer.encode.bind(this.serializer),this.decode=(m=e?.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class jv extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Si(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class EN extends jv{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class M1 extends jv{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const qv=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),TN=()=>Response,D1=i=>{if(Array.isArray(i))return i.map(t=>D1(t));if(typeof i=="function"||i!==Object(i))return i;const e={};return Object.entries(i).forEach(([t,n])=>{const s=t.replace(/([-_][a-z])/gi,r=>r.toUpperCase().replace(/[-_]/g,""));e[s]=D1(n)}),e},CN=i=>{if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},Um=i=>{var e;return i.msg||i.message||i.error_description||(typeof i.error=="string"?i.error:(e=i.error)===null||e===void 0?void 0:e.message)||JSON.stringify(i)},NN=(i,e,t)=>yt(void 0,void 0,void 0,function*(){const n=yield TN();i instanceof n&&!t?.noResolveJson?i.json().then(s=>{const r=i.status||500,a=s?.statusCode||r+"";e(new EN(Um(s),r,a))}).catch(s=>{e(new M1(Um(s),s))}):e(new M1(Um(i),i))}),kN=(i,e,t,n)=>{const s={method:i,headers:e?.headers||{}};return i==="GET"||!n?s:(CN(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e?.headers),s.body=JSON.stringify(n)):s.body=n,e?.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),t))};function Of(i,e,t,n,s,r){return yt(this,void 0,void 0,function*(){return new Promise((a,l)=>{i(t,kN(e,n,s,r)).then(c=>{if(!c.ok)throw c;return n?.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>NN(c,l,n))})})}function _f(i,e,t,n){return yt(this,void 0,void 0,function*(){return Of(i,"GET",e,t,n)})}function io(i,e,t,n,s){return yt(this,void 0,void 0,function*(){return Of(i,"POST",e,n,s,t)})}function O1(i,e,t,n,s){return yt(this,void 0,void 0,function*(){return Of(i,"PUT",e,n,s,t)})}function RN(i,e,t,n){return yt(this,void 0,void 0,function*(){return Of(i,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function Hv(i,e,t,n,s){return yt(this,void 0,void 0,function*(){return Of(i,"DELETE",e,n,s,t)})}class LN{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return yt(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Si(e))return{data:null,error:e};throw e}})}}var VA;class PN{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[VA]="BlobDownloadBuilder",this.promise=null}asStream(){return new LN(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return yt(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Si(e))return{data:null,error:e};throw e}})}}VA=Symbol.toStringTag;const IN={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},f5={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class MN{constructor(e,t={},n,s){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=qv(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,n,s){return yt(this,void 0,void 0,function*(){try{let r;const a=Object.assign(Object.assign({},f5),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&n instanceof Blob?(r=new FormData,r.append("cacheControl",a.cacheControl),c&&r.append("metadata",this.encodeMetadata(c)),r.append("",n)):typeof FormData<"u"&&n instanceof FormData?(r=n,r.has("cacheControl")||r.append("cacheControl",a.cacheControl),c&&!r.has("metadata")&&r.append("metadata",this.encodeMetadata(c))):(r=n,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&r instanceof ReadableStream||r&&typeof r=="object"&&"pipe"in r&&typeof r.pipe=="function")&&!a.duplex&&(a.duplex="half")),s?.headers&&(l=Object.assign(Object.assign({},l),s.headers));const d=this._removeEmptyFolders(t),h=this._getFinalPath(d),p=yield(e=="PUT"?O1:io)(this.fetch,`${this.url}/object/${h}`,r,Object.assign({headers:l},a?.duplex?{duplex:a.duplex}:{}));return{data:{path:d,id:p.Id,fullPath:p.Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Si(r))return{data:null,error:r};throw r}})}upload(e,t,n){return yt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,s){return yt(this,void 0,void 0,function*(){const r=this._removeEmptyFolders(e),a=this._getFinalPath(r),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",t);try{let c;const d=Object.assign({upsert:f5.upsert},s),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType);const p=yield O1(this.fetch,l.toString(),c,{headers:h});return{data:{path:r,fullPath:p.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Si(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return yt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);t?.upsert&&(s["x-upsert"]="true");const r=yield io(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),a=new URL(this.url+r.url),l=a.searchParams.get("token");if(!l)throw new jv("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Si(n))return{data:null,error:n};throw n}})}update(e,t,n){return yt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return yt(this,void 0,void 0,function*(){try{return{data:yield io(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Si(s))return{data:null,error:s};throw s}})}copy(e,t,n){return yt(this,void 0,void 0,function*(){try{return{data:{path:(yield io(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Si(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,n){return yt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),r=yield io(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},n?.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n?.download?`&download=${n.download===!0?"":n.download}`:"";return r={signedUrl:encodeURI(`${this.url}${r.signedURL}${a}`)},{data:r,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Si(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,n){return yt(this,void 0,void 0,function*(){try{const s=yield io(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),r=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${r}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Si(s))return{data:null,error:s};throw s}})}download(e,t){const s=typeof t?.transform<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString(t?.transform||{}),a=r?`?${r}`:"",l=this._getFinalPath(e),c=()=>_f(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0});return new PN(c,this.shouldThrowOnError)}info(e){return yt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield _f(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:D1(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Si(n))return{data:null,error:n};throw n}})}exists(e){return yt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield RN(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Si(n)&&n instanceof M1){const s=n.originalError;if([400,404].includes(s?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),s=[],r=t?.download?`download=${t.download===!0?"":t.download}`:"";r!==""&&s.push(r);const l=typeof t?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(t?.transform||{});c!==""&&s.push(c);let d=s.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(e){return yt(this,void 0,void 0,function*(){try{return{data:yield Hv(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Si(t))return{data:null,error:t};throw t}})}list(e,t,n){return yt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},IN),t),{prefix:e||""});return{data:yield io(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Si(s))return{data:null,error:s};throw s}})}listV2(e,t){return yt(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield io(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},t),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Si(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const GA="2.84.0",$A={"X-Client-Info":`storage-js/${GA}`};class DN{constructor(e,t={},n,s){this.shouldThrowOnError=!1;const r=new URL(e);s?.useNewHostname&&/supabase\.(co|in|red)$/.test(r.hostname)&&!r.hostname.includes("storage.supabase.")&&(r.hostname=r.hostname.replace("supabase.","storage.supabase.")),this.url=r.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$A),t),this.fetch=qv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return yt(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield _f(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Si(t))return{data:null,error:t};throw t}})}getBucket(e){return yt(this,void 0,void 0,function*(){try{return{data:yield _f(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Si(t))return{data:null,error:t};throw t}})}createBucket(e){return yt(this,arguments,void 0,function*(t,n={public:!1}){try{return{data:yield io(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Si(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return yt(this,void 0,void 0,function*(){try{return{data:yield O1(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Si(n))return{data:null,error:n};throw n}})}emptyBucket(e){return yt(this,void 0,void 0,function*(){try{return{data:yield io(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Si(t))return{data:null,error:t};throw t}})}deleteBucket(e){return yt(this,void 0,void 0,function*(){try{return{data:yield Hv(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Si(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}class ON{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$A),t),this.fetch=qv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return yt(this,void 0,void 0,function*(){try{return{data:yield io(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Si(t))return{data:null,error:t};throw t}})}listBuckets(e){return yt(this,void 0,void 0,function*(){try{const t=new URLSearchParams;e?.limit!==void 0&&t.set("limit",e.limit.toString()),e?.offset!==void 0&&t.set("offset",e.offset.toString()),e?.sortColumn&&t.set("sortColumn",e.sortColumn),e?.sortOrder&&t.set("sortOrder",e.sortOrder),e?.search&&t.set("search",e.search);const n=t.toString(),s=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield _f(this.fetch,s,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Si(t))return{data:null,error:t};throw t}})}deleteBucket(e){return yt(this,void 0,void 0,function*(){try{return{data:yield Hv(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Si(t))return{data:null,error:t};throw t}})}}const zv={"X-Client-Info":`storage-js/${GA}`,"Content-Type":"application/json"};class WA extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Qr(i){return typeof i=="object"&&i!==null&&"__isStorageVectorsError"in i}class jm extends WA{constructor(e,t,n){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class BN extends WA{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var p5;(function(i){i.InternalError="InternalError",i.S3VectorConflictException="S3VectorConflictException",i.S3VectorNotFoundException="S3VectorNotFoundException",i.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",i.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",i.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(p5||(p5={}));const Vv=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),FN=i=>{if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},g5=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),UN=(i,e,t)=>yt(void 0,void 0,void 0,function*(){if(i&&typeof i=="object"&&"status"in i&&"ok"in i&&typeof i.status=="number"&&!t?.noResolveJson){const s=i.status||500,r=i;if(typeof r.json=="function")r.json().then(a=>{const l=a?.statusCode||a?.code||s+"";e(new jm(g5(a),s,l))}).catch(()=>{const a=s+"",l=r.statusText||`HTTP ${s} error`;e(new jm(l,s,a))});else{const a=s+"",l=r.statusText||`HTTP ${s} error`;e(new jm(l,s,a))}}else e(new BN(g5(i),i))}),jN=(i,e,t,n)=>{const s={method:i,headers:e?.headers||{}};return n?(FN(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e?.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),t)):s};function qN(i,e,t,n,s,r){return yt(this,void 0,void 0,function*(){return new Promise((a,l)=>{i(t,jN(e,n,s,r)).then(c=>{if(!c.ok)throw c;if(n?.noResolveJson)return c;const d=c.headers.get("content-type");return!d||!d.includes("application/json")?{}:c.json()}).then(c=>a(c)).catch(c=>UN(c,l,n))})})}function ea(i,e,t,n,s){return yt(this,void 0,void 0,function*(){return qN(i,"POST",e,n,s,t)})}class HN{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},zv),t),this.fetch=Vv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return yt(this,void 0,void 0,function*(){try{return{data:(yield ea(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qr(t))return{data:null,error:t};throw t}})}getIndex(e,t){return yt(this,void 0,void 0,function*(){try{return{data:yield ea(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qr(n))return{data:null,error:n};throw n}})}listIndexes(e){return yt(this,void 0,void 0,function*(){try{return{data:yield ea(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qr(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return yt(this,void 0,void 0,function*(){try{return{data:(yield ea(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qr(n))return{data:null,error:n};throw n}})}}class zN{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},zv),t),this.fetch=Vv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return yt(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield ea(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qr(t))return{data:null,error:t};throw t}})}getVectors(e){return yt(this,void 0,void 0,function*(){try{return{data:yield ea(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qr(t))return{data:null,error:t};throw t}})}listVectors(e){return yt(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield ea(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qr(t))return{data:null,error:t};throw t}})}queryVectors(e){return yt(this,void 0,void 0,function*(){try{return{data:yield ea(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qr(t))return{data:null,error:t};throw t}})}deleteVectors(e){return yt(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield ea(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qr(t))return{data:null,error:t};throw t}})}}class VN{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},zv),t),this.fetch=Vv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return yt(this,void 0,void 0,function*(){try{return{data:(yield ea(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qr(t))return{data:null,error:t};throw t}})}getBucket(e){return yt(this,void 0,void 0,function*(){try{return{data:yield ea(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qr(t))return{data:null,error:t};throw t}})}listBuckets(){return yt(this,arguments,void 0,function*(e={}){try{return{data:yield ea(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qr(t))return{data:null,error:t};throw t}})}deleteBucket(e){return yt(this,void 0,void 0,function*(){try{return{data:(yield ea(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qr(t))return{data:null,error:t};throw t}})}}class GN extends VN{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new $N(this.url,this.headers,e,this.fetch)}}class $N extends HN{constructor(e,t,n,s){super(e,t,s),this.vectorBucketName=n}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return yt(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return yt(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return yt(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return yt(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new WN(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class WN extends zN{constructor(e,t,n,s,r){super(e,t,r),this.vectorBucketName=n,this.indexName=s}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return yt(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return yt(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return yt(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return yt(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return yt(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class YN extends DN{constructor(e,t={},n,s){super(e,t,n,s)}from(e){return new MN(this.url,this.headers,e,this.fetch)}get vectors(){return new GN(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new ON(this.url+"/iceberg",this.headers,this.fetch)}}const KN="2.84.0";let lf="";typeof Deno<"u"?lf="deno":typeof document<"u"?lf="web":typeof navigator<"u"&&navigator.product==="ReactNative"?lf="react-native":lf="node";const JN={"X-Client-Info":`supabase-js-${lf}/${KN}`},XN={headers:JN},ZN={schema:"public"},QN={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},e4={},t4=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),n4=()=>Headers,i4=(i,e,t)=>{const n=t4(t),s=n4();return async(r,a)=>{var l;const c=(l=await e())!==null&&l!==void 0?l:i;let d=new s(a?.headers);return d.has("apikey")||d.set("apikey",i),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(r,Object.assign(Object.assign({},a),{headers:d}))}};function s4(i){return i.endsWith("/")?i:i+"/"}function r4(i,e){var t,n;const{db:s,auth:r,realtime:a,global:l}=i,{db:c,auth:d,realtime:h,global:p}=e,v={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},d),r),realtime:Object.assign(Object.assign({},h),a),storage:{},global:Object.assign(Object.assign(Object.assign({},p),l),{headers:Object.assign(Object.assign({},(t=p?.headers)!==null&&t!==void 0?t:{}),(n=l?.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return i.accessToken?v.accessToken=i.accessToken:delete v.accessToken,v}function a4(i){const e=i?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(s4(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const YA="2.84.0",Ld=30*1e3,B1=3,qm=B1*Ld,o4="http://localhost:9999",l4="supabase.auth.token",u4={"X-Client-Info":`gotrue-js/${YA}`},F1="X-Supabase-Api-Version",KA={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},c4=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,d4=600*1e3;class Af extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function xt(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class h4 extends Af{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function f4(i){return xt(i)&&i.name==="AuthApiError"}class fc extends Af{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Cu extends Af{constructor(e,t,n,s){super(e,n,s),this.name=t,this.status=n}}class Jr extends Cu{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function p4(i){return xt(i)&&i.name==="AuthSessionMissingError"}class _d extends Cu{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Wp extends Cu{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Yp extends Cu{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function g4(i){return xt(i)&&i.name==="AuthImplicitGrantRedirectError"}class m5 extends Cu{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class U1 extends Cu{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Hm(i){return xt(i)&&i.name==="AuthRetryableFetchError"}class v5 extends Cu{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class j1 extends Cu{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const M0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),y5=` 	
\r=`.split(""),m4=(()=>{const i=new Array(128);for(let e=0;e<i.length;e+=1)i[e]=-1;for(let e=0;e<y5.length;e+=1)i[y5[e].charCodeAt(0)]=-2;for(let e=0;e<M0.length;e+=1)i[M0[e].charCodeAt(0)]=e;return i})();function b5(i,e,t){if(i!==null)for(e.queue=e.queue<<8|i,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(M0[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(M0[n]),e.queuedBits-=6}}function JA(i,e,t){const n=m4[i];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function w5(i){const e=[],t=a=>{e.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},r=a=>{b4(a,n,t)};for(let a=0;a<i.length;a+=1)JA(i.charCodeAt(a),s,r);return e.join("")}function v4(i,e){if(i<=127){e(i);return}else if(i<=2047){e(192|i>>6),e(128|i&63);return}else if(i<=65535){e(224|i>>12),e(128|i>>6&63),e(128|i&63);return}else if(i<=1114111){e(240|i>>18),e(128|i>>12&63),e(128|i>>6&63),e(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function y4(i,e){for(let t=0;t<i.length;t+=1){let n=i.charCodeAt(t);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(i.charCodeAt(t+1)-56320&65535|s)+65536,t+=1}v4(n,e)}}function b4(i,e,t){if(e.utf8seq===0){if(i<=127){t(i);return}for(let n=1;n<6;n+=1)if((i>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=i&31;else if(e.utf8seq===3)e.codepoint=i&15;else if(e.utf8seq===4)e.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|i&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function zd(i){const e=[],t={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<i.length;s+=1)JA(i.charCodeAt(s),t,n);return new Uint8Array(e)}function w4(i){const e=[];return y4(i,t=>e.push(t)),new Uint8Array(e)}function gc(i){const e=[],t={queue:0,queuedBits:0},n=s=>{e.push(s)};return i.forEach(s=>b5(s,t,n)),b5(null,t,n),e.join("")}function x4(i){return Math.round(Date.now()/1e3)+i}function _4(){return Symbol("auth-callback")}const Ls=()=>typeof window<"u"&&typeof document<"u",oc={tested:!1,writable:!1},XA=()=>{if(!Ls())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(oc.tested)return oc.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),oc.tested=!0,oc.writable=!0}catch{oc.tested=!0,oc.writable=!1}return oc.writable};function A4(i){const e={},t=new URL(i);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,r)=>{e[r]=s})}catch{}return t.searchParams.forEach((n,s)=>{e[s]=n}),e}const ZA=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),S4=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",Pd=async(i,e,t)=>{await i.setItem(e,JSON.stringify(t))},lc=async(i,e)=>{const t=await i.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},pu=async(i,e)=>{await i.removeItem(e)};class ig{constructor(){this.promise=new ig.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}ig.promiseConstructor=Promise;function zm(i){const e=i.split(".");if(e.length!==3)throw new j1("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!c4.test(e[n]))throw new j1("JWT not in base64url format");return{header:JSON.parse(w5(e[0])),payload:JSON.parse(w5(e[1])),signature:zd(e[2]),raw:{header:e[0],payload:e[1]}}}async function E4(i){return await new Promise(e=>{setTimeout(()=>e(null),i)})}function T4(i,e){return new Promise((n,s)=>{(async()=>{for(let r=0;r<1/0;r++)try{const a=await i(r);if(!e(r,null,a)){n(a);return}}catch(a){if(!e(r,a)){s(a);return}}})()})}function C4(i){return("0"+i.toString(16)).substr(-2)}function N4(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let s="";for(let r=0;r<56;r++)s+=t.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,C4).join("")}async function k4(i){const t=new TextEncoder().encode(i),n=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(n);return Array.from(s).map(r=>String.fromCharCode(r)).join("")}async function R4(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const t=await k4(i);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ad(i,e,t=!1){const n=N4();let s=n;t&&(s+="/PASSWORD_RECOVERY"),await Pd(i,`${e}-code-verifier`,s);const r=await R4(n);return[r,n===r?"plain":"s256"]}const L4=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function P4(i){const e=i.headers.get(F1);if(!e||!e.match(L4))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function I4(i){if(!i)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(i<=e)throw new Error("JWT has expired")}function M4(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const D4=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Sd(i){if(!D4.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Vm(){const i={};return new Proxy(i,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const n=t.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function O4(i,e){return new Proxy(i,{get:(t,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)"||r==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,n,s)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,n,s)}})}function x5(i){return JSON.parse(JSON.stringify(i))}const uc=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),B4=[502,503,504];async function _5(i){var e;if(!S4(i))throw new U1(uc(i),0);if(B4.includes(i.status))throw new U1(uc(i),i.status);let t;try{t=await i.json()}catch(r){throw new fc(uc(r),r)}let n;const s=P4(i);if(s&&s.getTime()>=KA["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new v5(uc(t),i.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Jr}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((r,a)=>r&&typeof a=="string",!0))throw new v5(uc(t),i.status,t.weak_password.reasons);throw new h4(uc(t),i.status||500,n)}const F4=(i,e,t,n)=>{const s={method:i,headers:e?.headers||{}};return i==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),t))};async function jt(i,e,t,n){var s;const r=Object.assign({},n?.headers);r[F1]||(r[F1]=KA["2024-01-01"].name),n?.jwt&&(r.Authorization=`Bearer ${n.jwt}`);const a=(s=n?.query)!==null&&s!==void 0?s:{};n?.redirectTo&&(a.redirect_to=n.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await U4(i,e,t+l,{headers:r,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(c):{data:Object.assign({},c),error:null}}async function U4(i,e,t,n,s,r){const a=F4(e,n,s,r);let l;try{l=await i(t,Object.assign({},a))}catch(c){throw console.error(c),new U1(uc(c),0)}if(l.ok||await _5(l),n?.noResolveJson)return l;try{return await l.json()}catch(c){await _5(c)}}function no(i){var e;let t=null;H4(i)&&(t=Object.assign({},i),i.expires_at||(t.expires_at=x4(i.expires_in)));const n=(e=i.user)!==null&&e!==void 0?e:i;return{data:{session:t,user:n},error:null}}function A5(i){const e=no(i);return!e.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=i.weak_password),e}function yu(i){var e;return{data:{user:(e=i.user)!==null&&e!==void 0?e:i},error:null}}function j4(i){return{data:i,error:null}}function q4(i){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:s,verification_type:r}=i,a=oh(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:n,redirect_to:s,verification_type:r},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function S5(i){return i}function H4(i){return i.access_token&&i.refresh_token&&i.expires_in}const Gm=["global","local","others"];class z4{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=ZA(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Gm[0]){if(Gm.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Gm.join(", ")}`);try{return await jt(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(xt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await jt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:yu})}catch(n){if(xt(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=oh(e,["options"]),s=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(s.new_email=n?.newEmail,delete s.newEmail),await jt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:q4,redirectTo:t?.redirectTo})}catch(t){if(xt(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await jt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:yu})}catch(t){if(xt(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,s,r,a,l,c;try{const d={nextPage:null,lastPage:0,total:0},h=await jt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(r=(s=e?.perPage)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:""},xform:S5});if(h.error)throw h.error;const p=await h.json(),v=(a=h.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(E=>{const S=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(E.split(";")[1].split("=")[1]);d[`${N}Page`]=S}),d.total=parseInt(v)),{data:Object.assign(Object.assign({},p),d),error:null}}catch(d){if(xt(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Sd(e);try{return await jt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:yu})}catch(t){if(xt(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Sd(e);try{return await jt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:yu})}catch(n){if(xt(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){Sd(e);try{return await jt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:yu})}catch(n){if(xt(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Sd(e.userId);try{const{data:t,error:n}=await jt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:n}}catch(t){if(xt(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Sd(e.userId),Sd(e.id);try{return{data:await jt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(xt(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,n,s,r,a,l,c;try{const d={nextPage:null,lastPage:0,total:0},h=await jt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(r=(s=e?.perPage)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:""},xform:S5});if(h.error)throw h.error;const p=await h.json(),v=(a=h.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(E=>{const S=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(E.split(";")[1].split("=")[1]);d[`${N}Page`]=S}),d.total=parseInt(v)),{data:Object.assign(Object.assign({},p),d),error:null}}catch(d){if(xt(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(e){try{return await jt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(xt(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await jt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(xt(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await jt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(xt(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await jt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(xt(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await jt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(xt(t))return{data:null,error:t};throw t}}}function E5(i={}){return{getItem:e=>i[e]||null,setItem:(e,t)=>{i[e]=t},removeItem:e=>{delete i[e]}}}const Ed={debug:!!(globalThis&&XA()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class QA extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class V4 extends QA{}async function G4(i,e,t){Ed.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Ed.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Ed.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,s.name);try{return await t()}finally{Ed.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,s.name)}}else{if(e===0)throw Ed.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new V4(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(Ed.debug)try{const r=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(r,null,"  "))}catch(r){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",r)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function $4(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function eS(i){if(!/^0x[a-fA-F0-9]{40}$/.test(i))throw new Error(`@supabase/auth-js: Address "${i}" is invalid.`);return i.toLowerCase()}function W4(i){return parseInt(i,16)}function Y4(i){const e=new TextEncoder().encode(i);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function K4(i){var e;const{chainId:t,domain:n,expirationTime:s,issuedAt:r=new Date,nonce:a,notBefore:l,requestId:c,resources:d,scheme:h,uri:p,version:v}=i;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((e=i.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${i.statement}`)}const m=eS(i.address),E=h?`${h}://${n}`:n,S=i.statement?`${i.statement}
`:"",N=`${E} wants you to sign in with your Ethereum account:
${m}

${S}`;let C=`URI: ${p}
Version: ${v}
Chain ID: ${t}${a?`
Nonce: ${a}`:""}
Issued At: ${r.toISOString()}`;if(s&&(C+=`
Expiration Time: ${s.toISOString()}`),l&&(C+=`
Not Before: ${l.toISOString()}`),c&&(C+=`
Request ID: ${c}`),d){let P=`
Resources:`;for(const L of d){if(!L||typeof L!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${L}`);P+=`
- ${L}`}C+=P}return`${N}
${C}`}class Qi extends Error{constructor({message:e,code:t,cause:n,name:s}){var r;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(r=s??(n instanceof Error?n.name:void 0))!==null&&r!==void 0?r:"Unknown Error",this.code=t}}class D0 extends Qi{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function J4({error:i,options:e}){var t,n,s;const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Qi({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else if(i.name==="ConstraintError"){if(((t=r.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new Qi({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:i});if(e.mediation==="conditional"&&((n=r.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Qi({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:i});if(((s=r.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Qi({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:i})}else{if(i.name==="InvalidStateError")return new Qi({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:i});if(i.name==="NotAllowedError")return new Qi({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="NotSupportedError")return r.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Qi({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:i}):new Qi({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:i});if(i.name==="SecurityError"){const a=window.location.hostname;if(tS(a)){if(r.rp.id!==a)return new Qi({message:`The RP ID "${r.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new Qi({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="TypeError"){if(r.user.id.byteLength<1||r.user.id.byteLength>64)return new Qi({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:i})}else if(i.name==="UnknownError")return new Qi({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new Qi({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}function X4({error:i,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Qi({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else{if(i.name==="NotAllowedError")return new Qi({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="SecurityError"){const n=window.location.hostname;if(tS(n)){if(t.rpId!==n)return new Qi({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new Qi({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="UnknownError")return new Qi({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new Qi({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}class Z4{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Q4=new Z4;function ek(i){if(!i)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(i);const{challenge:e,user:t,excludeCredentials:n}=i,s=oh(i,["challenge","user","excludeCredentials"]),r=zd(e).buffer,a=Object.assign(Object.assign({},t),{id:zd(t.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:r,user:a});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const d=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},d),{id:zd(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function tk(i){if(!i)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(i);const{challenge:e,allowCredentials:t}=i,n=oh(i,["challenge","allowCredentials"]),s=zd(e).buffer,r=Object.assign(Object.assign({},n),{challenge:s});if(t&&t.length>0){r.allowCredentials=new Array(t.length);for(let a=0;a<t.length;a++){const l=t[a];r.allowCredentials[a]=Object.assign(Object.assign({},l),{id:zd(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return r}function nk(i){var e;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const t=i;return{id:i.id,rawId:i.id,response:{attestationObject:gc(new Uint8Array(i.response.attestationObject)),clientDataJSON:gc(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function ik(i){var e;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const t=i,n=i.getClientExtensionResults(),s=i.response;return{id:i.id,rawId:i.id,response:{authenticatorData:gc(new Uint8Array(s.authenticatorData)),clientDataJSON:gc(new Uint8Array(s.clientDataJSON)),signature:gc(new Uint8Array(s.signature)),userHandle:s.userHandle?gc(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function tS(i){return i==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(i)}function T5(){var i,e;return!!(Ls()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((i=navigator?.credentials)===null||i===void 0?void 0:i.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function sk(i){try{const e=await navigator.credentials.create(i);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new D0("Browser returned unexpected credential type",e)}:{data:null,error:new D0("Empty credential response",e)}}catch(e){return{data:null,error:J4({error:e,options:i})}}}async function rk(i){try{const e=await navigator.credentials.get(i);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new D0("Browser returned unexpected credential type",e)}:{data:null,error:new D0("Empty credential response",e)}}catch(e){return{data:null,error:X4({error:e,options:i})}}}const ak={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},ok={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function O0(...i){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),t=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of i)if(s)for(const r in s){const a=s[r];if(a!==void 0)if(Array.isArray(a))n[r]=a;else if(t(a))n[r]=a;else if(e(a)){const l=n[r];e(l)?n[r]=O0(l,a):n[r]=O0(a)}else n[r]=a}return n}function lk(i,e){return O0(ak,i,e||{})}function uk(i,e){return O0(ok,i,e||{})}class ck{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:n,signal:s},r){try{const{data:a,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!a)return{data:null,error:l};const c=s??Q4.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:d}=a.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${n}`),d.displayName||(d.displayName=d.name)}switch(a.webauthn.type){case"create":{const d=lk(a.webauthn.credential_options.publicKey,r?.create),{data:h,error:p}=await sk({publicKey:d,signal:c});return h?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}case"request":{const d=uk(a.webauthn.credential_options.publicKey,r?.request),{data:h,error:p}=await rk(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:d,signal:c}));return h?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}}}catch(a){return xt(a)?{data:null,error:a}:{data:null,error:new fc("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:t,webauthn:n}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},r){if(!t)return{data:null,error:new Af("rpId is required for WebAuthn authentication")};try{if(!T5())return{data:null,error:new fc("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:n},signal:s},{request:r});if(!a)return{data:null,error:l};const{webauthn:c}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:c.type,rpId:t,rpOrigins:n,credential_response:c.credential_response}})}catch(a){return xt(a)?{data:null,error:a}:{data:null,error:new fc("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},r){if(!t)return{data:null,error:new Af("rpId is required for WebAuthn registration")};try{if(!T5())return{data:null,error:new fc("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(h=>{var p;return(p=h.data)===null||p===void 0?void 0:p.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===e&&v.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h?.id}):void 0),{data:null,error:l};const{data:c,error:d}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:t,rpOrigins:n},signal:s},{create:r});return c?this._verify({factorId:a.id,challengeId:c.challengeId,webauthn:{rpId:t,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:d}}catch(a){return xt(a)?{data:null,error:a}:{data:null,error:new fc("Unexpected error in register",a)}}}}$4();const dk={url:o4,storageKey:l4,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:u4,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function C5(i,e,t){return await t()}const Td={};class Sf{get jwks(){var e,t;return(t=(e=Td[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Td[this.storageKey]=Object.assign(Object.assign({},Td[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Td[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Td[this.storageKey]=Object.assign(Object.assign({},Td[this.storageKey]),{cachedAt:e})}constructor(e){var t,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const r=Object.assign(Object.assign({},dk),e);if(this.storageKey=r.storageKey,this.instanceID=(t=Sf.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,Sf.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.instanceID>0&&Ls()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=r.persistSession,this.autoRefreshToken=r.autoRefreshToken,this.admin=new z4({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=ZA(r.fetch),this.lock=r.lock||C5,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,this.throwOnError=r.throwOnError,r.lock?this.lock=r.lock:Ls()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=G4:this.lock=C5,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new ck(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:XA()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=E5(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=E5(this.memoryStorage)),Ls()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${YA}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},n="none";if(Ls()&&(t=A4(window.location.href),this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce")),Ls()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:r}=await this._getSessionFromURL(t,n);if(r){if(this._debug("#_initialize()","error detecting session from URL",r),g4(r)){const c=(e=r.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:r}}return await this._removeSession(),{error:r}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return xt(t)?this._returnResult({error:t}):this._returnResult({error:new fc("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,s;try{const r=await jt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e?.options)===null||s===void 0?void 0:s.captchaToken}},xform:no}),{data:a,error:l}=r;if(l||!a)return this._returnResult({data:{user:null,session:null},error:l});const c=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(r){if(xt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signUp(e){var t,n,s;try{let r;if("email"in e){const{email:h,password:p,options:v}=e;let m=null,E=null;this.flowType==="pkce"&&([m,E]=await Ad(this.storage,this.storageKey)),r=await jt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:h,password:p,data:(t=v?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:m,code_challenge_method:E},xform:no})}else if("phone"in e){const{phone:h,password:p,options:v}=e;r=await jt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:p,data:(n=v?.data)!==null&&n!==void 0?n:{},channel:(s=v?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:no})}else throw new Wp("You must provide either an email or phone number and a password");const{data:a,error:l}=r;if(l||!a)return this._returnResult({data:{user:null,session:null},error:l});const c=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(r){if(xt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithPassword(e){try{let t;if("email"in e){const{email:r,password:a,options:l}=e;t=await jt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:A5})}else if("phone"in e){const{phone:r,password:a,options:l}=e;t=await jt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:A5})}else throw new Wp("You must provide either an email or phone number and a password");const{data:n,error:s}=t;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const r=new _d;return this._returnResult({data:{user:null,session:null},error:r})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(t){if(xt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,n,s,r;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(r=e.options)===null||r===void 0?void 0:r.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,n,s,r,a,l,c,d,h,p,v;let m,E;if("message"in e)m=e.message,E=e.signature;else{const{chain:S,wallet:N,statement:C,options:P}=e;let L;if(Ls())if(typeof N=="object")L=N;else{const j=window;if("ethereum"in j&&typeof j.ethereum=="object"&&"request"in j.ethereum&&typeof j.ethereum.request=="function")L=j.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!P?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");L=N}const O=new URL((t=P?.url)!==null&&t!==void 0?t:window.location.href),q=await L.request({method:"eth_requestAccounts"}).then(j=>j).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!q||q.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const G=eS(q[0]);let W=(n=P?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!W){const j=await L.request({method:"eth_chainId"});W=W4(j)}const K={domain:O.host,address:G,statement:C,uri:O.href,version:"1",chainId:W,nonce:(s=P?.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(r=P?.signInWithEthereum)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(l=P?.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=P?.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(d=P?.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(h=P?.signInWithEthereum)===null||h===void 0?void 0:h.resources};m=K4(K),E=await L.request({method:"personal_sign",params:[Y4(m),G]})}try{const{data:S,error:N}=await jt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:E},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:no});if(N)throw N;if(!S||!S.session||!S.user){const C=new _d;return this._returnResult({data:{user:null,session:null},error:C})}return S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),this._returnResult({data:Object.assign({},S),error:N})}catch(S){if(xt(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async signInWithSolana(e){var t,n,s,r,a,l,c,d,h,p,v,m;let E,S;if("message"in e)E=e.message,S=e.signature;else{const{chain:N,wallet:C,statement:P,options:L}=e;let O;if(Ls())if(typeof C=="object")O=C;else{const G=window;if("solana"in G&&typeof G.solana=="object"&&("signIn"in G.solana&&typeof G.solana.signIn=="function"||"signMessage"in G.solana&&typeof G.solana.signMessage=="function"))O=G.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!L?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=C}const q=new URL((t=L?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in O&&O.signIn){const G=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},L?.signInWithSolana),{version:"1",domain:q.host,uri:q.href}),P?{statement:P}:null));let W;if(Array.isArray(G)&&G[0]&&typeof G[0]=="object")W=G[0];else if(G&&typeof G=="object"&&"signedMessage"in G&&"signature"in G)W=G;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in W&&"signature"in W&&(typeof W.signedMessage=="string"||W.signedMessage instanceof Uint8Array)&&W.signature instanceof Uint8Array)E=typeof W.signedMessage=="string"?W.signedMessage:new TextDecoder().decode(W.signedMessage),S=W.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");E=[`${q.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...P?["",P,""]:[""],"Version: 1",`URI: ${q.href}`,`Issued At: ${(s=(n=L?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((r=L?.signInWithSolana)===null||r===void 0)&&r.notBefore?[`Not Before: ${L.signInWithSolana.notBefore}`]:[],...!((a=L?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${L.signInWithSolana.expirationTime}`]:[],...!((l=L?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${L.signInWithSolana.chainId}`]:[],...!((c=L?.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${L.signInWithSolana.nonce}`]:[],...!((d=L?.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${L.signInWithSolana.requestId}`]:[],...!((p=(h=L?.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||p===void 0)&&p.length?["Resources",...L.signInWithSolana.resources.map(W=>`- ${W}`)]:[]].join(`
`);const G=await O.signMessage(new TextEncoder().encode(E),"utf8");if(!G||!(G instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=G}}try{const{data:N,error:C}=await jt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:E,signature:gc(S)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:no});if(C)throw C;if(!N||!N.session||!N.user){const P=new _d;return this._returnResult({data:{user:null,session:null},error:P})}return N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),this._returnResult({data:Object.assign({},N),error:C})}catch(N){if(xt(N))return this._returnResult({data:{user:null,session:null},error:N});throw N}}async _exchangeCodeForSession(e){const t=await lc(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(t??"").split("/");try{const{data:r,error:a}=await jt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:no});if(await pu(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!r||!r.session||!r.user){const l=new _d;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign(Object.assign({},r),{redirectType:s??null}),error:a})}catch(r){if(xt(r))return this._returnResult({data:{user:null,session:null,redirectType:null},error:r});throw r}}async signInWithIdToken(e){try{const{options:t,provider:n,token:s,access_token:r,nonce:a}=e,l=await jt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:r,nonce:a,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:no}),{data:c,error:d}=l;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c||!c.session||!c.user){const h=new _d;return this._returnResult({data:{user:null,session:null},error:h})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:d})}catch(t){if(xt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,n,s,r,a;try{if("email"in e){const{email:l,options:c}=e;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await Ad(this.storage,this.storageKey));const{error:p}=await jt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=c?.data)!==null&&t!==void 0?t:{},create_user:(n=c?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:c?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:h}=await jt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c?.data)!==null&&s!==void 0?s:{},create_user:(r=c?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(a=c?.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d?.message_id},error:h})}throw new Wp("You must provide either an email or phone number.")}catch(l){if(xt(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(e){var t,n;try{let s,r;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,r=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:l}=await jt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:r}}),redirectTo:s,xform:no});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,d=a.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(s){if(xt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var t,n,s,r,a;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await Ad(this.storage,this.storageKey));const d=await jt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:j4});return!((r=d.data)===null||r===void 0)&&r.url&&Ls()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(l){if(xt(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Jr;const{error:s}=await jt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(xt(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:r}=e,{error:a}=await jt(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:r?.captchaToken}},redirectTo:r?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:n,type:s,options:r}=e,{data:a,error:l}=await jt(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:r?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a?.message_id},error:l})}throw new Wp("You must provide either an email or phone number and a type")}catch(t){if(xt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await lc(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<qm:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const a=await lc(this.userStorage,this.storageKey+"-user");a?.user?e.user=a.user:e.user=Vm()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=O4(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:r}=await this._callRefreshToken(e.refresh_token);return r?this._returnResult({data:{session:null},error:r}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await jt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:yu}):await this._useSession(async t=>{var n,s,r;const{data:a,error:l}=t;if(l)throw l;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Jr}:await jt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(r=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:void 0,xform:yu})})}catch(t){if(xt(t))return p4(t)&&(await this._removeSession(),await pu(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:s,error:r}=n;if(r)throw r;if(!s.session)throw new Jr;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Ad(this.storage,this.storageKey));const{data:d,error:h}=await jt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:yu});if(h)throw h;return a.user=d.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(n){if(xt(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Jr;const t=Date.now()/1e3;let n=t,s=!0,r=null;const{payload:a}=zm(e.access_token);if(a.exp&&(n=a.exp,s=n<=t),s){const{data:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};r=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;r={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)}return this._returnResult({data:{user:r.user,session:r},error:null})}catch(t){if(xt(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:a,error:l}=t;if(l)throw l;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!e?.refresh_token)throw new Jr;const{data:s,error:r}=await this._callRefreshToken(e.refresh_token);return r?this._returnResult({data:{user:null,session:null},error:r}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(xt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!Ls())throw new Yp("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Yp(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new m5("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Yp("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new m5("No code detected.");const{data:P,error:L}=await this._exchangeCodeForSession(e.code);if(L)throw L;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:P.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:r,refresh_token:a,expires_in:l,expires_at:c,token_type:d}=e;if(!r||!l||!a||!d)throw new Yp("No session defined in URL");const h=Math.round(Date.now()/1e3),p=parseInt(l);let v=h+p;c&&(v=parseInt(c));const m=v-h;m*1e3<=Ld&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${p}s`);const E=v-p;h-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,v,h):h-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,v,h);const{data:S,error:N}=await this._getUser(r);if(N)throw N;const C={provider_token:n,provider_refresh_token:s,access_token:r,expires_in:p,expires_at:v,refresh_token:a,token_type:d,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:C,redirectType:e.type},error:null})}catch(n){if(xt(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await lc(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:s,error:r}=t;if(r)return this._returnResult({error:r});const a=(n=s.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:l}=await this.admin.signOut(a,e);if(l&&!(f4(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return e!=="others"&&(await this._removeSession(),await pu(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=_4(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,s;try{const{data:{session:r},error:a}=t;if(a)throw a;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(r){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",r),console.error(r)}})}async resetPasswordForEmail(e,t={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Ad(this.storage,this.storageKey,!0));try{return await jt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(r){if(xt(r))return this._returnResult({data:null,error:r});throw r}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(xt(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:n,error:s}=await this._useSession(async r=>{var a,l,c,d,h;const{data:p,error:v}=r;if(v)throw v;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await jt(this.fetch,"GET",m,{headers:this.headers,jwt:(h=(d=p.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(s)throw s;return Ls()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n?.url),this._returnResult({data:{provider:e.provider,url:n?.url},error:null})}catch(n){if(xt(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var n;try{const{error:s,data:{session:r}}=t;if(s)throw s;const{options:a,provider:l,token:c,access_token:d,nonce:h}=e,p=await jt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=r?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:d,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:no}),{data:v,error:m}=p;return m?this._returnResult({data:{user:null,session:null},error:m}):!v||!v.session||!v.user?this._returnResult({data:{user:null,session:null},error:new _d}):(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),this._returnResult({data:v,error:m}))}catch(s){if(xt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,s;const{data:r,error:a}=t;if(a)throw a;return await jt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(xt(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await T4(async s=>(s>0&&await E4(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await jt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:no})),(s,r)=>{const a=200*Math.pow(2,s);return r&&Hm(r)&&Date.now()+a-n<Ld})}catch(n){if(this._debug(t,"error",n),xt(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Ls()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await lc(this.storage,this.storageKey);if(s&&this.userStorage){let a=await lc(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await Pd(this.userStorage,this.storageKey+"-user",a)),s.user=(e=a?.user)!==null&&e!==void 0?e:Vm()}else if(s&&!s.user&&!s.user){const a=await lc(this.storage,this.storageKey+"-user");a&&a?.user?(s.user=a.user,await pu(this.storage,this.storageKey+"-user"),await Pd(this.storage,this.storageKey,s)):s.user=Vm()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const r=((t=s.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<qm;if(this._debug(n,`session has${r?"":" not"} expired with margin of ${qm}s`),r){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),Hm(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(s.access_token);!l&&a?.user?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(n,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new Jr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new ig;const{data:r,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!r.session)throw new Jr;await this._saveSession(r.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",r.session);const l={data:r.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(r){if(this._debug(s,"error",r),xt(r)){const a={data:null,error:r};return Hm(r)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(r),r}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(c){r.push(c)}});if(await Promise.all(a),r.length>0){for(let l=0;l<r.length;l+=1)console.error(r[l]);throw r[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&t.user&&await Pd(this.userStorage,this.storageKey+"-user",{user:t.user});const s=Object.assign({},t);delete s.user;const r=x5(s);await Pd(this.storage,this.storageKey,r)}else{const s=x5(t);await Pd(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await pu(this.storage,this.storageKey),await pu(this.storage,this.storageKey+"-code-verifier"),await pu(this.storage,this.storageKey+"-user"),this.userStorage&&await pu(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ls()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ld);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/Ld);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ld}ms, refresh threshold is ${B1} ticks`),s<=B1&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof QA)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ls()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const s=[`provider=${encodeURIComponent(t)}`];if(n?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[r,a]=await Ad(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(r)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(n?.queryParams){const r=new URLSearchParams(n.queryParams);s.push(r.toString())}return n?.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:s,error:r}=t;return r?this._returnResult({data:null,error:r}):await jt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(xt(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,s;const{data:r,error:a}=t;if(a)return this._returnResult({data:null,error:a});const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:d}=await jt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=r?.session)===null||n===void 0?void 0:n.access_token});return d?this._returnResult({data:null,error:d}):(e.factorType==="totp"&&c.type==="totp"&&(!((s=c?.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(t){if(xt(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:r}=t;if(r)return this._returnResult({data:null,error:r});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?nk(e.webauthn.credential_response):ik(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:c}=await jt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(t){if(xt(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:r}=t;if(r)return this._returnResult({data:null,error:r});const a=await jt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token});if(a.error)return a;const{data:l}=a;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:ek(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:tk(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(xt(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const r of(e=t?.factors)!==null&&e!==void 0?e:[])s.all.push(r),r.status==="verified"&&s[r.factor_type].push(r);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:r}=zm(n.access_token);let a=null;r.aal&&(a=r.aal);let l=a;((t=(e=n.user.factors)===null||e===void 0?void 0:e.filter(h=>h.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(l="aal2");const d=r.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:n},error:s}=t;return s?this._returnResult({data:null,error:s}):n?await jt(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:r=>({data:r,error:null})}):this._returnResult({data:null,error:new Jr})})}catch(t){if(xt(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:s},error:r}=n;if(r)return this._returnResult({data:null,error:r});if(!s)return this._returnResult({data:null,error:new Jr});const a=await jt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&Ls()&&!t?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(n){if(xt(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:s},error:r}=n;if(r)return this._returnResult({data:null,error:r});if(!s)return this._returnResult({data:null,error:new Jr});const a=await jt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&Ls()&&!t?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(n){if(xt(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;return n?this._returnResult({data:null,error:n}):t?await jt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Jr})})}catch(e){if(xt(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:n},error:s}=t;return s?this._returnResult({data:null,error:s}):n?await jt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new Jr})})}catch(t){if(xt(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(l=>l.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+d4>s)return n;const{data:r,error:a}=await jt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!r.keys||r.keys.length===0||(this.jwks=r,this.jwks_cached_at=s,n=r.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,t={}){try{let n=e;if(!n){const{data:m,error:E}=await this.getSession();if(E||!m.session)return this._returnResult({data:null,error:E});n=m.session.access_token}const{header:s,payload:r,signature:a,raw:{header:l,payload:c}}=zm(n);t?.allowExpired||I4(r.exp);const d=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!d){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:r,header:s,signature:a},error:null}}const h=M4(s.alg),p=await crypto.subtle.importKey("jwk",d,h,!0,["verify"]);if(!await crypto.subtle.verify(h,p,a,w4(`${l}.${c}`)))throw new j1("Invalid JWT signature");return{data:{claims:r,header:s,signature:a},error:null}}catch(n){if(xt(n))return this._returnResult({data:null,error:n});throw n}}}Sf.nextInstanceID={};const hk=Sf;class fk extends hk{constructor(e){super(e)}}class pk{constructor(e,t,n){var s,r,a;this.supabaseUrl=e,this.supabaseKey=t;const l=a4(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:ZN,realtime:e4,auth:Object.assign(Object.assign({},QN),{storageKey:c}),global:XN},h=r4(n??{},d);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(r=h.global.headers)!==null&&r!==void 0?r:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(p,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=h.auth)!==null&&a!==void 0?a:{},this.headers,h.global.fetch),this.fetch=i4(t,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.accessToken&&this.accessToken().then(p=>this.realtime.setAuth(p)).catch(p=>console.warn("Failed to set initial Realtime auth token:",p)),this.rest=new oN(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new YN(this.storageUrl.href,this.headers,this.fetch,n?.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new iN(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,userStorage:r,storageKey:a,flowType:l,lock:c,debug:d,throwOnError:h},p,v){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new fk({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),p),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,userStorage:r,flowType:l,lock:c,debug:d,throwOnError:h,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(E=>E.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new SN(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n?.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const gk=(i,e,t)=>new pk(i,e,t);function mk(){if(typeof window<"u"||typeof process>"u")return!1;const i=process.version;if(i==null)return!1;const e=i.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}mk()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Kp={BASE_URL:"/transcriber-app/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_KEY:"AIzaSyAsUHH0VyT_kYUGinuA-g0V2yVucmXjuHs",VITE_OPENAI_API_KEY:"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",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVyYmNrY2Rkc2NvYWFwY2x5a3d3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM3NDUyMzAsImV4cCI6MjA3OTMyMTIzMH0.cB9DR4CJ5DUA8iASr1lgwreud3X_CkZRijwRS8wgp9s",VITE_SUPABASE_URL:"https://urbckcddscoaapclykww.supabase.co"};var $m={};const B0=i=>{let e;try{typeof import.meta<"u"&&Kp&&(e=Kp[i]||Kp[`VITE_${i}`]||Kp[`REACT_APP_${i}`])}catch{}if(e)return e;try{typeof process<"u"&&$m&&(e=$m[i]||$m[`REACT_APP_${i}`])}catch{}return e},vk=B0("SUPABASE_URL")||B0("REACT_APP_SUPABASE_URL")||"https://placeholder.supabase.co",yk=B0("SUPABASE_ANON_KEY")||B0("REACT_APP_SUPABASE_ANON_KEY")||"placeholder",cs=gk(vk,yk),Jp={signIn:async(i,e)=>{const{data:t,error:n}=await cs.auth.signInWithPassword({email:i,password:e});if(n)throw n;if(!t.user)throw new Error("No se pudo obtener el usuario");return{id:t.user.id,email:t.user.email||"",name:t.user.user_metadata?.name||t.user.email?.split("@")[0],avatarUrl:t.user.user_metadata?.avatar_url}},signUp:async(i,e,t)=>{const{data:n,error:s}=await cs.auth.signUp({email:i,password:e,options:{data:{name:t||i.split("@")[0]}}});if(s)throw s;if(!n.user)throw new Error("No se pudo crear el usuario");return{id:n.user.id,email:n.user.email||"",name:n.user.user_metadata?.name||t||i.split("@")[0]}},signOut:async()=>{const{error:i}=await cs.auth.signOut();if(i)throw i},getCurrentUser:async()=>{const{data:{session:i}}=await cs.auth.getSession();return i?.user?{id:i.user.id,email:i.user.email||"",name:i.user.user_metadata?.name||i.user.email?.split("@")[0],avatarUrl:i.user.user_metadata?.avatar_url}:null}},nS=me.createContext(void 0);function bk({children:i}){const[e,t]=me.useState(null),[n,s]=me.useState(!0);me.useEffect(()=>{(async()=>{try{const d=await Jp.getCurrentUser();t(d)}catch(d){console.error("Auth initialization error:",d)}finally{s(!1)}})()},[]);const r=async(c,d)=>{const h=await Jp.signIn(c,d);t(h)},a=async(c,d,h)=>{await Jp.signUp(c,d,h)},l=async()=>{await Jp.signOut(),t(null)};return x.jsx(nS.Provider,{value:{user:e,loading:n,signIn:r,signUp:a,signOut:l},children:i})}const Bf=()=>{const i=me.useContext(nS);if(i===void 0)throw new Error("useAuth must be used within an AuthProvider");return i};var iS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},N5=_u.createContext&&_u.createContext(iS),wk=["attr","size","title"];function xk(i,e){if(i==null)return{};var t=_k(i,e),n,s;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);for(s=0;s<r.length;s++)n=r[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(t[n]=i[n])}return t}function _k(i,e){if(i==null)return{};var t={};for(var n in i)if(Object.prototype.hasOwnProperty.call(i,n)){if(e.indexOf(n)>=0)continue;t[n]=i[n]}return t}function F0(){return F0=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},F0.apply(this,arguments)}function k5(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),t.push.apply(t,n)}return t}function U0(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?k5(Object(t),!0).forEach(function(n){Ak(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):k5(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function Ak(i,e,t){return e=Sk(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function Sk(i){var e=Ek(i,"string");return typeof e=="symbol"?e:e+""}function Ek(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function sS(i){return i&&i.map((e,t)=>_u.createElement(e.tag,U0({key:t},e.attr),sS(e.child)))}function Dt(i){return e=>_u.createElement(Tk,F0({attr:U0({},i.attr)},e),sS(i.child))}function Tk(i){var e=t=>{var{attr:n,size:s,title:r}=i,a=xk(i,wk),l=s||t.size||"1em",c;return t.className&&(c=t.className),i.className&&(c=(c?c+" ":"")+i.className),_u.createElement("svg",F0({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,a,{className:c,style:U0(U0({color:i.color||t.color},t.style),i.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),r&&_u.createElement("title",null,r),i.children)};return N5!==void 0?_u.createElement(N5.Consumer,null,t=>e(t)):e(iS)}function Ff(i){return Dt({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"},child:[]}]})(i)}function Ck(i){return Dt({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z",clipRule:"evenodd"},child:[]}]})(i)}function Nk(i){return Dt({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z",clipRule:"evenodd"},child:[]},{tag:"path",attr:{d:"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"},child:[]}]})(i)}function R5(i){return Dt({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z",clipRule:"evenodd"},child:[]}]})(i)}function kk(i){return Dt({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M3.478 2.404a.75.75 0 0 0-.926.941l2.432 7.905H13.5a.75.75 0 0 1 0 1.5H4.984l-2.432 7.905a.75.75 0 0 0 .926.94 60.519 60.519 0 0 0 18.445-8.986.75.75 0 0 0 0-1.218A60.517 60.517 0 0 0 3.478 2.404Z"},child:[]}]})(i)}function Rk(i){return Dt({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"},child:[]}]})(i)}function Nl(i){return Dt({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9 4.5a.75.75 0 0 1 .721.544l.813 2.846a3.75 3.75 0 0 0 2.576 2.576l2.846.813a.75.75 0 0 1 0 1.442l-2.846.813a3.75 3.75 0 0 0-2.576 2.576l-.813 2.846a.75.75 0 0 1-1.442 0l-.813-2.846a3.75 3.75 0 0 0-2.576-2.576l-2.846-.813a.75.75 0 0 1 0-1.442l2.846-.813A3.75 3.75 0 0 0 7.466 7.89l.813-2.846A.75.75 0 0 1 9 4.5ZM18 1.5a.75.75 0 0 1 .728.568l.258 1.036c.236.94.97 1.674 1.91 1.91l1.036.258a.75.75 0 0 1 0 1.456l-1.036.258c-.94.236-1.674.97-1.91 1.91l-.258 1.036a.75.75 0 0 1-1.456 0l-.258-1.036a2.625 2.625 0 0 0-1.91-1.91l-1.036-.258a.75.75 0 0 1 0-1.456l1.036-.258a2.625 2.625 0 0 0 1.91-1.91l.258-1.036A.75.75 0 0 1 18 1.5ZM16.5 15a.75.75 0 0 1 .712.513l.394 1.183c.15.447.5.799.948.948l1.183.395a.75.75 0 0 1 0 1.422l-1.183.395c-.447.15-.799.5-.948.948l-.395 1.183a.75.75 0 0 1-1.422 0l-.395-1.183a1.5 1.5 0 0 0-.948-.948l-1.183-.395a.75.75 0 0 1 0-1.422l1.183-.395c.447-.15.799-.5.948-.948l.395-1.183A.75.75 0 0 1 16.5 15Z",clipRule:"evenodd"},child:[]}]})(i)}function Lk(i){return Dt({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z",clipRule:"evenodd"},child:[]}]})(i)}function rS(i){return Dt({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"},child:[]}]})(i)}function Ec(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"},child:[]}]})(i)}function Pk(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0M3.124 7.5A8.969 8.969 0 0 1 5.292 3m13.416 0a8.969 8.969 0 0 1 2.168 4.5"},child:[]}]})(i)}function aS(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"},child:[]}]})(i)}function Ik(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 15.75V18m-7.5-6.75h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V13.5Zm0 2.25h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V18Zm2.498-6.75h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V13.5Zm0 2.25h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V18Zm2.504-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5Zm0 2.25h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V18Zm2.498-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5ZM8.25 6h7.5v2.25h-7.5V6ZM12 2.25c-1.892 0-3.758.11-5.593.322C5.307 2.7 4.5 3.65 4.5 4.757V19.5a2.25 2.25 0 0 0 2.25 2.25h10.5a2.25 2.25 0 0 0 2.25-2.25V4.757c0-1.108-.806-2.057-1.907-2.185A48.507 48.507 0 0 0 12 2.25Z"},child:[]}]})(i)}function Mk(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"},child:[]}]})(i)}function j0(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"},child:[]}]})(i)}function oS(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 0 1 .865-.501 48.172 48.172 0 0 0 3.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"},child:[]}]})(i)}function lS(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"},child:[]}]})(i)}function Ef(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"},child:[]}]})(i)}function uS(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"},child:[]}]})(i)}function q1(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"},child:[]}]})(i)}function Dk(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9.75v6.75m0 0-3-3m3 3 3-3m-8.25 6a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"},child:[]}]})(i)}function Ok(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16.5V9.75m0 0 3 3m-3-3-3 3M6.75 19.5a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"},child:[]}]})(i)}function Gv(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"},child:[]},{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"},child:[]}]})(i)}function Bk(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"},child:[]}]})(i)}function H1(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 0 0 2.25-2.25V6.75a2.25 2.25 0 0 0-2.25-2.25H6.75A2.25 2.25 0 0 0 4.5 6.75v10.5a2.25 2.25 0 0 0 2.25 2.25Zm.75-12h9v9h-9v-9Z"},child:[]}]})(i)}function cS(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"},child:[]}]})(i)}function uf(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"},child:[]}]})(i)}function Au(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"},child:[]}]})(i)}function b0(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"},child:[]}]})(i)}function z1(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"},child:[]}]})(i)}function L5(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"},child:[]}]})(i)}function P5(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"},child:[]},{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"},child:[]}]})(i)}function Fk(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"},child:[]}]})(i)}function I5(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"},child:[]}]})(i)}function Tf(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"},child:[]}]})(i)}function V1(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"},child:[]}]})(i)}function Uk(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"m10.5 21 5.25-11.25L21 21m-9-3h7.5M3 5.621a48.474 48.474 0 0 1 6-.371m0 0c1.12 0 2.233.038 3.334.114M9 5.25V3m3.334 2.364C11.176 10.658 7.69 15.08 3 17.502m9.334-12.138c.896.061 1.785.147 2.666.257m-4.589 8.495a18.023 18.023 0 0 1-3.827-5.802"},child:[]}]})(i)}function jk(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"},child:[]}]})(i)}function qk(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"},child:[]}]})(i)}function Hk(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"},child:[]}]})(i)}function M5(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"},child:[]}]})(i)}function dS(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"},child:[]}]})(i)}function zk(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75Z"},child:[]}]})(i)}function Vk(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 17.25v-.228a4.5 4.5 0 0 0-.12-1.03l-2.268-9.64a3.375 3.375 0 0 0-3.285-2.602H7.923a3.375 3.375 0 0 0-3.285 2.602l-2.268 9.64a4.5 4.5 0 0 0-.12 1.03v.228m19.5 0a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3m19.5 0a3 3 0 0 0-3-3H5.25a3 3 0 0 0-3 3m16.5 0h.008v.008h-.008v-.008Zm-3 0h.008v.008h-.008v-.008Z"},child:[]}]})(i)}function Gk(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"},child:[]}]})(i)}function $k(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"},child:[]}]})(i)}function q0(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h7.5c.621 0 1.125-.504 1.125-1.125m-9.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-7.5A1.125 1.125 0 0 1 12 18.375m9.75-12.75c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125m19.5 0v1.5c0 .621-.504 1.125-1.125 1.125M2.25 5.625v1.5c0 .621.504 1.125 1.125 1.125m0 0h17.25m-17.25 0h7.5c.621 0 1.125.504 1.125 1.125M3.375 8.25c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m17.25-3.75h-7.5c-.621 0-1.125.504-1.125 1.125m8.625-1.125c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M12 10.875v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125M13.125 12h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125M20.625 12c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5M12 14.625v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 14.625c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m0 1.5v-1.5m0 0c0-.621.504-1.125 1.125-1.125m0 0h7.5"},child:[]}]})(i)}function $v(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"},child:[]},{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"},child:[]}]})(i)}function hS(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"},child:[]}]})(i)}function Wk(i){return Dt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M304 336v40a40 40 0 0 1-40 40H104a40 40 0 0 1-40-40V136a40 40 0 0 1 40-40h152c22.09 0 48 17.91 48 40v40m64 160 80-80-80-80m-192 80h256"},child:[]}]})(i)}function Yk(){const{user:i,signOut:e}=Bf(),t=({isActive:n})=>`flex items-center gap-2 px-4 py-2.5 text-sm font-semibold rounded-xl transition-all duration-200 cursor-pointer ${n?"text-blue-700 bg-blue-50 shadow-sm ring-1 ring-blue-100 dark:bg-blue-500/10 dark:text-blue-400 dark:ring-blue-500/20":"text-slate-500 hover:text-slate-900 hover:bg-slate-50 dark:text-gray-400 dark:hover:text-gray-100 dark:hover:bg-gray-800"}`;return x.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 w-full border-b border-gray-200/60 bg-white/90 backdrop-blur-md transition-all dark:bg-[#111827]/90 dark:border-gray-800",children:x.jsxs("div",{className:"mx-auto flex h-20 max-w-7xl items-center justify-between px-6 md:px-8",children:[x.jsxs(of,{to:"/transcribe",className:"flex items-center gap-3.5 select-none cursor-pointer group",children:[x.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-xl bg-[#2563EB] text-white shadow-lg shadow-blue-600/20 transition-transform group-hover:scale-105 dark:shadow-blue-900/40",children:x.jsx(Nk,{className:"h-6 w-6"})}),x.jsxs("div",{className:"flex flex-col",children:[x.jsx("h1",{className:"text-xl font-bold tracking-tight text-slate-900 leading-none dark:text-gray-100",children:"Auto Transcriptor"}),x.jsx("p",{className:"mt-1 text-[11px] font-medium uppercase tracking-wider text-slate-500 dark:text-gray-400",children:"IA para Procesos Judiciales"})]})]}),x.jsxs("nav",{className:"hidden md:flex items-center gap-2 bg-white/50 p-1.5 rounded-2xl border border-gray-100 shadow-sm dark:bg-gray-800/50 dark:border-gray-700",children:[x.jsx(of,{to:"/transcribe",className:t,children:({isActive:n})=>x.jsxs(x.Fragment,{children:[x.jsx(Au,{className:`w-5 h-5 ${n?"text-blue-600 dark:text-blue-400":""}`}),"Transcribir"]})}),x.jsx(of,{to:"/history",className:t,children:({isActive:n})=>x.jsxs(x.Fragment,{children:[x.jsx(uS,{className:`w-5 h-5 ${n?"text-blue-600 dark:text-blue-400":""}`}),"Mis Expedientes"]})}),x.jsx(of,{to:"/settings",className:t,children:({isActive:n})=>x.jsxs(x.Fragment,{children:[x.jsx(Gv,{className:`w-5 h-5 ${n?"text-blue-600 dark:text-blue-400":""}`}),"Configuracin"]})})]}),i&&x.jsxs("div",{className:"flex items-center gap-5",children:[x.jsxs("div",{className:"flex items-center gap-3 pl-5 border-l border-gray-200 dark:border-gray-700",children:[x.jsxs("div",{className:"hidden lg:block text-right",children:[x.jsx("p",{className:"text-sm font-semibold text-slate-900 leading-tight dark:text-gray-100",children:i.name||"Usuario"}),x.jsxs("div",{className:"flex items-center justify-end gap-1.5 mt-0.5",children:[x.jsxs("span",{className:"relative flex h-2 w-2",children:[x.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),x.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-emerald-500"})]}),x.jsx("span",{className:"text-[10px] font-medium text-emerald-600 uppercase tracking-wide dark:text-emerald-400",children:"Conectado"})]})]}),x.jsx("div",{className:"relative h-10 w-10 overflow-hidden rounded-full border-2 border-white bg-slate-100 shadow-sm ring-2 ring-transparent hover:ring-blue-100 transition-all cursor-pointer dark:border-gray-700 dark:bg-gray-800 dark:hover:ring-blue-900",title:i.email||"Perfil",children:i.avatarUrl?x.jsx("img",{src:i.avatarUrl,alt:"Perfil",className:"h-full w-full object-cover"}):x.jsx("div",{className:"flex h-full w-full items-center justify-center bg-gradient-to-br from-slate-800 to-slate-900 text-xs font-bold text-white dark:from-gray-700 dark:to-gray-900",children:i.name?i.name.substring(0,2).toUpperCase():"US"})})]}),x.jsx("button",{onClick:e,className:"group relative flex h-9 w-9 items-center justify-center rounded-lg border border-gray-200 bg-white text-gray-500 transition-all hover:border-red-200 hover:bg-red-50 hover:text-red-600 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-red-900/20 dark:hover:border-red-900/50 dark:hover:text-red-400",title:"Cerrar Sesin",children:x.jsx(Wk,{className:"h-5 w-5"})})]})]})})}function Kk(){return x.jsx("footer",{className:"w-full bg-white border-t border-slate-200 dark:bg-[#111827] dark:border-gray-800 transition-colors mt-auto",children:x.jsxs("div",{className:"max-w-7xl mx-auto px-6 md:px-8",children:[x.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between py-6 gap-4 text-sm",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsxs("span",{className:"relative flex h-2.5 w-2.5",children:[x.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),x.jsx("span",{className:"relative inline-flex rounded-full h-2.5 w-2.5 bg-emerald-500"})]}),x.jsx("span",{className:"font-bold text-slate-900 dark:text-white tracking-tight",children:"Auto Transcriptor"}),x.jsx("span",{className:"h-4 w-px bg-slate-300 dark:bg-gray-700 mx-1"}),x.jsx("span",{className:"text-slate-500 dark:text-gray-400 font-medium",children:"Sistema Activo v1.0"})]}),x.jsxs("div",{className:"flex items-center gap-3 text-slate-500 dark:text-gray-400 lg:flex",children:[x.jsx("span",{children:" 2025 Todos los derechos reservados"}),x.jsx("span",{className:"h-4 w-px bg-slate-300 dark:bg-gray-700 mx-1"}),x.jsx("span",{children:"SOT Activo"})]}),x.jsxs("div",{className:"text-slate-500 dark:text-gray-400",children:["Desarrollado por"," ",x.jsx("span",{className:"font-bold text-slate-900 dark:text-white",children:"Mentes Publicitarias S.A.S."})]})]}),x.jsx("div",{className:"border-t border-slate-100 dark:border-gray-800 py-4 flex justify-end",children:x.jsx("p",{className:"text-xs text-slate-400 dark:text-gray-500 font-medium",children:"Plataforma de transcripcin automatizada  Impulsada por inteligencia artificial"})})]})})}function Jk({children:i}){const e=Ll(),t=e.pathname==="/login"||e.pathname==="/register";return x.jsxs("div",{className:"min-h-screen flex flex-col bg-slate-50 dark:bg-gray-900 transition-colors",children:[!t&&x.jsx(Yk,{}),x.jsx("main",{className:t?"flex-1 dark:bg-gray-900":"flex-1 pt-20 pb-16 dark:bg-gray-900",children:i}),!t&&x.jsx(Kk,{})]})}function Xk(){const{signIn:i}=Bf(),e=uo(),[t,n]=me.useState(""),[s,r]=me.useState(""),[a,l]=me.useState(!1),[c,d]=me.useState(!1),[h,p]=me.useState(""),v=async m=>{m.preventDefault(),p(""),d(!0);try{await i(t,s),e("/transcribe")}catch{p("Credenciales incorrectas o error en el servidor.")}finally{d(!1)}};return x.jsx("div",{className:"min-h-screen bg-[#0F172A] flex items-center justify-center p-4 font-sans",children:x.jsxs("div",{className:"bg-white w-full max-w-6xl rounded-4xl shadow-2xl overflow-hidden flex min-h-[700px]",children:[x.jsxs("div",{className:"w-full lg:w-1/2 p-8 md:p-16 flex flex-col justify-center relative",children:[x.jsxs("div",{className:"absolute top-8 left-8 md:left-16 flex items-center gap-2",children:[x.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})})}),x.jsx("span",{className:"font-bold text-xl text-gray-800 tracking-tight",children:"PDF Transcriber"})]}),x.jsxs("div",{className:"max-w-md w-full mx-auto mt-12 lg:mt-0",children:[x.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Inicia sesin en tu cuenta"}),x.jsx("p",{className:"text-gray-500 mb-8",children:"Bienvenido de nuevo! Por favor ingresa tus datos."}),x.jsxs("form",{onSubmit:v,className:"space-y-6",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Correo Electrnico"}),x.jsx("input",{type:"email",placeholder:"Ingresa tu correo",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all placeholder-gray-400",value:t,onChange:m=>n(m.target.value),required:!0})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contrasea"}),x.jsx("input",{type:"password",placeholder:"",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all placeholder-gray-400",value:s,onChange:m=>r(m.target.value),required:!0})]}),x.jsxs("div",{className:"flex items-center justify-between text-sm",children:[x.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[x.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:a,onChange:m=>l(m.target.checked)}),x.jsx("span",{className:"text-gray-600",children:"Recordar por 30 das"})]}),x.jsx("button",{type:"button",className:"text-blue-600 font-semibold hover:underline cursor-pointer",children:"Olvidaste tu contrasea?"})]}),h&&x.jsx("div",{className:"text-red-500 text-sm bg-red-50 p-3 rounded",children:h}),x.jsx("button",{type:"submit",disabled:c,className:"w-full bg-[#2563EB] hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-xl cursor-pointer transition-colors shadow-lg shadow-blue-500/30",children:c?"Cargando...":"Iniciar Sesin"})]}),x.jsxs("div",{className:"mt-8 text-center text-sm text-gray-600",children:["No tienes una cuenta?"," ",x.jsx("button",{onClick:()=>e("/register"),className:"text-blue-600 font-bold hover:underline cursor-pointer",children:"Regstrate gratis"})]})]})]}),x.jsxs("div",{className:"hidden lg:flex w-1/2 bg-[#0B1221] relative flex-col justify-between p-12 overflow-hidden",children:[x.jsx("div",{className:"absolute top-0 right-0 w-[600px] h-[600px] bg-blue-600/20 rounded-full blur-3xl transform translate-x-1/3 -translate-y-1/4"}),x.jsx("div",{className:"absolute bottom-0 left-0 w-[500px] h-[500px] bg-blue-900/40 rounded-full blur-3xl transform -translate-x-1/4 translate-y-1/4"}),x.jsx("div",{className:"absolute bottom-0 right-0 w-[800px] h-[800px] border-40 border-blue-800/20 rounded-full transform translate-x-1/3 translate-y-1/2"}),x.jsx("div",{className:"relative z-10 mt-12",children:x.jsxs("h2",{className:"text-5xl font-bold text-white leading-tight mb-6",children:["Transforma Archivos ",x.jsx("br",{}),"en Datos Editables ",x.jsx("br",{}),x.jsx("span",{className:"text-blue-400",children:"Sin Esfuerzo"})]})}),x.jsxs("div",{className:"relative z-10 bg-white/10 backdrop-blur-md border border-white/10 rounded-2xl p-6 md:p-8 mt-auto",children:[x.jsx("div",{className:"flex gap-1 mb-4",children:[1,2,3,4,5].map(m=>x.jsx("svg",{className:"w-5 h-5 text-yellow-400 fill-current",viewBox:"0 0 20 20",children:x.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},m))}),x.jsx("p",{className:"text-white text-lg font-medium leading-relaxed mb-6",children:'"Las medidas de seguridad robustas de PDF Transcriber nos dan tranquilidad. Confiamos en la plataforma para transcribir nuestros datos legales sensibles, asegurando confidencialidad y precisin en cada documento."'}),x.jsx("div",{className:"flex items-center justify-between",children:x.jsxs("div",{className:"flex gap-3",children:[x.jsx("button",{className:"w-10 h-10 rounded-full border border-white/30 flex items-center justify-center text-white hover:bg-white/10 transition",children:""}),x.jsx("button",{className:"w-10 h-10 rounded-full border border-white/30 flex items-center justify-center text-white hover:bg-white/10 transition",children:""})]})})]})]})]})})}function G1({isOpen:i,title:e,message:t,confirmText:n="Confirmar",cancelText:s="Cancelar",onConfirm:r,onCancel:a,variant:l="danger"}){if(me.useEffect(()=>{const p=v=>{v.key==="Escape"&&i&&a()};return i&&(document.addEventListener("keydown",p),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",p),document.body.style.overflow="unset"}},[i,a]),!i)return null;const d={danger:{icon:"bg-red-100 text-red-600 dark:bg-red-950/40 dark:text-red-400",button:"bg-red-600 hover:bg-red-700 focus:ring-red-500 text-white",iconComponent:hS},warning:{icon:"bg-yellow-100 text-yellow-600 dark:bg-yellow-950/40 dark:text-yellow-400",button:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500 text-white",iconComponent:z1},info:{icon:"bg-blue-100 text-blue-600 dark:bg-blue-950/40 dark:text-blue-400",button:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500 text-white",iconComponent:z1}}[l],h=d.iconComponent;return x.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 animate-fadeIn",children:[x.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:a}),x.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full p-6 animate-scaleIn",children:[x.jsx("button",{onClick:a,className:"absolute top-4 right-4 p-1 rounded-lg text-slate-400 hover:text-slate-600 hover:bg-slate-100 dark:hover:bg-slate-700 dark:hover:text-slate-200 transition-colors","aria-label":"Cerrar",children:x.jsx(rS,{className:"w-5 h-5"})}),x.jsx("div",{className:"flex items-center justify-center mb-4",children:x.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center ${d.icon}`,children:x.jsx(h,{className:"w-8 h-8"})})}),x.jsxs("div",{className:"text-center mb-6",children:[x.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:e}),x.jsx("p",{className:"text-slate-600 dark:text-slate-300 text-sm leading-relaxed",children:t})]}),x.jsxs("div",{className:"flex gap-3",children:[x.jsx("button",{onClick:a,className:"flex-1 px-4 py-2.5 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg transition-colors border border-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600 dark:border-slate-600",children:s}),x.jsx("button",{onClick:r,className:`flex-1 px-4 py-2.5 text-sm font-medium rounded-lg transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 shadow-sm ${d.button}`,children:n})]})]}),x.jsx("style",{children:`
        @keyframes fadeIn {
          from {
            opacity: 0;
          }
          to {
            opacity: 1;
          }
        }

        @keyframes scaleIn {
          from {
            opacity: 0;
            transform: scale(0.95);
          }
          to {
            opacity: 1;
            transform: scale(1);
          }
        }

        .animate-fadeIn {
          animation: fadeIn 0.2s ease-out;
        }

        .animate-scaleIn {
          animation: scaleIn 0.2s ease-out;
        }
      `})]})}function Zk(){const{signUp:i}=Bf(),e=uo(),[t,n]=me.useState(""),[s,r]=me.useState(""),[a,l]=me.useState(""),[c,d]=me.useState(""),[h,p]=me.useState(!1),[v,m]=me.useState(""),[E,S]=me.useState(!1),N=async C=>{if(C.preventDefault(),m(""),!t.trim()){m("Por favor ingresa tu nombre.");return}if(a.length<6){m("La contrasea debe tener al menos 6 caracteres.");return}if(a!==c){m("Las contraseas no coinciden.");return}p(!0);try{await i(s,a,t.trim()),S(!0)}catch(P){m(P.message||"Error al crear la cuenta. Por favor intenta de nuevo.")}finally{p(!1)}};return x.jsxs("div",{className:" bg-[#0F172A] flex items-center justify-center p-4 font-sans",children:[x.jsxs("div",{className:"bg-white w-full max-w-6xl rounded-4xl shadow-2xl overflow-hidden flex min-h-[700px]",children:[x.jsxs("div",{className:"w-full lg:w-1/2 p-8 md:p-16 flex flex-col justify-center relative",children:[x.jsxs("div",{className:"absolute top-8 left-8 md:left-16 flex items-center gap-2",children:[x.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white",children:x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})})}),x.jsx("span",{className:"font-bold text-xl text-gray-800 tracking-tight",children:"PDF Transcriber"})]}),x.jsxs("div",{className:"max-w-md w-full mx-auto mt-12 lg:mt-0",children:[x.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Crea tu cuenta"}),x.jsx("p",{className:"text-gray-500 mb-8",children:"Comienza a transcribir tus documentos de forma inteligente."}),x.jsxs("form",{onSubmit:N,className:"space-y-5",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre Completo"}),x.jsx("input",{type:"text",placeholder:"Tu nombre completo",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all placeholder-gray-400",value:t,onChange:C=>n(C.target.value),required:!0})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Correo Electrnico"}),x.jsx("input",{type:"email",placeholder:"tu@correo.com",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all placeholder-gray-400",value:s,onChange:C=>r(C.target.value),required:!0})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contrasea"}),x.jsx("input",{type:"password",placeholder:"Mnimo 6 caracteres",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all placeholder-gray-400",value:a,onChange:C=>l(C.target.value),required:!0})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmar Contrasea"}),x.jsx("input",{type:"password",placeholder:"Repite tu contrasea",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all placeholder-gray-400",value:c,onChange:C=>d(C.target.value),required:!0})]}),v&&x.jsx("div",{className:"text-red-500 text-sm bg-red-50 p-3 rounded",children:v}),x.jsx("button",{type:"submit",disabled:h,className:"w-full bg-[#2563EB] hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-xl cursor-pointer transition-colors shadow-lg shadow-blue-500/30 disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Creando cuenta...":"Crear Cuenta"})]}),x.jsxs("div",{className:"mt-8 text-center text-sm text-gray-600",children:["Ya tienes una cuenta?"," ",x.jsx("button",{onClick:()=>e("/login"),className:"text-blue-600 font-bold hover:underline cursor-pointer",children:"Inicia sesin"})]})]})]}),x.jsxs("div",{className:"hidden lg:flex w-1/2 bg-[#0B1221] relative flex-col justify-between p-12 overflow-hidden",children:[x.jsx("div",{className:"absolute top-0 right-0 w-[600px] h-[600px] bg-blue-600/20 rounded-full blur-3xl transform translate-x-1/3 -translate-y-1/4"}),x.jsx("div",{className:"absolute bottom-0 left-0 w-[500px] h-[500px] bg-blue-900/40 rounded-full blur-3xl transform -translate-x-1/4 translate-y-1/4"}),x.jsx("div",{className:"absolute bottom-0 right-0 w-[800px] h-[800px] border-40 border-blue-800/20 rounded-full transform translate-x-1/3 translate-y-1/2"}),x.jsxs("div",{className:"relative z-10 mt-12",children:[x.jsxs("h2",{className:"text-5xl font-bold text-white leading-tight mb-6",children:["Transcribe documentos ",x.jsx("br",{}),"con la potencia de la ",x.jsx("br",{}),x.jsx("span",{className:"text-blue-400",children:"inteligencia artificial"})]}),x.jsx("p",{className:"text-gray-300 text-lg",children:"Transcribe documentos legales, contratos, facturas y ms con la potencia de la inteligencia artificial."})]})]})]}),x.jsx(G1,{isOpen:E,title:"Verifica tu correo electrnico",message:s?`Hemos enviado un enlace de verificacin a ${s}. Revisa tu bandeja de entrada (y la carpeta de spam) y confirma tu cuenta para poder iniciar sesin.`:"Hemos enviado un enlace de verificacin a tu correo. Revisa tu bandeja de entrada (y la carpeta de spam) y confirma tu cuenta para poder iniciar sesin.",confirmText:"Ir a iniciar sesin",cancelText:"Cerrar",onConfirm:()=>{S(!1),e("/login")},onCancel:()=>S(!1),variant:"info"})]})}const ar=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),$1=[.001,0,0,.001,0,0],Wm=1.35,Xr={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},bu={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Cf="pdfjs_internal_editor_",Zt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},gn={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},Qk={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},W1={TRIANGLES:1,LATTICE:2},Rs={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},w0={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Zi={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Id={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},sg={ERRORS:0,WARNINGS:1,INFOS:5},Nf={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Xh={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},eR={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let rg=sg.WARNINGS;function tR(i){Number.isInteger(i)&&(rg=i)}function nR(){return rg}function ag(i){rg>=sg.INFOS&&console.info(`Info: ${i}`)}function Jt(i){rg>=sg.WARNINGS&&console.warn(`Warning: ${i}`)}function Xn(i){throw new Error(i)}function mn(i,e){i||Xn(e)}function iR(i){switch(i?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function fS(i,e=null,t=null){if(!i)return null;if(t&&typeof i=="string"&&(t.addDefaultProtocol&&i.startsWith("www.")&&i.match(/\./g)?.length>=2&&(i=`http://${i}`),t.tryConvertEncoding))try{i=lR(i)}catch{}const n=e?URL.parse(i,e):URL.parse(i);return iR(n)?n:null}function pS(i,e,t=!1){const n=URL.parse(i);return n?(n.hash=e,n.href):t&&fS(i,"http://example.com")?i.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Qt(i,e,t,n=!1){return Object.defineProperty(i,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const Tc=(function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e})();class D5 extends Tc{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Ym extends Tc{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Y1 extends Tc{constructor(e){super(e,"InvalidPDFException")}}class H0 extends Tc{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class sR extends Tc{constructor(e){super(e,"FormatError")}}class Su extends Tc{constructor(e){super(e,"AbortException")}}function gS(i){(typeof i!="object"||i?.length===void 0)&&Xn("Invalid argument for bytesToString");const e=i.length,t=8192;if(e<t)return String.fromCharCode.apply(null,i);const n=[];for(let s=0;s<e;s+=t){const r=Math.min(s+t,e),a=i.subarray(s,r);n.push(String.fromCharCode.apply(null,a))}return n.join("")}function Uf(i){typeof i!="string"&&Xn("Invalid argument for stringToBytes");const e=i.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=i.charCodeAt(n)&255;return t}function rR(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function aR(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function oR(){try{return new Function(""),!0}catch{return!1}}class Ds{static get isLittleEndian(){return Qt(this,"isLittleEndian",aR())}static get isEvalSupported(){return Qt(this,"isEvalSupported",oR())}static get isOffscreenCanvasSupported(){return Qt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Qt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return Qt(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return Qt(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return Qt(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){return Qt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Km=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));class ht{static makeHexColor(e,t,n){return`#${Km[e]}${Km[t]}${Km[n]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,n=0){const s=e[n],r=e[n+1];e[n]=s*t[0]+r*t[2]+t[4],e[n+1]=s*t[1]+r*t[3]+t[5]}static applyTransformToBezier(e,t,n=0){const s=t[0],r=t[1],a=t[2],l=t[3],c=t[4],d=t[5];for(let h=0;h<6;h+=2){const p=e[n+h],v=e[n+h+1];e[n+h]=p*s+v*a+c,e[n+h+1]=p*r+v*l+d}}static applyInverseTransform(e,t){const n=e[0],s=e[1],r=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-s*t[2]+t[2]*t[5]-t[4]*t[3])/r,e[1]=(-n*t[1]+s*t[0]+t[4]*t[1]-t[5]*t[0])/r}static axialAlignedBoundingBox(e,t,n){const s=t[0],r=t[1],a=t[2],l=t[3],c=t[4],d=t[5],h=e[0],p=e[1],v=e[2],m=e[3];let E=s*h+c,S=E,N=s*v+c,C=N,P=l*p+d,L=P,O=l*m+d,q=O;if(r!==0||a!==0){const G=r*h,W=r*v,K=a*p,j=a*m;E+=K,C+=K,N+=j,S+=j,P+=G,q+=G,O+=W,L+=W}n[0]=Math.min(n[0],E,N,S,C),n[1]=Math.min(n[1],P,O,L,q),n[2]=Math.max(n[2],E,N,S,C),n[3]=Math.max(n[3],P,O,L,q)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],s=e[1],r=e[2],a=e[3],l=n**2+s**2,c=n*r+s*a,d=r**2+a**2,h=(l+d)/2,p=Math.sqrt(h**2-(l*d-c**2));t[0]=Math.sqrt(h+p||1),t[1]=Math.sqrt(h-p||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>s)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>a?null:[n,r,s,a]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,s,r){r[0]=Math.min(r[0],e,n),r[1]=Math.min(r[1],t,s),r[2]=Math.max(r[2],e,n),r[3]=Math.max(r[3],t,s)}static#e(e,t,n,s,r,a,l,c,d,h){if(d<=0||d>=1)return;const p=1-d,v=d*d,m=v*d,E=p*(p*(p*e+3*d*t)+3*v*n)+m*s,S=p*(p*(p*r+3*d*a)+3*v*l)+m*c;h[0]=Math.min(h[0],E),h[1]=Math.min(h[1],S),h[2]=Math.max(h[2],E),h[3]=Math.max(h[3],S)}static#t(e,t,n,s,r,a,l,c,d,h,p,v){if(Math.abs(d)<1e-12){Math.abs(h)>=1e-12&&this.#e(e,t,n,s,r,a,l,c,-p/h,v);return}const m=h**2-4*p*d;if(m<0)return;const E=Math.sqrt(m),S=2*d;this.#e(e,t,n,s,r,a,l,c,(-h+E)/S,v),this.#e(e,t,n,s,r,a,l,c,(-h-E)/S,v)}static bezierBoundingBox(e,t,n,s,r,a,l,c,d){d[0]=Math.min(d[0],e,l),d[1]=Math.min(d[1],t,c),d[2]=Math.max(d[2],e,l),d[3]=Math.max(d[3],t,c),this.#t(e,n,r,l,t,s,a,c,3*(-e+3*(n-r)+l),6*(e-2*n+r),3*(n-e),d),this.#t(e,n,r,l,t,s,a,c,3*(-t+3*(s-a)+c),6*(t-2*s+a),3*(s-t),d)}}function lR(i){return decodeURIComponent(escape(i))}let Jm=null,O5=null;function uR(i){return Jm||(Jm=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,O5=new Map([["","t"]])),i.replaceAll(Jm,(e,t,n)=>t?t.normalize("NFKC"):O5.get(n))}function mS(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const i=new Uint8Array(32);return crypto.getRandomValues(i),gS(i)}const Fd="pdfjs_internal_id_";function cR(i,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[n,s,...r]=t;if(!i(n)&&!Number.isInteger(n)||!e(s))return!1;const a=r.length;let l=!0;switch(s.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return a===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(a!==4)return!1;l=!1;break;default:return!1}for(const c of r)if(!(typeof c=="number"||l&&c===null))return!1;return!0}function or(i,e,t){return Math.min(Math.max(i,e),t)}function vS(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(gS(i))}function dR(i){return Uint8Array.fromBase64?Uint8Array.fromBase64(i):Uf(atob(i))}typeof Promise.try!="function"&&(Promise.try=function(i,...e){return new Promise(t=>{t(i(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(i){return i.reduce((e,t)=>e+t,0)});class kf{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function s(r){if(!r)return;let a=null;const l=r.name;if(l==="#text")a=r.value;else if(kf.shouldBuildText(l))r?.attributes?.textContent?a=r.attributes.textContent:r.value&&(a=r.value);else return;if(a!==null&&t.push({str:a}),!!r.children)for(const c of r.children)s(c)}return s(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class yS{static setupStorage(e,t,n,s,r){const a=s.getValue(t,{value:null});switch(n.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),r==="print")break;e.addEventListener("input",l=>{s.setValue(t,{value:l.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(a.value===n.attributes.xfaOn?e.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&e.removeAttribute("checked"),r==="print")break;e.addEventListener("change",l=>{s.setValue(t,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),r==="print")break;e.addEventListener("input",l=>{s.setValue(t,{value:l.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const l of n.children)l.attributes.value===a.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const c=l.target.options,d=c.selectedIndex===-1?"":c[c.selectedIndex].value;s.setValue(t,{value:d})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:s,linkService:r}){const{attributes:a}=t,l=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${s}`);for(const[c,d]of Object.entries(a))if(d!=null)switch(c){case"class":d.length&&e.setAttribute(c,d.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",d);break;case"style":Object.assign(e.style,d);break;case"textContent":e.textContent=d;break;default:(!l||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,d)}l&&r.addLinkAttributes(e,a.href,a.newWindow),n&&a.dataId&&this.setupStorage(e,a.dataId,t,n)}static render(e){const t=e.annotationStorage,n=e.linkService,s=e.xfaHtml,r=e.intent||"display",a=document.createElement(s.name);s.attributes&&this.setAttributes({html:a,element:s,intent:r,linkService:n});const l=r!=="richText",c=e.div;if(c.append(a),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=p}l&&c.setAttribute("class","xfaLayer xfaFont");const d=[];if(s.children.length===0){if(s.value){const p=document.createTextNode(s.value);a.append(p),l&&kf.shouldBuildText(s.name)&&d.push(p)}return{textDivs:d}}const h=[[s,-1,a]];for(;h.length>0;){const[p,v,m]=h.at(-1);if(v+1===p.children.length){h.pop();continue}const E=p.children[++h.at(-1)[1]];if(E===null)continue;const{name:S}=E;if(S==="#text"){const C=document.createTextNode(E.value);d.push(C),m.append(C);continue}const N=E?.attributes?.xmlns?document.createElementNS(E.attributes.xmlns,S):document.createElement(S);if(m.append(N),E.attributes&&this.setAttributes({html:N,element:E,storage:t,intent:r,linkService:n}),E.children?.length>0)h.push([E,-1,N]);else if(E.value){const C=document.createTextNode(E.value);l&&kf.shouldBuildText(S)&&d.push(C),N.append(C)}}for(const p of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:d}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const _l="http://www.w3.org/2000/svg";class ih{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function jf(i,e="text"){if(cf(i,document.baseURI)){const t=await fetch(i);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const s=new XMLHttpRequest;s.open("GET",i,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}n(new Error(s.statusText))}},s.send(null)})}class qf{constructor({viewBox:e,userUnit:t,scale:n,rotation:s,offsetX:r=0,offsetY:a=0,dontFlip:l=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=s,this.offsetX=r,this.offsetY=a,n*=t;const c=(e[2]+e[0])/2,d=(e[3]+e[1])/2;let h,p,v,m;switch(s%=360,s<0&&(s+=360),s){case 180:h=-1,p=0,v=0,m=1;break;case 90:h=0,p=1,v=1,m=0;break;case 270:h=0,p=-1,v=-1,m=0;break;case 0:h=1,p=0,v=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(v=-v,m=-m);let E,S,N,C;h===0?(E=Math.abs(d-e[1])*n+r,S=Math.abs(c-e[0])*n+a,N=(e[3]-e[1])*n,C=(e[2]-e[0])*n):(E=Math.abs(c-e[0])*n+r,S=Math.abs(d-e[1])*n+a,N=(e[2]-e[0])*n,C=(e[3]-e[1])*n),this.transform=[h*n,p*n,v*n,m*n,E-h*n*c-v*n*d,S-p*n*c-m*n*d],this.width=N,this.height=C}get rawDims(){const e=this.viewBox;return Qt(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}={}){return new qf({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:s,dontFlip:r})}convertToViewportPoint(e,t){const n=[e,t];return ht.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];ht.applyTransform(t,this.transform);const n=[e[2],e[3]];return ht.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return ht.applyInverseTransform(n,this.transform),n}}class Wv extends Tc{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function og(i){const e=i.length;let t=0;for(;t<e&&i[t].trim()==="";)t++;return i.substring(t,t+5).toLowerCase()==="data:"}function Yv(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function hR(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function fR(i,e="document.pdf"){if(typeof i!="string")return e;if(og(i))return Jt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=(l=>{try{return new URL(l)}catch{try{return new URL(decodeURIComponent(l))}catch{try{return new URL(l,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(l),"https://foo.bar")}catch{return null}}}}})(i);if(!n)return e;const s=l=>{try{let c=decodeURIComponent(l);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:l):c}catch{return l}},r=/\.pdf$/i,a=n.pathname.split("/").at(-1);if(r.test(a))return s(a);if(n.searchParams.size>0){const l=Array.from(n.searchParams.values()).reverse();for(const d of l)if(r.test(d))return s(d);const c=Array.from(n.searchParams.keys()).reverse();for(const d of c)if(r.test(d))return s(d)}if(n.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(c)return s(c[0])}return e}class B5{started=Object.create(null);times=[];time(e){e in this.started&&Jt(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Jt(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:s,end:r}of this.times)e.push(`${n.padEnd(t)} ${r-s}ms
`);return e.join("")}}function cf(i,e){const t=e?URL.parse(i,e):URL.parse(i);return t?.protocol==="http:"||t?.protocol==="https:"}function Ea(i){i.preventDefault()}function Oi(i){i.preventDefault(),i.stopPropagation()}function pR(i){console.log("Deprecated API usage: "+i)}class K1{static#e;static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const n=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let l=parseInt(t[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const d=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let p=parseInt(t[9],10)||0;return p=p>=0&&p<=59?p:0,d==="-"?(a+=h,l+=p):d==="+"&&(a-=h,l-=p),new Date(Date.UTC(n,s,r,a,l,c))}}function gR(i,{scale:e=1,rotation:t=0}){const{width:n,height:s}=i.attributes.style,r=[0,0,parseInt(n),parseInt(s)];return new qf({viewBox:r,userUnit:1,scale:e,rotation:t})}function Hf(i){if(i.startsWith("#")){const e=parseInt(i.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(e=>parseInt(e)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Jt(`Not a valid color format: "${i}"`),[0,0,0])}function mR(i){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of i.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;i.set(t,Hf(n))}e.remove()}function _i(i){const{a:e,b:t,c:n,d:s,e:r,f:a}=i.getTransform();return[e,t,n,s,r,a]}function Oo(i){const{a:e,b:t,c:n,d:s,e:r,f:a}=i.getTransform().invertSelf();return[e,t,n,s,r,a]}function xc(i,e,t=!1,n=!0){if(e instanceof qf){const{pageWidth:s,pageHeight:r}=e.rawDims,{style:a}=i,l=Ds.isCSSRoundSupported,c=`var(--total-scale-factor) * ${s}px`,d=`var(--total-scale-factor) * ${r}px`,h=l?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,p=l?`round(down, ${d}, var(--scale-round-y))`:`calc(${d})`;!t||e.rotation%180===0?(a.width=h,a.height=p):(a.width=p,a.height=h)}n&&i.setAttribute("data-main-rotation",e.rotation)}class zo{constructor(){const{pixelRatio:e}=zo;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,s,r=-1){let a=1/0,l=1/0,c=1/0;n=zo.capPixels(n,r),n>0&&(a=Math.sqrt(n/(e*t))),s!==-1&&(l=s/e,c=s/t);const d=Math.min(a,l,c);return this.sx>d||this.sy>d?(this.sx=d,this.sy=d,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const J1=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class vR{static get isDarkMode(){return Qt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class yR{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:n}=window.getComputedStyle(e);return e.remove(),Qt(this,"commentForegroundColor",Hf(n))}}function bR(i,e,t,n){n=Math.min(Math.max(n??1,0),1);const s=255*(1-n);return i=Math.round(i*n+s),e=Math.round(e*n+s),t=Math.round(t*n+s),[i,e,t]}function F5(i,e){const t=i[0]/255,n=i[1]/255,s=i[2]/255,r=Math.max(t,n,s),a=Math.min(t,n,s),l=(r+a)/2;if(r===a)e[0]=e[1]=0;else{const c=r-a;switch(e[1]=l<.5?c/(r+a):c/(2-r-a),r){case t:e[0]=((n-s)/c+(n<s?6:0))*60;break;case n:e[0]=((s-t)/c+2)*60;break;case s:e[0]=((t-n)/c+4)*60;break}}e[2]=l}function X1(i,e){const t=i[0],n=i[1],s=i[2],r=(1-Math.abs(2*s-1))*n,a=r*(1-Math.abs(t/60%2-1)),l=s-r/2;switch(Math.floor(t/60)){case 0:e[0]=r+l,e[1]=a+l,e[2]=l;break;case 1:e[0]=a+l,e[1]=r+l,e[2]=l;break;case 2:e[0]=l,e[1]=r+l,e[2]=a+l;break;case 3:e[0]=l,e[1]=a+l,e[2]=r+l;break;case 4:e[0]=a+l,e[1]=l,e[2]=r+l;break;case 5:case 6:e[0]=r+l,e[1]=l,e[2]=a+l;break}}function U5(i){return i<=.03928?i/12.92:((i+.055)/1.055)**2.4}function j5(i,e,t){X1(i,t),t.map(U5);const n=.2126*t[0]+.7152*t[1]+.0722*t[2];X1(e,t),t.map(U5);const s=.2126*t[0]+.7152*t[1]+.0722*t[2];return n>s?(n+.05)/(s+.05):(s+.05)/(n+.05)}const q5=new Map;function wR(i,e){const t=i[0]+i[1]*256+i[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let n=q5.get(t);if(n)return n;const s=new Float32Array(9),r=s.subarray(0,3),a=s.subarray(3,6);F5(i,a);const l=s.subarray(6,9);F5(e,l);const c=l[2]<.5,d=c?12:4.5;if(a[2]=c?Math.sqrt(a[2]):1-Math.sqrt(1-a[2]),j5(a,l,r)<d){let h,p;c?(h=a[2],p=1):(h=0,p=a[2]);const v=.005;for(;p-h>v;){const m=a[2]=(h+p)/2;c===j5(a,l,r)<d?h=m:p=m}a[2]=c?p:h}return X1(a,r),n=ht.makeHexColor(Math.round(r[0]*255),Math.round(r[1]*255),Math.round(r[2]*255)),q5.set(t,n),n}function bS({html:i,dir:e,className:t},n){const s=document.createDocumentFragment();if(typeof i=="string"){const r=document.createElement("p");r.dir=e||"auto";const a=i.split(/(?:\r\n?|\n)/);for(let l=0,c=a.length;l<c;++l){const d=a[l];r.append(document.createTextNode(d)),l<c-1&&r.append(document.createElement("br"))}s.append(r)}else yS.render({xfaHtml:i,div:s,intent:"richText"});s.firstChild.classList.add("richText",t),n.append(s)}function wS(i){const e=new Path2D;if(!i)return e;for(let t=0,n=i.length;t<n;)switch(i[t++]){case Xh.moveTo:e.moveTo(i[t++],i[t++]);break;case Xh.lineTo:e.lineTo(i[t++],i[t++]);break;case Xh.curveTo:e.bezierCurveTo(i[t++],i[t++],i[t++],i[t++],i[t++],i[t++]);break;case Xh.quadraticCurveTo:e.quadraticCurveTo(i[t++],i[t++],i[t++],i[t++]);break;case Xh.closePath:e.closePath();break;default:Jt(`Unrecognized drawing path operator: ${i[t-1]}`);break}return e}class mf{#e=null;#t=null;#i;#n=null;#a=null;#r=null;#s=null;#o=null;static#u=null;constructor(e){this.#i=e,mf.#u||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#i._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",Ea,{signal:t}),e.addEventListener("pointerdown",mf.#l,{signal:t}));const n=this.#n=document.createElement("div");n.className="buttons",e.append(n);const s=this.#i.toolbarPosition;if(s){const{style:r}=e,a=this.#i._uiManager.direction==="ltr"?1-s[0]:s[0];r.insetInlineEnd=`${100*a}%`,r.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return this.#e}static#l(e){e.stopPropagation()}#h(e){this.#i._focusEventsAllowed=!1,Oi(e)}#d(e){this.#i._focusEventsAllowed=!0,Oi(e)}#f(e){const t=this.#i._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",this.#h.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Ea,{signal:t}),!0)}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#a?.shown(),this.#r?.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=this.#i,n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",mf.#u[e]),this.#f(n)&&n.addEventListener("click",s=>{t.delete()},{signal:t._signal}),this.#n.append(n)}get#m(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const t=await e.render();this.#f(t),this.#n.append(t,this.#m),this.#a=e}addComment(e,t=null){if(this.#r)return;const n=e.renderForToolbar();if(!n)return;this.#f(n);const s=this.#s=this.#m;t?(this.#n.insertBefore(n,t),this.#n.insertBefore(s,t)):this.#n.append(n,s),this.#r=e,e.toolbar=this}addColorPicker(e){if(this.#t)return;this.#t=e;const t=e.renderButton();this.#f(t),this.#n.append(t,this.#m)}async addEditSignatureButton(e){const t=this.#o=await e.renderEditButton(this.#i);this.#f(t),this.#n.append(t,this.#m)}removeButton(e){switch(e){case"comment":this.#r?.removeToolbarCommentButton(),this.#r=null,this.#s?.remove(),this.#s=null;break}}async addButton(e,t){switch(e){case"colorPicker":t&&this.addColorPicker(t);break;case"altText":t&&await this.addAltText(t);break;case"editSignature":t&&await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":t&&this.addComment(t);break}}async addButtonBefore(e,t,n){if(!t&&e==="comment")return;const s=this.#n.querySelector(n);s&&e==="comment"&&this.addComment(t,s)}updateEditSignatureButton(e){this.#o&&(this.#o.title=e)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class xR{#e=null;#t=null;#i;constructor(e){this.#i=e}#n(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar");const t=this.#i._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",Ea,{signal:t});const n=this.#e=document.createElement("div");return n.className="buttons",e.append(n),this.#i.hasCommentManager()&&this.#r("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#i.commentSelection("floating_button")}),this.#r("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#i.highlightSelection("floating_button")}),e}#a(e,t){let n=0,s=0;for(const r of e){const a=r.y+r.height;if(a<n)continue;const l=r.x+(t?r.width:0);if(a>n){s=l,n=a;continue}t?l>s&&(s=l):l<s&&(s=l)}return[t?1-s:s,n]}show(e,t,n){const[s,r]=this.#a(t,n),{style:a}=this.#t||=this.#n();e.append(this.#t),a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#r(e,t,n,s){const r=document.createElement("button");r.classList.add("basic",e),r.tabIndex=0,r.setAttribute("data-l10n-id",t);const a=document.createElement("span");r.append(a),a.className="visuallyHidden",a.setAttribute("data-l10n-id",n);const l=this.#i._signal;l instanceof AbortSignal&&!l.aborted&&(r.addEventListener("contextmenu",Ea,{signal:l}),r.addEventListener("click",s,{signal:l})),this.#e.append(r)}}function xS(i,e,t){for(const n of t)e.addEventListener(n,i[n].bind(i))}class Ln{static#e=NaN;static#t=null;static#i=NaN;static#n=null;static initializeAndAddPointerId(e){(Ln.#t||=new Set).add(e)}static setPointer(e,t){Ln.#e||=t,Ln.#n??=e}static setTimeStamp(e){Ln.#i=e}static isSamePointerId(e){return Ln.#e===e}static isSamePointerIdOrRemove(e){return Ln.#e===e?!0:(Ln.#t?.delete(e),!1)}static isSamePointerType(e){return Ln.#n===e}static isInitializedAndDifferentPointerType(e){return Ln.#n!==null&&!Ln.isSamePointerType(e)}static isSameTimeStamp(e){return Ln.#i===e}static isUsingMultiplePointers(){return Ln.#t?.size>=1}static clearPointerType(){Ln.#n=null}static clearPointerIds(){Ln.#e=NaN,Ln.#t=null}static clearTimeStamp(){Ln.#i=NaN}}class _R{#e=0;get id(){return`${Cf}${this.#e++}`}}class Kv{#e=mS();#t=0;#i=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const r=s.decode().then(()=>(n.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Qt(this,"_isSVGFittingCanvas",r)}async#n(e,t){this.#i||=new Map;let n=this.#i.get(e);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let s;if(typeof t=="string"?(n.url=t,s=await jf(t,"blob")):t instanceof File?s=n.file=t:t instanceof Blob&&(s=t),s.type==="image/svg+xml"){const r=Kv._isSVGFittingCanvas,a=new FileReader,l=new Image,c=new Promise((d,h)=>{l.onload=()=>{n.bitmap=l,n.isSvg=!0,d()},a.onload=async()=>{const p=n.svgUrl=a.result;l.src=await r?`${p}#svgView(preserveAspectRatio(none))`:p},l.onerror=a.onerror=h});a.readAsDataURL(s),await c}else n.bitmap=await createImageBitmap(s);n.refCounter=1}catch(s){Jt(s),n=null}return this.#i.set(e,n),n&&this.#i.set(n.id,n),n}async getFromFile(e){const{lastModified:t,name:n,size:s,type:r}=e;return this.#n(`${t}_${n}_${s}_${r}`,e)}async getFromUrl(e){return this.#n(e,e)}async getFromBlob(e,t){const n=await t;return this.#n(e,n)}async getFromId(e){this.#i||=new Map;const t=this.#i.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){this.#i||=new Map;let n=this.#i.get(e);if(n?.bitmap)return n.refCounter+=1,n;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),n={bitmap:s.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#i.set(e,n),this.#i.set(n.id,n),n}getSvgUrl(e){const t=this.#i.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#i||=new Map;const t=this.#i.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const s=new OffscreenCanvas(n.width,n.height);s.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=s.convertToBlob()}n.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class AR{#e=[];#t=!1;#i;#n=-1;constructor(e=128){this.#i=e}add({cmd:e,undo:t,post:n,mustExec:s,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:l=!1}){if(s&&e(),this.#t)return;const c={cmd:e,undo:t,post:n,type:r};if(this.#n===-1){this.#e.length>0&&(this.#e.length=0),this.#n=0,this.#e.push(c);return}if(a&&this.#e[this.#n].type===r){l&&(c.undo=this.#e[this.#n].undo),this.#e[this.#n]=c;return}const d=this.#n+1;d===this.#i?this.#e.splice(0,1):(this.#n=d,d<this.#e.length&&this.#e.splice(d)),this.#e.push(c)}undo(){if(this.#n===-1)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1,this.#n-=1}redo(){if(this.#n<this.#e.length-1){this.#n+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#e.length-1}cleanType(e){if(this.#n!==-1){for(let t=this.#n;t>=0;t--)if(this.#e[t].type!==e){this.#e.splice(t+1,this.#n-t),this.#n=t;return}this.#e.length=0,this.#n=-1}}destroy(){this.#e=null}}class zf{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Ds.platform;for(const[n,s,r={}]of e)for(const a of n){const l=a.startsWith("mac+");t&&l?(this.callbacks.set(a.slice(4),{callback:s,options:r}),this.allKeys.add(a.split("+").at(-1))):!t&&!l&&(this.callbacks.set(a,{callback:s,options:r}),this.allKeys.add(a.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(this.#e(t));if(!n)return;const{callback:s,options:{bubbles:r=!1,args:a=[],checker:l=null}}=n;l&&!l(e,t)||(s.bind(e,...a,t)(),r||Oi(t))}}class Jv{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return mR(e),Qt(this,"_colors",e)}convert(e){const t=Hf(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,s]of this._colors)if(s.every((r,a)=>r===t[a]))return Jv._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?ht.makeHexColor(...t):e}}class Eu{#e=new AbortController;#t=null;#i=null;#n=new Map;#a=new Map;#r=null;#s=null;#o=null;#u=new AR;#l=null;#h=null;#d=null;#f=0;#m=new Set;#g=null;#c=null;#p=new Set;_editorUndoBar=null;#v=!1;#b=!1;#y=!1;#E=null;#A=null;#x=null;#C=null;#w=!1;#S=null;#R=new _R;#N=!1;#k=!1;#B=!1;#P=null;#M=null;#F=null;#D=null;#V=null;#T=Zt.NONE;#_=new Set;#I=null;#U=null;#q=null;#W=null;#$=null;#Y={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#H=[0,0];#O=null;#G=null;#Z=null;#Q=null;#j=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=Eu.prototype,t=a=>a.#G.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),n=(a,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return Qt(this,"_keyboardManager",new zf([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&a.#G.contains(l)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&a.#G.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}constructor(e,t,n,s,r,a,l,c,d,h,p,v,m,E,S,N){const C=this._signal=this.#e.signal;this.#G=e,this.#Z=t,this.#Q=n,this.#r=s,this.#l=r,this.#U=a,this.#$=c,this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:C}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:C}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:C}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:C}),l._on("setpreference",this.onSetPreference.bind(this),{signal:C}),l._on("switchannotationeditorparams",P=>this.updateParams(P.type,P.value),{signal:C}),window.addEventListener("pointerdown",()=>{this.#k=!0},{capture:!0,signal:C}),window.addEventListener("pointerup",()=>{this.#k=!1},{capture:!0,signal:C}),this.#ae(),this.#he(),this.#te(),this.#s=c.annotationStorage,this.#E=c.filterFactory,this.#q=d,this.#C=h||null,this.#v=p,this.#b=v,this.#y=m,this.#V=E||null,this.viewParameters={realScale:ih.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=N!==!1,r?.setSidebarUiManager(this)}destroy(){this.#j?.resolve(),this.#j=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#a.values())e.destroy();this.#a.clear(),this.#n.clear(),this.#p.clear(),this.#D?.clear(),this.#t=null,this.#_.clear(),this.#u.destroy(),this.#r?.destroy(),this.#l?.destroy(),this.#U?.destroy(),this.#S?.hide(),this.#S=null,this.#F?.destroy(),this.#F=null,this.#i=null,this.#A&&(clearTimeout(this.#A),this.#A=null),this.#O&&(clearTimeout(this.#O),this.#O=null),this._editorUndoBar?.destroy(),this.#$=null}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#V}get useNewAltTextFlow(){return this.#b}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return Qt(this,"hcmFilter",this.#q?this.#E.addHCMFilter(this.#q.foreground,this.#q.background):"none")}get direction(){return Qt(this,"direction",getComputedStyle(this.#G).direction)}get _highlightColors(){return Qt(this,"_highlightColors",this.#C?new Map(this.#C.split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Qt(this,"highlightColors",null);const t=new Map,n=!!this.#q;for(const[s,r]of e){const a=s.endsWith("_HCM");if(n&&a){t.set(s.replace("_HCM",""),r);continue}!n&&!a&&t.set(s,r)}return Qt(this,"highlightColors",t)}get highlightColorNames(){return Qt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#d=e}setMainHighlightColorPicker(e){this.#F=e}editAltText(e,t=!1){this.#r?.editAltText(this,e,t)}hasCommentManager(){return!!this.#l}editComment(e,t,n,s){this.#l?.showDialog(this,e,t,n,s)}selectComment(e,t){this.#a.get(e)?.getEditorByUID(t)?.toggleComment(!0,!0)}updateComment(e){this.#l?.updateComment(e.getData())}updatePopupColor(e){this.#l?.updatePopupColor(e)}removeComment(e){this.#l?.removeComments([e.uid])}toggleComment(e,t,n=void 0){this.#l?.toggleCommentPopup(e,t,n)}makeCommentColor(e,t){return e&&this.#l?.makeCommentColor(e,t)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(e){if(this.#a.has(e-1))return;const{resolve:t,promise:n}=Promise.withResolvers(),s=r=>{r.pageNumber===e&&(this._eventBus._off("editorsrendered",s),t())};this._eventBus.on("editorsrendered",s),await n}getSignature(e){this.#U?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#U}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":this.#y=t;break}}onPageChanging({pageNumber:e}){this.#f=e-1}focusMainContainer(){this.#G.focus()}findParent(e,t){for(const n of this.#a.values()){const{x:s,y:r,width:a,height:l}=n.div.getBoundingClientRect();if(e>=s&&e<=s+a&&t>=r&&t<=r+l)return n}return null}disableUserSelect(e=!1){this.#Z.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#p.add(e)}removeShouldRescale(e){this.#p.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*ih.PDF_TO_CSS_UNITS;for(const t of this.#p)t.onScaleChanging();this.#d?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#X({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#ee(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of this.#a.values())if(n.hasTextLayer(e))return n;return null}highlightSelection(e="",t=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:s,anchorOffset:r,focusNode:a,focusOffset:l}=n,c=n.toString(),h=this.#X(n).closest(".textLayer"),p=this.getSelectionBoxes(h);if(!p)return;n.empty();const v=this.#ee(h),m=this.#T===Zt.NONE,E=()=>{const S=v?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:p,anchorNode:s,anchorOffset:r,focusNode:a,focusOffset:l,text:c});m&&this.showAllEditors("highlight",!0,!0),t&&S?.editComment()};if(m){this.switchToMode(Zt.HIGHLIGHT,E);return}E()}commentSelection(e=""){this.highlightSelection(e,!0)}#se(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=this.#X(e).closest(".textLayer"),s=this.getSelectionBoxes(n);s&&(this.#S||=new xR(this),this.#S.show(n,s,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(e){if(!this.#s)return null;const t=`${Cf}${e}`,n=this.#s.getRawValue(t);return n&&this.#s.remove(t),n}addToAnnotationStorage(e){!e.isEmpty()&&this.#s&&!this.#s.has(e.id)&&this.#s.setValue(e.id,e)}a11yAlert(e,t=null){const n=this.#Q;n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}#re(){const e=document.getSelection();if(!e||e.isCollapsed){this.#I&&(this.#S?.hide(),this.#I=null,this.#L({hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===this.#I)return;const s=this.#X(e).closest(".textLayer");if(!s){this.#I&&(this.#S?.hide(),this.#I=null,this.#L({hasSelectedText:!1}));return}if(this.#S?.hide(),this.#I=t,this.#L({hasSelectedText:!0}),!(this.#T!==Zt.HIGHLIGHT&&this.#T!==Zt.NONE)&&(this.#T===Zt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#w=this.isShiftKeyDown,!this.isShiftKeyDown)){const r=this.#T===Zt.HIGHLIGHT?this.#ee(s):null;if(r?.toggleDrawing(),this.#k){const a=new AbortController,l=this.combinedSignal(a),c=d=>{d.type==="pointerup"&&d.button!==0||(a.abort(),r?.toggleDrawing(!0),d.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",c,{signal:l}),window.addEventListener("blur",c,{signal:l})}else r?.toggleDrawing(!0),this.#K("main_toolbar")}}#K(e=""){this.#T===Zt.HIGHLIGHT?this.highlightSelection(e):this.#v&&this.#se()}#ae(){document.addEventListener("selectionchange",this.#re.bind(this),{signal:this._signal})}#oe(){if(this.#x)return;this.#x=new AbortController;const e=this.combinedSignal(this.#x);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#le(){this.#x?.abort(),this.#x=null}blur(){if(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#_)if(t.div.contains(e)){this.#M=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#M)return;const[e,t]=this.#M;this.#M=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}#te(){if(this.#P)return;this.#P=new AbortController;const e=this.combinedSignal(this.#P);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#ue(){this.#P?.abort(),this.#P=null}#ce(){if(this.#h)return;this.#h=new AbortController;const e=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#de(){this.#h?.abort(),this.#h=null}#he(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#te(),this.setEditingState(!0)}removeEditListeners(){this.#ue(),this.setEditingState(!1)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of this.#c)if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of this.#c)if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const n of this.#_){const s=n.serialize(!0);s&&t.push(s)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const a of this.#c)if(a.isHandlingMimeForPasting(r.type)){a.paste(r,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){Jt(`paste: "${r.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const r=[];for(const c of n){const d=await s.deserialize(c);if(!d)return;r.push(d)}const a=()=>{for(const c of r)this.#ne(c);this.#ie(r)},l=()=>{for(const c of r)c.remove()};this.addCommands({cmd:a,undo:l,mustExec:!0})}catch(r){Jt(`paste: "${r.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#T!==Zt.NONE&&!this.isEditorHandlingKeyboard&&Eu._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#K("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#L(e){Object.entries(e).some(([n,s])=>this.#Y[n]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#Y,e)}),this.#T===Zt.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#z([[gn.HIGHLIGHT_FREE,!0]]))}#z(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#oe(),this.#ce(),this.#L({isEditing:this.#T!==Zt.NONE,isEmpty:this.#J(),hasSomethingToUndo:this.#u.hasSomethingToUndo(),hasSomethingToRedo:this.#u.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#le(),this.#de(),this.#L({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#c){this.#c=e;for(const t of this.#c)this.#z(t.defaultPropertiesToUpdate)}}getId(){return this.#R.id}get currentLayer(){return this.#a.get(this.#f)}getLayer(e){return this.#a.get(e)}get currentPageIndex(){return this.#f}addLayer(e){this.#a.set(e.pageIndex,e),this.#N?e.enable():e.disable()}removeLayer(e){this.#a.delete(e.pageIndex)}async updateMode(e,t=null,n=!1,s=!1,r=!1){if(this.#T!==e&&!(this.#j&&(await this.#j.promise,!this.#j))){if(this.#j=Promise.withResolvers(),this.#d?.commitOrRemove(),this.#T===Zt.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#T=e,e===Zt.NONE){this.setEditingState(!1),this.#pe();for(const a of this.#n.values())a.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#j.resolve();return}for(const a of this.#n.values())a.addStandaloneCommentButton();e===Zt.SIGNATURE&&await this.#U?.loadSignatures(),this.setEditingState(!0),await this.#fe(),this.unselectAll();for(const a of this.#a.values())a.updateMode(e);if(e===Zt.POPUP){this.#i||=await this.#$.getAnnotationsByType(new Set(this.#c.map(c=>c._editorType)));const a=new Set,l=[];for(const c of this.#n.values()){const{annotationElementId:d,hasComment:h,deleted:p}=c;d&&a.add(d),h&&!p&&l.push(c.getData())}for(const c of this.#i){const{id:d,popupRef:h,contentsObj:p}=c;h&&p?.str&&!a.has(d)&&!this.#m.has(d)&&l.push(c)}this.#l?.showSidebar(l)}if(!t){n&&this.addNewEditorFromKeyboard(),this.#j.resolve();return}for(const a of this.#n.values())a.uid===t?(this.setSelected(a),r?a.editComment():s?a.enterInEditMode():a.focus()):a.unselect();this.#j.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==this.#T&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(this.#c){switch(e){case gn.CREATE:this.currentLayer.addNewEditor(t);return;case gn.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#W||=new Map).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const n of this.#_)n.updateParams(e,t);else for(const n of this.#c)n.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){for(const r of this.#n.values())r.editorType===e&&r.show(t);(this.#W?.get(gn.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#z([[gn.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(this.#B!==e){this.#B=e;for(const t of this.#a.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}async#fe(){if(!this.#N){this.#N=!0;const e=[];for(const t of this.#a.values())e.push(t.enable());await Promise.all(e);for(const t of this.#n.values())t.enable()}}#pe(){if(this.unselectAll(),this.#N){this.#N=!1;for(const e of this.#a.values())e.disable();for(const e of this.#n.values())e.disable()}}*getEditors(e){for(const t of this.#n.values())t.pageIndex===e&&(yield t)}getEditor(e){return this.#n.get(e)}addEditor(e){this.#n.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#A&&clearTimeout(this.#A),this.#A=setTimeout(()=>{this.focusMainContainer(),this.#A=null},0)),this.#n.delete(e.id),e.annotationElementId&&this.#D?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#m.has(e.annotationElementId))&&this.#s?.remove(e.id)}addDeletedAnnotationElement(e){this.#m.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#m.has(e)}removeDeletedAnnotationElement(e){this.#m.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#ne(e){const t=this.#a.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#z(e.propertiesToUpdate))}get#ge(){let e=null;for(e of this.#_);return e}updateUI(e){this.#ge===e&&this.#z(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#z(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#_.has(e)){this.#_.delete(e),e.unselect(),this.#L({hasSelectedEditor:this.hasSelection});return}this.#_.add(e),e.select(),this.#z(e.propertiesToUpdate),this.#L({hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.uid}),this.#d?.commitOrRemove();for(const t of this.#_)t!==e&&t.unselect();this.#_.clear(),this.#_.add(e),e.select(),this.#z(e.propertiesToUpdate),this.#L({hasSelectedEditor:!0})}isSelected(e){return this.#_.has(e)}get firstSelectedEditor(){return this.#_.values().next().value}unselect(e){e.unselect(),this.#_.delete(e),this.#L({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#_.size!==0}get isEnterHandled(){return this.#_.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#u.undo(),this.#L({hasSomethingToUndo:this.#u.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#J()}),this._editorUndoBar?.hide()}redo(){this.#u.redo(),this.#L({hasSomethingToUndo:!0,hasSomethingToRedo:this.#u.hasSomethingToRedo(),isEmpty:this.#J()})}addCommands(e){this.#u.add(e),this.#L({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#J()})}cleanUndoStack(e){this.#u.cleanType(e)}#J(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const e of this.#n.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...this.#_],n=()=>{this._editorUndoBar?.show(s,t.length===1?t[0].editorType:t.length);for(const r of t)r.remove()},s=()=>{for(const r of t)this.#ne(r)};this.addCommands({cmd:n,undo:s,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#ie(e){for(const t of this.#_)t.unselect();this.#_.clear();for(const t of e)t.isEmpty()||(this.#_.add(t),t.select());this.#L({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#_)e.commit();this.#ie(this.#n.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#T!==Zt.NONE))&&!this.#d?.commitOrRemove()&&this.hasSelection){for(const e of this.#_)e.unselect();this.#_.clear(),this.#L({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;this.#H[0]+=e,this.#H[1]+=t;const[s,r]=this.#H,a=[...this.#_],l=1e3;this.#O&&clearTimeout(this.#O),this.#O=setTimeout(()=>{this.#O=null,this.#H[0]=this.#H[1]=0,this.addCommands({cmd:()=>{for(const c of a)this.#n.has(c.id)&&(c.translateInPage(s,r),c.translationDone())},undo:()=>{for(const c of a)this.#n.has(c.id)&&(c.translateInPage(-s,-r),c.translationDone())},mustExec:!1})},l);for(const c of a)c.translateInPage(e,t),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#g=new Map;for(const e of this.#_)this.#g.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#g)return!1;this.disableUserSelect(!1);const e=this.#g;this.#g=null;let t=!1;for(const[{x:s,y:r,pageIndex:a},l]of e)l.newX=s,l.newY=r,l.newPageIndex=a,t||=s!==l.savedX||r!==l.savedY||a!==l.savedPageIndex;if(!t)return!1;const n=(s,r,a,l)=>{if(this.#n.has(s.id)){const c=this.#a.get(l);c?s._setParentAndPosition(c,r,a):(s.pageIndex=l,s.x=r,s.y=a)}};return this.addCommands({cmd:()=>{for(const[s,{newX:r,newY:a,newPageIndex:l}]of e)n(s,r,a,l)},undo:()=>{for(const[s,{savedX:r,savedY:a,savedPageIndex:l}]of e)n(s,r,a,l)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#g)for(const n of this.#g.keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#_.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#T}isEditingMode(){return this.#T!==Zt.NONE}get imageManager(){return Qt(this,"imageManager",new Kv)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let d=0,h=t.rangeCount;d<h;d++)if(!e.contains(t.getRangeAt(d).commonAncestorContainer))return null;const{x:n,y:s,width:r,height:a}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(d,h,p,v)=>({x:(h-s)/a,y:1-(d+p-n)/r,width:v/a,height:p/r});break;case"180":l=(d,h,p,v)=>({x:1-(d+p-n)/r,y:1-(h+v-s)/a,width:p/r,height:v/a});break;case"270":l=(d,h,p,v)=>({x:1-(h+v-s)/a,y:(d-n)/r,width:v/a,height:p/r});break;default:l=(d,h,p,v)=>({x:(d-n)/r,y:(h-s)/a,width:p/r,height:v/a});break}const c=[];for(let d=0,h=t.rangeCount;d<h;d++){const p=t.getRangeAt(d);if(!p.collapsed)for(const{x:v,y:m,width:E,height:S}of p.getClientRects())E===0||S===0||c.push(l(v,m,E,S))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(this.#o||=new Map).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){this.#o?.delete(e)}renderAnnotationElement(e){const t=this.#o?.get(e.data.id);if(!t)return;const n=this.#s.getRawValue(t);n&&(this.#T===Zt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,t,n){const s=this.#D?.get(e);s&&(s.setCanvas(t,n),this.#D.delete(e))}addMissingCanvas(e,t){(this.#D||=new Map).set(e,t)}}class qo{#e=null;#t=!1;#i=null;#n=null;#a=null;#r=null;#s=!1;#o=null;#u=null;#l=null;#h=null;#d=!1;static#f=null;static _l10n=null;constructor(e){this.#u=e,this.#d=e._uiManager.useNewAltTextFlow,qo.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){qo._l10n??=e}async render(){const e=this.#i=document.createElement("button");e.className="altText",e.tabIndex="0";const t=this.#n=document.createElement("span");e.append(t),this.#d?(e.classList.add("new"),e.setAttribute("data-l10n-id",qo.#f.missing),t.setAttribute("data-l10n-id",qo.#f["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=this.#u._uiManager._signal;e.addEventListener("contextmenu",Ea,{signal:n}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:n});const s=r=>{r.preventDefault(),this.#u._uiManager.editAltText(this.#u),this.#d&&this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return e.addEventListener("click",s,{capture:!0,signal:n}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(this.#s=!0,s(r))},{signal:n}),await this.#g(),e}get#m(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#s}),this.#s=!1)}isEmpty(){return this.#d?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#d?this.#e!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(e){this.#e===null&&(this.#l=e,this.#h=await qo._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#g())}toggleAltTextBadge(e=!1){if(!this.#d||this.#e){this.#o?.remove(),this.#o=null;return}if(!this.#o){const t=this.#o=document.createElement("div");t.className="noAltTextBadge",this.#u.div.append(t)}this.#o.classList.toggle("hidden",!e)}serialize(e){let t=this.#e;return!e&&this.#l===t&&(t=this.#h),{altText:t,decorative:this.#t,guessedText:this.#l,textWithDisclaimer:this.#h}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:s,cancel:r=!1}){n&&(this.#l=n,this.#h=s),!(this.#e===e&&this.#t===t)&&(r||(this.#e=e,this.#t=t),this.#g())}toggle(e=!1){this.#i&&(!e&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#i.disabled=!e)}shown(){this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#a=null,this.#o?.remove(),this.#o=null}async#g(){const e=this.#i;if(!e)return;if(this.#d){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",qo.#f[this.#m]),this.#n?.setAttribute("data-l10n-id",qo.#f[`${this.#m}-label`]),!this.#e){this.#a?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#a?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=this.#a;if(!t){this.#a=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${this.#u.id}`;const s=100,r=this.#u._uiManager._signal;r.addEventListener("abort",()=>{clearTimeout(this.#r),this.#r=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#r=setTimeout(()=>{this.#r=null,this.#a.classList.add("show"),this.#u._reportTelemetry({action:"alt_text_tooltip"})},s)},{signal:r}),e.addEventListener("mouseleave",()=>{this.#r&&(clearTimeout(this.#r),this.#r=null),this.#a?.classList.remove("show")},{signal:r})}this.#t?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=this.#e),t.parentNode||e.append(t),this.#u.getElementForAltText()?.setAttribute("aria-describedby",t.id)}}class Xp{#e=null;#t=null;#i=!1;#n=null;#a=null;#r=null;#s=null;#o=null;#u=!1;#l=null;constructor(e){this.#n=e}renderForToolbar(){const e=this.#t=document.createElement("button");return e.className="comment",this.#h(e,!1)}renderForStandalone(){const e=this.#e=document.createElement("button");e.className="annotationCommentButton";const t=this.#n.commentButtonPosition;if(t){const{style:n}=e;n.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const s=this.#n.commentButtonColor;s&&(n.backgroundColor=s)}return this.#h(e,!0)}focusButton(){setTimeout(()=>{(this.#e??this.#t)?.focus()},0)}onUpdatedColor(){if(!this.#e)return;const e=this.#n.commentButtonColor;e&&(this.#e.style.backgroundColor=e),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#e?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#e)return null;const{x:e,y:t,height:n}=this.#e.getBoundingClientRect(),{x:s,y:r,width:a,height:l}=this.#n.parent.boundingClientRect;return[(e-s)/a,(t+n-r)/l]}set commentPopupPositionInLayer(e){this.#l=e}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#e?.remove(),this.#e=null}removeToolbarCommentButton(){this.#t?.remove(),this.#t=null}setCommentButtonStates({selected:e,hasPopup:t}){this.#e&&(this.#e.classList.toggle("selected",e),this.#e.ariaExpanded=t)}#h(e,t){if(!this.#n._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const n=this.#n._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return e;e.addEventListener("contextmenu",Ea,{signal:n}),t&&(e.addEventListener("focusin",r=>{this.#n._focusEventsAllowed=!1,Oi(r)},{capture:!0,signal:n}),e.addEventListener("focusout",r=>{this.#n._focusEventsAllowed=!0,Oi(r)},{capture:!0,signal:n})),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:n});const s=r=>{r.preventDefault(),e===this.#t?this.edit():this.#n.toggleComment(!0)};return e.addEventListener("click",s,{capture:!0,signal:n}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(this.#i=!0,s(r))},{signal:n}),e.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:n}),e.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:n}),e}edit(e){const t=this.commentPopupPositionInLayer;let n,s;if(t)[n,s]=t;else{[n,s]=this.#n.commentButtonPosition;const{width:h,height:p,x:v,y:m}=this.#n;n=v+n*h,s=m+s*p}const r=this.#n.parent.boundingClientRect,{x:a,y:l,width:c,height:d}=r;this.#n._uiManager.editComment(this.#n,a+n*c,l+s*d,{...e,parentDimensions:r})}finish(){this.#t&&(this.#t.focus({focusVisible:this.#i}),this.#i=!1)}isDeleted(){return this.#u||this.#s===""}isEmpty(){return this.#s===null}hasBeenEdited(){return this.isDeleted()||this.#s!==this.#a}serialize(){return this.data}get data(){return{text:this.#s,richText:this.#r,date:this.#o,deleted:this.isDeleted()}}set data(e){if(e!==this.#s&&(this.#r=null),e===null){this.#s="",this.#u=!0;return}this.#s=e,this.#o=new Date,this.#u=!1}setInitialText(e,t=null){this.#a=e,this.data=e,this.#o=null,this.#r=t}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#e?.remove(),this.#e=null,this.#s="",this.#r=null,this.#o=null,this.#n=null,this.#i=!1,this.#u=!1}}class lg{#e;#t=!1;#i=null;#n;#a;#r;#s;#o=null;#u;#l=null;#h;#d=null;constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:s=null,onPinching:r=null,onPinchEnd:a=null,signal:l}){this.#e=e,this.#i=n,this.#n=t,this.#a=s,this.#r=r,this.#s=a,this.#h=new AbortController,this.#u=AbortSignal.any([l,this.#h.signal]),e.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#u})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/zo.pixelRatio}#f(e){if(this.#n?.())return;if(e.touches.length===1){if(this.#o)return;const s=this.#o=new AbortController,r=AbortSignal.any([this.#u,s.signal]),a=this.#e,l={capture:!0,signal:r,passive:!1},c=d=>{d.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};a.addEventListener("pointerdown",d=>{d.pointerType==="touch"&&(Oi(d),c(d))},l),a.addEventListener("pointerup",c,l),a.addEventListener("pointercancel",c,l);return}if(!this.#d){this.#d=new AbortController;const s=AbortSignal.any([this.#u,this.#d.signal]),r=this.#e,a={signal:s,capture:!1,passive:!1};r.addEventListener("touchmove",this.#m.bind(this),a);const l=this.#g.bind(this);r.addEventListener("touchend",l,a),r.addEventListener("touchcancel",l,a),a.capture=!0,r.addEventListener("pointerdown",Oi,a),r.addEventListener("pointermove",Oi,a),r.addEventListener("pointercancel",Oi,a),r.addEventListener("pointerup",Oi,a),this.#a?.()}if(Oi(e),e.touches.length!==2||this.#i?.()){this.#l=null;return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),this.#l={touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY}}#m(e){if(!this.#l||e.touches.length!==2)return;Oi(e);let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:s,screenY:r}=t,{screenX:a,screenY:l}=n,c=this.#l,{touch0X:d,touch0Y:h,touch1X:p,touch1Y:v}=c,m=p-d,E=v-h,S=a-s,N=l-r,C=Math.hypot(S,N)||1,P=Math.hypot(m,E)||1;if(!this.#t&&Math.abs(P-C)<=lg.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=s,c.touch0Y=r,c.touch1X=a,c.touch1Y=l,!this.#t){this.#t=!0;return}const L=[(s+a)/2,(r+l)/2];this.#r?.(L,P,C)}#g(e){e.touches.length>=2||(this.#d&&(this.#d.abort(),this.#d=null,this.#s?.()),this.#l&&(Oi(e),this.#l=null,this.#t=!1))}destroy(){this.#h?.abort(),this.#h=null,this.#o?.abort(),this.#o=null}}class Rt{#e=null;#t=null;#i=null;#n=null;#a=null;#r=!1;#s=null;#o="";#u=null;#l=null;#h=null;#d=null;#f=null;#m="";#g=!1;#c=null;#p=!1;#v=!1;#b=!1;#y=null;#E=0;#A=0;#x=null;#C=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#w=!1;#S=Rt._zIndex++;static _borderLineWidth=-1;static _colorManager=new Jv;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=Rt.prototype._resizeWithKeyboard,t=Eu.TRANSLATE_SMALL,n=Eu.TRANSLATE_BIG;return Qt(this,"_resizerKeyboardManager",new zf([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],Rt.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;const{rotation:t,rawDims:{pageWidth:n,pageHeight:s,pageX:r,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[r,a];const[l,c]=this.parentDimensions;this.x=e.x/l,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Qt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new SR({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Rt._l10n??=e,Rt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),Rt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Rt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Xn("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#w}set _isDraggable(e){this.#w=e,this.div?.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#S}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(this.#O(),this.#d?.remove(),this.#d=null),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#g?this.#g=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,s){const[r,a]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(e+n)/r,this.y=(t+s)/a,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,s]=this.parentDimensions;this.setAt(e*n,t*s,this.width*n,this.height*s),this._onTranslated()}#R([e,t],n,s){[n,s]=this.screenToPageTranslation(n,s),this.x+=n/e,this.y+=s/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,t){this.#R(this.parentDimensions,e,t)}translateInPage(e,t){this.#c||=[this.x,this.y,this.width,this.height],this.#R(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){this.#c||=[this.x,this.y,this.width,this.height];const{div:n,parentDimensions:[s,r]}=this;if(this.x+=e/s,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:p,y:v}=this.div.getBoundingClientRect();this.parent.findNewParent(this,p,v)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:l}=this;const[c,d]=this.getBaseTranslation();a+=c,l+=d;const{style:h}=n;h.left=`${(100*a).toFixed(2)}%`,h.top=`${(100*l).toFixed(2)}%`,this._onTranslating(a,l),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!this.#c&&(this.#c[0]!==this.x||this.#c[1]!==this.y)}get _hasBeenResized(){return!!this.#c&&(this.#c[2]!==this.width||this.#c[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=Rt,s=n/e,r=n/t;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,s]}=this;let{x:r,y:a,width:l,height:c}=this;if(l*=n,c*=s,r*=n,a*=s,this._mustFixPosition)switch(e){case 0:r=or(r,0,n-l),a=or(a,0,s-c);break;case 90:r=or(r,0,n-c),a=or(a,l,s);break;case 180:r=or(r,l,n),a=or(a,c,s);break;case 270:r=or(r,c,n),a=or(a,0,s-l);break}this.x=r/=n,this.y=a/=s;const[d,h]=this.getBaseTranslation();r+=d,a+=h,t.left=`${(100*r).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}static#N(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return Rt.#N(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return Rt.#N(e,t,360-this.parentRotation)}#k(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(){const{div:{style:e},width:t,height:n}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#B(){if(this.#u)return;this.#u=document.createElement("div"),this.#u.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const s=document.createElement("div");this.#u.append(s),s.classList.add("resizer",n),s.setAttribute("data-resizer-name",n),s.addEventListener("pointerdown",this.#P.bind(this,n),{signal:t}),s.addEventListener("contextmenu",Ea,{signal:t}),s.tabIndex=-1}this.div.prepend(this.#u)}#P(e,t){t.preventDefault();const{isMac:n}=Ds.platform;if(t.button!==0||t.ctrlKey&&n)return;this.#i?.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,this.#l=[t.screenX,t.screenY];const r=new AbortController,a=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#D.bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",Oi,{passive:!1,signal:a}),window.addEventListener("contextmenu",Ea,{signal:a}),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const l=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const d=()=>{r.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=l,this.div.style.cursor=c,this.#F()};window.addEventListener("pointerup",d,{signal:a}),window.addEventListener("blur",d,{signal:a})}#M(e,t,n,s){this.width=n,this.height=s,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#F(){if(!this.#h)return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:s}=this.#h;this.#h=null;const r=this.x,a=this.y,l=this.width,c=this.height;r===e&&a===t&&l===n&&c===s||this.addCommands({cmd:this.#M.bind(this,r,a,l,c),undo:this.#M.bind(this,e,t,n,s),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#D(e,t){const[n,s]=this.parentDimensions,r=this.x,a=this.y,l=this.width,c=this.height,d=Rt.MIN_SIZE/n,h=Rt.MIN_SIZE/s,p=this.#k(this.rotation),v=(X,ue)=>[p[0]*X+p[2]*ue,p[1]*X+p[3]*ue],m=this.#k(360-this.rotation),E=(X,ue)=>[m[0]*X+m[2]*ue,m[1]*X+m[3]*ue];let S,N,C=!1,P=!1;switch(e){case"topLeft":C=!0,S=(X,ue)=>[0,0],N=(X,ue)=>[X,ue];break;case"topMiddle":S=(X,ue)=>[X/2,0],N=(X,ue)=>[X/2,ue];break;case"topRight":C=!0,S=(X,ue)=>[X,0],N=(X,ue)=>[0,ue];break;case"middleRight":P=!0,S=(X,ue)=>[X,ue/2],N=(X,ue)=>[0,ue/2];break;case"bottomRight":C=!0,S=(X,ue)=>[X,ue],N=(X,ue)=>[0,0];break;case"bottomMiddle":S=(X,ue)=>[X/2,ue],N=(X,ue)=>[X/2,0];break;case"bottomLeft":C=!0,S=(X,ue)=>[0,ue],N=(X,ue)=>[X,0];break;case"middleLeft":P=!0,S=(X,ue)=>[0,ue/2],N=(X,ue)=>[X,ue/2];break}const L=S(l,c),O=N(l,c);let q=v(...O);const G=Rt._round(r+q[0]),W=Rt._round(a+q[1]);let K=1,j=1,ee,B;if(t.fromKeyboard)({deltaX:ee,deltaY:B}=t);else{const{screenX:X,screenY:ue}=t,[de,we]=this.#l;[ee,B]=this.screenToPageTranslation(X-de,ue-we),this.#l[0]=X,this.#l[1]=ue}if([ee,B]=E(ee/n,B/s),C){const X=Math.hypot(l,c);K=j=Math.max(Math.min(Math.hypot(O[0]-L[0]-ee,O[1]-L[1]-B)/X,1/l,1/c),d/l,h/c)}else P?K=or(Math.abs(O[0]-L[0]-ee),d,1)/l:j=or(Math.abs(O[1]-L[1]-B),h,1)/c;const H=Rt._round(l*K),se=Rt._round(c*j);q=v(...N(H,se));const ie=G-q[0],ye=W-q[1];this.#c||=[this.x,this.y,this.width,this.height],this.width=H,this.height=se,this.x=ie,this.y=ye,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#i?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#v)return this._editToolbar;this._editToolbar=new mf(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,n]of e)await this._editToolbar.addButton(t,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#i?.destroy()}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#i||(qo.initialize(Rt._l10n),this.#i=new qo(this),this.#e&&(this.#i.data=this.#e,this.#e=null)),this.#i}get altTextData(){return this.#i?.data}set altTextData(e){this.#i&&(this.#i.data=e)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(e){await this.#i?.setGuessedText(e)}serializeAltText(e){return this.#i?.serialize(e)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.canAddComment?this.#n||=new Xp(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#a){this._uiManager.isEditingMode()&&this.#a.classList.remove("hidden");return}this.hasComment&&(this.#a=this.#n.renderForStandalone(),this.div.append(this.#a))}}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#a=null}hideStandaloneCommentButton(){this.#a?.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:n,deleted:s}}=this.#n;return{text:t,richText:e,date:n,deleted:s,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){this.#n||=new Xp(this),this.#n.data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:n}){if(!t||(this.#n||=new Xp(this),this.#n.setInitialText(e,n),!this.annotationElementId))return;const s=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);s&&this.updateFromAnnotationLayer(s)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(e){this.#n||=new Xp(this),this.#n.edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){this.#n.setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,s]=e.rect,[r]=this.pageDimensions,[a]=this.pageTranslation,l=a+r+1,c=s-100,d=l+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[l,c,d,s]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){this.#n.data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=this.#r?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),this.#q();const[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/n).toFixed(2)}%`);const[s,r]=this.getInitialTranslation();return this.translate(s,r),xS(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#C||=new lg({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#V.bind(this),onPinching:this.#T.bind(this),onPinchEnd:this.#_.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),e}#V(){this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#i?.toggle(!1),this.parent.togglePointerEvents(!1)}#T(e,t,n){let r=.7*(n/t)+1-.7;if(r===1)return;const a=this.#k(this.rotation),l=(G,W)=>[a[0]*G+a[2]*W,a[1]*G+a[3]*W],[c,d]=this.parentDimensions,h=this.x,p=this.y,v=this.width,m=this.height,E=Rt.MIN_SIZE/c,S=Rt.MIN_SIZE/d;r=Math.max(Math.min(r,1/v,1/m),E/v,S/m);const N=Rt._round(v*r),C=Rt._round(m*r);if(N===v&&C===m)return;this.#c||=[h,p,v,m];const P=l(v/2,m/2),L=Rt._round(h+P[0]),O=Rt._round(p+P[1]),q=l(N/2,C/2);this.x=L-q[0],this.y=O-q[1],this.width=N,this.height=C,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#_(){this.#i?.toggle(!0),this.parent.togglePointerEvents(!0),this.#F()}pointerdown(e){const{isMac:t}=Ds.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#g=!0,this._isDraggable){this.#U(e);return}this.#I(e)}#I(e){const{isMac:t}=Ds.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#U(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const s=new AbortController,r=this._uiManager.combinedSignal(s),a={capture:!0,passive:!1,signal:r},l=d=>{s.abort(),this.#s=null,this.#g=!1,this._uiManager.endDragSession()||this.#I(d),n&&this._onStopDragging()};t&&(this.#E=e.clientX,this.#A=e.clientY,this.#s=e.pointerId,this.#o=e.pointerType,window.addEventListener("pointermove",d=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:h,clientY:p,pointerId:v}=d;if(v!==this.#s){Oi(d);return}const[m,E]=this.screenToPageTranslation(h-this.#E,p-this.#A);this.#E=h,this.#A=p,this._uiManager.dragSelectedEditors(m,E)},a),window.addEventListener("touchmove",Oi,a),window.addEventListener("pointerdown",d=>{d.pointerType===this.#o&&(this.#C||d.isPrimary)&&l(d),Oi(d)},a));const c=d=>{if(!this.#s||this.#s===d.pointerId){l(d);return}Oi(d)};window.addEventListener("pointerup",c,{signal:r}),window.addEventListener("blur",c,{signal:r})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const s=this.parentScale,[r,a]=this.pageDimensions,[l,c]=this.pageTranslation,d=e/s,h=t/s,p=this.x*r,v=this.y*a,m=this.width*r,E=this.height*a;switch(n){case 0:return[p+d+l,a-v-h-E+c,p+d+m+l,a-v-h+c];case 90:return[p+h+l,a-v+d+c,p+h+E+l,a-v+d+m+c];case 180:return[p-d-m+l,a-v+h+c,p-d+l,a-v+h+E+c];case 270:return[p-h-E+l,a-v-d-m+c,p-h+l,a-v-d+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,s,r,a]=e,l=r-n,c=a-s;switch(this.rotation){case 0:return[n,t-a,l,c];case 90:return[n,t-s,c,l];case 180:return[r,t-s,l,c];case 270:return[r,t-a,c,l];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Rt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:n,opacity:s,deleted:r,richText:a},uid:l,pageIndex:c,creationDate:d,modificationDate:h}=this;return{id:l,pageIndex:c,rect:this.getPDFRect(),richText:a,contentsObj:{str:e},creationDate:d,modificationDate:n||h,popupRef:!r,color:t,opacity:s}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#v=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#v=!1,!0):!1}isInEditMode(){return this.#v}shouldGetKeyboardEvents(){return this.#b}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:s}=this.getClientDimensions(),{innerHeight:r,innerWidth:a}=window;return t<a&&s>0&&e<r&&n>0}#q(){if(this.#f||!this.div)return;this.#f=new AbortController;const e=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#q()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(e,t,n){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});s.rotation=e.rotation,s.#e=e.accessibilityData,s._isCopy=e.isCopy||!1;const[r,a]=s.pageDimensions,[l,c,d,h]=s.getRectInCurrentCoords(e.rect,a);return s.x=l/r,s.y=c/a,s.width=d/r,s.height=h/a,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#O(),this.removeEditToolbar(),this.#x){for(const e of this.#x.values())clearTimeout(e);this.#x=null}this.parent=null,this.#C?.destroy(),this.#C=null,this.#d?.remove(),this.#d=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#B(),this.#u.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[n,s,r,a]=this.getPDFRect();return[Rt._round(n+(r-n)*e),Rt._round(s+(a-s)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(e){this.#n.commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){this.#n?.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#u.children;if(!this.#t){this.#t=Array.from(t);const a=this.#W.bind(this),l=this.#$.bind(this),c=this._uiManager._signal;for(const d of this.#t){const h=d.getAttribute("data-resizer-name");d.setAttribute("role","spinbutton"),d.addEventListener("keydown",a,{signal:c}),d.addEventListener("blur",l,{signal:c}),d.addEventListener("focus",this.#Y.bind(this,h),{signal:c}),d.setAttribute("data-l10n-id",Rt._l10nResizer[h])}}const n=this.#t[0];let s=0;for(const a of t){if(a===n)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(r!==s){if(r<s)for(let l=0;l<s-r;l++)this.#u.append(this.#u.firstChild);else if(r>s)for(let l=0;l<r-s;l++)this.#u.firstChild.before(this.#u.lastChild);let a=0;for(const l of t){const d=this.#t[a++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",Rt._l10nResizer[d])}}this.#H(0),this.#b=!0,this.#u.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#W(e){Rt._resizerKeyboardManager.exec(this,e)}#$(e){this.#b&&e.relatedTarget?.parentNode!==this.#u&&this.#O()}#Y(e){this.#m=this.#b?e:""}#H(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#b&&this.#D(this.#m,{deltaX:e,deltaY:t,fromKeyboard:!0})}#O(){this.#b=!1,this.#H(-1),this.#F()}_stopResizingWithKeyboard(){this.#O(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#u?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(e){this.#p=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#x||=new Map;const{action:n}=e;let s=this.#x.get(n);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),this.#x.delete(n),this.#x.size===0&&(this.#x=null)},Rt._telemetryTimeout),this.#x.set(n,s);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#r=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#r=!0}updateFakeAnnotationElement(e){if(!this.#d&&!this.deleted){this.#d=e.addFakeAnnotation(this);return}if(this.deleted){this.#d.remove(),this.#d=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#d.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}}class SR extends Rt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const H5=3285377520,wa=4294901760,Bo=65535;class _S{constructor(e){this.h1=e?e&4294967295:H5,this.h2=e?e&4294967295:H5}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let S=0,N=e.length;S<N;S++){const C=e.charCodeAt(S);C<=255?t[n++]=C:(t[n++]=C>>>8,t[n++]=C&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=n>>2,r=n-s*4,a=new Uint32Array(t.buffer,0,s);let l=0,c=0,d=this.h1,h=this.h2;const p=3432918353,v=461845907,m=p&Bo,E=v&Bo;for(let S=0;S<s;S++)S&1?(l=a[S],l=l*p&wa|l*m&Bo,l=l<<15|l>>>17,l=l*v&wa|l*E&Bo,d^=l,d=d<<13|d>>>19,d=d*5+3864292196):(c=a[S],c=c*p&wa|c*m&Bo,c=c<<15|c>>>17,c=c*v&wa|c*E&Bo,h^=c,h=h<<13|h>>>19,h=h*5+3864292196);switch(l=0,r){case 3:l^=t[s*4+2]<<16;case 2:l^=t[s*4+1]<<8;case 1:l^=t[s*4],l=l*p&wa|l*m&Bo,l=l<<15|l>>>17,l=l*v&wa|l*E&Bo,s&1?d^=l:h^=l}this.h1=d,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&wa|e*36045&Bo,t=t*4283543511&wa|((t<<16|e>>>16)*2950163797&wa)>>>16,e^=t>>>1,e=e*444984403&wa|e*60499&Bo,t=t*3301882366&wa|((t<<16|e>>>16)*3120437893&wa)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Z1=Object.freeze({map:null,hash:"",transfer:void 0});class Xv{#e=!1;#t=null;#i=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=this.#n.get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return this.#n.get(e)}remove(e){const t=this.#n.get(e);if(t!==void 0&&(t instanceof Rt&&this.#i.delete(t.annotationElementId),this.#n.delete(e),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of this.#n.values())if(n instanceof Rt)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=this.#n.get(e);let s=!1;if(n!==void 0)for(const[r,a]of Object.entries(t))n[r]!==a&&(s=!0,n[r]=a);else s=!0,this.#n.set(e,t);s&&this.#a(),t instanceof Rt&&((this.#i||=new Map).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return this.#n.has(e)}get size(){return this.#n.size}#a(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new AS(this)}get serializable(){if(this.#n.size===0)return Z1;const e=new Map,t=new _S,n=[],s=Object.create(null);let r=!1;for(const[a,l]of this.#n){const c=l instanceof Rt?l.serialize(!1,s):l;c&&(e.set(a,c),t.update(`${a}:${JSON.stringify(c)}`),r||=!!c.bitmap)}if(r)for(const a of e.values())a.bitmap&&n.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:Z1}get editorStats(){let e=null;const t=new Map;let n=0,s=0;for(const r of this.#n.values()){if(!(r instanceof Rt)){r.popup&&(r.popup.deleted?s+=1:n+=1);continue}r.isCommentDeleted?s+=1:r.hasEditedComment&&(n+=1);const a=r.telemetryFinalData;if(!a)continue;const{type:l}=a;t.has(l)||t.set(l,Object.getPrototypeOf(r).constructor),e||=Object.create(null);const c=e[l]||=new Map;for(const[d,h]of Object.entries(a)){if(d==="type")continue;let p=c.get(d);p||(p=new Map,c.set(d,p));const v=p.get(h)??0;p.set(h,v+1)}}if((s>0||n>0)&&(e||=Object.create(null),e.comments={deleted:s,edited:n}),!e)return null;for(const[r,a]of t)e[r]=a.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){this.#t=null}updateEditor(e,t){const n=this.#i?.get(e);return n?(n.updateFromAnnotationLayer(t),!0):!1}getEditor(e){return this.#i?.get(e)||null}get modifiedIds(){if(this.#t)return this.#t;const e=[];if(this.#i)for(const t of this.#i.values())t.serialize()&&e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class AS extends Xv{#e;constructor(e){super();const{map:t,hash:n,transfer:s}=e.serializable,r=structuredClone(t,s?{transfer:s}:null);this.#e={map:r,hash:n,transfer:s}}get print(){Xn("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return Qt(this,"modifiedIds",{ids:new Set,hash:""})}}class ER{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:n}){if(!(!e||this.#e.has(e.loadedName))){if(mn(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:r,style:a}=e,l=new FontFace(s,r,a);this.addNativeFontFace(l);try{await l.load(),this.#e.add(s),n?.(e)}catch{Jt(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}Xn("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(s){throw Jt(`Failed to load font '${n.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const s=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return Qt(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Qt(this,"isSyncFontLoadingSupported",ar||Ds.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(mn(!s.done,"completeRequest() cannot be called twice."),s.done=!0;n.length>0&&n[0].done;){const r=n.shift();setTimeout(r.callback,0)}}const{loadingRequests:n}=this,s={done:!1,complete:t,callback:e};return n.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Qt(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(O,q){return O.charCodeAt(q)<<24|O.charCodeAt(q+1)<<16|O.charCodeAt(q+2)<<8|O.charCodeAt(q+3)&255}function s(O,q,G,W){const K=O.substring(0,q),j=O.substring(q+G);return K+W+j}let r,a;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let d=0;function h(O,q){if(++d>30){Jt("Load test font never loaded."),q();return}if(c.font="30px "+O,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){q();return}setTimeout(h.bind(null,O,q))}const p=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=s(v,976,p.length,p);const E=16,S=1482184792;let N=n(v,E);for(r=0,a=p.length-3;r<a;r+=4)N=N-S+n(p,r)|0;r<p.length&&(N=N-S+n(p+"XXX",r)|0),v=s(v,E,4,rR(N));const C=`url(data:font/opentype;base64,${btoa(v)});`,P=`@font-face {font-family:"${p}";src:${C}}`;this.insertRule(P);const L=this._document.createElement("div");L.style.visibility="hidden",L.style.width=L.style.height="10px",L.style.position="absolute",L.style.top=L.style.left="0px";for(const O of[e.loadedName,p]){const q=this._document.createElement("span");q.textContent="Hi",q.style.fontFamily=O,L.append(q)}this._document.body.append(L),h(p,()=>{L.remove(),t.complete()})}}class TR{#e;constructor(e,t=null,n,s){this.compiledGlyphs=Object.create(null),this.#e=e,this._inspectFont=t,n&&Object.assign(this,n),s&&(this.charProcOperatorList=s)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${vS(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let s;try{s=e.get(n)}catch(a){Jt(`getPathGenerator - ignoring character: "${a}".`)}const r=wS(s);return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=r}get black(){return this.#e.black}get bold(){return this.#e.bold}get disableFontFace(){return this.#e.disableFontFace??!1}get fontExtraProperties(){return this.#e.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#e.isInvalidPDFjsFont}get isType3Font(){return this.#e.isType3Font}get italic(){return this.#e.italic}get missingFile(){return this.#e.missingFile}get remeasure(){return this.#e.remeasure}get vertical(){return this.#e.vertical}get ascent(){return this.#e.ascent}get defaultWidth(){return this.#e.defaultWidth}get descent(){return this.#e.descent}get bbox(){return this.#e.bbox}get fontMatrix(){return this.#e.fontMatrix}get fallbackName(){return this.#e.fallbackName}get loadedName(){return this.#e.loadedName}get mimetype(){return this.#e.mimetype}get name(){return this.#e.name}get data(){return this.#e.data}clearData(){this.#e.clearData()}get cssFontInfo(){return this.#e.cssFontInfo}get systemFontInfo(){return this.#e.systemFontInfo}get defaultVMetrics(){return this.#e.defaultVMetrics}}class Vd{#e;#t;#i;static strings=["fontFamily","fontWeight","italicAngle"];static write(e){const t=new TextEncoder,n={};let s=0;for(const d of Vd.strings){const h=t.encode(e[d]);n[d]=h,s+=4+h.length}const r=new ArrayBuffer(s),a=new Uint8Array(r),l=new DataView(r);let c=0;for(const d of Vd.strings){const h=n[d],p=h.length;l.setUint32(c,p),a.set(h,c+4),c+=4+p}return mn(c===r.byteLength,"CssFontInfo.write: Buffer overflow"),r}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#i=new TextDecoder}#n(e){mn(e<Vd.strings.length,"Invalid string index");let t=0;for(let s=0;s<e;s++)t+=this.#t.getUint32(t)+4;const n=this.#t.getUint32(t);return this.#i.decode(new Uint8Array(this.#e,t+4,n))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class Gd{#e;#t;#i;static strings=["css","loadedName","baseFontName","src"];static write(e){const t=new TextEncoder,n={};let s=0;for(const v of Gd.strings){const m=t.encode(e[v]);n[v]=m,s+=4+m.length}s+=4;let r,a,l=1+s;e.style&&(r=t.encode(e.style.style),a=t.encode(e.style.weight),l+=4+r.length+4+a.length);const c=new ArrayBuffer(l),d=new Uint8Array(c),h=new DataView(c);let p=0;h.setUint8(p++,e.guessFallback?1:0),h.setUint32(p,0),p+=4,s=0;for(const v of Gd.strings){const m=n[v],E=m.length;s+=4+E,h.setUint32(p,E),d.set(m,p+4),p+=4+E}return h.setUint32(p-s-4,s),e.style&&(h.setUint32(p,r.length),d.set(r,p+4),p+=4+r.length,h.setUint32(p,a.length),d.set(a,p+4),p+=4+a.length),mn(p<=c.byteLength,"SubstitionInfo.write: Buffer overflow"),c.transferToFixedLength(p)}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#i=new TextDecoder}get guessFallback(){return this.#t.getUint8(0)!==0}#n(e){mn(e<Gd.strings.length,"Invalid string index");let t=5;for(let s=0;s<e;s++)t+=this.#t.getUint32(t)+4;const n=this.#t.getUint32(t);return this.#i.decode(new Uint8Array(this.#e,t+4,n))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let e=1;e+=4+this.#t.getUint32(e);const t=this.#t.getUint32(e),n=this.#i.decode(new Uint8Array(this.#e,e+4,t));e+=4+t;const s=this.#t.getUint32(e),r=this.#i.decode(new Uint8Array(this.#e,e+4,s));return{style:n,weight:r}}}class $n{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#e=Math.ceil(this.bools.length*2/8);static#t=this.#e+this.numbers.length*8;static#i=this.#t+1+8;static#n=this.#i+1+48;static#a=this.#n+1+6;#r;#s;#o;constructor({data:e,extra:t}){this.#r=e,this.#s=new TextDecoder,this.#o=new DataView(this.#r),t&&Object.assign(this,t)}#u(e){mn(e<$n.bools.length,"Invalid boolean index");const t=Math.floor(e/4),n=e*2%8,s=this.#o.getUint8(t)>>n&3;return s===0?void 0:s===2}get black(){return this.#u(0)}get bold(){return this.#u(1)}get disableFontFace(){return this.#u(2)}get fontExtraProperties(){return this.#u(3)}get isInvalidPDFjsFont(){return this.#u(4)}get isType3Font(){return this.#u(5)}get italic(){return this.#u(6)}get missingFile(){return this.#u(7)}get remeasure(){return this.#u(8)}get vertical(){return this.#u(9)}#l(e){return mn(e<$n.numbers.length,"Invalid number index"),this.#o.getFloat64($n.#e+e*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let e=$n.#t;if(this.#o.getUint8(e)===0)return;e+=1;const n=[];for(let s=0;s<4;s++)n.push(this.#o.getInt16(e,!0)),e+=2;return n}get fontMatrix(){let e=$n.#i;if(this.#o.getUint8(e)===0)return;e+=1;const n=[];for(let s=0;s<6;s++)n.push(this.#o.getFloat64(e,!0)),e+=8;return n}get defaultVMetrics(){let e=$n.#n;if(this.#o.getUint8(e)===0)return;e+=1;const n=[];for(let s=0;s<3;s++)n.push(this.#o.getInt16(e,!0)),e+=2;return n}#h(e){mn(e<$n.strings.length,"Invalid string index");let t=$n.#a+4;for(let r=0;r<e;r++)t+=this.#o.getUint32(t)+4;const n=this.#o.getUint32(t),s=new Uint8Array(n);return s.set(new Uint8Array(this.#r,t+4,n)),this.#s.decode(s)}get fallbackName(){return this.#h(0)}get loadedName(){return this.#h(1)}get mimetype(){return this.#h(2)}get name(){return this.#h(3)}get data(){let e=$n.#a;const t=this.#o.getUint32(e);e+=4+t;const n=this.#o.getUint32(e);e+=4+n;const s=this.#o.getUint32(e);e+=4+s;const r=this.#o.getUint32(e);if(r!==0)return new Uint8Array(this.#r,e+4,r)}clearData(){let e=$n.#a;const t=this.#o.getUint32(e);e+=4+t;const n=this.#o.getUint32(e);e+=4+n;const s=this.#o.getUint32(e);e+=4+s;const r=this.#o.getUint32(e);new Uint8Array(this.#r,e+4,r).fill(0),this.#o.setUint32(e,0)}get cssFontInfo(){let e=$n.#a;const t=this.#o.getUint32(e);e+=4+t;const n=this.#o.getUint32(e);e+=4+n;const s=this.#o.getUint32(e);if(s===0)return null;const r=new Uint8Array(s);return r.set(new Uint8Array(this.#r,e+4,s)),new Vd(r.buffer)}get systemFontInfo(){let e=$n.#a;const t=this.#o.getUint32(e);e+=4+t;const n=this.#o.getUint32(e);if(n===0)return null;const s=new Uint8Array(n);return s.set(new Uint8Array(this.#r,e+4,n)),new Gd(s.buffer)}static write(e){const t=e.systemFontInfo?Gd.write(e.systemFontInfo):null,n=e.cssFontInfo?Vd.write(e.cssFontInfo):null,s=new TextEncoder,r={};let a=0;for(const S of $n.strings)r[S]=s.encode(e[S]),a+=4+r[S].length;const l=$n.#a+4+a+4+(t?t.byteLength:0)+4+(n?n.byteLength:0)+4+(e.data?e.data.length:0),c=new ArrayBuffer(l),d=new Uint8Array(c),h=new DataView(c);let p=0;const v=$n.bools.length;let m=0,E=0;for(let S=0;S<v;S++){const N=e[$n.bools[S]];m|=(N===void 0?0:N?2:1)<<E,E+=2,(E===8||S===v-1)&&(h.setUint8(p++,m),m=0,E=0)}mn(p===$n.#e,"FontInfo.write: Boolean properties offset mismatch");for(const S of $n.numbers)h.setFloat64(p,e[S]),p+=8;if(mn(p===$n.#t,"FontInfo.write: Number properties offset mismatch"),e.bbox){h.setUint8(p++,4);for(const S of e.bbox)h.setInt16(p,S,!0),p+=2}else h.setUint8(p++,0),p+=8;if(mn(p===$n.#i,"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){h.setUint8(p++,6);for(const S of e.fontMatrix)h.setFloat64(p,S,!0),p+=8}else h.setUint8(p++,0),p+=48;if(mn(p===$n.#n,"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){h.setUint8(p++,1);for(const S of e.defaultVMetrics)h.setInt16(p,S,!0),p+=2}else h.setUint8(p++,0),p+=6;mn(p===$n.#a,"FontInfo.write: DefaultVMetrics properties offset mismatch"),h.setUint32($n.#a,0),p+=4;for(const S of $n.strings){const N=r[S],C=N.length;h.setUint32(p,C),d.set(N,p+4),p+=4+C}if(h.setUint32($n.#a,p-$n.#a-4),!t)h.setUint32(p,0),p+=4;else{const S=t.byteLength;h.setUint32(p,S),mn(p+4+S<=c.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),d.set(new Uint8Array(t),p+4),p+=4+S}if(!n)h.setUint32(p,0),p+=4;else{const S=n.byteLength;h.setUint32(p,S),mn(p+4+S<=c.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),d.set(new Uint8Array(n),p+4),p+=4+S}return e.data===void 0?(h.setUint32(p,0),p+=4):(h.setUint32(p,e.data.length),d.set(e.data,p+4),p+=4+e.data.length),mn(p<=c.byteLength,"FontInfo.write: Buffer overflow"),c.transferToFixedLength(p)}}class ys{static#e=0;static#t=1;static#i=2;static#n=3;static#a=4;static#r=8;static#s=12;static#o=16;constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let t,n=null,s=[],r=[],a=[],l=[],c=null,d=null;switch(e[0]){case"RadialAxial":t=e[1]==="axial"?1:2,n=e[2],a=e[3],t===1?s.push(...e[4],...e[5]):s.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":t=3,c=e[1],s=e[2],r=e[3],l=e[4]||[],n=e[6],d=e[7];break;default:throw new Error(`Unsupported pattern type: ${e[0]}`)}const h=Math.floor(s.length/2),p=Math.floor(r.length/3),v=a.length,m=l.length;let E=0;for(const q of l)E+=1,E=Math.ceil(E/4)*4,E+=4+q.coords.length*4,E+=4+q.colors.length*4,q.verticesPerRow!==void 0&&(E+=4);const S=20+h*8+p*3+v*8+(n?16:0)+(d?3:0)+E,N=new ArrayBuffer(S),C=new DataView(N),P=new Uint8Array(N);C.setUint8(ys.#e,t),C.setUint8(ys.#t,n?1:0),C.setUint8(ys.#i,d?1:0),C.setUint8(ys.#n,c),C.setUint32(ys.#a,h,!0),C.setUint32(ys.#r,p,!0),C.setUint32(ys.#s,v,!0),C.setUint32(ys.#o,m,!0);let L=20;new Float32Array(N,L,h*2).set(s),L+=h*8,P.set(r,L),L+=p*3;for(const[q,G]of a)C.setFloat32(L,q,!0),L+=4,C.setUint32(L,parseInt(G.slice(1),16),!0),L+=4;if(n)for(const q of n)C.setFloat32(L,q,!0),L+=4;d&&(P.set(d,L),L+=3);for(let q=0;q<l.length;q++){const G=l[q];C.setUint8(L,G.type),L+=1,L=Math.ceil(L/4)*4,C.setUint32(L,G.coords.length,!0),L+=4,new Int32Array(N,L,G.coords.length).set(G.coords),L+=G.coords.length*4,C.setUint32(L,G.colors.length,!0),L+=4,new Int32Array(N,L,G.colors.length).set(G.colors),L+=G.colors.length*4,G.verticesPerRow!==void 0&&(C.setUint32(L,G.verticesPerRow,!0),L+=4)}return N}getIR(){const e=this.view,t=this.data[ys.#e],n=!!this.data[ys.#t],s=!!this.data[ys.#i],r=e.getUint32(ys.#a,!0),a=e.getUint32(ys.#r,!0),l=e.getUint32(ys.#s,!0),c=e.getUint32(ys.#o,!0);let d=20;const h=new Float32Array(this.buffer,d,r*2);d+=r*8;const p=new Uint8Array(this.buffer,d,a*3);d+=a*3;const v=[];for(let N=0;N<l;++N){const C=e.getFloat32(d,!0);d+=4;const P=e.getUint32(d,!0);d+=4,v.push([C,`#${P.toString(16).padStart(6,"0")}`])}let m=null;if(n){m=[];for(let N=0;N<4;++N)m.push(e.getFloat32(d,!0)),d+=4}let E=null;s&&(E=new Uint8Array(this.buffer,d,3),d+=3);const S=[];for(let N=0;N<c;++N){const C=e.getUint8(d);d+=1,d=Math.ceil(d/4)*4;const P=e.getUint32(d,!0);d+=4;const L=new Int32Array(this.buffer,d,P);d+=P*4;const O=e.getUint32(d,!0);d+=4;const q=new Int32Array(this.buffer,d,O);d+=O*4;const G={type:C,coords:L,colors:q};C===W1.LATTICE&&(G.verticesPerRow=e.getUint32(d,!0),d+=4),S.push(G)}if(t===1)return["RadialAxial","axial",m,v,Array.from(h.slice(0,2)),Array.from(h.slice(2,4)),null,null];if(t===2)return["RadialAxial","radial",m,v,[h[0],h[1]],[h[3],h[4]],h[2],h[5]];if(t===3){const N=this.data[ys.#n];let C=null;if(h.length>0){let P=h[0],L=h[0],O=h[1],q=h[1];for(let G=0;G<h.length;G+=2){const W=h[G],K=h[G+1];P=P>W?W:P,O=O>K?K:O,L=L<W?W:L,q=q<K?K:q}C=[P,O,L,q]}return["Mesh",N,h,p,S,C,m,E]}throw new Error(`Unsupported pattern kind: ${t}`)}}function CR(i){if(i instanceof URL)return i.href;if(typeof i=="string"){if(ar)return i;const e=URL.parse(i,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function NR(i){if(ar&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return Uf(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i?.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Zp(i){if(typeof i!="string")return null;if(i.endsWith("/"))return i;throw new Error(`Invalid factory url: "${i}" must include trailing slash.`)}const Q1=i=>typeof i=="object"&&Number.isInteger(i?.num)&&i.num>=0&&Number.isInteger(i?.gen)&&i.gen>=0,kR=i=>typeof i=="object"&&typeof i?.name=="string",RR=cR.bind(null,Q1,kR);class LR{#e=new Map;#t=Promise.resolve();postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[s]of this.#e)s.call(this,n)})}addEventListener(e,t,n=null){let s=null;if(n?.signal instanceof AbortSignal){const{signal:r}=n;if(r.aborted){Jt("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);s=()=>r.removeEventListener("abort",a),r.addEventListener("abort",a)}this.#e.set(t,s)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}const Qp={DATA:1,ERROR:2},Xi={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function z5(){}function Nr(i){if(i instanceof Su||i instanceof Y1||i instanceof D5||i instanceof H0||i instanceof Ym)return i;switch(i instanceof Error||typeof i=="object"&&i!==null||Xn('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new Su(i.message);case"InvalidPDFException":return new Y1(i.message);case"PasswordException":return new D5(i.message,i.code);case"ResponseException":return new H0(i.message,i.status,i.missing);case"UnknownErrorException":return new Ym(i.message,i.details)}return new Ym(i.message,i.toString())}class df{#e=new AbortController;constructor(e,t,n){this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#n(e);return}if(e.callback){const n=e.callbackId,s=this.callbackCapabilities[n];if(!s)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===Qp.DATA)s.resolve(e.data);else if(e.callback===Qp.ERROR)s.reject(Nr(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,s=e.sourceName,r=this.comObj;Promise.try(t,e.data).then(function(a){r.postMessage({sourceName:n,targetName:s,callback:Qp.DATA,callbackId:e.callbackId,data:a})},function(a){r.postMessage({sourceName:n,targetName:s,callback:Qp.ERROR,callbackId:e.callbackId,reason:Nr(a)})});return}if(e.streamId){this.#i(e);return}t(e.data)}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const s=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[s]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},n)}catch(a){r.reject(a)}return r.promise}sendWithStream(e,t,n,s){const r=this.streamId++,a=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:d=>{const h=Promise.withResolvers();return this.streamControllers[r]={controller:d,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:a,targetName:l,action:e,streamId:r,data:t,desiredSize:d.desiredSize},s),h.promise},pull:d=>{const h=Promise.withResolvers();return this.streamControllers[r].pullCall=h,c.postMessage({sourceName:a,targetName:l,stream:Xi.PULL,streamId:r,desiredSize:d.desiredSize}),h.promise},cancel:d=>{mn(d instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[r].cancelCall=h,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:a,targetName:l,stream:Xi.CANCEL,streamId:r,reason:Nr(d)}),h.promise}},n)}#i(e){const t=e.streamId,n=this.sourceName,s=e.sourceName,r=this.comObj,a=this,l=this.actionHandler[e.action],c={enqueue(d,h=1,p){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=h,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:n,targetName:s,stream:Xi.ENQUEUE,streamId:t,chunk:d},p)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:s,stream:Xi.CLOSE,streamId:t}),delete a.streamSinks[t])},error(d){mn(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:s,stream:Xi.ERROR,streamId:t,reason:Nr(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,Promise.try(l,e.data,c).then(function(){r.postMessage({sourceName:n,targetName:s,stream:Xi.START_COMPLETE,streamId:t,success:!0})},function(d){r.postMessage({sourceName:n,targetName:s,stream:Xi.START_COMPLETE,streamId:t,reason:Nr(d)})})}#n(e){const t=e.streamId,n=this.sourceName,s=e.sourceName,r=this.comObj,a=this.streamControllers[t],l=this.streamSinks[t];switch(e.stream){case Xi.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(Nr(e.reason));break;case Xi.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(Nr(e.reason));break;case Xi.PULL:if(!l){r.postMessage({sourceName:n,targetName:s,stream:Xi.PULL_COMPLETE,streamId:t,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,Promise.try(l.onPull||z5).then(function(){r.postMessage({sourceName:n,targetName:s,stream:Xi.PULL_COMPLETE,streamId:t,success:!0})},function(d){r.postMessage({sourceName:n,targetName:s,stream:Xi.PULL_COMPLETE,streamId:t,reason:Nr(d)})});break;case Xi.ENQUEUE:if(mn(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case Xi.CLOSE:if(mn(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),this.#a(a,t);break;case Xi.ERROR:mn(a,"error should have stream controller"),a.controller.error(Nr(e.reason)),this.#a(a,t);break;case Xi.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(Nr(e.reason)),this.#a(a,t);break;case Xi.CANCEL:if(!l)break;const c=Nr(e.reason);Promise.try(l.onCancel||z5,c).then(function(){r.postMessage({sourceName:n,targetName:s,stream:Xi.CANCEL_COMPLETE,streamId:t,success:!0})},function(d){r.postMessage({sourceName:n,targetName:s,stream:Xi.CANCEL_COMPLETE,streamId:t,reason:Nr(d)})}),l.sinkCapability.reject(c),l.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#a(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.#e?.abort(),this.#e=null}}class SS{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Xn("Abstract method `_createCanvas` called.")}}class PR extends SS{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class ES{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Xn("Abstract method `_fetch` called.")}}class V5 extends ES{async _fetch(e){const t=await jf(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Uf(t)}}class TS{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,s,r){return"none"}destroy(e=!1){}}class IR extends TS{#e;#t;#i;#n;#a;#r;#s=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#n=e,this.#a=t}get#o(){return this.#t||=new Map}get#u(){return this.#r||=new Map}get#l(){if(!this.#i){const e=this.#a.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const n=this.#a.createElementNS(_l,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#i=this.#a.createElementNS(_l,"defs"),e.append(n),n.append(this.#i),this.#a.body.append(e)}return this.#i}#h(e){if(e.length===1){const c=e[0],d=new Array(256);for(let p=0;p<256;p++)d[p]=c[p]/255;const h=d.join(",");return[h,h,h]}const[t,n,s]=e,r=new Array(256),a=new Array(256),l=new Array(256);for(let c=0;c<256;c++)r[c]=t[c]/255,a[c]=n[c]/255,l[c]=s[c]/255;return[r.join(","),a.join(","),l.join(",")]}#d(e){if(this.#e===void 0){this.#e="";const t=this.#a.URL;t!==this.#a.baseURI&&(og(t)?Jt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=pS(t,""))}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#o.get(e);if(t)return t;const[n,s,r]=this.#h(e),a=e.length===1?n:`${n}${s}${r}`;if(t=this.#o.get(a),t)return this.#o.set(e,t),t;const l=`g_${this.#n}_transfer_map_${this.#s++}`,c=this.#d(l);this.#o.set(e,c),this.#o.set(a,c);const d=this.#g(l);return this.#p(n,s,r,d),c}addHCMFilter(e,t){const n=`${e}-${t}`,s="base";let r=this.#u.get(s);if(r?.key===n||(r?(r.filter?.remove(),r.key=n,r.url="none",r.filter=null):(r={key:n,url:"none",filter:null},this.#u.set(s,r)),!e||!t))return r.url;const a=this.#b(e);e=ht.makeHexColor(...a);const l=this.#b(t);if(t=ht.makeHexColor(...l),this.#l.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return r.url;const c=new Array(256);for(let m=0;m<=255;m++){const E=m/255;c[m]=E<=.03928?E/12.92:((E+.055)/1.055)**2.4}const d=c.join(","),h=`g_${this.#n}_hcm_filter`,p=r.filter=this.#g(h);this.#p(d,d,d,p),this.#m(p);const v=(m,E)=>{const S=a[m]/255,N=l[m]/255,C=new Array(E+1);for(let P=0;P<=E;P++)C[P]=S+P/E*(N-S);return C.join(",")};return this.#p(v(0,5),v(1,5),v(2,5),p),r.url=this.#d(h),r.url}addAlphaFilter(e){let t=this.#o.get(e);if(t)return t;const[n]=this.#h([e]),s=`alpha_${n}`;if(t=this.#o.get(s),t)return this.#o.set(e,t),t;const r=`g_${this.#n}_alpha_map_${this.#s++}`,a=this.#d(r);this.#o.set(e,a),this.#o.set(s,a);const l=this.#g(r);return this.#v(n,l),a}addLuminosityFilter(e){let t=this.#o.get(e||"luminosity");if(t)return t;let n,s;if(e?([n]=this.#h([e]),s=`luminosity_${n}`):s="luminosity",t=this.#o.get(s),t)return this.#o.set(e,t),t;const r=`g_${this.#n}_luminosity_map_${this.#s++}`,a=this.#d(r);this.#o.set(e,a),this.#o.set(s,a);const l=this.#g(r);return this.#f(l),e&&this.#v(n,l),a}addHighlightHCMFilter(e,t,n,s,r){const a=`${t}-${n}-${s}-${r}`;let l=this.#u.get(e);if(l?.key===a||(l?(l.filter?.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},this.#u.set(e,l)),!t||!n))return l.url;const[c,d]=[t,n].map(this.#b.bind(this));let h=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),p=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[v,m]=[s,r].map(this.#b.bind(this));p<h&&([h,p,v,m]=[p,h,m,v]),this.#l.style.color="";const E=(C,P,L)=>{const O=new Array(256),q=(p-h)/L,G=C/255,W=(P-C)/(255*L);let K=0;for(let j=0;j<=L;j++){const ee=Math.round(h+j*q),B=G+j*W;for(let H=K;H<=ee;H++)O[H]=B;K=ee+1}for(let j=K;j<256;j++)O[j]=O[K-1];return O.join(",")},S=`g_${this.#n}_hcm_${e}_filter`,N=l.filter=this.#g(S);return this.#m(N),this.#p(E(v[0],m[0],5),E(v[1],m[1],5),E(v[2],m[2],5),N),l.url=this.#d(S),l.url}destroy(e=!1){e&&this.#r?.size||(this.#i?.parentNode.parentNode.remove(),this.#i=null,this.#t?.clear(),this.#t=null,this.#r?.clear(),this.#r=null,this.#s=0)}#f(e){const t=this.#a.createElementNS(_l,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#m(e){const t=this.#a.createElementNS(_l,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#g(e){const t=this.#a.createElementNS(_l,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#l.append(t),t}#c(e,t,n){const s=this.#a.createElementNS(_l,t);s.setAttribute("type","discrete"),s.setAttribute("tableValues",n),e.append(s)}#p(e,t,n,s){const r=this.#a.createElementNS(_l,"feComponentTransfer");s.append(r),this.#c(r,"feFuncR",e),this.#c(r,"feFuncG",t),this.#c(r,"feFuncB",n)}#v(e,t){const n=this.#a.createElementNS(_l,"feComponentTransfer");t.append(n),this.#c(n,"feFuncA",e)}#b(e){return this.#l.style.color=e,Hf(getComputedStyle(this.#l).getPropertyValue("color"))}}class CS{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Xn("Abstract method `_fetch` called.")}}class G5 extends CS{async _fetch(e){const t=await jf(e,"arraybuffer");return new Uint8Array(t)}}class NS{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){Xn("Abstract method `_fetch` called.")}}class $5 extends NS{async _fetch(e){const t=await jf(e,"arraybuffer");return new Uint8Array(t)}}ar&&Jt("Please use the `legacy` build in Node.js environments.");async function Zv(i){const t=await process.getBuiltinModule("fs").promises.readFile(i);return new Uint8Array(t)}class MR extends TS{}class DR extends SS{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class OR extends ES{async _fetch(e){return Zv(e)}}class BR extends CS{async _fetch(e){return Zv(e)}}class FR extends NS{async _fetch(e){return Zv(e)}}const Cd="__forcedDependency",{floor:W5,ceil:Y5}=Math;function e0(i,e,t,n,s,r){i[e*4+0]=Math.min(i[e*4+0],t),i[e*4+1]=Math.min(i[e*4+1],n),i[e*4+2]=Math.max(i[e*4+2],s),i[e*4+3]=Math.max(i[e*4+3],r)}const ev=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class UR{#e;#t;constructor(e,t){this.#e=e,this.#t=t}get length(){return this.#e.length}isEmpty(e){return this.#e[e]===ev}minX(e){return this.#t[e*4+0]/256}minY(e){return this.#t[e*4+1]/256}maxX(e){return(this.#t[e*4+2]+1)/256}maxY(e){return(this.#t[e*4+3]+1)/256}}const t0=(i,e)=>{if(!i)return;let t=i.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},i.set(e,t)),t};class jR{#e={__proto__:null};#t={__proto__:null,transform:[],moveText:[],sameLineText:[],[Cd]:[]};#i=new Map;#n=[];#a=[];#r=[[1,0,0,1,0,0]];#s=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#u=-1;#l=new Set;#h=new Map;#d=new Map;#f;#m;#g;#c;#p;constructor(e,t,n=!1){this.#f=e.width,this.#m=e.height,this.#v(t),n&&(this.#p=new Map)}growOperationsCount(e){e>=this.#c.length&&this.#v(e,this.#c)}#v(e,t){const n=new ArrayBuffer(e*4);this.#g=new Uint8ClampedArray(n),this.#c=new Uint32Array(n),t&&t.length>0?(this.#c.set(t),this.#c.fill(ev,t.length)):this.#c.fill(ev)}save(e){return this.#e={__proto__:this.#e},this.#t={__proto__:this.#t,transform:{__proto__:this.#t.transform},moveText:{__proto__:this.#t.moveText},sameLineText:{__proto__:this.#t.sameLineText},[Cd]:{__proto__:this.#t[Cd]}},this.#s={__proto__:this.#s},this.#n.push(e),this}restore(e){const t=Object.getPrototypeOf(this.#e);if(t===null)return this;this.#e=t,this.#t=Object.getPrototypeOf(this.#t),this.#s=Object.getPrototypeOf(this.#s);const n=this.#n.pop();return n!==void 0&&(t0(this.#p,e)?.dependencies.add(n),this.#c[e]=this.#c[n]),this}recordOpenMarker(e){return this.#n.push(e),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(e){const t=this.#n.pop();return t!==void 0&&(t0(this.#p,e)?.dependencies.add(t),this.#c[e]=this.#c[t]),this}beginMarkedContent(e){return this.#a.push(e),this}endMarkedContent(e){const t=this.#a.pop();return t!==void 0&&(t0(this.#p,e)?.dependencies.add(t),this.#c[e]=this.#c[t]),this}pushBaseTransform(e){return this.#r.push(ht.multiplyByDOMMatrix(this.#r.at(-1),e.getTransform())),this}popBaseTransform(){return this.#r.length>1&&this.#r.pop(),this}recordSimpleData(e,t){return this.#e[e]=t,this}recordIncrementalData(e,t){return this.#t[e].push(t),this}resetIncrementalData(e,t){return this.#t[e].length=0,this}recordNamedData(e,t){return this.#i.set(e,t),this}recordSimpleDataFromNamed(e,t,n){this.#e[e]=this.#i.get(t)??n}recordFutureForcedDependency(e,t){return this.recordIncrementalData(Cd,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in this.#e&&this.recordFutureForcedDependency(t,this.#e[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of this.#l)this.recordFutureForcedDependency(Cd,e);return this}resetBBox(e){return this.#u!==e&&(this.#u=e,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(e,t,n,s,r,a){const l=ht.multiplyByDOMMatrix(this.#r.at(-1),t.getTransform()),c=[1/0,1/0,-1/0,-1/0];ht.axialAlignedBoundingBox([n,r,s,a],l,c);const d=ht.intersect(this.#s,c);return d?(this.#s[0]=d[0],this.#s[1]=d[1],this.#s[2]=d[2],this.#s[3]=d[3]):(this.#s[0]=this.#s[1]=1/0,this.#s[2]=this.#s[3]=-1/0),this}recordBBox(e,t,n,s,r,a){const l=this.#s;if(l[0]===1/0)return this;const c=ht.multiplyByDOMMatrix(this.#r.at(-1),t.getTransform());if(l[0]===-1/0)return ht.axialAlignedBoundingBox([n,r,s,a],c,this.#o),this;const d=[1/0,1/0,-1/0,-1/0];return ht.axialAlignedBoundingBox([n,r,s,a],c,d),this.#o[0]=Math.min(this.#o[0],Math.max(d[0],l[0])),this.#o[1]=Math.min(this.#o[1],Math.max(d[1],l[1])),this.#o[2]=Math.max(this.#o[2],Math.min(d[2],l[2])),this.#o[3]=Math.max(this.#o[3],Math.min(d[3],l[3])),this}recordCharacterBBox(e,t,n,s=1,r=0,a=0,l){const c=n.bbox;let d,h;if(c&&(d=c[2]!==c[0]&&c[3]!==c[1]&&this.#d.get(n),d!==!1&&(h=[0,0,0,0],ht.axialAlignedBoundingBox(c,n.fontMatrix,h),(s!==1||r!==0||a!==0)&&ht.scaleMinMax([s,0,0,-s,r,a],h),d)))return this.recordBBox(e,t,h[0],h[2],h[1],h[3]);if(!l)return this.recordFullPageBBox(e);const p=l();return c&&h&&d===void 0&&(d=h[0]<=r-p.actualBoundingBoxLeft&&h[2]>=r+p.actualBoundingBoxRight&&h[1]<=a-p.actualBoundingBoxAscent&&h[3]>=a+p.actualBoundingBoxDescent,this.#d.set(n,d),d)?this.recordBBox(e,t,h[0],h[2],h[1],h[3]):this.recordBBox(e,t,r-p.actualBoundingBoxLeft,r+p.actualBoundingBoxRight,a-p.actualBoundingBoxAscent,a+p.actualBoundingBoxDescent)}recordFullPageBBox(e){return this.#o[0]=Math.max(0,this.#s[0]),this.#o[1]=Math.max(0,this.#s[1]),this.#o[2]=Math.min(this.#f,this.#s[2]),this.#o[3]=Math.min(this.#m,this.#s[3]),this}getSimpleIndex(e){return this.#e[e]}recordDependencies(e,t){const n=this.#l,s=this.#e,r=this.#t;for(const a of t)a in this.#e?n.add(s[a]):a in r&&r[a].forEach(n.add,n);return this}recordNamedDependency(e,t){return this.#i.has(t)&&this.#l.add(this.#i.get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[Cd]),this.#p){const n=t0(this.#p,e),{dependencies:s}=n;this.#l.forEach(s.add,s),this.#n.forEach(s.add,s),this.#a.forEach(s.add,s),s.delete(e),n.isRenderingOperation=!0}if(this.#u===e){const n=W5(this.#o[0]*256/this.#f),s=W5(this.#o[1]*256/this.#m),r=Y5(this.#o[2]*256/this.#f),a=Y5(this.#o[3]*256/this.#m);e0(this.#g,e,n,s,r,a);for(const l of this.#l)l!==e&&e0(this.#g,l,n,s,r,a);for(const l of this.#n)l!==e&&e0(this.#g,l,n,s,r,a);for(const l of this.#a)l!==e&&e0(this.#g,l,n,s,r,a);t||(this.#l.clear(),this.#u=-1)}return this}recordShowTextOperation(e,t=!1){const n=Array.from(this.#l);this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const s of n)this.recordIncrementalData("sameLineText",s);return this}bboxToClipBoxDropOperation(e,t=!1){return this.#u===e&&(this.#u=-1,this.#s[0]=Math.max(this.#s[0],this.#o[0]),this.#s[1]=Math.max(this.#s[1],this.#o[1]),this.#s[2]=Math.min(this.#s[2],this.#o[2]),this.#s[3]=Math.min(this.#s[3],this.#o[3]),t||this.#l.clear()),this}_takePendingDependencies(){const e=this.#l;return this.#l=new Set,e}_extractOperation(e){const t=this.#h.get(e);return this.#h.delete(e),t}_pushPendingDependencies(e){for(const t of e)this.#l.add(t)}take(){return this.#d.clear(),new UR(this.#c,this.#g)}takeDebugMetadata(){return this.#p}}class z0{#e;#t;#i;#n=0;#a=0;constructor(e,t,n){if(e instanceof z0&&e.#i===!!n)return e;this.#e=e,this.#t=t,this.#i=!!n}growOperationsCount(){throw new Error("Unreachable")}save(e){return this.#a++,this.#e.save(this.#t),this}restore(e){return this.#a>0&&(this.#e.restore(this.#t),this.#a--),this}recordOpenMarker(e){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#t:this.#e.getOpenMarker()}recordCloseMarker(e){return this.#n--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return this.#e.pushBaseTransform(e),this}popBaseTransform(){return this.#e.popBaseTransform(),this}recordSimpleData(e,t){return this.#e.recordSimpleData(e,this.#t),this}recordIncrementalData(e,t){return this.#e.recordIncrementalData(e,this.#t),this}resetIncrementalData(e,t){return this.#e.resetIncrementalData(e,this.#t),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,n){return this.#e.recordSimpleDataFromNamed(e,t,this.#t),this}recordFutureForcedDependency(e,t){return this.#e.recordFutureForcedDependency(e,this.#t),this}inheritSimpleDataAsFutureForcedDependencies(e){return this.#e.inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#e.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return this.#i||this.#e.resetBBox(this.#t),this}recordClipBox(e,t,n,s,r,a){return this.#i||this.#e.recordClipBox(this.#t,t,n,s,r,a),this}recordBBox(e,t,n,s,r,a){return this.#i||this.#e.recordBBox(this.#t,t,n,s,r,a),this}recordCharacterBBox(e,t,n,s,r,a,l){return this.#i||this.#e.recordCharacterBBox(this.#t,t,n,s,r,a,l),this}recordFullPageBBox(e){return this.#i||this.#e.recordFullPageBBox(this.#t),this}getSimpleIndex(e){return this.#e.getSimpleIndex(e)}recordDependencies(e,t){return this.#e.recordDependencies(this.#t,t),this}recordNamedDependency(e,t){return this.#e.recordNamedDependency(this.#t,t),this}recordOperation(e){return this.#e.recordOperation(this.#t,!0),this}recordShowTextOperation(e){return this.#e.recordShowTextOperation(this.#t,!0),this}bboxToClipBoxDropOperation(e){return this.#i||this.#e.bboxToClipBoxDropOperation(this.#t,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const xa={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Ms={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function tv(i,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,n),i.clip(s)}class Qv{isModifyingCurrentTransform(){return!1}getPattern(){Xn("Abstract method `getPattern` called.")}}class qR extends Qv{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,s){let r;if(s===Ms.STROKE||s===Ms.FILL){const a=t.current.getClippedPathBoundingBox(s,_i(e))||[0,0,0,0],l=Math.ceil(a[2]-a[0])||1,c=Math.ceil(a[3]-a[1])||1,d=t.cachedCanvases.getCanvas("pattern",l,c),h=d.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-a[0],-a[1]),n=ht.transform(n,[1,0,0,1,a[0],a[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),tv(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),r=e.createPattern(d.canvas,"no-repeat");const p=new DOMMatrix(n);r.setTransform(p)}else tv(e,this._bbox),r=this._createGradient(e);return r}}function Xm(i,e,t,n,s,r,a,l){const c=e.coords,d=e.colors,h=i.data,p=i.width*4;let v;c[t+1]>c[n+1]&&(v=t,t=n,n=v,v=r,r=a,a=v),c[n+1]>c[s+1]&&(v=n,n=s,s=v,v=a,a=l,l=v),c[t+1]>c[n+1]&&(v=t,t=n,n=v,v=r,r=a,a=v);const m=(c[t]+e.offsetX)*e.scaleX,E=(c[t+1]+e.offsetY)*e.scaleY,S=(c[n]+e.offsetX)*e.scaleX,N=(c[n+1]+e.offsetY)*e.scaleY,C=(c[s]+e.offsetX)*e.scaleX,P=(c[s+1]+e.offsetY)*e.scaleY;if(E>=P)return;const L=d[r],O=d[r+1],q=d[r+2],G=d[a],W=d[a+1],K=d[a+2],j=d[l],ee=d[l+1],B=d[l+2],H=Math.round(E),se=Math.round(P);let ie,ye,X,ue,de,we,Oe,Q;for(let M=H;M<=se;M++){if(M<N){const he=M<E?0:(E-M)/(E-N);ie=m-(m-S)*he,ye=L-(L-G)*he,X=O-(O-W)*he,ue=q-(q-K)*he}else{let he;M>P?he=1:N===P?he=0:he=(N-M)/(N-P),ie=S-(S-C)*he,ye=G-(G-j)*he,X=W-(W-ee)*he,ue=K-(K-B)*he}let V;M<E?V=0:M>P?V=1:V=(E-M)/(E-P),de=m-(m-C)*V,we=L-(L-j)*V,Oe=O-(O-ee)*V,Q=q-(q-B)*V;const Z=Math.round(Math.min(ie,de)),le=Math.round(Math.max(ie,de));let ce=p*M+Z*4;for(let he=Z;he<=le;he++)V=(ie-he)/(ie-de),V<0?V=0:V>1&&(V=1),h[ce++]=ye-(ye-we)*V|0,h[ce++]=X-(X-Oe)*V|0,h[ce++]=ue-(ue-Q)*V|0,h[ce++]=255}}function HR(i,e,t){const n=e.coords,s=e.colors;let r,a;switch(e.type){case W1.LATTICE:const l=e.verticesPerRow,c=Math.floor(n.length/l)-1,d=l-1;for(r=0;r<c;r++){let h=r*l;for(let p=0;p<d;p++,h++)Xm(i,t,n[h],n[h+1],n[h+l],s[h],s[h+1],s[h+l]),Xm(i,t,n[h+l+1],n[h+1],n[h+l],s[h+l+1],s[h+1],s[h+l])}break;case W1.TRIANGLES:for(r=0,a=n.length;r<a;r+=3)Xm(i,t,n[r],n[r+1],n[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class zR extends Qv{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-l,h=Math.ceil(this._bounds[3])-c,p=Math.min(Math.ceil(Math.abs(d*e[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),m=d/p,E=h/v,S={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/m,scaleY:1/E},N=p+4,C=v+4,P=n.getCanvas("mesh",N,C),L=P.context,O=L.createImageData(p,v);if(t){const G=O.data;for(let W=0,K=G.length;W<K;W+=4)G[W]=t[0],G[W+1]=t[1],G[W+2]=t[2],G[W+3]=255}for(const G of this._figures)HR(O,G,S);return L.putImageData(O,2,2),{canvas:P.canvas,offsetX:l-2*m,offsetY:c-2*E,scaleX:m,scaleY:E}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,s){tv(e,this._bbox);const r=new Float32Array(2);if(s===Ms.SHADING)ht.singularValueDecompose2dScale(_i(e),r);else if(this.matrix){ht.singularValueDecompose2dScale(this.matrix,r);const[l,c]=r;ht.singularValueDecompose2dScale(t.baseTransform,r),r[0]*=l,r[1]*=c}else ht.singularValueDecompose2dScale(t.baseTransform,r);const a=this._createMeshCanvas(r,s===Ms.SHADING?null:this._background,t.cachedCanvases);return s!==Ms.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class VR extends Qv{getPattern(){return"hotpink"}}function GR(i){switch(i[0]){case"RadialAxial":return new qR(i);case"Mesh":return new zR(i);case"Dummy":return new VR}throw new Error(`Unknown IR type: ${i[0]}`)}const K5={COLORED:1,UNCOLORED:2};class ey{static MAX_PATTERN_SIZE=3e3;constructor(e,t,n,s){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=s}createPatternCanvas(e,t){const{bbox:n,operatorList:s,paintType:r,tilingType:a,color:l,canvasGraphicsFactory:c}=this;let{xstep:d,ystep:h}=this;d=Math.abs(d),h=Math.abs(h),ag("TilingType: "+a);const p=n[0],v=n[1],m=n[2],E=n[3],S=m-p,N=E-v,C=new Float32Array(2);ht.singularValueDecompose2dScale(this.matrix,C);const[P,L]=C;ht.singularValueDecompose2dScale(this.baseTransform,C);const O=P*C[0],q=L*C[1];let G=S,W=N,K=!1,j=!1;const ee=Math.ceil(d*O),B=Math.ceil(h*q),H=Math.ceil(S*O),se=Math.ceil(N*q);ee>=H?G=d:K=!0,B>=se?W=h:j=!0;const ie=this.getSizeAndScale(G,this.ctx.canvas.width,O),ye=this.getSizeAndScale(W,this.ctx.canvas.height,q),X=e.cachedCanvases.getCanvas("pattern",ie.size,ye.size),ue=X.context,de=c.createCanvasGraphics(ue,t);if(de.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(de,r,l),ue.translate(-ie.scale*p,-ye.scale*v),de.transform(0,ie.scale,0,0,ye.scale,0,0),ue.save(),de.dependencyTracker?.save(),this.clipBbox(de,p,v,m,E),de.baseTransform=_i(de.ctx),de.executeOperatorList(s),de.endDrawing(),de.dependencyTracker?.restore(),ue.restore(),K||j){const we=X.canvas;K&&(G=d),j&&(W=h);const Oe=this.getSizeAndScale(G,this.ctx.canvas.width,O),Q=this.getSizeAndScale(W,this.ctx.canvas.height,q),M=Oe.size,V=Q.size,Z=e.cachedCanvases.getCanvas("pattern-workaround",M,V),le=Z.context,ce=K?Math.floor(S/d):0,he=j?Math.floor(N/h):0;for(let Ae=0;Ae<=ce;Ae++)for(let Ee=0;Ee<=he;Ee++)le.drawImage(we,M*Ae,V*Ee,M,V,0,0,M,V);return{canvas:Z.canvas,scaleX:Oe.scale,scaleY:Q.scale,offsetX:p,offsetY:v}}return{canvas:X.canvas,scaleX:ie.scale,scaleY:ye.scale,offsetX:p,offsetY:v}}getSizeAndScale(e,t,n){const s=Math.max(ey.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*n);return r>=s?r=s:n=r/e,{scale:n,size:r}}clipBbox(e,t,n,s,r){const a=s-t,l=r-n;e.ctx.rect(t,n,a,l),ht.axialAlignedBoundingBox([t,n,s,r],_i(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const s=e.ctx,r=e.current;switch(t){case K5.COLORED:const{fillStyle:a,strokeStyle:l}=this.ctx;s.fillStyle=r.fillColor=a,s.strokeStyle=r.strokeColor=l;break;case K5.UNCOLORED:s.fillStyle=s.strokeStyle=n,r.fillColor=r.strokeColor=n;break;default:throw new sR(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,s,r){let a=n;s!==Ms.SHADING&&(a=ht.transform(a,t.baseTransform),this.matrix&&(a=ht.transform(a,this.matrix)));const l=this.createPatternCanvas(t,r);let c=new DOMMatrix(a);c=c.translate(l.offsetX,l.offsetY),c=c.scale(1/l.scaleX,1/l.scaleY);const d=e.createPattern(l.canvas,"repeat");return d.setTransform(c),d}}function $R({src:i,srcPos:e=0,dest:t,width:n,height:s,nonBlackColor:r=4294967295,inverseDecode:a=!1}){const l=Ds.isLittleEndian?4278190080:255,[c,d]=a?[r,l]:[l,r],h=n>>3,p=n&7,v=i.length;t=new Uint32Array(t.buffer);let m=0;for(let E=0;E<s;E++){for(const N=e+h;e<N;e++){const C=e<v?i[e]:255;t[m++]=C&128?d:c,t[m++]=C&64?d:c,t[m++]=C&32?d:c,t[m++]=C&16?d:c,t[m++]=C&8?d:c,t[m++]=C&4?d:c,t[m++]=C&2?d:c,t[m++]=C&1?d:c}if(p===0)continue;const S=e<v?i[e++]:255;for(let N=0;N<p;N++)t[m++]=S&1<<7-N?d:c}return{srcPos:e,destPos:m}}const J5=16,X5=100,WR=15,Z5=10,kr=16,Zm=new DOMMatrix,Zr=new Float32Array(2),Ud=new Float32Array([1/0,1/0,-1/0,-1/0]);function YR(i,e){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){e.save(),this.__originalSave()},i.restore=function(){e.restore(),this.__originalRestore()},i.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},i.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},i.transform=function(t,n,s,r,a,l){e.transform(t,n,s,r,a,l),this.__originalTransform(t,n,s,r,a,l)},i.setTransform=function(t,n,s,r,a,l){e.setTransform(t,n,s,r,a,l),this.__originalSetTransform(t,n,s,r,a,l)},i.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},i.rotate=function(t){e.rotate(t),this.__originalRotate(t)},i.clip=function(t){e.clip(t),this.__originalClip(t)},i.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},i.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},i.bezierCurveTo=function(t,n,s,r,a,l){e.bezierCurveTo(t,n,s,r,a,l),this.__originalBezierCurveTo(t,n,s,r,a,l)},i.rect=function(t,n,s,r){e.rect(t,n,s,r),this.__originalRect(t,n,s,r)},i.closePath=function(){e.closePath(),this.__originalClosePath()},i.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class KR{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,n)):(s=this.canvasFactory.create(t,n),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function n0(i,e,t,n,s,r,a,l,c,d){const[h,p,v,m,E,S]=_i(i);if(p===0&&v===0){const P=a*h+E,L=Math.round(P),O=l*m+S,q=Math.round(O),G=(a+c)*h+E,W=Math.abs(Math.round(G)-L)||1,K=(l+d)*m+S,j=Math.abs(Math.round(K)-q)||1;return i.setTransform(Math.sign(h),0,0,Math.sign(m),L,q),i.drawImage(e,t,n,s,r,0,0,W,j),i.setTransform(h,p,v,m,E,S),[W,j]}if(h===0&&m===0){const P=l*v+E,L=Math.round(P),O=a*p+S,q=Math.round(O),G=(l+d)*v+E,W=Math.abs(Math.round(G)-L)||1,K=(a+c)*p+S,j=Math.abs(Math.round(K)-q)||1;return i.setTransform(0,Math.sign(p),Math.sign(v),0,L,q),i.drawImage(e,t,n,s,r,0,0,j,W),i.setTransform(h,p,v,m,E,S),[j,W]}i.drawImage(e,t,n,s,r,a,l,c,d);const N=Math.hypot(h,p),C=Math.hypot(v,m);return[N*c,C*d]}class Q5{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=$1;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Rs.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(e,t,n){n?.(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Ud.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Ms.FILL,t=null){const n=this.minMax.slice();if(e===Ms.STROKE){t||Xn("Stroke bounding box must include transform."),ht.singularValueDecompose2dScale(t,Zr);const s=Zr[0]*this.lineWidth/2,r=Zr[1]*this.lineWidth/2;n[0]-=s,n[1]-=r,n[2]+=s,n[3]+=r}return n}updateClipFromPath(){const e=ht.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Ud,0)}getClippedPathBoundingBox(e=Ms.FILL,t=null){return ht.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function ew(i,e){if(e instanceof ImageData){i.putImageData(e,0,0);return}const t=e.height,n=e.width,s=t%kr,r=(t-s)/kr,a=s===0?r:r+1,l=i.createImageData(n,kr);let c=0,d;const h=e.data,p=l.data;let v,m,E,S;if(e.kind===w0.GRAYSCALE_1BPP){const N=h.byteLength,C=new Uint32Array(p.buffer,0,p.byteLength>>2),P=C.length,L=n+7>>3,O=4294967295,q=Ds.isLittleEndian?4278190080:255;for(v=0;v<a;v++){for(E=v<r?kr:s,d=0,m=0;m<E;m++){const G=N-c;let W=0;const K=G>L?n:G*8-7,j=K&-8;let ee=0,B=0;for(;W<j;W+=8)B=h[c++],C[d++]=B&128?O:q,C[d++]=B&64?O:q,C[d++]=B&32?O:q,C[d++]=B&16?O:q,C[d++]=B&8?O:q,C[d++]=B&4?O:q,C[d++]=B&2?O:q,C[d++]=B&1?O:q;for(;W<K;W++)ee===0&&(B=h[c++],ee=128),C[d++]=B&ee?O:q,ee>>=1}for(;d<P;)C[d++]=0;i.putImageData(l,0,v*kr)}}else if(e.kind===w0.RGBA_32BPP){for(m=0,S=n*kr*4,v=0;v<r;v++)p.set(h.subarray(c,c+S)),c+=S,i.putImageData(l,0,m),m+=kr;v<a&&(S=n*s*4,p.set(h.subarray(c,c+S)),i.putImageData(l,0,m))}else if(e.kind===w0.RGB_24BPP)for(E=kr,S=n*E,v=0;v<a;v++){for(v>=r&&(E=s,S=n*E),d=0,m=S;m--;)p[d++]=h[c++],p[d++]=h[c++],p[d++]=h[c++],p[d++]=255;i.putImageData(l,0,v*kr)}else throw new Error(`bad image kind: ${e.kind}`)}function tw(i,e){if(e.bitmap){i.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,s=t%kr,r=(t-s)/kr,a=s===0?r:r+1,l=i.createImageData(n,kr);let c=0;const d=e.data,h=l.data;for(let p=0;p<a;p++){const v=p<r?kr:s;({srcPos:c}=$R({src:d,srcPos:c,dest:h,width:n,height:v,nonBlackColor:0})),i.putImageData(l,0,p*kr)}}function Zh(i,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)i[n]!==void 0&&(e[n]=i[n]);i.setLineDash!==void 0&&(e.setLineDash(i.getLineDash()),e.lineDashOffset=i.lineDashOffset)}function i0(i){i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0);const{filter:e}=i;e!=="none"&&e!==""&&(i.filter="none")}function nw(i,e){if(e)return!0;ht.singularValueDecompose2dScale(i,Zr);const t=Math.fround(zo.pixelRatio*ih.PDF_TO_CSS_UNITS);return Zr[0]<=t&&Zr[1]<=t}const JR=["butt","round","square"],XR=["miter","round","bevel"],ZR={},iw={};class $d{constructor(e,t,n,s,r,{optionalContentConfig:a,markedContentStack:l=null},c,d,h){this.ctx=e,this.current=new Q5(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=a,this.cachedCanvases=new KR(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=h??null}getObject(e,t,n=null){return typeof t=="string"?(this.dependencyTracker?.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):n}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:s=null}){const r=this.ctx.canvas.width,a=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,a),this.ctx.fillStyle=l,n){const c=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(..._i(this.compositeCtx))}this.ctx.save(),i0(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=_i(this.ctx)}executeOperatorList(e,t,n,s,r){const a=e.argsArray,l=e.fnArray;let c=t||0;const d=a.length;if(d===c)return c;const h=d-c>Z5&&typeof n=="function",p=h?Date.now()+WR:0;let v=0;const m=this.commonObjs,E=this.objs;let S,N;for(;;){if(s!==void 0&&c===s.nextBreakPoint)return s.breakIt(c,n),c;if(!r||r(c))if(S=l[c],N=a[c]??null,S!==Nf.dependency)N===null?this[S](c):this[S](c,...N);else for(const C of N){this.dependencyTracker?.recordNamedData(C,c);const P=C.startsWith("g_")?m:E;if(!P.has(C))return P.get(C,n),c}if(c++,c===d)return c;if(h&&++v>Z5){if(Date.now()>p)return n(),c;v=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const n=e.width??e.displayWidth,s=e.height??e.displayHeight;let r=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),l=n,c=s,d="prescale1",h,p;for(;r>2&&l>1||a>2&&c>1;){let v=l,m=c;r>2&&l>1&&(v=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),r/=l/v),a>2&&c>1&&(m=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,a/=c/m),h=this.cachedCanvases.getCanvas(d,v,m),p=h.context,p.clearRect(0,0,v,m),p.drawImage(e,0,0,l,c,0,0,v,m),e=h.canvas,l=v,c=m,d=d==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:c}}_createMaskCanvas(e,t){const n=this.ctx,{width:s,height:r}=t,a=this.current.fillColor,l=this.current.patternFill,c=_i(n);let d,h,p,v;if((t.bitmap||t.data)&&t.count>1){const ee=t.bitmap||t.data.buffer;h=JSON.stringify(l?c:[c.slice(0,4),a]),d=this._cachedBitmapsMap.get(ee),d||(d=new Map,this._cachedBitmapsMap.set(ee,d));const B=d.get(h);if(B&&!l){const H=Math.round(Math.min(c[0],c[2])+c[4]),se=Math.round(Math.min(c[1],c[3])+c[5]);return this.dependencyTracker?.recordDependencies(e,xa.transformAndFill),{canvas:B,offsetX:H,offsetY:se}}p=B}p||(v=this.cachedCanvases.getCanvas("maskCanvas",s,r),tw(v.context,t));let m=ht.transform(c,[1/s,0,0,-1/r,0,0]);m=ht.transform(m,[1,0,0,1,0,-r]);const E=Ud.slice();ht.axialAlignedBoundingBox([0,0,s,r],m,E);const[S,N,C,P]=E,L=Math.round(C-S)||1,O=Math.round(P-N)||1,q=this.cachedCanvases.getCanvas("fillCanvas",L,O),G=q.context,W=S,K=N;G.translate(-W,-K),G.transform(...m),p||(p=this._scaleImage(v.canvas,Oo(G)),p=p.img,d&&l&&d.set(h,p)),G.imageSmoothingEnabled=nw(_i(G),t.interpolate),n0(G,p,0,0,p.width,p.height,0,0,s,r),G.globalCompositeOperation="source-in";const j=ht.transform(Oo(G),[1,0,0,1,-W,-K]);return G.fillStyle=l?a.getPattern(n,this,j,Ms.FILL,e):a,G.fillRect(0,0,s,r),d&&!l&&(this.cachedCanvases.delete("fillCanvas"),d.set(h,q.canvas)),this.dependencyTracker?.recordDependencies(e,xa.transformAndFill),{canvas:q.canvas,offsetX:Math.round(W),offsetY:Math.round(K)}}setLineWidth(e,t){this.dependencyTracker?.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){this.dependencyTracker?.recordSimpleData("lineCap",e),this.ctx.lineCap=JR[t]}setLineJoin(e,t){this.dependencyTracker?.recordSimpleData("lineJoin",e),this.ctx.lineJoin=XR[t]}setMiterLimit(e,t){this.dependencyTracker?.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,n){this.dependencyTracker?.recordSimpleData("dash",e);const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=n)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){for(const[n,s]of t)switch(n){case"LW":this.setLineWidth(e,s);break;case"LC":this.setLineCap(e,s);break;case"LJ":this.setLineJoin(e,s);break;case"ML":this.setMiterLimit(e,s);break;case"D":this.setDash(e,s[0],s[1]);break;case"RI":this.setRenderingIntent(e,s);break;case"FL":this.setFlatness(e,s);break;case"Font":this.setFont(e,s[0],s[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=s;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=s;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=s;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",e),this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(s,t,n);this.suspendedCtx=this.ctx;const a=this.ctx=r.context;a.setTransform(this.suspendedCtx.getTransform()),Zh(this.suspendedCtx,a),YR(a,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Zh(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,s){const r=s[0],a=s[1],l=s[2]-r,c=s[3]-a;l===0||c===0||(this.genericComposeSMask(t.context,n,l,c,t.subtype,t.backdrop,t.transferMap,r,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,s,r,a,l,c,d,h,p){let v=e.canvas,m=c-h,E=d-p;if(a)if(m<0||E<0||m+n>v.width||E+s>v.height){const N=this.cachedCanvases.getCanvas("maskExtension",n,s),C=N.context;C.drawImage(v,-m,-E),C.globalCompositeOperation="destination-atop",C.fillStyle=a,C.fillRect(0,0,n,s),C.globalCompositeOperation="source-over",v=N.canvas,m=E=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const N=new Path2D;N.rect(m,E,n,s),e.clip(N),e.globalCompositeOperation="destination-atop",e.fillStyle=a,e.fillRect(m,E,n,s),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r==="Alpha"&&l?t.filter=this.filterFactory.addAlphaFilter(l):r==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(l));const S=new Path2D;S.rect(c,d,n,s),t.clip(S),t.globalCompositeOperation="destination-in",t.drawImage(v,m,E,n,s,c,d,n,s),t.restore()}save(e){this.inSMaskMode&&Zh(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),this.dependencyTracker?.save(e)}restore(e){if(this.dependencyTracker?.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Zh(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,n,s,r,a,l){this.dependencyTracker?.recordIncrementalData("transform",e),this.ctx.transform(t,n,s,r,a,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n,s){let[r]=n;if(!s){r||=n[0]=new Path2D,this[t](e,r);return}if(this.dependencyTracker!==null){const a=t===Nf.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,s[0]-a,s[2]+a,s[1]-a,s[3]+a).recordDependencies(e,["transform"])}r instanceof Path2D||(r=n[0]=wS(r)),ht.axialAlignedBoundingBox(s,_i(this.ctx),this.current.minMax),this[t](e,r),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,n=!0){const s=this.ctx,r=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&r?.getPattern){const a=r.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=r.getPattern(s,this,Oo(s),Ms.STROKE,e),a){const l=new Path2D;l.addPath(t,s.getTransform().invertSelf().multiplySelf(a)),t=l}this.rescaleAndStroke(t,!1),s.restore()}else this.rescaleAndStroke(t,!0);this.dependencyTracker?.recordDependencies(e,xa.stroke),n&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(Ms.STROKE,_i(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,n=!0){const s=this.ctx,r=this.current.fillColor,a=this.current.patternFill;let l=!1;if(a){const d=r.isModifyingCurrentTransform()?s.getTransform():null;if(this.dependencyTracker?.save(e),s.save(),s.fillStyle=r.getPattern(s,this,Oo(s),Ms.FILL,e),d){const h=new Path2D;h.addPath(t,s.getTransform().invertSelf().multiplySelf(d)),t=h}l=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(s.fill(t,"evenodd"),this.pendingEOFill=!1):s.fill(t)),this.dependencyTracker?.recordDependencies(e,xa.fill),l&&(s.restore(),this.dependencyTracker?.restore(e)),n&&this.consumePath(e,t,c)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){this.ctx.fill(t),this.dependencyTracker?.recordDependencies(e,xa.rawFillPath).recordOperation(e)}clip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=ZR}eoClip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=iw}beginText(e){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:s}=this;t!==void 0&&s.recordFutureForcedDependency("textClip",s.getOpenMarker()).recordFutureForcedDependency("textClip",e),s.recordCloseMarker(e)}if(t!==void 0){const s=new Path2D,r=n.getTransform().invertSelf();for(const{transform:a,x:l,y:c,fontSize:d,path:h}of t)h&&s.addPath(h,new DOMMatrix(a).preMultiplySelf(r).translate(l,c).scale(d,-d));n.clip(s)}delete this.pendingTextPaths}setCharSpacing(e,t){this.dependencyTracker?.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){this.dependencyTracker?.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){this.dependencyTracker?.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){this.dependencyTracker?.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,n){this.dependencyTracker?.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const s=this.commonObjs.get(t),r=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=s.fontMatrix||$1,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&Jt("Invalid font matrix for font "+t),n<0?(n=-n,r.fontDirection=-1):r.fontDirection=1,this.current.font=s,this.current.fontSize=n,s.isType3Font)return;const a=s.loadedName||"sans-serif",l=s.systemFontInfo?.css||`"${a}", ${s.fallbackName}`;let c="normal";s.black?c="900":s.bold&&(c="bold");const d=s.italic?"italic":"normal";let h=n;n<J5?h=J5:n>X5&&(h=X5),this.current.fontSizeScale=n/h,this.ctx.font=`${d} ${c} ${h}px ${l}`}setTextRenderingMode(e,t){this.dependencyTracker?.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){this.dependencyTracker?.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,n){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,t,n){this.setLeading(e,-n),this.moveText(e,t,n)}setTextMatrix(e,t){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);const{current:n}=this;n.textMatrix=t,n.textMatrixScale=Math.hypot(t[0],t[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(e){this.moveText(e,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}#i(e,t,n){const s=new Path2D;return s.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),s}paintChar(e,t,n,s,r,a){const l=this.ctx,c=this.current,d=c.font,h=c.textRenderingMode,p=c.fontSize/c.fontSizeScale,v=h&Rs.FILL_STROKE_MASK,m=!!(h&Rs.ADD_TO_PATH_FLAG),E=c.patternFill&&!d.missingFile,S=c.patternStroke&&!d.missingFile;let N;if((d.disableFontFace||m||E||S)&&!d.missingFile&&(N=d.getPathGenerator(this.commonObjs,t)),N&&(d.disableFontFace||E||S)){l.save(),l.translate(n,s),l.scale(p,-p),this.dependencyTracker?.recordCharacterBBox(e,l,d);let C;if(v===Rs.FILL||v===Rs.FILL_STROKE)if(r){C=l.getTransform(),l.setTransform(...r);const P=this.#i(N,C,r);l.fill(P)}else l.fill(N);if(v===Rs.STROKE||v===Rs.FILL_STROKE)if(a){C||=l.getTransform(),l.setTransform(...a);const{a:P,b:L,c:O,d:q}=C,G=ht.inverseTransform(a),W=ht.transform([P,L,O,q,0,0],G);ht.singularValueDecompose2dScale(W,Zr),l.lineWidth*=Math.max(Zr[0],Zr[1])/p,l.stroke(this.#i(N,C,a))}else l.lineWidth/=p,l.stroke(N);l.restore()}else(v===Rs.FILL||v===Rs.FILL_STROKE)&&(l.fillText(t,n,s),this.dependencyTracker?.recordCharacterBBox(e,l,d,p,n,s,()=>l.measureText(t))),(v===Rs.STROKE||v===Rs.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(e,l,d,p,n,s,()=>l.measureText(t)).recordDependencies(e,xa.stroke),l.strokeText(t,n,s));m&&((this.pendingTextPaths||=[]).push({transform:_i(l),x:n,y:s,fontSize:p,path:N}),this.dependencyTracker?.recordCharacterBBox(e,l,d,p,n,s))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){n=!0;break}return Qt(this,"isFontSubpixelAAEnabled",n)}showText(e,t){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,xa.showText).resetBBox(e),this.current.textRenderingMode&Rs.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,s=n.font;if(s.isType3Font){this.showType3Text(e,t),this.dependencyTracker?.recordShowTextOperation(e);return}const r=n.fontSize;if(r===0){this.dependencyTracker?.recordOperation(e);return}const a=this.ctx,l=n.fontSizeScale,c=n.charSpacing,d=n.wordSpacing,h=n.fontDirection,p=n.textHScale*h,v=t.length,m=s.vertical,E=m?1:-1,S=s.defaultVMetrics,N=r*n.fontMatrix[0],C=n.textRenderingMode===Rs.FILL&&!s.disableFontFace&&!n.patternFill;a.save(),n.textMatrix&&a.transform(...n.textMatrix),a.translate(n.x,n.y+n.textRise),h>0?a.scale(p,-1):a.scale(p,1);let P,L;if(n.patternFill){a.save();const K=n.fillColor.getPattern(a,this,Oo(a),Ms.FILL,e);P=_i(a),a.restore(),a.fillStyle=K}if(n.patternStroke){a.save();const K=n.strokeColor.getPattern(a,this,Oo(a),Ms.STROKE,e);L=_i(a),a.restore(),a.strokeStyle=K}let O=n.lineWidth;const q=n.textMatrixScale;if(q===0||O===0){const K=n.textRenderingMode&Rs.FILL_STROKE_MASK;(K===Rs.STROKE||K===Rs.FILL_STROKE)&&(O=this.getSinglePixelWidth())}else O/=q;if(l!==1&&(a.scale(l,l),O/=l),a.lineWidth=O,s.isInvalidPDFjsFont){const K=[];let j=0;for(const B of t)K.push(B.unicode),j+=B.width;const ee=K.join("");if(a.fillText(ee,0,0),this.dependencyTracker!==null){const B=a.measureText(ee);this.dependencyTracker.recordBBox(e,this.ctx,-B.actualBoundingBoxLeft,B.actualBoundingBoxRight,-B.actualBoundingBoxAscent,B.actualBoundingBoxDescent).recordShowTextOperation(e)}n.x+=j*N*p,a.restore(),this.compose();return}let G=0,W;for(W=0;W<v;++W){const K=t[W];if(typeof K=="number"){G+=E*K*r/1e3;continue}let j=!1;const ee=(K.isSpace?d:0)+c,B=K.fontChar,H=K.accent;let se,ie,ye=K.width;if(m){const de=K.vmetric||S,we=-(K.vmetric?de[1]:ye*.5)*N,Oe=de[2]*N;ye=de?-de[0]:ye,se=we/l,ie=(G+Oe)/l}else se=G/l,ie=0;let X;if(s.remeasure&&ye>0){X=a.measureText(B);const de=X.width*1e3/r*l;if(ye<de&&this.isFontSubpixelAAEnabled){const we=ye/de;j=!0,a.save(),a.scale(we,1),se/=we}else ye!==de&&(se+=(ye-de)/2e3*r/l)}if(this.contentVisible&&(K.isInFont||s.missingFile)){if(C&&!H)a.fillText(B,se,ie),this.dependencyTracker?.recordCharacterBBox(e,a,X?{bbox:null}:s,r/l,se,ie,()=>X??a.measureText(B));else if(this.paintChar(e,B,se,ie,P,L),H){const de=se+r*H.offset.x/l,we=ie-r*H.offset.y/l;this.paintChar(e,H.fontChar,de,we,P,L)}}const ue=m?ye*N-ee*h:ye*N+ee*h;G+=ue,j&&a.restore()}m?n.y-=G:n.x+=G*p,a.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(e)}showType3Text(e,t){const n=this.ctx,s=this.current,r=s.font,a=s.fontSize,l=s.fontDirection,c=r.vertical?1:-1,d=s.charSpacing,h=s.wordSpacing,p=s.textHScale*l,v=s.fontMatrix||$1,m=t.length,E=s.textRenderingMode===Rs.INVISIBLE;let S,N,C,P;if(E||a===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),s.textMatrix&&n.transform(...s.textMatrix),n.translate(s.x,s.y+s.textRise),n.scale(p,l);const L=this.dependencyTracker;for(this.dependencyTracker=L?new z0(L,e):null,S=0;S<m;++S){if(N=t[S],typeof N=="number"){P=c*N*a/1e3,this.ctx.translate(P,0),s.x+=P*p;continue}const O=(N.isSpace?h:0)+d,q=r.charProcOperatorList[N.operatorListId];q?this.contentVisible&&(this.save(),n.scale(a,a),n.transform(...v),this.executeOperatorList(q),this.restore()):Jt(`Type3 character "${N.operatorListId}" is not available.`);const G=[N.width,0];ht.applyTransform(G,v),C=G[0]*a+O,n.translate(C,0),s.x+=C*p}n.restore(),L&&(this.dependencyTracker=L)}setCharWidth(e,t,n){}setCharWidthAndBounds(e,t,n,s,r,a,l){const c=new Path2D;c.rect(s,r,a-s,l-r),this.ctx.clip(c),this.dependencyTracker?.recordBBox(e,this.ctx,s,a,r,l).recordClipBox(e,this.ctx,s,a,r,l),this.endPath(e)}getColorN_Pattern(e,t){let n;if(t[0]==="TilingPattern"){const s=this.baseTransform||_i(this.ctx),r={createCanvasGraphics:(a,l)=>new $d(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new z0(this.dependencyTracker,l,!0):null)};n=new ey(t,this.ctx,r,s)}else n=this._getPattern(e,t[1],t[2]);return n}setStrokeColorN(e,...t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,n=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=GR(this.getObject(e,t)),this.cachedPatterns.set(t,s)),n&&(s.matrix=n),s}shadingFill(e,t){if(!this.contentVisible)return;const n=this.ctx;this.save(e);const s=this._getPattern(e,t);n.fillStyle=s.getPattern(n,this,Oo(n),Ms.SHADING,e);const r=Oo(n);if(r){const{width:a,height:l}=n.canvas,c=Ud.slice();ht.axialAlignedBoundingBox([0,0,a,l],r,c);const[d,h,p,v]=c;this.ctx.fillRect(d,h,p-d,v-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,xa.transform).recordDependencies(e,xa.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){Xn("Should not call beginInlineImage")}beginImageData(){Xn("Should not call beginImageData")}paintFormXObjectBegin(e,t,n){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=_i(this.ctx),n)){ht.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[s,r,a,l]=n,c=new Path2D;c.rect(s,r,a-s,l-r),this.ctx.clip(c),this.dependencyTracker?.recordClipBox(e,this.ctx,s,a,r,l),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;t.isolated||ag("TODO: Support non-isolated groups."),t.knockout&&Jt("Knockout groups not supported.");const s=_i(n);if(t.matrix&&n.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let r=Ud.slice();ht.axialAlignedBoundingBox(t.bbox,_i(n),r);const a=[0,0,n.canvas.width,n.canvas.height];r=ht.intersect(r,a)||[0,0,0,0];const l=Math.floor(r[0]),c=Math.floor(r[1]),d=Math.max(Math.ceil(r[2])-l,1),h=Math.max(Math.ceil(r[3])-c,1);this.current.startNewPathAndClipBox([0,0,d,h]);let p="groupAt"+this.groupLevel;t.smask&&(p+="_smask_"+this.smaskCounter++%2);const v=this.cachedCanvases.getCanvas(p,d,h),m=v.context;m.translate(-l,-c),m.transform(...s);let E=new Path2D;const[S,N,C,P]=t.bbox;if(E.rect(S,N,C-S,P-N),t.matrix){const L=new Path2D;L.addPath(E,new DOMMatrix(t.matrix)),E=L}m.clip(E),t.smask&&this.smaskStack.push({canvas:v.canvas,context:m,offsetX:l,offsetY:c,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(l,c),n.save()),Zh(n,m),this.ctx=m,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e,t){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const r=_i(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...r);const a=Ud.slice();ht.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],r,a),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(e,t,n,s,r,a){if(this.#e(),i0(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const l=n[2]-n[0],c=n[3]-n[1];if(a&&this.annotationCanvasMap){s=s.slice(),s[4]-=n[0],s[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=l,n[3]=c,ht.singularValueDecompose2dScale(_i(this.ctx),Zr);const{viewportScale:d}=this,h=Math.ceil(l*this.outputScaleX*d),p=Math.ceil(c*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(h,p);const{canvas:v,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(t,v),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(Zr[0],0,0,-Zr[1],0,c*Zr[1]),i0(this.ctx)}else{i0(this.ctx),this.endPath(e);const d=new Path2D;d.rect(n[0],n[1],l,c),this.ctx.clip(d)}}this.current=new Q5(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...s),this.transform(e,...r)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){if(!this.contentVisible)return;const n=t.count;t=this.getObject(e,t.data,t),t.count=n;const s=this.ctx,r=this._createMaskCanvas(e,t),a=r.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(a,r.offsetX,r.offsetY),this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,r.offsetX,r.offsetX+a.width,r.offsetY,r.offsetY+a.height).recordOperation(e),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n,s=0,r=0,a,l){if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const c=this.ctx;c.save();const d=_i(c);c.transform(n,s,r,a,0,0);const h=this._createMaskCanvas(e,t);c.setTransform(1,0,0,1,h.offsetX-d[4],h.offsetY-d[5]),this.dependencyTracker?.resetBBox(e);for(let p=0,v=l.length;p<v;p+=2){const m=ht.transform(d,[n,s,r,a,l[p],l[p+1]]);c.drawImage(h.canvas,m[4],m[5]),this.dependencyTracker?.recordBBox(e,this.ctx,m[4],m[4]+h.canvas.width,m[5],m[5]+h.canvas.height)}c.restore(),this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageMaskXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx,s=this.current.fillColor,r=this.current.patternFill;this.dependencyTracker?.resetBBox(e).recordDependencies(e,xa.transformAndFill);for(const a of t){const{data:l,width:c,height:d,transform:h}=a,p=this.cachedCanvases.getCanvas("maskCanvas",c,d),v=p.context;v.save();const m=this.getObject(e,l,a);tw(v,m),v.globalCompositeOperation="source-in",v.fillStyle=r?s.getPattern(v,this,Oo(n),Ms.FILL,e):s,v.fillRect(0,0,c,d),v.restore(),n.save(),n.transform(...h),n.scale(1,-1),n0(n,p.canvas,0,0,c,d,0,-1,1,1),this.dependencyTracker?.recordBBox(e,n,0,c,0,d),n.restore()}this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const n=this.getObject(e,t);if(!n){Jt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,n)}paintImageXObjectRepeat(e,t,n,s,r){if(!this.contentVisible)return;const a=this.getObject(e,t);if(!a){Jt("Dependent image isn't ready yet");return}const l=a.width,c=a.height,d=[];for(let h=0,p=r.length;h<p;h+=2)d.push({transform:[n,0,0,s,r[h],r[h+1]],x:0,y:0,w:l,h:c});this.paintInlineImageXObjectGroup(e,a,d)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:s}=e,r=this.cachedCanvases.getCanvas("inlineImage",n,s),a=r.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",r.canvas}paintInlineImageXObject(e,t){if(!this.contentVisible)return;const n=t.width,s=t.height,r=this.ctx;this.save(e);const{filter:a}=r;a!=="none"&&a!==""&&(r.filter="none"),r.scale(1/n,-1/s);let l;if(t.bitmap)l=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)l=t;else{const h=this.cachedCanvases.getCanvas("inlineImage",n,s).context;ew(h,t),l=this.applyTransferMapsToCanvas(h)}const c=this._scaleImage(l,Oo(r));r.imageSmoothingEnabled=nw(_i(r),t.interpolate),this.dependencyTracker?.resetBBox(e).recordBBox(e,r,0,n,-s,0).recordDependencies(e,xa.imageXObject).recordOperation(e),n0(r,c.img,0,0,c.paintWidth,c.paintHeight,0,-s,n,s),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,n){if(!this.contentVisible)return;const s=this.ctx;let r;if(t.bitmap)r=t.bitmap;else{const a=t.width,l=t.height,d=this.cachedCanvases.getCanvas("inlineImage",a,l).context;ew(d,t),r=this.applyTransferMapsToCanvas(d)}this.dependencyTracker?.resetBBox(e);for(const a of n)s.save(),s.transform(...a.transform),s.scale(1,-1),n0(s,r,a.x,a.y,a.w,a.h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,s,0,1,-1,0),s.restore();this.dependencyTracker?.recordOperation(e),this.compose()}paintSolidColorImageMask(e){this.contentVisible&&(this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,xa.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,n){}beginMarkedContent(e,t){this.dependencyTracker?.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,n){this.dependencyTracker?.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){this.dependencyTracker?.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,n){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const r=this.ctx;this.pendingClip?(s||(this.pendingClip===iw?r.clip(t,"evenodd"):r.clip(t)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):this.dependencyTracker?.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=_i(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:s,d:r}=this.ctx.getTransform();let a,l;if(n===0&&s===0){const c=Math.abs(t),d=Math.abs(r);if(c===d)if(e===0)a=l=1/c;else{const h=c*e;a=l=h<1?1/h:1}else if(e===0)a=1/c,l=1/d;else{const h=c*e,p=d*e;a=h<1?1/h:1,l=p<1?1/p:1}}else{const c=Math.abs(t*r-n*s),d=Math.hypot(t,n),h=Math.hypot(s,r);if(e===0)a=h/c,l=d/c;else{const p=e*c;a=h>p?h/p:1,l=d>p?d/p:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:s}}=this,[r,a]=this.getScaleForStroking();if(r===a){n.lineWidth=(s||1)*r,n.stroke(e);return}const l=n.getLineDash();t&&n.save(),n.scale(r,a),Zm.a=1/r,Zm.d=1/a;const c=new Path2D;if(c.addPath(e,Zm),l.length>0){const d=Math.max(r,a);n.setLineDash(l.map(h=>h/d)),n.lineDashOffset/=d}n.lineWidth=s||1,n.stroke(c),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const i in Nf)$d.prototype[i]!==void 0&&($d.prototype[Nf[i]]=$d.prototype[i]);class Wd{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}class QR{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}[Symbol.iterator](){return this.#e.entries()}}const Md=Symbol("INTERNAL");class e6{#e=!1;#t=!1;#i=!1;#n=!0;constructor(e,{name:t,intent:n,usage:s,rbGroups:r}){this.#e=!!(e&Xr.DISPLAY),this.#t=!!(e&Xr.PRINT),this.name=t,this.intent=n,this.usage=s,this.rbGroups=r}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;const{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,n=!1){e!==Md&&Xn("Internal method `_setVisible` called."),this.#i=n,this.#n=t}}class t6{#e=null;#t=new Map;#i=null;#n=null;constructor(e,t=Xr.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#n=e.order;for(const n of e.groups)this.#t.set(n.id,new e6(t,n));if(e.baseState==="OFF")for(const n of this.#t.values())n._setVisible(Md,!1);for(const n of e.on)this.#t.get(n)._setVisible(Md,!0);for(const n of e.off)this.#t.get(n)._setVisible(Md,!1);this.#i=this.getHash()}}#a(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let s=1;s<t;s++){const r=e[s];let a;if(Array.isArray(r))a=this.#a(r);else if(this.#t.has(r))a=this.#t.get(r).visible;else return Jt(`Optional content group not found: ${r}`),!0;switch(n){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return n==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return ag("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(Jt(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#a(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!this.#t.has(t))return Jt(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!this.#t.has(t))return Jt(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!this.#t.has(t))return Jt(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!this.#t.has(t))return Jt(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return Jt(`Unknown optional content policy ${e.policy}.`),!0}return Jt(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){const s=this.#t.get(e);if(!s){Jt(`Optional content group not found: ${e}`);return}if(n&&t&&s.rbGroups.length)for(const r of s.rbGroups)for(const a of r)a!==e&&this.#t.get(a)?._setVisible(Md,!1,!0);s._setVisible(Md,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let n;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":n=s;continue}const r=this.#t.get(s);if(r)switch(n){case"ON":this.setVisibility(s,!0,t);break;case"OFF":this.setVisibility(s,!1,t);break;case"Toggle":this.setVisibility(s,!r.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#t.size?this.#n?this.#n.slice():[...this.#t.keys()]:null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new _S;for(const[t,n]of this.#t)e.update(`${t}:${n.visible}`);return this.#e=e.hexdigest()}[Symbol.iterator](){return this.#t.entries()}}class n6{constructor(e,{disableRange:t=!1,disableStream:n=!1}){mn(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:r,progressiveDone:a,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=l,r?.length>0){const c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,d)=>{this._onReceiveData({begin:c,chunk:d})}),e.addProgressListener((c,d)=>{this._onProgress({loaded:c,total:d})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const s=this._rangeReaders.some(function(r){return r._begin!==e?!1:(r._enqueue(n),!0)});mn(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){mn(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new i6(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new s6(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class i6{constructor(e,t,n=!1,s=null){this._stream=e,this._done=n||!1,this._filename=Yv(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class s6{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function r6(i){let e=!0,t=n("filename\\*","i").exec(i);if(t){t=t[1];let h=l(t);return h=unescape(h),h=c(h),h=d(h),r(h)}if(t=a(i),t){const h=d(t);return r(h)}if(t=n("filename","i").exec(i),t){t=t[1];let h=l(t);return h=d(h),r(h)}function n(h,p){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function s(h,p){if(h){if(!/^[\x00-\xFF]+$/.test(p))return p;try{const v=new TextDecoder(h,{fatal:!0}),m=Uf(p);p=v.decode(m),e=!1}catch{}}return p}function r(h){return e&&/[\x80-\xff]/.test(h)&&(h=s("utf-8",h),e&&(h=s("iso-8859-1",h))),h}function a(h){const p=[];let v;const m=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=m.exec(h))!==null;){let[,S,N,C]=v;if(S=parseInt(S,10),S in p){if(S===0)break;continue}p[S]=[N,C]}const E=[];for(let S=0;S<p.length&&S in p;++S){let[N,C]=p[S];C=l(C),N&&(C=unescape(C),S===0&&(C=c(C))),E.push(C)}return E.join("")}function l(h){if(h.startsWith('"')){const p=h.slice(1).split('\\"');for(let v=0;v<p.length;++v){const m=p[v].indexOf('"');m!==-1&&(p[v]=p[v].slice(0,m),p.length=v+1),p[v]=p[v].replaceAll(/\\(.)/g,"$1")}h=p.join('"')}return h}function c(h){const p=h.indexOf("'");if(p===-1)return h;const v=h.slice(0,p),E=h.slice(p+1).replace(/^[^']*'/,"");return s(v,E)}function d(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,v,m,E){if(m==="q"||m==="Q")return E=E.replaceAll("_"," "),E=E.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,N){return String.fromCharCode(parseInt(N,16))}),s(v,E);try{E=atob(E)}catch{}return s(v,E)})}return""}function kS(i,e){const t=new Headers;if(!i||!e||typeof e!="object")return t;for(const n in e){const s=e[n];s!==void 0&&t.append(n,s)}return t}function ug(i){return URL.parse(i)?.origin??null}function RS({responseHeaders:i,isHttp:e,rangeChunkSize:t,disableRange:n}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(i.get("Content-Length"),10);return!Number.isInteger(r)||(s.suggestedLength=r,r<=2*t)||n||!e||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function LS(i){const e=i.get("Content-Disposition");if(e){let t=r6(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Yv(t))return t}return null}function Vf(i,e){return new H0(`Unexpected server response (${i}) while retrieving PDF "${e}".`,i,i===404||i===0&&e.startsWith("file:"))}function PS(i){return i===200||i===206}function IS(i,e,t){return{method:"GET",headers:i,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function MS(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(Jt(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class a6{_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=kS(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return mn(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new o6(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new l6(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class o6{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),s=t.url;fetch(s,IS(n,this._withCredentials,this._abortController)).then(r=>{if(e._responseOrigin=ug(r.url),!PS(r.status))throw Vf(r.status,s);this._reader=r.body.getReader(),this._headersCapability.resolve();const a=r.headers,{allowRangeRequests:l,suggestedLength:c}=RS({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=c||this._contentLength,this._filename=LS(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Su("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:MS(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class l6{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const r=new Headers(e.headers);r.append("Range",`bytes=${t}-${n-1}`);const a=s.url;fetch(a,IS(r,this._withCredentials,this._abortController)).then(l=>{const c=ug(l.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!PS(l.status))throw Vf(l.status,a);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:MS(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const Qm=200,e1=206;function u6(i){const e=i.response;return typeof e!="string"?e:Uf(e).buffer}class c6{_responseOrigin=null;constructor({url:e,httpHeaders:t,withCredentials:n}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=kS(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,s=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[r,a]of this.headers)t.setRequestHeader(r,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=e1):s.expectedStatus=Qm,t.responseType="arraybuffer",mn(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){const n=this.pendingRequests[e];n&&n.onProgress?.(t)}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const s=n.xhr;if(s.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){n.onError(s.status);return}const r=s.status||Qm;if(!(r===Qm&&n.expectedStatus===e1)&&r!==n.expectedStatus){n.onError(s.status);return}const l=u6(s);if(r===e1){const c=s.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);d?n.onDone({begin:parseInt(d[1],10),chunk:l}):(Jt('Missing or invalid "Content-Range" header.'),n.onError(0))}else l?n.onDone({begin:0,chunk:l}):n.onError(s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class d6{constructor(e){this._source=e,this._manager=new c6(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return mn(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new h6(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new f6(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class h6{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=ug(t.responseURL);const n=t.getAllResponseHeaders(),s=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[c,...d]=l.split(": ");return[c,d.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:a}=RS({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=LS(s),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Vf(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class f6{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const e=ug(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=Vf(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const p6=/^[a-z][a-z0-9\-+.]+:/i;function g6(i){if(p6.test(i))return new URL(i);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(i))}class m6{constructor(e){this.source=e,this.url=g6(e.url),mn(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return mn(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new v6(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new y6(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class v6{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=Vf(0,this._url.href)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Su("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class y6{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=e.source;this._isStreamingSupported=!s.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Qh=Symbol("INITIAL_DATA");class DS{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:Qh}}get(e,t=null){if(t){const s=this.#t(e);return s.promise.then(()=>t(s.data)),null}const n=this.#e[e];if(!n||n.data===Qh)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=this.#e[e];return!!t&&t.data!==Qh}delete(e){const t=this.#e[e];return!t||t.data===Qh?!1:(delete this.#e[e],!0)}resolve(e,t=null){const n=this.#t(e);n.data=t,n.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==Qh&&(yield[e,t])}}}const b6=1e5,sw=30;class rr{#e=Promise.withResolvers();#t=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#a=null;#r=null;#s=0;#o=0;#u=null;#l=null;#h=0;#d=0;#f=Object.create(null);#m=[];#g=null;#c=[];#p=new WeakMap;#v=null;static#b=new Map;static#y=new Map;static#E=new WeakMap;static#A=null;static#x=new Set;constructor({textContentSource:e,container:t,viewport:n}){if(e instanceof ReadableStream)this.#g=e;else if(typeof e=="object")this.#g=new ReadableStream({start(c){c.enqueue(e),c.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#l=t,this.#d=n.scale*zo.pixelRatio,this.#h=n.rotation,this.#r={div:null,properties:null,ctx:null};const{pageWidth:s,pageHeight:r,pageX:a,pageY:l}=n.rawDims;this.#v=[1,0,0,-1,-a,l+r],this.#o=s,this.#s=r,rr.#k(),xc(t,n),this.#e.promise.finally(()=>{rr.#x.delete(this),this.#r=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Ds.platform;return Qt(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#u.read().then(({value:t,done:n})=>{if(n){this.#e.resolve();return}this.#a??=t.lang,Object.assign(this.#f,t.styles),this.#C(t.items),e()},this.#e.reject)};return this.#u=this.#g.getReader(),rr.#x.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const n=e.scale*zo.pixelRatio,s=e.rotation;if(s!==this.#h&&(t?.(),this.#h=s,xc(this.#l,{rotation:s})),n!==this.#d){t?.(),this.#d=n;const r={div:null,properties:null,ctx:rr.#R(this.#a)};for(const a of this.#c)r.properties=this.#p.get(a),r.div=a,this.#S(r)}}cancel(){const e=new Su("TextLayer task cancelled.");this.#u?.cancel(e).catch(()=>{}),this.#u=null,this.#e.reject(e)}get textDivs(){return this.#c}get textContentItemsStr(){return this.#m}#C(e){if(this.#i)return;this.#r.ctx??=rr.#R(this.#a);const t=this.#c,n=this.#m;for(const s of e){if(t.length>b6){Jt("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(s.str===void 0){if(s.type==="beginMarkedContentProps"||s.type==="beginMarkedContent"){const r=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),s.id&&this.#t.setAttribute("id",`${s.id}`),r.append(this.#t)}else s.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}n.push(s.str),this.#w(s)}}#w(e){const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#c.push(t);const s=ht.transform(this.#v,e.transform);let r=Math.atan2(s[1],s[0]);const a=this.#f[e.fontName];a.vertical&&(r+=Math.PI/2);let l=this.#n&&a.fontSubstitution||a.fontFamily;l=rr.fontFamilyMap.get(l)||l;const c=Math.hypot(s[2],s[3]),d=c*rr.#B(l,a,this.#a);let h,p;r===0?(h=s[4],p=s[5]-d):(h=s[4]+d*Math.sin(r),p=s[5]-d*Math.cos(r));const v="calc(var(--total-scale-factor) *",m=t.style;this.#t===this.#l?(m.left=`${(100*h/this.#o).toFixed(2)}%`,m.top=`${(100*p/this.#s).toFixed(2)}%`):(m.left=`${v}${h.toFixed(2)}px)`,m.top=`${v}${p.toFixed(2)}px)`),m.fontSize=`${v}${(rr.#A*c).toFixed(2)}px)`,m.fontFamily=l,n.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#n&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),r!==0&&(n.angle=r*(180/Math.PI));let E=!1;if(e.str.length>1)E=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const S=Math.abs(e.transform[0]),N=Math.abs(e.transform[3]);S!==N&&Math.max(S,N)/Math.min(S,N)>1.5&&(E=!0)}if(E&&(n.canvasWidth=a.vertical?e.height:e.width),this.#p.set(t,n),this.#r.div=t,this.#r.properties=n,this.#S(this.#r),n.hasText&&this.#t.append(t),n.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),this.#t.append(S)}}#S(e){const{div:t,properties:n,ctx:s}=e,{style:r}=t;let a="";if(rr.#A>1&&(a=`scale(${1/rr.#A})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:l}=r,{canvasWidth:c,fontSize:d}=n;rr.#N(s,d*this.#d,l);const{width:h}=s.measureText(t.textContent);h>0&&(a=`scaleX(${c*this.#d/h}) ${a}`)}n.angle!==0&&(a=`rotate(${n.angle}deg) ${a}`),a.length>0&&(r.transform=a)}static cleanup(){if(!(this.#x.size>0)){this.#b.clear();for(const{canvas:e}of this.#y.values())e.remove();this.#y.clear()}}static#R(e=null){let t=this.#y.get(e||="");if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#y.set(e,t),this.#E.set(t,{size:0,family:""})}return t}static#N(e,t,n){const s=this.#E.get(e);t===s.size&&n===s.family||(e.font=`${t}px ${n}`,s.size=t,s.family=n)}static#k(){if(this.#A!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#A=e.getBoundingClientRect().height,e.remove()}static#B(e,t,n){const s=this.#b.get(e);if(s)return s;const r=this.#R(n);r.canvas.width=r.canvas.height=sw,this.#N(r,sw,e);const a=r.measureText(""),l=a.fontBoundingBoxAscent,c=Math.abs(a.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let d=.8;return l?d=l/(l+c):(Ds.platform.isFirefox&&Jt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?d=t.ascent:t.descent&&(d=1+t.descent)),this.#b.set(e,d),d}}const w6=100;function nv(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const e=new ty,{docId:t}=e,n=i.url?CR(i.url):null,s=i.data?NR(i.data):null,r=i.httpHeaders||null,a=i.withCredentials===!0,l=i.password??null,c=i.range instanceof OS?i.range:null,d=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:2**16;let h=i.worker instanceof Rf?i.worker:null;const p=i.verbosity,v=typeof i.docBaseUrl=="string"&&!og(i.docBaseUrl)?i.docBaseUrl:null,m=Zp(i.cMapUrl),E=i.cMapPacked!==!1,S=i.CMapReaderFactory||(ar?OR:V5),N=Zp(i.iccUrl),C=Zp(i.standardFontDataUrl),P=i.StandardFontDataFactory||(ar?BR:G5),L=Zp(i.wasmUrl),O=i.WasmFactory||(ar?FR:$5),q=i.stopAtErrors!==!0,G=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,W=i.isEvalSupported!==!1,K=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!ar,j=typeof i.isImageDecoderSupported=="boolean"?i.isImageDecoderSupported:!ar&&(Ds.platform.isFirefox||!globalThis.chrome),ee=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,B=typeof i.disableFontFace=="boolean"?i.disableFontFace:ar,H=i.fontExtraProperties===!0,se=i.enableXfa===!0,ie=i.ownerDocument||globalThis.document,ye=i.disableRange===!0,X=i.disableStream===!0,ue=i.disableAutoFetch===!0,de=i.pdfBug===!0,we=i.CanvasFactory||(ar?DR:PR),Oe=i.FilterFactory||(ar?MR:IR),Q=i.enableHWA===!0,M=i.useWasm!==!1,V=c?c.length:i.length??NaN,Z=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!ar&&!B,le=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:!!(S===V5&&P===G5&&O===$5&&m&&C&&L&&cf(m,document.baseURI)&&cf(C,document.baseURI)&&cf(L,document.baseURI)),ce=null;tR(p);const he={canvasFactory:new we({ownerDocument:ie,enableHWA:Q}),filterFactory:new Oe({docId:t,ownerDocument:ie}),cMapReaderFactory:le?null:new S({baseUrl:m,isCompressed:E}),standardFontDataFactory:le?null:new P({baseUrl:C}),wasmFactory:le?null:new O({baseUrl:L})};h||(h=Rf.create({verbosity:p,port:Wd.workerPort}),e._worker=h);const Ae={docId:t,apiVersion:"5.4.394",data:s,password:l,disableAutoFetch:ue,rangeChunkSize:d,length:V,docBaseUrl:v,enableXfa:se,evaluatorOptions:{maxImageSize:G,disableFontFace:B,ignoreErrors:q,isEvalSupported:W,isOffscreenCanvasSupported:K,isImageDecoderSupported:j,canvasMaxAreaInBytes:ee,fontExtraProperties:H,useSystemFonts:Z,useWasm:M,useWorkerFetch:le,cMapUrl:m,iccUrl:N,standardFontDataUrl:C,wasmUrl:L}},Ee={ownerDocument:ie,pdfBug:de,styleElement:ce,loadingParams:{disableAutoFetch:ue,enableXfa:se}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Ie=h.messageHandler.sendWithPromise("GetDocRequest",Ae,s?[s.buffer]:null);let He;if(c)He=new n6(c,{disableRange:ye,disableStream:X});else if(!s){if(!n)throw new Error("getDocument - no `url` parameter provided.");const Ye=cf(n)?a6:ar?m6:d6;He=new Ye({url:n,length:V,httpHeaders:r,withCredentials:a,rangeChunkSize:d,disableRange:ye,disableStream:X})}return Ie.then(Ye=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Ze=new df(t,Ye,h.port),st=new A6(Ze,e,He,Ee,he,Q);e._transport=st,Ze.send("Ready",null)})}).catch(e._capability.reject),e}class ty{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${ty.#e++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class OS{#e=Promise.withResolvers();#t=[];#i=[];#n=[];#a=[];constructor(e,t,n=!1,s=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=s}addRangeListener(e){this.#a.push(e)}addProgressListener(e){this.#n.push(e)}addProgressiveReadListener(e){this.#i.push(e)}addProgressiveDoneListener(e){this.#t.push(e)}onDataRange(e,t){for(const n of this.#a)n(e,t)}onDataProgress(e,t){this.#e.promise.then(()=>{for(const n of this.#n)n(e,t)})}onDataProgressiveRead(e){this.#e.promise.then(()=>{for(const t of this.#i)t(e)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(const e of this.#t)e()})}transportReady(){this.#e.resolve()}requestDataRange(e,t){Xn("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class x6{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Qt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class _6{#e=!1;constructor(e,t,n,s=!1){this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=s?new B5:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new DS,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:r=!1}={}){return new qf({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:s,dontFlip:r})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Qt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,canvas:t=e.canvas,viewport:n,intent:s="display",annotationMode:r=bu.ENABLE,transform:a=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:d=null,pageColors:h=null,printAnnotationStorage:p=null,isEditing:v=!1,recordOperations:m=!1,operationsFilter:E=null}){this._stats?.time("Overall");const S=this._transport.getRenderingIntent(s,r,p,v),{renderingIntent:N,cacheKey:C}=S;this.#e=!1,c||=this._transport.getOptionalContentConfig(N);let P=this._intentStates.get(C);P||(P=Object.create(null),this._intentStates.set(C,P)),P.streamReaderCancelTimeout&&(clearTimeout(P.streamReaderCancelTimeout),P.streamReaderCancelTimeout=null);const L=!!(N&Xr.PRINT);P.displayReadyCapability||(P.displayReadyCapability=Promise.withResolvers(),P.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(S));const O=!!(this._pdfBug&&globalThis.StepperManager?.enabled),q=!this.recordedBBoxes&&(m||O),G=j=>{if(P.renderTasks.delete(W),q){const ee=W.gfx?.dependencyTracker.take();ee&&(W.stepper&&W.stepper.setOperatorBBoxes(ee,W.gfx.dependencyTracker.takeDebugMetadata()),m&&(this.recordedBBoxes=ee))}L&&(this.#e=!0),this.#t(),j?(W.capability.reject(j),this._abortOperatorList({intentState:P,reason:j instanceof Error?j:new Error(j)})):W.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},W=new jd({callback:G,params:{canvas:t,canvasContext:e,dependencyTracker:q?new jR(t,P.operatorList.length,O):null,viewport:n,transform:a,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:P.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!L,pdfBug:this._pdfBug,pageColors:h,enableHWA:this._transport.enableHWA,operationsFilter:E});(P.renderTasks||=new Set).add(W);const K=W.task;return Promise.all([P.displayReadyCapability.promise,c]).then(([j,ee])=>{if(this.destroyed){G();return}if(this._stats?.time("Rendering"),!(ee.renderingIntent&N))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");W.initializeGraphics({transparency:j,optionalContentConfig:ee}),W.operatorListChanged()}).catch(G),K}getOperatorList({intent:e="display",annotationMode:t=bu.ENABLE,printAnnotationStorage:n=null,isEditing:s=!1}={}){function r(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(c))}const a=this._transport.getRenderingIntent(e,t,n,s,!0);let l=this._intentStates.get(a.cacheKey);l||(l=Object.create(null),this._intentStates.set(a.cacheKey,l));let c;return l.opListReadCapability||(c=Object.create(null),c.operatorListChanged=r,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||=new Set).add(c),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(a)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>kf.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,s){function r(){a.read().then(function({value:c,done:d}){if(d){n(l);return}l.lang??=c.lang,Object.assign(l.styles,c.styles),l.items.push(...c.items),r()},s)}const a=t.getReader(),l={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),this.#e=!1,Promise.all(e)}cleanup(e=!1){this.#e=!0;const t=this.#t();return e&&t&&(this._stats&&=new B5),t}#t(){if(!this.#e||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(e,t){const n=this._intentStates.get(t);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let n=0,s=e.length;n<s;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&this.#t()}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:s}){const{map:r,transfer:a}=n,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r,modifiedIds:s},a).getReader(),d=this._intentStates.get(t);d.streamReader=c;const h=()=>{c.read().then(({value:p,done:v})=>{if(v){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(p,d),h())},p=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const v of d.renderTasks)v.operatorListChanged();this.#t()}if(d.displayReadyCapability)d.displayReadyCapability.reject(p);else if(d.opListReadCapability)d.opListReadCapability.reject(p);else throw p}})};h()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof Wv){let s=w6;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new Su(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,r]of this._intentStates)if(r===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}var wu,so,Tl,vc,Q0,yc,bc,lr,x0,BS,FS,hf,th,_0;const pi=class pi{constructor({name:e=null,port:t=null,verbosity:n=nR()}={}){Mo(this,lr);Mo(this,wu,Promise.withResolvers());Mo(this,so,null);Mo(this,Tl,null);Mo(this,vc,null);if(this.name=e,this.destroyed=!1,this.verbosity=n,t){if(hi(pi,bc).has(t))throw new Error("Cannot use more than one PDFWorker per port.");hi(pi,bc).set(t,this),Do(this,lr,BS).call(this,t)}else Do(this,lr,FS).call(this)}get promise(){return hi(this,wu).promise}get port(){return hi(this,Tl)}get messageHandler(){return hi(this,so)}destroy(){this.destroyed=!0,hi(this,vc)?.terminate(),Cr(this,vc,null),hi(pi,bc).delete(hi(this,Tl)),Cr(this,Tl,null),hi(this,so)?.destroy(),Cr(this,so,null)}static create(e){const t=hi(this,bc).get(e?.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new pi(e)}static get workerSrc(){if(Wd.workerSrc)return Wd.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Qt(this,"_setupFakeWorkerGlobal",(async()=>hi(this,th,_0)?hi(this,th,_0):(await import(this.workerSrc)).WorkerMessageHandler)())}};wu=new WeakMap,so=new WeakMap,Tl=new WeakMap,vc=new WeakMap,Q0=new WeakMap,yc=new WeakMap,bc=new WeakMap,lr=new WeakSet,x0=function(){hi(this,wu).resolve(),hi(this,so).send("configure",{verbosity:this.verbosity})},BS=function(e){Cr(this,Tl,e),Cr(this,so,new df("main","worker",e)),hi(this,so).on("ready",()=>{}),Do(this,lr,x0).call(this)},FS=function(){if(hi(pi,yc)||hi(pi,th,_0)){Do(this,lr,hf).call(this);return}let{workerSrc:e}=pi;try{pi._isSameOrigin(window.location,e)||(e=pi._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new df("main","worker",t),s=()=>{r.abort(),n.destroy(),t.terminate(),this.destroyed?hi(this,wu).reject(new Error("Worker was destroyed")):Do(this,lr,hf).call(this)},r=new AbortController;t.addEventListener("error",()=>{hi(this,vc)||s()},{signal:r.signal}),n.on("test",l=>{if(r.abort(),this.destroyed||!l){s();return}Cr(this,so,n),Cr(this,Tl,t),Cr(this,vc,t),Do(this,lr,x0).call(this)}),n.on("ready",l=>{if(r.abort(),this.destroyed){s();return}try{a()}catch{Do(this,lr,hf).call(this)}});const a=()=>{const l=new Uint8Array;n.send("test",l,[l.buffer])};a();return}catch{ag("The worker has been disabled.")}Do(this,lr,hf).call(this)},hf=function(){hi(pi,yc)||(Jt("Setting up fake worker."),Cr(pi,yc,!0)),pi._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){hi(this,wu).reject(new Error("Worker was destroyed"));return}const t=new LR;Cr(this,Tl,t);const n=`fake${Bb(pi,Q0)._++}`,s=new df(n+"_worker",n,t);e.setup(s,t),Cr(this,so,new df(n,n+"_worker",t)),Do(this,lr,x0).call(this)}).catch(e=>{hi(this,wu).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},th=new WeakSet,_0=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Mo(pi,th),Mo(pi,Q0,0),Mo(pi,yc,!1),Mo(pi,bc,new WeakMap),ar&&(Cr(pi,yc,!0),Wd.workerSrc||="./pdf.worker.mjs"),pi._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(!n?.origin||n.origin==="null")return!1;const s=new URL(t,n);return n.origin===s.origin},pi._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},pi.fromPort=e=>{if(pR("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return pi.create(e)};let Rf=pi;class A6{#e=new Map;#t=new Map;#i=new Map;#n=new Map;#a=null;constructor(e,t,n,s,r,a){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new DS,this.fontLoader=new ER({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=a,this.setupMessageHandler()}#r(e,t=null){const n=this.#e.get(e);if(n)return n;const s=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,s),s}get annotationStorage(){return Qt(this,"annotationStorage",new Xv)}getRenderingIntent(e,t=bu.ENABLE,n=null,s=!1,r=!1){let a=Xr.DISPLAY,l=Z1;switch(e){case"any":a=Xr.ANY;break;case"display":break;case"print":a=Xr.PRINT;break;default:Jt(`getRenderingIntent - invalid intent: ${e}`)}const c=a&Xr.PRINT&&n instanceof AS?n:this.annotationStorage;switch(t){case bu.DISABLE:a+=Xr.ANNOTATIONS_DISABLE;break;case bu.ENABLE:break;case bu.ENABLE_FORMS:a+=Xr.ANNOTATIONS_FORMS;break;case bu.ENABLE_STORAGE:a+=Xr.ANNOTATIONS_STORAGE,l=c.serializable;break;default:Jt(`getRenderingIntent - invalid annotationMode: ${t}`)}s&&(a+=Xr.IS_EDITING),r&&(a+=Xr.OPLIST);const{ids:d,hash:h}=c.modifiedIds,p=[a,l.hash,h];return{renderingIntent:a,cacheKey:p.join("_"),annotationStorageSerializable:l,modifiedIds:d}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const n of this.#t.values())e.push(n._destroy());this.#t.clear(),this.#i.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),rr.cleanup(),this._networkStream?.cancelAllRequests(new Su("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,s)=>{mn(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},s.onPull=()=>{this._fullReader.read().then(function({value:r,done:a}){if(a){s.close();return}mn(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{this._fullReader.cancel(r),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async n=>{await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:r,contentLength:a}=this._fullReader;return(!s||!r)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=l=>{t.onProgress?.({loaded:l.loaded,total:l.total})}),{isStreamingSupported:s,isRangeSupported:r,contentLength:a}}),e.on("GetRangeReader",(n,s)=>{mn(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(n.begin,n.end);if(!r){s.close();return}s.onPull=()=>{r.read().then(function({value:a,done:l}){if(l){s.close();return}mn(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{r.cancel(a),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new x6(n,this))}),e.on("DocException",n=>{t._capability.reject(Nr(n))}),e.on("PasswordRequest",n=>{this.#a=Promise.withResolvers();try{if(!t.onPassword)throw Nr(n);const s=r=>{r instanceof Error?this.#a.reject(r):this.#a.resolve({password:r})};t.onPassword(s,n.code)}catch(s){this.#a.reject(s)}return this.#a.promise}),e.on("DataLoaded",n=>{t.onProgress?.({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;this.#t.get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,s,r])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(s){case"Font":if("error"in r){const p=r.error;Jt(`Error during font loading: ${p}`),this.commonObjs.resolve(n,p);break}const a=new $n(r),l=this._params.pdfBug&&globalThis.FontInspector?.enabled?(p,v)=>globalThis.FontInspector.fontAdded(p,v):null,c=new TR(a,l,r.extra,r.charProcOperatorList);this.fontLoader.bind(c).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!c.fontExtraProperties&&c.data&&c.clearData(),this.commonObjs.resolve(n,c)});break;case"CopyLocalImage":const{imageRef:d}=r;mn(d,"The imageRef must be defined.");for(const p of this.#t.values())for(const[,v]of p.objs)if(v?.ref===d)return v.dataLen?(this.commonObjs.resolve(n,structuredClone(v)),v.dataLen):null;break;case"FontPath":case"Image":this.commonObjs.resolve(n,r);break;case"Pattern":const h=new ys(r);this.commonObjs.resolve(n,h.getIR());break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([n,s,r,a])=>{if(this.destroyed)return;const l=this.#t.get(s);if(!l.objs.has(n)){if(l._intentStates.size===0){a?.bitmap?.close();return}switch(r){case"Image":case"Pattern":l.objs.resolve(n,a);break;default:throw new Error(`Got unknown object type ${r}`)}}}),e.on("DocProgress",n=>{this.destroyed||t.onProgress?.({loaded:n.loaded,total:n.total})}),e.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[n.type];if(!s)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Jt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=this.#i.get(t);if(n)return n;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&this.#n.set(r.refStr,e);const a=new _6(t,r,this,this._params.pdfBug);return this.#t.set(t,a),a});return this.#i.set(t,s),s}getPageIndex(e){return Q1(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#r("GetFieldObjects")}hasJSActions(){return this.#r("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return this.#r("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#r("GetOptionalContentConfig").then(t=>new t6(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#e.get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(s=>({info:s[0],metadata:s[1]?new QR(s[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#t.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),rr.cleanup()}}cachedPageNumber(e){if(!Q1(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#n.get(t)??null}}class S6{#e=null;onContinue=null;onError=null;constructor(e){this.#e=e}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}}class jd{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:n,commonObjs:s,annotationCanvasMap:r,operatorList:a,pageIndex:l,canvasFactory:c,filterFactory:d,useRequestAnimationFrame:h=!1,pdfBug:p=!1,pageColors:v=null,enableHWA:m=!1,operationsFilter:E=null}){this.callback=e,this.params=t,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=d,this._pdfBug=p,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new S6(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=m,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=E}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(jd.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");jd.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:s,background:r,dependencyTracker:a}=this.params,l=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new $d(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,a),this.gfx.beginDrawing({transform:s,viewport:n,transparency:e,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),jd.#t.delete(this._canvas),e||=new Wv(`Rendering cancelled, page ${this._pageIndex+1}`,t),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),jd.#t.delete(this._canvas),this.callback())))}}const E6="5.4.394",T6="2cc809ade";class _a{#e=null;#t=null;#i;#n=null;#a=!1;#r=!1;#s=null;#o;#u=null;#l=null;static#h=null;static get _keyboardManager(){return Qt(this,"_keyboardManager",new zf([[["Escape","mac+Escape"],_a.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],_a.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],_a.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],_a.prototype._moveToPrevious],[["Home","mac+Home"],_a.prototype._moveToBeginning],[["End","mac+End"],_a.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#r=!1,this.#s=e):this.#r=!0,this.#l=e?._uiManager||t,this.#o=this.#l._eventBus,this.#i=e?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",_a.#h||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",this.#s&&(e.ariaControls=`${this.#s.id}_colorpicker_dropdown`);const t=this.#l._signal;e.addEventListener("click",this.#g.bind(this),{signal:t}),e.addEventListener("keydown",this.#m.bind(this),{signal:t});const n=this.#t=document.createElement("span");return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=this.#i,e.append(n),e}renderMainDropdown(){const e=this.#n=this.#d();return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}#d(){const e=document.createElement("div"),t=this.#l._signal;e.addEventListener("contextmenu",Ea,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#s&&(e.id=`${this.#s.id}_colorpicker_dropdown`);for(const[n,s]of this.#l.highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",s),r.title=n,r.setAttribute("data-l10n-id",_a.#h[n]);const a=document.createElement("span");r.append(a),a.className="swatch",a.style.backgroundColor=s,r.ariaSelected=s===this.#i,r.addEventListener("click",this.#f.bind(this,s),{signal:t}),e.append(r)}return e.addEventListener("keydown",this.#m.bind(this),{signal:t}),e}#f(e,t){t.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:gn.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#g(e);return}const t=e.target.getAttribute("data-color");t&&this.#f(t,e)}_moveToNext(e){if(!this.#p){this.#g(e);return}if(e.target===this.#e){this.#n.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#n?.firstChild||e.target===this.#e){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#g(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#p){this.#g(e);return}this.#n.firstChild?.focus()}_moveToEnd(e){if(!this.#p){this.#g(e);return}this.#n.lastChild?.focus()}#m(e){_a._keyboardManager.exec(this,e)}#g(e){if(this.#p){this.hideDropdown();return}if(this.#a=e.detail===0,this.#u||(this.#u=new AbortController,window.addEventListener("pointerdown",this.#c.bind(this),{signal:this.#l.combinedSignal(this.#u)})),this.#e.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const t=this.#n=this.#d();this.#e.append(t)}#c(e){this.#n?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#e.ariaExpanded="false",this.#u?.abort(),this.#u=null}get#p(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#r){if(!this.#p){this.#s?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#n)return;const t=this.#l.highlightColors.values();for(const n of this.#n.children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#n?.remove(),this.#n=null}}class Lf{#e=null;#t=null;#i=null;static#n=null;constructor(e){this.#t=e,this.#i=e._uiManager,Lf.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#e)return this.#e;const{editorType:e,colorType:t,color:n}=this.#t,s=this.#e=document.createElement("input");return s.type="color",s.value=n||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",Lf.#n[e]),s.addEventListener("input",()=>{this.#i.updateParams(t,s.value)},{signal:this.#i._signal}),s}update(e){this.#e&&(this.#e.value=e)}destroy(){this.#e?.remove(),this.#e=null}hideDropdown(){}}function rw(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function ef(i){return Math.max(0,Math.min(255,255*i))}class aw{static CMYK_G([e,t,n,s]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=ef(e),[e,e,e]}static G_HTML([e]){const t=rw(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(ef)}static RGB_HTML(e){return`#${e.map(rw).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,n+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,n,s]){return[ef(1-Math.min(1,e+s)),ef(1-Math.min(1,n+s)),ef(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const s=1-e,r=1-t,a=1-n,l=Math.min(s,r,a);return["CMYK",s,r,a,l]}}class C6{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Xn("Abstract method `_createSVG` called.")}}class V0 extends C6{_createSVG(e){return document.createElementNS(_l,e)}}const N6=9,_c=new WeakSet,k6=new Date().getTimezoneOffset()*60*1e3;class t1{static create(e){switch(e.data.annotationType){case Zi.LINK:return new ny(e);case Zi.TEXT:return new L6(e);case Zi.WIDGET:switch(e.data.fieldType){case"Tx":return new P6(e);case"Btn":return e.data.radioButton?new US(e):e.data.checkBox?new M6(e):new D6(e);case"Ch":return new O6(e);case"Sig":return new I6(e)}return new Cc(e);case Zi.POPUP:return new iv(e);case Zi.FREETEXT:return new jS(e);case Zi.LINE:return new F6(e);case Zi.SQUARE:return new U6(e);case Zi.CIRCLE:return new j6(e);case Zi.POLYLINE:return new qS(e);case Zi.CARET:return new H6(e);case Zi.INK:return new iy(e);case Zi.POLYGON:return new q6(e);case Zi.HIGHLIGHT:return new HS(e);case Zi.UNDERLINE:return new z6(e);case Zi.SQUIGGLY:return new V6(e);case Zi.STRIKEOUT:return new G6(e);case Zi.STAMP:return new zS(e);case Zi.FILEATTACHMENT:return new $6(e);default:return new Ei(e)}}}class Ei{#e=null;#t=!1;#i=null;constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,t&&(this.contentElement=this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e?.str||t?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Ei._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:e}=this,t=this.annotationStorage?.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const e=this.annotationStorage?.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:n,rect:s}=this.data;let r=-1/0,a=-1/0;if(t?.length>=8){for(let l=0;l<t.length;l+=8)t[l+1]>a?(a=t[l+1],r=t[l+2]):t[l+1]===a&&(r=Math.max(r,t[l+2]));return[r,a]}if(n?.length>=1){for(const l of n)for(let c=0,d=l.length;c<d;c+=2)l[c+1]>a?(a=l[c+1],r=l[c]):l[c+1]===a&&(r=Math.max(r,l[c]));if(r!==1/0)return[r,a]}return s?[s[2],s[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:s,pageX:r,pageY:a}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-r)/n,e[1]=100*(e[1]-a)/s,e}get commentText(){const{data:e}=this;return this.annotationStorage.getRawValue(`${Cf}${e.id}`)?.popup?.contents||e.contentsObj?.str||""}set commentText(e){const{data:t}=this,n={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:n})||this.annotationStorage.setValue(`${Cf}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){(this.#i?.popup||this.popup)?.remove(),this.#i=this.popup=null}updateEdited(e){if(!this.container)return;e.rect&&(this.#e||={rect:this.data.rect.slice(0)});const{rect:t,popup:n}=e;t&&this.#n(t);let s=this.#i?.popup||this.popup;!s&&n?.text&&(this._createPopup(n),s=this.#i.popup),s&&(s.updateEdited(e),n?.deleted&&(s.remove(),this.#i=null,this.popup=null))}resetEdited(){this.#e&&(this.#n(this.#e.rect),this.#i?.popup.resetEdited(),this.#e=null)}#n(e){const{container:{style:t},data:{rect:n,rotation:s},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:a,pageX:l,pageY:c}}}}=this;n?.splice(0,4,...e),t.left=`${100*(e[0]-l)/r}%`,t.top=`${100*(a-e[3]+c)/a}%`,s===0?(t.width=`${100*(e[2]-e[0])/r}%`,t.height=`${100*(e[3]-e[1])/a}%`):this.setRotation(s)}_createContainer(e){const{data:t,parent:{page:n,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),!(this instanceof Cc)&&!(this instanceof ny)&&(r.tabIndex=0);const{style:a}=r;if(a.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof iv){const{rotation:S}=t;return!t.hasOwnCanvas&&S!==0&&this.setRotation(S,r),r}const{width:l,height:c}=this;if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const S=t.borderStyle.horizontalCornerRadius,N=t.borderStyle.verticalCornerRadius;if(S>0||N>0){const P=`calc(${S}px * var(--total-scale-factor)) / calc(${N}px * var(--total-scale-factor))`;a.borderRadius=P}else if(this instanceof US){const P=`calc(${l}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;a.borderRadius=P}switch(t.borderStyle.style){case Id.SOLID:a.borderStyle="solid";break;case Id.DASHED:a.borderStyle="dashed";break;case Id.BEVELED:Jt("Unimplemented border style: beveled");break;case Id.INSET:Jt("Unimplemented border style: inset");break;case Id.UNDERLINE:a.borderBottomStyle="solid";break}const C=t.borderColor||null;C?(this.#t=!0,a.borderColor=ht.makeHexColor(C[0]|0,C[1]|0,C[2]|0)):a.borderWidth=0}const d=ht.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:h,pageHeight:p,pageX:v,pageY:m}=s.rawDims;a.left=`${100*(d[0]-v)/h}%`,a.top=`${100*(d[1]-m)/p}%`;const{rotation:E}=t;return t.hasOwnCanvas||E===0?(a.width=`${100*l/h}%`,a.height=`${100*c/p}%`):this.setRotation(E,r),r}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims;let{width:r,height:a}=this;e%180!==0&&([r,a]=[a,r]),t.style.width=`${100*r/n}%`,t.style.height=`${100*a/s}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,s)=>{const r=s.detail[t],a=r[0],l=r.slice(1);s.target.style[n]=aw[`${a}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[n]:aw[`${a}_rgb`](l)})};return Qt(this,"_commonActions",{display:t=>{const{display:n}=t.detail,s=n%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const s of Object.keys(t.detail))(e[s]||n[s])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[s,r]of Object.entries(t)){const a=n[s];if(a){const l={detail:{[s]:r},target:e};a(l),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,s,r]=this.data.rect.map(S=>Math.fround(S));if(e.length===8){const[S,N,C,P]=e.subarray(2,6);if(s===S&&r===N&&t===C&&n===P)return}const{style:a}=this.container;let l;if(this.#t){const{borderColor:S,borderWidth:N}=a;a.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${N}">`],this.container.classList.add("hasBorder")}const c=s-t,d=r-n,{svgFactory:h}=this,p=h.createElement("svg");p.classList.add("quadrilateralsContainer"),p.setAttribute("width",0),p.setAttribute("height",0),p.role="none";const v=h.createElement("defs");p.append(v);const m=h.createElement("clipPath"),E=`clippath_${this.data.id}`;m.setAttribute("id",E),m.setAttribute("clipPathUnits","objectBoundingBox"),v.append(m);for(let S=2,N=e.length;S<N;S+=8){const C=e[S],P=e[S+1],L=e[S+2],O=e[S+3],q=h.createElement("rect"),G=(L-t)/c,W=(r-P)/d,K=(C-L)/c,j=(P-O)/d;q.setAttribute("x",G),q.setAttribute("y",W),q.setAttribute("width",K),q.setAttribute("height",j),m.append(q),l?.push(`<rect vector-effect="non-scaling-stroke" x="${G}" y="${W}" width="${K}" height="${j}"/>`)}this.#t&&(l.push("</g></svg>')"),a.backgroundImage=l.join("")),this.container.append(p),this.container.style.clipPath=`url(#${E})`}_createPopup(e=null){const{data:t}=this;let n,s;e?(n={str:e.text},s=e.date):(n=t.contentsObj,s=t.modificationDate),this.#i=new iv({data:{color:t.color,titleObj:t.titleObj,modificationDate:s,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#i||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#i}render(){Xn("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:r,id:a,exportValues:l}of s){if(r===-1||a===t)continue;const c=typeof l=="string"?l:null,d=document.querySelector(`[data-element-id="${a}"]`);if(d&&!_c.has(d)){Jt(`_getElementsByName - element not allowed: ${a}`);continue}n.push({id:a,exportValue:c,domElement:d})}return n}for(const s of document.getElementsByName(e)){const{exportValue:r}=s,a=s.getAttribute("data-element-id");a!==t&&_c.has(s)&&n.push({id:a,exportValue:r,domElement:s})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class R6 extends Ei{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}class ny extends Ei{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let s=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),s=!0):e.action?(this._bindNamedAction(n,e.action,e.overlaidText),s=!0):e.attachment?(this.#t(n,e.attachment,e.overlaidText,e.attachmentDest),s=!0):e.setOCGState?(this.#i(n,e.setOCGState,e.overlaidText),s=!0):e.dest?(this._bindLink(n,e.dest,e.overlaidText),s=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),s=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(n,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&(this.contentElement=n,this.container.append(n)),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t,n=""){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e(),n&&(e.title=n)}_bindNamedAction(e,t,n=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),n&&(e.title=n),this.#e()}#t(e,t,n="",s=null){e.href=this.linkService.getAnchorUrl(""),t.description?e.title=t.description:n&&(e.title=n),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,s),!1),this.#e()}#i(e,t,n=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),n&&(e.title=n),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(t.actions)){const r=n.get(s);r&&(e[r]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:s}}),!1))}t.overlaidText&&(e.title=t.overlaidText),e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){Jt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(e.onclick=()=>!1);return}e.onclick=()=>{n?.();const{fields:s,refs:r,include:a}=t,l=[];if(s.length!==0||r.length!==0){const h=new Set(r);for(const p of s){const v=this._fieldObjects[p]||[];for(const{id:m}of v)h.add(m)}for(const p of Object.values(this._fieldObjects))for(const v of p)h.has(v.id)===a&&l.push(v)}else for(const h of Object.values(this._fieldObjects))l.push(...h);const c=this.annotationStorage,d=[];for(const h of l){const{id:p}=h;switch(d.push(p),h.type){case"text":{const m=h.defaultValue||"";c.setValue(p,{value:m});break}case"checkbox":case"radiobutton":{const m=h.defaultValue===h.exportValues;c.setValue(p,{value:m});break}case"combobox":case"listbox":{const m=h.defaultValue||"";c.setValue(p,{value:m});break}default:continue}const v=document.querySelector(`[data-element-id="${p}"]`);if(v){if(!_c.has(v)){Jt(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}}),!1}}}class L6 extends Ei{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}}class Cc extends Ei{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Ds.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,s,r){n.includes("mouse")?e.addEventListener(n,a=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(n,a=>{if(n==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}r&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(a)}})})}_setEventListeners(e,t,n,s){for(const[r,a]of n)(a==="Action"||this.data.actions?.[a])&&((a==="Focus"||a==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,r,a,s),a==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):a==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":ht.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||N6,r=e.style;let a;const l=2,c=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l),h=Math.round(d/(Wm*s))||1,p=d/h;a=Math.min(s,c(p/Wm))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l);a=Math.min(s,c(d/Wm))}r.fontSize=`calc(${a}px * var(--total-scale-factor))`,r.color=ht.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class P6 extends Cc{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,s){const r=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=n),r.setValue(a.id,{[s]:n})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const s=e.getValue(t,{value:this.data.fieldValue});let r=s.value||"";const a=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;a&&r.length>a&&(r=r.slice(0,a));let l=s.formattedValue||this.data.textContent?.join(`
`)||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const c={userValue:r,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=l??r,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",l??r),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),_c.add(n),this.contentElement=n,n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:d,datetimeType:h,timeStep:p}=this.data,v=!!h&&this.enableScripting;d&&(n.title=d),this._setRequired(n,this.data.required),a&&(n.maxLength=a),n.addEventListener("input",E=>{e.setValue(t,{value:E.target.value}),this.setPropertyOnSiblings(n,"value",E.target.value,"value"),c.formattedValue=null}),n.addEventListener("resetform",E=>{const S=this.data.defaultFieldValue??"";n.value=c.userValue=S,c.formattedValue=null});let m=E=>{const{formattedValue:S}=c;S!=null&&(E.target.value=S),E.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",S=>{if(c.focused)return;const{target:N}=S;if(v&&(N.type=h,p&&(N.step=p)),c.userValue){const C=c.userValue;if(v)if(h==="time"){const P=new Date(C),L=[P.getHours(),P.getMinutes(),P.getSeconds()];N.value=L.map(O=>O.toString().padStart(2,"0")).join(":")}else N.value=new Date(C-k6).toISOString().split(h==="date"?"T":".",1)[0];else N.value=C}c.lastCommittedValue=N.value,c.commitKey=1,this.data.actions?.Focus||(c.focused=!0)}),n.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const N={value(C){c.userValue=C.detail.value??"",v||e.setValue(t,{value:c.userValue.toString()}),C.target.value=c.userValue},formattedValue(C){const{formattedValue:P}=C.detail;c.formattedValue=P,P!=null&&C.target!==document.activeElement&&(C.target.value=P);const L={formattedValue:P};v&&(L.value=P),e.setValue(t,L)},selRange(C){C.target.setSelectionRange(...C.detail.selRange)},charLimit:C=>{const{charLimit:P}=C.detail,{target:L}=C;if(P===0){L.removeAttribute("maxLength");return}L.setAttribute("maxLength",P);let O=c.userValue;!O||O.length<=P||(O=O.slice(0,P),L.value=c.userValue=O,e.setValue(t,{value:O}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:O,willCommit:!0,commitKey:1,selStart:L.selectionStart,selEnd:L.selectionEnd}}))}};this._dispatchEventFromSandbox(N,S)}),n.addEventListener("keydown",S=>{c.commitKey=1;let N=-1;if(S.key==="Escape"?N=0:S.key==="Enter"&&!this.data.multiLine?N=2:S.key==="Tab"&&(c.commitKey=3),N===-1)return;const{value:C}=S.target;c.lastCommittedValue!==C&&(c.lastCommittedValue=C,c.userValue=C,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:C,willCommit:!0,commitKey:N,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const E=m;m=null,n.addEventListener("blur",S=>{if(!c.focused||!S.relatedTarget)return;this.data.actions?.Blur||(c.focused=!1);const{target:N}=S;let{value:C}=N;if(v){if(C&&h==="time"){const P=C.split(":").map(L=>parseInt(L,10));C=new Date(2e3,0,1,P[0],P[1],P[2]||0).valueOf(),N.step=""}else C.includes("T")||(C=`${C}T00:00`),C=new Date(C).valueOf();N.type="text"}c.userValue=C,c.lastCommittedValue!==C&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:C,willCommit:!0,commitKey:c.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}),E(S)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",S=>{c.lastCommittedValue=null;const{data:N,target:C}=S,{value:P,selectionStart:L,selectionEnd:O}=C;let q=L,G=O;switch(S.inputType){case"deleteWordBackward":{const W=P.substring(0,L).match(/\w*[^\w]*$/);W&&(q-=W[0].length);break}case"deleteWordForward":{const W=P.substring(L).match(/^[^\w]*\w*/);W&&(G+=W[0].length);break}case"deleteContentBackward":L===O&&(q-=1);break;case"deleteContentForward":L===O&&(G+=1);break}S.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:P,change:N||"",willCommit:!1,selStart:q,selEnd:G}})}),this._setEventListeners(n,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(m&&n.addEventListener("blur",m),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/a;n.classList.add("comb"),n.style.letterSpacing=`calc(${S}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class I6 extends Cc{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class M6 extends Cc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let s=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return _c.add(r),r.setAttribute("data-element-id",n),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=0,r.addEventListener("change",a=>{const{name:l,checked:c}=a.target;for(const d of this._getElementsByName(l,n)){const h=c&&d.exportValue===t.exportValue;d.domElement&&(d.domElement.checked=h),e.setValue(d.id,{value:h})}e.setValue(n,{value:c})}),r.addEventListener("resetform",a=>{const l=t.defaultFieldValue||"Off";a.target.checked=l===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",a=>{const l={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(n,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class US extends Cc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let s=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(n,{value:s})),s)for(const a of this._getElementsByName(t.fieldName,n))e.setValue(a.id,{value:!1});const r=document.createElement("input");if(_c.add(r),r.setAttribute("data-element-id",n),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=0,r.addEventListener("change",a=>{const{name:l,checked:c}=a.target;for(const d of this._getElementsByName(l,n))e.setValue(d.id,{value:!1});e.setValue(n,{value:c})}),r.addEventListener("resetform",a=>{const l=t.defaultFieldValue;a.target.checked=l!=null&&l===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;r.addEventListener("updatefromsandbox",l=>{const c={value:d=>{const h=a===d.detail.value;for(const p of this._getElementsByName(d.target.name)){const v=h&&p.id===n;p.domElement&&(p.domElement.checked=v),e.setValue(p.id,{value:v})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class D6 extends ny{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class O6 extends Cc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");_c.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",h=>{const p=this.data.defaultFieldValue;for(const v of s.options)v.selected=v.value===p});for(const h of this.data.options){const p=document.createElement("option");p.textContent=h.displayValue,p.value=h.exportValue,n.value.includes(h.exportValue)&&(p.setAttribute("selected",!0),r=!1),s.append(p)}let a=null;if(r){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),s.prepend(h),a=()=>{h.remove(),s.removeEventListener("input",a),a=null},s.addEventListener("input",a)}const l=h=>{const p=h?"value":"textContent",{options:v,multiple:m}=s;return m?Array.prototype.filter.call(v,E=>E.selected).map(E=>E[p]):v.selectedIndex===-1?null:v[v.selectedIndex][p]};let c=l(!1);const d=h=>{const p=h.target.options;return Array.prototype.map.call(p,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",h=>{const p={value(v){a?.();const m=v.detail.value,E=new Set(Array.isArray(m)?m:[m]);for(const S of s.options)S.selected=E.has(S.value);e.setValue(t,{value:l(!0)}),c=l(!1)},multipleSelection(v){s.multiple=!0},remove(v){const m=s.options,E=v.detail.remove;m[E].selected=!1,s.remove(E),m.length>0&&Array.prototype.findIndex.call(m,N=>N.selected)===-1&&(m[0].selected=!0),e.setValue(t,{value:l(!0),items:d(v)}),c=l(!1)},clear(v){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),c=l(!1)},insert(v){const{index:m,displayValue:E,exportValue:S}=v.detail.insert,N=s.children[m],C=document.createElement("option");C.textContent=E,C.value=S,N?N.before(C):s.append(C),e.setValue(t,{value:l(!0),items:d(v)}),c=l(!1)},items(v){const{items:m}=v.detail;for(;s.length!==0;)s.remove(0);for(const E of m){const{displayValue:S,exportValue:N}=E,C=document.createElement("option");C.textContent=S,C.value=N,s.append(C)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:l(!0),items:d(v)}),c=l(!1)},indices(v){const m=new Set(v.detail.indices);for(const E of v.target.options)E.selected=m.has(E.index);e.setValue(t,{value:l(!0)}),c=l(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(p,h)}),s.addEventListener("input",h=>{const p=l(!0),v=l(!1);e.setValue(t,{value:p}),h.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:v,changeEx:p,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):s.addEventListener("input",function(h){e.setValue(t,{value:l(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class iv extends Ei{constructor(e){const{data:t,elements:n,parent:s}=e,r=!!s._commentManager;if(super(e,{isRenderable:!r&&Ei._hasPopupData(t)}),this.elements=n,r&&Ei._hasPopupData(t)){const a=this.popup=this.#e();for(const l of n)l.popup=a}else this.popup=null}#e(){return new B6({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=this.#e(),n=[];for(const s of this.elements)s.popup=t,s.container.ariaHasPopup="dialog",n.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(s=>`${Fd}${s}`).join(",")),this.container}}class B6{#e=null;#t=this.#V.bind(this);#i=this.#U.bind(this);#n=this.#I.bind(this);#a=this.#_.bind(this);#r=null;#s=null;#o=null;#u=null;#l=null;#h=null;#d=null;#f=!1;#m=null;#g=null;#c=null;#p=null;#v=null;#b=null;#y=null;#E=null;#A=null;#x=null;#C=!1;#w=null;#S=null;constructor({container:e,color:t,elements:n,titleObj:s,modificationDate:r,contentsObj:a,richText:l,parent:c,rect:d,parentRect:h,open:p,commentManager:v=null}){this.#s=e,this.#A=s,this.#o=a,this.#E=l,this.#h=c,this.#r=t,this.#y=d,this.#d=h,this.#l=n,this.#e=v,this.#w=n[0],this.#u=K1.toDateObject(r),this.trigger=n.flatMap(m=>m.getElementsToTriggerPopup()),v||(this.#R(),this.#s.hidden=!0,p&&this.#_())}#R(){if(this.#g)return;this.#g=new AbortController;const{signal:e}=this.#g;for(const t of this.trigger)t.addEventListener("click",this.#a,{signal:e}),t.addEventListener("pointerenter",this.#n,{signal:e}),t.addEventListener("pointerleave",this.#i,{signal:e}),t.classList.add("popupTriggerArea");for(const t of this.#l)t.container?.addEventListener("keydown",this.#t,{signal:e})}#N(){const e=this.#l.find(t=>t.hasCommentButton);e&&(this.#v=e._normalizePoint(e.commentButtonPosition))}renderCommentButton(){if(this.#p){this.#p.parentNode||this.#w.container.after(this.#p);return}if(this.#v||this.#N(),!this.#v)return;const{signal:e}=this.#g=new AbortController,t=this.#w.hasOwnCommentButton,n=()=>{this.#e.toggleCommentPopup(this,!0,void 0,!t)},s=()=>{this.#e.toggleCommentPopup(this,!1,!0,!t)},r=()=>{this.#e.toggleCommentPopup(this,!1,!1)};if(t){this.#p=this.#w.container;for(const a of this.trigger)a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.addEventListener("keydown",this.#t,{signal:e}),a.addEventListener("click",n,{signal:e}),a.addEventListener("pointerenter",s,{signal:e}),a.addEventListener("pointerleave",r,{signal:e}),a.classList.add("popupTriggerArea")}else{const a=this.#p=document.createElement("button");a.className="annotationCommentButton";const l=this.#w.container;a.style.zIndex=l.style.zIndex+1,a.tabIndex=0,a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#B(),this.#k(),a.addEventListener("keydown",this.#t,{signal:e}),a.addEventListener("click",n,{signal:e}),a.addEventListener("pointerenter",s,{signal:e}),a.addEventListener("pointerleave",r,{signal:e}),l.after(a)}}#k(){if(this.#w.extraPopupElement&&!this.#w.editor)return;this.#p||this.renderCommentButton();const[e,t]=this.#v,{style:n}=this.#p;n.left=`calc(${e}%)`,n.top=`calc(${t}% - var(--comment-button-dim))`}#B(){this.#w.extraPopupElement||(this.#p||this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:e,opacity:t}=this.#w.commentData;return e?this.#h._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:e,color:t,opacity:n,creationDate:s,modificationDate:r}=this.#w.commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:n,creationDate:s,modificationDate:r}}get elementBeforePopup(){return this.#p}get comment(){return this.#S||=this.#w.commentText,this.#S}set comment(e){e!==this.comment&&(this.#w.commentText=this.#S=e)}focus(){this.#w.container?.focus()}get parentBoundingClientRect(){return this.#w.layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){this.#p&&(this.#p.classList.toggle("selected",e),this.#p.ariaExpanded=t)}setSelectedCommentButton(e){this.#p.classList.toggle("selected",e)}get commentPopupPosition(){if(this.#b)return this.#b;const{x:e,y:t,height:n}=this.#p.getBoundingClientRect(),{x:s,y:r,width:a,height:l}=this.#w.layer.getBoundingClientRect();return[(e-s)/a,(t+n-r)/l]}set commentPopupPosition(e){this.#b=e}hasDefaultPopupPosition(){return this.#b===null}get commentButtonPosition(){return this.#v}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,n]=this.#b||this.commentButtonPosition.map(d=>d/100),s=this.parentBoundingClientRect,{x:r,y:a,width:l,height:c}=s;this.#e.showDialog(null,this,r+t*l,a+n*c,{...e,parentDimensions:s})}render(){if(this.#m)return;const e=this.#m=document.createElement("div");if(e.className="popup",this.#r){const n=e.style.outlineColor=ht.makeHexColor(...this.#r);e.style.backgroundColor=`color-mix(in srgb, ${n} 30%, white)`}const t=document.createElement("span");if(t.className="header",this.#A?.str){const n=document.createElement("span");n.className="title",t.append(n),{dir:n.dir,str:n.textContent}=this.#A}if(e.append(t),this.#u){const n=document.createElement("time");n.className="popupDate",n.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),n.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#u.valueOf()})),n.dateTime=this.#u.toISOString(),t.append(n)}bS({html:this.#P||this.#o.str,dir:this.#o?.dir,className:"popupContent"},e),this.#s.append(e)}get#P(){const e=this.#E,t=this.#o;return e?.str&&(!t?.str||t.str===e.str)&&this.#E.html||null}get#M(){return this.#P?.attributes?.style?.fontSize||0}get#F(){return this.#P?.attributes?.style?.color||null}#D(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:this.#F,fontSize:this.#M?`calc(${this.#M}px * var(--total-scale-factor))`:""}};for(const r of e.split(`
`))t.push({name:"span",value:r,attributes:s});return n}#V(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#f)&&this.#_()}updateEdited({rect:e,popup:t,deleted:n}){if(this.#e){n?(this.remove(),this.#S=null):t&&(t.deleted?this.remove():(this.#B(),this.#S=t.text)),e&&(this.#v=null,this.#N(),this.#k());return}if(n||t?.deleted){this.remove();return}this.#R(),this.#x||={contentsObj:this.#o,richText:this.#E},e&&(this.#c=null),t&&t.text&&(this.#E=this.#D(t.text),this.#u=K1.toDateObject(t.date),this.#o=null),this.#m?.remove(),this.#m=null}resetEdited(){this.#x&&({contentsObj:this.#o,richText:this.#E}=this.#x,this.#x=null,this.#m?.remove(),this.#m=null,this.#c=null)}remove(){if(this.#g?.abort(),this.#g=null,this.#m?.remove(),this.#m=null,this.#C=!1,this.#f=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const e of this.trigger)e.classList.remove("popupTriggerArea")}#T(){if(this.#c!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:s,pageY:r}}}=this.#h;let a=!!this.#d,l=a?this.#d:this.#y;for(const E of this.#l)if(!l||ht.intersect(E.data.rect,l)!==null){l=E.data.rect,a=!0;break}const c=ht.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),h=a?l[2]-l[0]+5:0,p=c[0]+h,v=c[1];this.#c=[100*(p-s)/t,100*(v-r)/n];const{style:m}=this.#s;m.left=`${this.#c[0]}%`,m.top=`${this.#c[1]}%`}#_(){if(this.#e){this.#e.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#I(),this.#s.addEventListener("click",this.#a),this.#s.addEventListener("keydown",this.#t)):(this.#U(),this.#s.removeEventListener("click",this.#a),this.#s.removeEventListener("keydown",this.#t))}#I(){this.#m||this.render(),this.isVisible?this.#f&&this.#s.classList.add("focused"):(this.#T(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#U(){this.#s.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#C=this.isVisible,this.#C&&(this.#s.hidden=!0)}maybeShow(){this.#e||(this.#R(),this.#C&&(this.#m||this.#I(),this.#C=!1,this.#s.hidden=!1))}get isVisible(){return this.#e?!1:this.#s.hidden===!1}}class jS extends Ei{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Zt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class F6 extends Ei{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:e,width:t,height:n}=this,s=this.svgFactory.create(t,n,!0),r=this.#e=this.svgFactory.createElement("svg:line");return r.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),r.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),r.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),r.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),r.setAttribute("stroke-width",e.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),s.append(r),this.container.append(s),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class U6 extends Ei{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:e,width:t,height:n}=this,s=this.svgFactory.create(t,n,!0),r=e.borderStyle.width,a=this.#e=this.svgFactory.createElement("svg:rect");return a.setAttribute("x",r/2),a.setAttribute("y",r/2),a.setAttribute("width",t-r),a.setAttribute("height",n-r),a.setAttribute("stroke-width",r||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class j6 extends Ei{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:e,width:t,height:n}=this,s=this.svgFactory.create(t,n,!0),r=e.borderStyle.width,a=this.#e=this.svgFactory.createElement("svg:ellipse");return a.setAttribute("cx",t/2),a.setAttribute("cy",n/2),a.setAttribute("rx",t/2-r/2),a.setAttribute("ry",n/2-r/2),a.setAttribute("stroke-width",r||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class qS extends Ei{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:n,popupRef:s},width:r,height:a}=this;if(!t)return this.container;const l=this.svgFactory.create(r,a,!0);let c=[];for(let h=0,p=t.length;h<p;h+=2){const v=t[h]-e[0],m=e[3]-t[h+1];c.push(`${v},${m}`)}c=c.join(" ");const d=this.#e=this.svgFactory.createElement(this.svgElementName);return d.setAttribute("points",c),d.setAttribute("stroke-width",n.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),l.append(d),this.container.append(l),!s&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class q6 extends qS{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class H6 extends Ei{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}class iy extends Ei{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Zt.HIGHLIGHT:Zt.INK}#i(e,t){switch(e){case 90:return{transform:`rotate(90) translate(${-t[0]},${t[1]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:`rotate(180) translate(${-t[2]},${t[1]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:`rotate(270) translate(${-t[2]},${t[3]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:`translate(${-t[0]},${t[3]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:n,borderStyle:s,popupRef:r}}=this,{transform:a,width:l,height:c}=this.#i(t,e),d=this.svgFactory.create(l,c,!0),h=this.#e=this.svgFactory.createElement("svg:g");d.append(h),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",a);for(let p=0,v=n.length;p<v;p++){const m=this.svgFactory.createElement(this.svgElementName);this.#t.push(m),m.setAttribute("points",n[p].join(",")),h.append(m)}return!r&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:n,rect:s}=e,r=this.#e;if(t>=0&&r.setAttribute("stroke-width",t||1),n)for(let a=0,l=this.#t.length;a<l;a++)this.#t[a].setAttribute("points",n[a].join(","));if(s){const{transform:a,width:l,height:c}=this.#i(this.data.rotation,s);r.parentElement.setAttribute("viewBox",`0 0 ${l} ${c}`),r.setAttribute("transform",a)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class HS extends Ei{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Zt.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class z6 extends Ei{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class V6 extends Ei{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class G6 extends Ei{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class zS extends Ei{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Zt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class $6 extends Ei{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let n;t.hasAppearance||t.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),n.addEventListener("dblclick",this.#t.bind(this)),this.#e=n;const{isMac:s}=Ds.platform;return e.addEventListener("keydown",r=>{r.key==="Enter"&&(s?r.metaKey:r.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class sy{#e=null;#t=null;#i=null;#n=new Map;#a=null;#r=null;#s=[];#o=!1;constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:s,page:r,viewport:a,structTreeLayer:l,commentManager:c,linkService:d,annotationStorage:h}){this.div=e,this.#e=t,this.#t=n,this.#a=l||null,this.#r=d||null,this.#i=h||new Xv,this.page=r,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=s,this._commentManager=c||null}hasEditableAnnotations(){return this.#n.size>0}async render(e){const{annotations:t}=e,n=this.div;xc(n,this.viewport);const s=new Map,r=[],a={data:null,layer:n,linkService:this.#r,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new V0,annotationStorage:this.#i,enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const l of t){if(l.noHTML)continue;const c=l.annotationType===Zi.POPUP;if(c){const p=s.get(l.id);if(!p)continue;if(!this._commentManager){r.push(l);continue}a.elements=p}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;a.data=l;const d=t1.create(a);if(!d.isRenderable)continue;if(!c&&(this.#s.push(d),l.popupRef)){const p=s.get(l.popupRef);p?p.push(d):s.set(l.popupRef,[d])}const h=d.render();l.hidden&&(h.style.visibility="hidden"),d._isEditable&&(this.#n.set(d.data.id,d),this._annotationEditorUIManager?.renderAnnotationElement(d))}await this.#u();for(const l of r){const c=a.elements=s.get(l.id);a.data=l;const d=t1.create(a);if(!d.isRenderable)continue;const h=d.render();d.contentElement.id=`${Fd}${l.id}`,l.hidden&&(h.style.visibility="hidden"),c.at(-1).container.after(h)}this.#l()}async#u(){if(this.#s.length===0)return;this.div.replaceChildren();const e=[];if(!this.#o){this.#o=!0;for(const{contentElement:n,data:{id:s}}of this.#s){const r=n.id=`${Fd}${s}`;e.push(this.#a?.getAriaAttributes(r).then(a=>{if(a)for(const[l,c]of a)n.setAttribute(l,c)}))}}this.#s.sort(({data:{rect:[n,s,r,a]}},{data:{rect:[l,c,d,h]}})=>{if(n===r&&s===a)return 1;if(l===d&&c===h)return-1;const p=a,v=s,m=(s+a)/2,E=h,S=c,N=(c+h)/2;if(m>=E&&N<=v)return-1;if(N>=p&&m<=S)return 1;const C=(n+r)/2,P=(l+d)/2;return C-P});const t=document.createDocumentFragment();for(const n of this.#s)t.append(n.container),this._commentManager?(n.extraPopupElement?.popup||n.popup)?.renderCommentButton():n.extraPopupElement&&t.append(n.extraPopupElement.render());if(this.div.append(t),await Promise.all(e),this.#e)for(const n of this.#s)this.#e.addPointerInTextLayer(n.contentElement,!1)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:this.#r,svgFactory:new V0,parent:this};for(const n of e){n.borderStyle||=sy._defaultBorderStyle,t.data=n;const s=t1.create(t);s.isRenderable&&(s.render(),s.contentElement.id=`${Fd}${n.id}`,this.#s.push(s))}await this.#u()}update({viewport:e}){const t=this.div;this.viewport=e,xc(t,{rotation:e.rotation}),this.#l(),t.hidden=!1}#l(){if(!this.#t)return;const e=this.div;for(const[t,n]of this.#t){const s=e.querySelector(`[data-annotation-id="${t}"]`);if(!s)continue;n.className="annotationContent";const{firstChild:r}=s;r?r.nodeName==="CANVAS"?r.replaceWith(n):r.classList.contains("annotationContent")?r.after(n):r.before(n):s.append(n);const a=this.#n.get(t);a&&(a._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(t,s.id,n),a._hasNoCanvas=!1):a.canvas=n)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}addFakeAnnotation(e){const{div:t}=this,{id:n,rotation:s}=e,r=new R6({data:{id:n,rect:e.getPDFRect(),rotation:s},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:this.#r,annotationStorage:this.#i});return r.render(),r.contentElement.id=`${Fd}${n}`,r.createOrUpdatePopup(),this.#s.push(r),r}removeAnnotation(e){const t=this.#s.findIndex(s=>s.data.id===e);if(t<0)return;const[n]=this.#s.splice(t,1);this.#e?.removePointerInTextLayer(n.contentElement)}updateFakeAnnotations(e){if(e.length!==0){for(const t of e)t.updateFakeAnnotationElement(this);this.#u()}}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return Qt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Id.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const s0=/\r\n?|\n/g;class bs extends Rt{#e="";#t=`${this.id}-editor`;#i=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=bs.prototype,t=r=>r.isEmpty(),n=Eu.TRANSLATE_SMALL,s=Eu.TRANSLATE_BIG;return Qt(this,"_keyboardManager",new zf([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,s],checker:t}]]))}static _type="freetext";static _editorType=Zt.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.color=e.color||bs._defaultColor||Rt._defaultLineColor,this.#n=e.fontSize||bs._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(e,t){Rt.initialize(e,t);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case gn.FREETEXT_SIZE:bs._defaultFontSize=t;break;case gn.FREETEXT_COLOR:bs._defaultColor=t;break}}updateParams(e,t){switch(e){case gn.FREETEXT_SIZE:this.#a(t);break;case gn.FREETEXT_COLOR:this.#r(t);break}}static get defaultPropertiesToUpdate(){return[[gn.FREETEXT_SIZE,bs._defaultFontSize],[gn.FREETEXT_COLOR,bs._defaultColor||Rt._defaultLineColor]]}get propertiesToUpdate(){return[[gn.FREETEXT_SIZE,this.#n],[gn.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Lf(this),[["colorPicker",this._colorPicker]]}get colorType(){return gn.FREETEXT_COLOR}#a(e){const t=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--total-scale-factor))`,this.translate(0,-(s-this.#n)*this.parentScale),this.#n=s,this.#o()},n=this.#n;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:gn.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#r(e){const t=s=>{this.color=s,this.onUpdatedColor()},n=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:gn.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-bs._internalPadding*e,-(bs._internalPadding+this.#n)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const e=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#t),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#s(){const e=[];this.editorDiv.normalize();let t=null;for(const n of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&n.nodeName==="BR"||(e.push(bs.#u(n)),t=n);return e.join(`
`)}#o(){const[e,t]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:s,div:r}=this,a=r.style.display,l=r.classList.contains("hidden");r.classList.remove("hidden"),r.style.display="hidden",s.div.append(this.div),n=r.getBoundingClientRect(),r.remove(),r.style.display=a,r.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/t):(this.width=n.height/e,this.height=n.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#e,t=this.#e=this.#s().trimEnd();if(e===t)return;const n=s=>{if(this.#e=s,!s){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){bs._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#t),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,n.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[s,r]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[l,c]=this.getInitialTranslation();[l,c]=this.pageTranslationToScreen(l,c);const[d,h]=this.pageDimensions,[p,v]=this.pageTranslation;let m,E;switch(this.rotation){case 0:m=e+(a[0]-p)/d,E=t+this.height-(a[1]-v)/h;break;case 90:m=e+(a[0]-p)/d,E=t-(a[1]-v)/h,[l,c]=[c,-l];break;case 180:m=e-this.width+(a[0]-p)/d,E=t-(a[1]-v)/h,[l,c]=[-l,-c];break;case 270:m=e+(a[0]-p-this.height*h)/d,E=t+(a[1]-v-this.width*d)/h,[l,c]=[-c,l];break}this.setAt(m*s,E*r,l,c)}else this._moveAfterPaste(e,t);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#u(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(s0,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:n}=t;if(n.length===1&&n[0]==="text/plain")return;e.preventDefault();const s=bs.#d(t.getData("text")||"").replaceAll(s0,`
`);if(!s)return;const r=window.getSelection();if(!r.rangeCount)return;this.editorDiv.normalize(),r.deleteFromDocument();const a=r.getRangeAt(0);if(!s.includes(`
`)){a.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),r.collapseToStart();return}const{startContainer:l,startOffset:c}=a,d=[],h=[];if(l.nodeType===Node.TEXT_NODE){const m=l.parentElement;if(h.push(l.nodeValue.slice(c).replaceAll(s0,"")),m!==this.editorDiv){let E=d;for(const S of this.editorDiv.childNodes){if(S===m){E=h;continue}E.push(bs.#u(S))}}d.push(l.nodeValue.slice(0,c).replaceAll(s0,""))}else if(l===this.editorDiv){let m=d,E=0;for(const S of this.editorDiv.childNodes)E++===c&&(m=h),m.push(bs.#u(S))}this.#e=`${d.join(`
`)}${s}${h.join(`
`)}`,this.#l();const p=new Range;let v=Math.sumPrecise(d.map(m=>m.length));for(const{firstChild:m}of this.editorDiv.childNodes)if(m.nodeType===Node.TEXT_NODE){const E=m.nodeValue.length;if(v<=E){p.setStart(m,v),p.setEnd(m,v);break}v-=E}r.removeAllRanges(),r.addRange(p)}#l(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const e of this.#e.split(`
`)){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#h(){return this.#e.replaceAll(""," ")}static#d(e){return e.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const e=bs._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,t,n){let s=null;if(e instanceof jS){const{data:{defaultAppearanceData:{fontSize:a,fontColor:l},rect:c,rotation:d,id:h,popupRef:p,richText:v,contentsObj:m,creationDate:E,modificationDate:S},textContent:N,textPosition:C,parent:{page:{pageNumber:P}}}=e;if(!N||N.length===0)return null;s=e={annotationType:Zt.FREETEXT,color:Array.from(l),fontSize:a,value:N.join(`
`),position:C,pageIndex:P-1,rect:c.slice(0),rotation:d,annotationElementId:h,id:h,deleted:!1,popupRef:p,comment:m?.str||null,richText:v,creationDate:E,modificationDate:S}}const r=await super.deserialize(e,t,n);return r.#n=e.fontSize,r.color=ht.makeHexColor(...e.color),r.#e=bs.#d(e.value),r._initialData=s,e.comment&&r.setCommentData(e),r}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=Rt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),n=Object.assign(super.serialize(e),{color:t,fontSize:this.#n,value:this.#h()});return this.addComment(n),e?(n.isCopy=!0,n):this.annotationElementId&&!this.#f(n)?null:(n.id=this.annotationElementId,n)}#f(e){const{value:t,fontSize:n,color:s,pageIndex:r}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==t||e.fontSize!==n||e.color.some((a,l)=>a!==s[l])||e.pageIndex!==r}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(!t)return null;const{style:n}=t;n.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,n.color=this.color,t.replaceChildren();for(const s of this.#e.split(`
`)){const r=document.createElement("div");r.append(s?document.createTextNode(s):document.createElement("br")),t.append(r)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#e}}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class lt{static PRECISION=1e-4;toSVGPath(){Xn("Abstract method `toSVGPath` must be implemented.")}get box(){Xn("Abstract getter `box` must be implemented.")}serialize(e,t){Xn("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,s,r,a){a||=new Float32Array(e.length);for(let l=0,c=e.length;l<c;l+=2)a[l]=t+e[l]*s,a[l+1]=n+e[l+1]*r;return a}static _rescaleAndSwap(e,t,n,s,r,a){a||=new Float32Array(e.length);for(let l=0,c=e.length;l<c;l+=2)a[l]=t+e[l+1]*s,a[l+1]=n+e[l]*r;return a}static _translate(e,t,n,s){s||=new Float32Array(e.length);for(let r=0,a=e.length;r<a;r+=2)s[r]=t+e[r],s[r+1]=n+e[r+1];return s}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,s,r){switch(r){case 90:return[1-t/n,e/s];case 180:return[1-e/n,1-t/s];case 270:return[t/n,1-e/s];default:return[e/n,t/s]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,s,r,a){return[(e+5*n)/6,(t+5*s)/6,(5*n+r)/6,(5*s+a)/6,(n+r)/2,(s+a)/2]}}class mc{#e;#t=[];#i;#n;#a=[];#r=new Float32Array(18);#s;#o;#u;#l;#h;#d;#f=[];static#m=8;static#g=2;static#c=mc.#m+mc.#g;constructor({x:e,y:t},n,s,r,a,l=0){this.#e=n,this.#d=r*s,this.#n=a,this.#r.set([NaN,NaN,NaN,NaN,e,t],6),this.#i=l,this.#l=mc.#m*s,this.#u=mc.#c*s,this.#h=s,this.#f.push(e,t)}isEmpty(){return isNaN(this.#r[8])}#p(){const e=this.#r.subarray(4,6),t=this.#r.subarray(16,18),[n,s,r,a]=this.#e;return[(this.#s+(e[0]-t[0])/2-n)/r,(this.#o+(e[1]-t[1])/2-s)/a,(this.#s+(t[0]-e[0])/2-n)/r,(this.#o+(t[1]-e[1])/2-s)/a]}add({x:e,y:t}){this.#s=e,this.#o=t;const[n,s,r,a]=this.#e;let[l,c,d,h]=this.#r.subarray(8,12);const p=e-d,v=t-h,m=Math.hypot(p,v);if(m<this.#u)return!1;const E=m-this.#l,S=E/m,N=S*p,C=S*v;let P=l,L=c;l=d,c=h,d+=N,h+=C,this.#f?.push(e,t);const O=-C/E,q=N/E,G=O*this.#d,W=q*this.#d;return this.#r.set(this.#r.subarray(2,8),0),this.#r.set([d+G,h+W],4),this.#r.set(this.#r.subarray(14,18),12),this.#r.set([d-G,h-W],16),isNaN(this.#r[6])?(this.#a.length===0&&(this.#r.set([l+G,c+W],2),this.#a.push(NaN,NaN,NaN,NaN,(l+G-n)/r,(c+W-s)/a),this.#r.set([l-G,c-W],14),this.#t.push(NaN,NaN,NaN,NaN,(l-G-n)/r,(c-W-s)/a)),this.#r.set([P,L,l,c,d,h],6),!this.isEmpty()):(this.#r.set([P,L,l,c,d,h],6),Math.abs(Math.atan2(L-c,P-l)-Math.atan2(C,N))<Math.PI/2?([l,c,d,h]=this.#r.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((l+d)/2-n)/r,((c+h)/2-s)/a),[l,c,P,L]=this.#r.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((P+l)/2-n)/r,((L+c)/2-s)/a),!0):([P,L,l,c,d,h]=this.#r.subarray(0,6),this.#a.push(((P+5*l)/6-n)/r,((L+5*c)/6-s)/a,((5*l+d)/6-n)/r,((5*c+h)/6-s)/a,((l+d)/2-n)/r,((c+h)/2-s)/a),[d,h,l,c,P,L]=this.#r.subarray(12,18),this.#t.push(((P+5*l)/6-n)/r,((L+5*c)/6-s)/a,((5*l+d)/6-n)/r,((5*c+h)/6-s)/a,((l+d)/2-n)/r,((c+h)/2-s)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#a,t=this.#t;if(isNaN(this.#r[6])&&!this.isEmpty())return this.#v();const n=[];n.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?n.push(`L${e[s+4]} ${e[s+5]}`):n.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);this.#y(n);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?n.push(`L${t[s+4]} ${t[s+5]}`):n.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);return this.#b(n),n.join(" ")}#v(){const[e,t,n,s]=this.#e,[r,a,l,c]=this.#p();return`M${(this.#r[2]-e)/n} ${(this.#r[3]-t)/s} L${(this.#r[4]-e)/n} ${(this.#r[5]-t)/s} L${r} ${a} L${l} ${c} L${(this.#r[16]-e)/n} ${(this.#r[17]-t)/s} L${(this.#r[14]-e)/n} ${(this.#r[15]-t)/s} Z`}#b(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#y(e){const[t,n,s,r]=this.#e,a=this.#r.subarray(4,6),l=this.#r.subarray(16,18),[c,d,h,p]=this.#p();e.push(`L${(a[0]-t)/s} ${(a[1]-n)/r} L${c} ${d} L${h} ${p} L${(l[0]-t)/s} ${(l[1]-n)/r}`)}newFreeDrawOutline(e,t,n,s,r,a){return new VS(e,t,n,s,r,a)}getOutlines(){const e=this.#a,t=this.#t,n=this.#r,[s,r,a,l]=this.#e,c=new Float32Array((this.#f?.length??0)+2);for(let p=0,v=c.length-2;p<v;p+=2)c[p]=(this.#f[p]-s)/a,c[p+1]=(this.#f[p+1]-r)/l;if(c[c.length-2]=(this.#s-s)/a,c[c.length-1]=(this.#o-r)/l,isNaN(n[6])&&!this.isEmpty())return this.#E(c);const d=new Float32Array(this.#a.length+24+this.#t.length);let h=e.length;for(let p=0;p<h;p+=2){if(isNaN(e[p])){d[p]=d[p+1]=NaN;continue}d[p]=e[p],d[p+1]=e[p+1]}h=this.#x(d,h);for(let p=t.length-6;p>=6;p-=6)for(let v=0;v<6;v+=2){if(isNaN(t[p+v])){d[h]=d[h+1]=NaN,h+=2;continue}d[h]=t[p+v],d[h+1]=t[p+v+1],h+=2}return this.#A(d,h),this.newFreeDrawOutline(d,c,this.#e,this.#h,this.#i,this.#n)}#E(e){const t=this.#r,[n,s,r,a]=this.#e,[l,c,d,h]=this.#p(),p=new Float32Array(36);return p.set([NaN,NaN,NaN,NaN,(t[2]-n)/r,(t[3]-s)/a,NaN,NaN,NaN,NaN,(t[4]-n)/r,(t[5]-s)/a,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,(t[16]-n)/r,(t[17]-s)/a,NaN,NaN,NaN,NaN,(t[14]-n)/r,(t[15]-s)/a],0),this.newFreeDrawOutline(p,e,this.#e,this.#h,this.#i,this.#n)}#A(e,t){const n=this.#t;return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6}#x(e,t){const n=this.#r.subarray(4,6),s=this.#r.subarray(16,18),[r,a,l,c]=this.#e,[d,h,p,v]=this.#p();return e.set([NaN,NaN,NaN,NaN,(n[0]-r)/l,(n[1]-a)/c,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,p,v,NaN,NaN,NaN,NaN,(s[0]-r)/l,(s[1]-a)/c],t),t+=24}}class VS extends lt{#e;#t=new Float32Array(4);#i;#n;#a;#r;#s;constructor(e,t,n,s,r,a){super(),this.#s=e,this.#a=t,this.#e=n,this.#r=s,this.#i=r,this.#n=a,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(a);const[l,c,d,h]=this.#t;for(let p=0,v=e.length;p<v;p+=2)e[p]=(e[p]-l)/d,e[p+1]=(e[p+1]-c)/h;for(let p=0,v=t.length;p<v;p+=2)t[p]=(t[p]-l)/d,t[p+1]=(t[p+1]-c)/h}toSVGPath(){const e=[`M${this.#s[4]} ${this.#s[5]}`];for(let t=6,n=this.#s.length;t<n;t+=6){if(isNaN(this.#s[t])){e.push(`L${this.#s[t+4]} ${this.#s[t+5]}`);continue}e.push(`C${this.#s[t]} ${this.#s[t+1]} ${this.#s[t+2]} ${this.#s[t+3]} ${this.#s[t+4]} ${this.#s[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,n,s],r){const a=n-e,l=s-t;let c,d;switch(r){case 0:c=lt._rescale(this.#s,e,s,a,-l),d=lt._rescale(this.#a,e,s,a,-l);break;case 90:c=lt._rescaleAndSwap(this.#s,e,t,a,l),d=lt._rescaleAndSwap(this.#a,e,t,a,l);break;case 180:c=lt._rescale(this.#s,n,t,-a,l),d=lt._rescale(this.#a,n,t,-a,l);break;case 270:c=lt._rescaleAndSwap(this.#s,n,s,-a,-l),d=lt._rescaleAndSwap(this.#a,n,s,-a,-l);break}return{outline:Array.from(c),points:[Array.from(d)]}}#o(e){const t=this.#s;let n=t[4],s=t[5];const r=[n,s,n,s];let a=n,l=s,c=n,d=s;const h=e?Math.max:Math.min,p=new Float32Array(4);for(let m=6,E=t.length;m<E;m+=6){const S=t[m+4],N=t[m+5];isNaN(t[m])?(ht.pointBoundingBox(S,N,r),l>N?(a=S,l=N):l===N&&(a=h(a,S)),d<N?(c=S,d=N):d===N&&(c=h(c,S))):(p[0]=p[1]=1/0,p[2]=p[3]=-1/0,ht.bezierBoundingBox(n,s,...t.slice(m,m+6),p),ht.rectBoundingBox(p[0],p[1],p[2],p[3],r),l>p[1]?(a=p[0],l=p[1]):l===p[1]&&(a=h(a,p[0])),d<p[3]?(c=p[2],d=p[3]):d===p[3]&&(c=h(c,p[2]))),n=S,s=N}const v=this.#t;v[0]=r[0]-this.#i,v[1]=r[1]-this.#i,v[2]=r[2]-r[0]+2*this.#i,v[3]=r[3]-r[1]+2*this.#i,this.firstPoint=[a,l],this.lastPoint=[c,d]}get box(){return this.#t}newOutliner(e,t,n,s,r,a=0){return new mc(e,t,n,s,r,a)}getNewOutline(e,t){const[n,s,r,a]=this.#t,[l,c,d,h]=this.#e,p=r*d,v=a*h,m=n*d+l,E=s*h+c,S=this.newOutliner({x:this.#a[0]*p+m,y:this.#a[1]*v+E},this.#e,this.#r,e,this.#n,t??this.#i);for(let N=2;N<this.#a.length;N+=2)S.add({x:this.#a[N]*p+m,y:this.#a[N+1]*v+E});return S.getOutlines()}}class sv{#e;#t;#i;#n=[];#a=[];constructor(e,t=0,n=0,s=!0){const r=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:S,y:N,width:C,height:P}of e){const L=Math.floor((S-t)/a)*a,O=Math.ceil((S+C+t)/a)*a,q=Math.floor((N-t)/a)*a,G=Math.ceil((N+P+t)/a)*a,W=[L,q,G,!0],K=[O,q,G,!1];this.#n.push(W,K),ht.rectBoundingBox(L,q,O,G,r)}const l=r[2]-r[0]+2*n,c=r[3]-r[1]+2*n,d=r[0]-n,h=r[1]-n;let p=s?-1/0:1/0,v=1/0;const m=this.#n.at(s?-1:-2),E=[m[0],m[2]];for(const S of this.#n){const[N,C,P,L]=S;!L&&s?C<v?(v=C,p=N):C===v&&(p=Math.max(p,N)):L&&!s&&(C<v?(v=C,p=N):C===v&&(p=Math.min(p,N))),S[0]=(N-d)/l,S[1]=(C-h)/c,S[2]=(P-h)/c}this.#e=new Float32Array([d,h,l,c]),this.#t=[p,v],this.#i=E}getOutlines(){this.#n.sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of this.#n)t[3]?(e.push(...this.#l(t)),this.#o(t)):(this.#u(t),e.push(...this.#l(t)));return this.#r(e)}#r(e){const t=[],n=new Set;for(const a of e){const[l,c,d]=a;t.push([l,c,a],[l,d,a])}t.sort((a,l)=>a[1]-l[1]||a[0]-l[0]);for(let a=0,l=t.length;a<l;a+=2){const c=t[a][2],d=t[a+1][2];c.push(d),d.push(c),n.add(c),n.add(d)}const s=[];let r;for(;n.size>0;){const a=n.values().next().value;let[l,c,d,h,p]=a;n.delete(a);let v=l,m=c;for(r=[l,d],s.push(r);;){let E;if(n.has(h))E=h;else if(n.has(p))E=p;else break;n.delete(E),[l,c,d,h,p]=E,v!==l&&(r.push(v,m,l,m===c?c:d),v=l),m=m===c?d:c}r.push(v,m)}return new W6(s,this.#e,this.#t,this.#i)}#s(e){const t=this.#a;let n=0,s=t.length-1;for(;n<=s;){const r=n+s>>1,a=t[r][0];if(a===e)return r;a<e?n=r+1:s=r-1}return s+1}#o([,e,t]){const n=this.#s(e);this.#a.splice(n,0,[e,t])}#u([,e,t]){const n=this.#s(e);for(let s=n;s<this.#a.length;s++){const[r,a]=this.#a[s];if(r!==e)break;if(r===e&&a===t){this.#a.splice(s,1);return}}for(let s=n-1;s>=0;s--){const[r,a]=this.#a[s];if(r!==e)break;if(r===e&&a===t){this.#a.splice(s,1);return}}}#l(e){const[t,n,s]=e,r=[[t,n,s]],a=this.#s(s);for(let l=0;l<a;l++){const[c,d]=this.#a[l];for(let h=0,p=r.length;h<p;h++){const[,v,m]=r[h];if(!(d<=v||m<=c)){if(v>=c){if(m>d)r[h][1]=d;else{if(p===1)return[];r.splice(h,1),h--,p--}continue}r[h][2]=c,m>d&&r.push([t,d,m])}}}return r}}class W6 extends lt{#e;#t;constructor(e,t,n,s){super(),this.#t=e,this.#e=t,this.firstPoint=n,this.lastPoint=s}toSVGPath(){const e=[];for(const t of this.#t){let[n,s]=t;e.push(`M${n} ${s}`);for(let r=2;r<t.length;r+=2){const a=t[r],l=t[r+1];a===n?(e.push(`V${l}`),s=l):l===s&&(e.push(`H${a}`),n=a)}e.push("Z")}return e.join(" ")}serialize([e,t,n,s],r){const a=[],l=n-e,c=s-t;for(const d of this.#t){const h=new Array(d.length);for(let p=0;p<d.length;p+=2)h[p]=e+d[p]*l,h[p+1]=s-d[p+1]*c;a.push(h)}return a}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class rv extends mc{newFreeDrawOutline(e,t,n,s,r,a){return new Y6(e,t,n,s,r,a)}}class Y6 extends VS{newOutliner(e,t,n,s,r,a=0){return new rv(e,t,n,s,r,a)}}class qi extends Rt{#e=null;#t=0;#i;#n=null;#a=null;#r=null;#s=null;#o=0;#u=null;#l=null;#h=null;#d=!1;#f=null;#m=null;#g=null;#c="";#p;#v="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Zt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=qi.prototype;return Qt(this,"_keyboardManager",new zf([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||qi._defaultColor,this.#p=e.thickness||qi._defaultThickness,this.opacity=e.opacity||qi._defaultOpacity,this.#i=e.boxes||null,this.#v=e.methodOfCreation||"",this.#c=e.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(this.#d=!0,this.#y(e),this.#w()):this.#i&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#s=e.focusNode,this.#o=e.focusOffset,this.#b(),this.#w(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#d?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#v}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#b(){const e=new sv(this.#i,.001);this.#l=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const t=new sv(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#r=t.getOutlines();const{firstPoint:n}=this.#l;this.#f=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height];const{lastPoint:s}=this.#r;this.#m=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]}#y({highlightOutlines:e,highlightId:t,clipPathId:n}){this.#l=e;const s=1.5;if(this.#r=e.getNewOutline(this.#p/2+s,.0025),t>=0)this.#h=t,this.#n=n,this.parent.drawLayer.finalizeDraw(t,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#g=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},!0);else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:qi.#S(this.#l.box,(p-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#g,{bbox:qi.#S(this.#r.box,p),path:{d:this.#r.toSVGPath()}})}const[r,a,l,c]=e.box;switch(this.rotation){case 0:this.x=r,this.y=a,this.width=l,this.height=c;break;case 90:{const[p,v]=this.parentDimensions;this.x=a,this.y=1-r,this.width=l*v/p,this.height=c*p/v;break}case 180:this.x=1-r,this.y=1-a,this.width=l,this.height=c;break;case 270:{const[p,v]=this.parentDimensions;this.x=1-a,this.y=r,this.width=l*v/p,this.height=c*p/v;break}}const{firstPoint:d}=e;this.#f=[(d[0]-r)/l,(d[1]-a)/c];const{lastPoint:h}=this.#r;this.#m=[(h[0]-r)/l,(h[1]-a)/c]}static initialize(e,t){Rt.initialize(e,t),qi._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case gn.HIGHLIGHT_COLOR:qi._defaultColor=t;break;case gn.HIGHLIGHT_THICKNESS:qi._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#m}get commentButtonPosition(){return this.#f}updateParams(e,t){switch(e){case gn.HIGHLIGHT_COLOR:this.#E(t);break;case gn.HIGHLIGHT_THICKNESS:this.#A(t);break}}static get defaultPropertiesToUpdate(){return[[gn.HIGHLIGHT_COLOR,qi._defaultColor],[gn.HIGHLIGHT_THICKNESS,qi._defaultThickness]]}get propertiesToUpdate(){return[[gn.HIGHLIGHT_COLOR,this.color||qi._defaultColor],[gn.HIGHLIGHT_THICKNESS,this.#p||qi._defaultThickness],[gn.HIGHLIGHT_FREE,this.#d]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#a?.updateColor(this.color),super.onUpdatedColor()}#E(e){const t=(r,a)=>{this.color=r,this.opacity=a,this.onUpdatedColor()},n=this.color,s=this.opacity;this.addCommands({cmd:t.bind(this,e,qi._defaultOpacity),undo:t.bind(this,n,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:gn.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)}#A(e){const t=this.#p,n=s=>{this.#p=s,this.#x(s)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:gn.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#a=new _a({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#k())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#k())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#C(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#w(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#C():e&&(this.#w(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#x(e){this.#d&&(this.#y({highlightOutlines:this.#l.getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims())}#C(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#g),this.#g=null)}#w(e=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#n}=e.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#d},path:{d:this.#l.toSVGPath()}},!1,!0),this.#g=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#d},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},this.#d),this.#u&&(this.#u.style.clipPath=this.#n))}static#S([e,t,n,s],r){switch(r){case 90:return[1-t-s,e,s,n];case 180:return[1-e-n,1-t-s,n,s];case 270:return[t,1-e-n,s,n]}return[e,t,n,s]}rotate(e){const{drawLayer:t}=this.parent;let n;this.#d?(e=(e-this.rotation+360)%360,n=qi.#S(this.#l.box,e)):n=qi.#S([this.x,this.y,this.width,this.height],e),t.updateProperties(this.#h,{bbox:n,root:{"data-main-rotation":e}}),t.updateProperties(this.#g,{bbox:qi.#S(this.#r.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#c&&(e.setAttribute("aria-label",this.#c),e.setAttribute("role","mark")),this.#d?e.classList.add("free"):this.div.addEventListener("keydown",this.#R.bind(this),{signal:this._uiManager._signal});const t=this.#u=document.createElement("div");return e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#n,this.setDims(),xS(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1}})}#R(e){qi._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#N(!0);break;case 1:case 3:this.#N(!1);break}}#N(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#s,this.#o)}select(){super.select(),this.#g&&this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#g&&(this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{selected:!1}}),this.#d||this.#N(!1))}get _mustFixPosition(){return!this.#d}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#g,{rootClass:{hidden:!e}}))}#k(){return this.#d?this.rotation:0}#B(){if(this.#d)return null;const[e,t]=this.pageDimensions,[n,s]=this.pageTranslation,r=this.#i,a=new Float32Array(r.length*8);let l=0;for(const{x:c,y:d,width:h,height:p}of r){const v=c*e+n,m=(1-d)*t+s;a[l]=a[l+4]=v,a[l+1]=a[l+3]=m,a[l+2]=a[l+6]=v+h*e,a[l+5]=a[l+7]=m-p*t,l+=8}return a}#P(e){return this.#l.serialize(e,this.#k())}static startHighlighting(e,t,{target:n,x:s,y:r}){const{x:a,y:l,width:c,height:d}=n.getBoundingClientRect(),h=new AbortController,p=e.combinedSignal(h),v=m=>{h.abort(),this.#F(e,m)};window.addEventListener("blur",v,{signal:p}),window.addEventListener("pointerup",v,{signal:p}),window.addEventListener("pointerdown",Oi,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",Ea,{signal:p}),n.addEventListener("pointermove",this.#M.bind(this,e),{signal:p}),this._freeHighlight=new rv({x:s,y:r},[a,l,c,d],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#M(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#F(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,t,n){let s=null;if(e instanceof HS){const{data:{quadPoints:E,rect:S,rotation:N,id:C,color:P,opacity:L,popupRef:O,richText:q,contentsObj:G,creationDate:W,modificationDate:K},parent:{page:{pageNumber:j}}}=e;s=e={annotationType:Zt.HIGHLIGHT,color:Array.from(P),opacity:L,quadPoints:E,boxes:null,pageIndex:j-1,rect:S.slice(0),rotation:N,annotationElementId:C,id:C,deleted:!1,popupRef:O,richText:q,comment:G?.str||null,creationDate:W,modificationDate:K}}else if(e instanceof iy){const{data:{inkLists:E,rect:S,rotation:N,id:C,color:P,borderStyle:{rawWidth:L},popupRef:O,richText:q,contentsObj:G,creationDate:W,modificationDate:K},parent:{page:{pageNumber:j}}}=e;s=e={annotationType:Zt.HIGHLIGHT,color:Array.from(P),thickness:L,inkLists:E,boxes:null,pageIndex:j-1,rect:S.slice(0),rotation:N,annotationElementId:C,id:C,deleted:!1,popupRef:O,richText:q,comment:G?.str||null,creationDate:W,modificationDate:K}}const{color:r,quadPoints:a,inkLists:l,opacity:c}=e,d=await super.deserialize(e,t,n);d.color=ht.makeHexColor(...r),d.opacity=c||1,l&&(d.#p=e.thickness),d._initialData=s,e.comment&&d.setCommentData(e);const[h,p]=d.pageDimensions,[v,m]=d.pageTranslation;if(a){const E=d.#i=[];for(let S=0;S<a.length;S+=8)E.push({x:(a[S]-v)/h,y:1-(a[S+1]-m)/p,width:(a[S+2]-a[S])/h,height:(a[S+1]-a[S+5])/p});d.#b(),d.#w(),d.rotate(d.rotation)}else if(l){d.#d=!0;const E=l[0],S={x:E[0]-v,y:p-(E[1]-m)},N=new rv(S,[0,0,h,p],1,d.#p/2,!0,.001);for(let L=0,O=E.length;L<O;L+=2)S.x=E[L]-v,S.y=p-(E[L+1]-m),N.add(S);const{id:C,clipPathId:P}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:N.toSVGPath()}},!0,!0);d.#y({highlightOutlines:N.getOutlines(),highlightId:C,clipPathId:P}),d.#w(),d.rotate(d.parentRotation)}return d}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=Rt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),n=super.serialize(e);return Object.assign(n,{color:t,opacity:this.opacity,thickness:this.#p,quadPoints:this.#B(),outlines:this.#P(n.rect)}),this.addComment(n),this.annotationElementId&&!this.#D(n)?null:(n.id=this.annotationElementId,n)}#D(e){const{color:t}=this._initialData;return this.hasEditedComment||e.color.some((n,s)=>n!==t[s])}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class GS{#e=Object.create(null);updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){this.#e[e]=t}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){Xn("Not implemented")}}class Rn extends Rt{#e=null;#t;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#i=null;static#n=null;static#a=null;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,this._addOutlines(e)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(this.#r(e),this.#u())}#r({drawOutlines:e,drawId:t,drawingOptions:n}){this.#e=e,this._drawingOptions||=n,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),t>=0?(this._drawId=t,this.parent.drawLayer.finalizeDraw(t,e.defaultProperties)):this._drawId=this.#s(e,this.parent),this.#d(e.box)}#s(e,t){const{id:n}=t.drawLayer.draw(Rn._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return n}static _mergeSVGProperties(e,t){const n=new Set(Object.keys(e));for(const[s,r]of Object.entries(t))n.has(s)?Object.assign(e[s],r):e[s]=r;return e}static getDefaultDrawingOptions(e){Xn("Not implemented")}static get typesMap(){Xn("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const n=this.typesMap.get(e);n&&this._defaultDrawingOptions.updateProperty(n,t),this._currentParent&&(Rn.#i.updateProperty(n,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const n=this.constructor.typesMap.get(e);n&&this._updateProperty(e,n,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[n,s]of this.typesMap)e.push([n,t[s]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[n,s]of this.constructor.typesMap)e.push([n,t[s]]);return e}_updateProperty(e,t,n){const s=this._drawingOptions,r=s[t],a=l=>{s.updateProperty(t,l);const c=this.#e.updateProperty(t,l);c&&this.#d(c),this.parent?.drawLayer.updateProperties(this._drawId,s.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:a.bind(this,n),undo:a.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Rn._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#h()),{bbox:this.#f()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Rn._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#h()),{bbox:this.#f()}))}_onTranslating(e,t){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#f()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Rn._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#h(),this.parentDimensions),{bbox:this.#f()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#o(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#u(),this.#d(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#o()):e&&(this._uiManager.addShouldRescale(this),this.#u(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),t&&this.select()}#o(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#u(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#s(this.#e,e)}}#l([e,t,n,s]){const{parentDimensions:[r,a],rotation:l}=this;switch(l){case 90:return[t,1-e,n*(a/r),s*(r/a)];case 180:return[1-e,1-t,n,s];case 270:return[1-t,e,n*(a/r),s*(r/a)];default:return[e,t,n,s]}}#h(){const{x:e,y:t,width:n,height:s,parentDimensions:[r,a],rotation:l}=this;switch(l){case 90:return[1-t,e,n*(r/a),s*(a/r)];case 180:return[1-e,1-t,n,s];case 270:return[t,1-e,n*(r/a),s*(a/r)];default:return[e,t,n,s]}}#d(e){[this.x,this.y,this.width,this.height]=this.#l(e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#f(){const{x:e,y:t,width:n,height:s,rotation:r,parentRotation:a,parentDimensions:[l,c]}=this;switch((r*4+a)/90){case 1:return[1-t-s,e,s,n];case 2:return[1-e-n,1-t-s,n,s];case 3:return[t,1-e-n,s,n];case 4:return[e,t-n*(l/c),s*(c/l),n*(l/c)];case 5:return[1-t,e,n*(l/c),s*(c/l)];case 6:return[1-e-s*(c/l),1-t,s*(c/l),n*(l/c)];case 7:return[t-n*(l/c),1-e-s*(c/l),n*(l/c),s*(c/l)];case 8:return[e-n,t-s,n,s];case 9:return[1-t,e-n,s,n];case 10:return[1-e,1-t,n,s];case 11:return[t-s,1-e,s,n];case 12:return[e-s*(c/l),t,s*(c/l),n*(l/c)];case 13:return[1-t-n*(l/c),e-s*(c/l),n*(l/c),s*(c/l)];case 14:return[1-e,1-t-n*(l/c),s*(c/l),n*(l/c)];case 15:return[t,1-e,n*(l/c),s*(c/l)];default:return[e,t,n,s]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Rn._mergeSVGProperties({bbox:this.#f()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#d(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,t;this._isCopy&&(e=this.x,t=this.y);const n=super.render();n.classList.add("draw");const s=document.createElement("div");return n.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,t),n}static createDrawerInstance(e,t,n,s,r){Xn("Not implemented")}static startDrawing(e,t,n,s){const{target:r,offsetX:a,offsetY:l,pointerId:c,pointerType:d}=s;if(Ln.isInitializedAndDifferentPointerType(d))return;const{viewport:{rotation:h}}=e,{width:p,height:v}=r.getBoundingClientRect(),m=Rn.#n=new AbortController,E=e.combinedSignal(m);if(Ln.setPointer(d,c),window.addEventListener("pointerup",S=>{Ln.isSamePointerIdOrRemove(S.pointerId)&&this._endDraw(S)},{signal:E}),window.addEventListener("pointercancel",S=>{Ln.isSamePointerIdOrRemove(S.pointerId)&&this._currentParent.endDrawingSession()},{signal:E}),window.addEventListener("pointerdown",S=>{Ln.isSamePointerType(S.pointerType)&&(Ln.initializeAndAddPointerId(S.pointerId),Rn.#i.isCancellable()&&(Rn.#i.removeLastElement(),Rn.#i.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:E}),window.addEventListener("contextmenu",Ea,{signal:E}),r.addEventListener("pointermove",this._drawMove.bind(this),{signal:E}),r.addEventListener("touchmove",S=>{Ln.isSameTimeStamp(S.timeStamp)&&Oi(S)},{signal:E}),e.toggleDrawing(),t._editorUndoBar?.hide(),Rn.#i){e.drawLayer.updateProperties(this._currentDrawId,Rn.#i.startNew(a,l,p,v,h));return}t.updateUIForDefaultProperties(this),Rn.#i=this.createDrawerInstance(a,l,p,v,h),Rn.#a=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(Rn.#a.toSVGProperties(),Rn.#i.defaultSVGProperties),!0,!1)}static _drawMove(e){if(Ln.isSameTimeStamp(e.timeStamp),!Rn.#i)return;const{offsetX:t,offsetY:n,pointerId:s}=e;if(Ln.isSamePointerId(s)){if(Ln.isUsingMultiplePointers()){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Rn.#i.add(t,n)),Ln.setTimeStamp(e.timeStamp),Oi(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,Rn.#i=null,Rn.#a=null,Ln.clearPointerType(),Ln.clearTimeStamp()),Rn.#n&&(Rn.#n.abort(),Rn.#n=null,Ln.clearPointerIds())}static _endDraw(e){const t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),e?.target===t.div&&t.drawLayer.updateProperties(this._currentDrawId,Rn.#i.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const n=Rn.#i,s=this._currentDrawId,r=n.getLastElement();t.addCommands({cmd:()=>{t.drawLayer.updateProperties(s,n.setLastElement(r))},undo:()=>{t.drawLayer.updateProperties(s,n.removeLastElement())},mustExec:!1,type:gn.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(gn.DRAW_STEP),!Rn.#i.isEmpty()){const{pageDimensions:[n,s],scale:r}=t,a=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Rn.#i.getOutlines(n*r,s*r,r,this._INNER_MARGIN),drawingOptions:Rn.#a,mustBeCommitted:!e});return this._cleanup(!0),a}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,n,s,r,a){Xn("Not implemented")}static async deserialize(e,t,n){const{rawDims:{pageWidth:s,pageHeight:r,pageX:a,pageY:l}}=t.viewport,c=this.deserializeDraw(a,l,s,r,this._INNER_MARGIN,e),d=await super.deserialize(e,t,n);return d.createDrawingOptions(e),d.#r({drawOutlines:c}),d.#u(),d.onScaleChanging(),d.rotate(),d}serializeDraw(e){const[t,n]=this.pageTranslation,[s,r]=this.pageDimensions;return this.#e.serialize([t,n,s,r],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class K6{#e=new Float64Array(6);#t;#i;#n;#a;#r;#s="";#o=0;#u=new Gf;#l;#h;constructor(e,t,n,s,r,a){this.#l=n,this.#h=s,this.#n=r,this.#a=a,[e,t]=this.#d(e,t);const l=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#r=[e,t],this.#i=[{line:l,points:this.#r}],this.#e.set(l,0)}updateProperty(e,t){e==="stroke-width"&&(this.#a=t)}#d(e,t){return lt._normalizePoint(e,t,this.#l,this.#h,this.#n)}isEmpty(){return!this.#i||this.#i.length===0}isCancellable(){return this.#r.length<=10}add(e,t){[e,t]=this.#d(e,t);const[n,s,r,a]=this.#e.subarray(2,6),l=e-r,c=t-a;return Math.hypot(this.#l*l,this.#h*c)<=2?null:(this.#r.push(e,t),isNaN(n)?(this.#e.set([r,a,e,t],2),this.#t.push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([n,s,r,a,e,t],0),this.#t.push(...lt.createBezierPoints(n,s,r,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(this.#r.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,s,r){this.#l=n,this.#h=s,this.#n=r,[e,t]=this.#d(e,t);const a=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#r=[e,t];const l=this.#i.at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),this.#i.push({line:a,points:this.#r}),this.#e.set(a,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#i.at(-1)}setLastElement(e){return this.#i?(this.#i.push(e),this.#t=e.line,this.#r=e.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#u.setLastElement(e)}removeLastElement(){if(!this.#i)return this.#u.removeLastElement();this.#i.pop(),this.#s="";for(let e=0,t=this.#i.length;e<t;e++){const{line:n,points:s}=this.#i[e];this.#t=n,this.#r=s,this.#o=0,this.toSVGPath()}return{path:{d:this.#s}}}toSVGPath(){const e=lt.svgRound(this.#t[4]),t=lt.svgRound(this.#t[5]);if(this.#r.length===2)return this.#s=`${this.#s} M ${e} ${t} Z`,this.#s;if(this.#r.length<=6){const s=this.#s.lastIndexOf("M");this.#s=`${this.#s.slice(0,s)} M ${e} ${t}`,this.#o=6}if(this.#r.length===4){const s=lt.svgRound(this.#t[10]),r=lt.svgRound(this.#t[11]);return this.#s=`${this.#s} L ${s} ${r}`,this.#o=12,this.#s}const n=[];this.#o===0&&(n.push(`M ${e} ${t}`),this.#o=6);for(let s=this.#o,r=this.#t.length;s<r;s+=6){const[a,l,c,d,h,p]=this.#t.slice(s,s+6).map(lt.svgRound);n.push(`C${a} ${l} ${c} ${d} ${h} ${p}`)}return this.#s+=n.join(" "),this.#o=this.#t.length,this.#s}getOutlines(e,t,n,s){const r=this.#i.at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),this.#u.build(this.#i,e,t,n,this.#n,this.#a,s),this.#e=null,this.#t=null,this.#i=null,this.#s=null,this.#u}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Gf extends lt{#e;#t=0;#i;#n;#a;#r;#s;#o;#u;build(e,t,n,s,r,a,l){this.#a=t,this.#r=n,this.#s=s,this.#o=r,this.#u=a,this.#i=l??0,this.#n=e,this.#d()}get thickness(){return this.#u}setLastElement(e){return this.#n.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of this.#n){if(e.push(`M${lt.svgRound(t[4])} ${lt.svgRound(t[5])}`),t.length===6){e.push("Z");continue}if(t.length===12&&isNaN(t[6])){e.push(`L${lt.svgRound(t[10])} ${lt.svgRound(t[11])}`);continue}for(let n=6,s=t.length;n<s;n+=6){const[r,a,l,c,d,h]=t.subarray(n,n+6).map(lt.svgRound);e.push(`C${r} ${a} ${l} ${c} ${d} ${h}`)}}return e.join("")}serialize([e,t,n,s],r){const a=[],l=[],[c,d,h,p]=this.#h();let v,m,E,S,N,C,P,L,O;switch(this.#o){case 0:O=lt._rescale,v=e,m=t+s,E=n,S=-s,N=e+c*n,C=t+(1-d-p)*s,P=e+(c+h)*n,L=t+(1-d)*s;break;case 90:O=lt._rescaleAndSwap,v=e,m=t,E=n,S=s,N=e+d*n,C=t+c*s,P=e+(d+p)*n,L=t+(c+h)*s;break;case 180:O=lt._rescale,v=e+n,m=t,E=-n,S=s,N=e+(1-c-h)*n,C=t+d*s,P=e+(1-c)*n,L=t+(d+p)*s;break;case 270:O=lt._rescaleAndSwap,v=e+n,m=t+s,E=-n,S=-s,N=e+(1-d-p)*n,C=t+(1-c-h)*s,P=e+(1-d)*n,L=t+(1-c)*s;break}for(const{line:q,points:G}of this.#n)a.push(O(q,v,m,E,S,r?new Array(q.length):null)),l.push(O(G,v,m,E,S,r?new Array(G.length):null));return{lines:a,points:l,rect:[N,C,P,L]}}static deserialize(e,t,n,s,r,{paths:{lines:a,points:l},rotation:c,thickness:d}){const h=[];let p,v,m,E,S;switch(c){case 0:S=lt._rescale,p=-e/n,v=t/s+1,m=1/n,E=-1/s;break;case 90:S=lt._rescaleAndSwap,p=-t/s,v=-e/n,m=1/s,E=1/n;break;case 180:S=lt._rescale,p=e/n+1,v=-t/s,m=-1/n,E=1/s;break;case 270:S=lt._rescaleAndSwap,p=t/s+1,v=e/n+1,m=-1/s,E=-1/n;break}if(!a){a=[];for(const C of l){const P=C.length;if(P===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,C[0],C[1]]));continue}if(P===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,C[0],C[1],NaN,NaN,NaN,NaN,C[2],C[3]]));continue}const L=new Float32Array(3*(P-2));a.push(L);let[O,q,G,W]=C.subarray(0,4);L.set([NaN,NaN,NaN,NaN,O,q],0);for(let K=4;K<P;K+=2){const j=C[K],ee=C[K+1];L.set(lt.createBezierPoints(O,q,G,W,j,ee),(K-2)*3),[O,q,G,W]=[G,W,j,ee]}}}for(let C=0,P=a.length;C<P;C++)h.push({line:S(a[C].map(L=>L??NaN),p,v,m,E),points:S(l[C].map(L=>L??NaN),p,v,m,E)});const N=new this.prototype.constructor;return N.build(h,n,s,1,c,d,r),N}#l(e=this.#u){const t=this.#i+e/2*this.#s;return this.#o%180===0?[t/this.#a,t/this.#r]:[t/this.#r,t/this.#a]}#h(){const[e,t,n,s]=this.#e,[r,a]=this.#l(0);return[e+r,t+a,n-2*r,s-2*a]}#d(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:s}of this.#n){if(s.length<=12){for(let l=4,c=s.length;l<c;l+=6)ht.pointBoundingBox(s[l],s[l+1],e);continue}let r=s[4],a=s[5];for(let l=6,c=s.length;l<c;l+=6){const[d,h,p,v,m,E]=s.subarray(l,l+6);ht.bezierBoundingBox(r,a,d,h,p,v,m,E,e),r=m,a=E}}const[t,n]=this.#l();e[0]=or(e[0]-t,0,1),e[1]=or(e[1]-n,0,1),e[2]=or(e[2]+t,0,1),e[3]=or(e[3]+n,0,1),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,t){return e==="stroke-width"?this.#f(t):null}#f(e){const[t,n]=this.#l();this.#u=e;const[s,r]=this.#l(),[a,l]=[s-t,r-n],c=this.#e;return c[0]-=a,c[1]-=l,c[2]+=2*a,c[3]+=2*l,c}updateParentDimensions([e,t],n){const[s,r]=this.#l();this.#a=e,this.#r=t,this.#s=n;const[a,l]=this.#l(),c=a-s,d=l-r,h=this.#e;return h[0]-=c,h[1]-=d,h[2]+=2*c,h[3]+=2*d,h}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(lt.svgRound).join(" ")}get defaultProperties(){const[e,t]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${lt.svgRound(e)} ${lt.svgRound(t)}`}}}get rotationTransform(){const[,,e,t]=this.#e;let n=0,s=0,r=0,a=0,l=0,c=0;switch(this.#t){case 90:s=t/e,r=-e/t,l=e;break;case 180:n=-1,a=-1,l=e,c=t;break;case 270:s=-t/e,r=e/t,c=t;break;default:return""}return`matrix(${n} ${s} ${r} ${a} ${lt.svgRound(l)} ${lt.svgRound(c)})`}getPathResizingSVGProperties([e,t,n,s]){const[r,a]=this.#l(),[l,c,d,h]=this.#e;if(Math.abs(d-r)<=lt.PRECISION||Math.abs(h-a)<=lt.PRECISION){const S=e+n/2-(l+d/2),N=t+s/2-(c+h/2);return{path:{"transform-origin":`${lt.svgRound(e)} ${lt.svgRound(t)}`,transform:`${this.rotationTransform} translate(${S} ${N})`}}}const p=(n-2*r)/(d-2*r),v=(s-2*a)/(h-2*a),m=d/n,E=h/s;return{path:{"transform-origin":`${lt.svgRound(l)} ${lt.svgRound(c)}`,transform:`${this.rotationTransform} scale(${m} ${E}) translate(${lt.svgRound(r)} ${lt.svgRound(a)}) scale(${p} ${v}) translate(${lt.svgRound(-r)} ${lt.svgRound(-a)})`}}}getPathResizedSVGProperties([e,t,n,s]){const[r,a]=this.#l(),l=this.#e,[c,d,h,p]=l;if(l[0]=e,l[1]=t,l[2]=n,l[3]=s,Math.abs(h-r)<=lt.PRECISION||Math.abs(p-a)<=lt.PRECISION){const N=e+n/2-(c+h/2),C=t+s/2-(d+p/2);for(const{line:P,points:L}of this.#n)lt._translate(P,N,C,P),lt._translate(L,N,C,L);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${lt.svgRound(e)} ${lt.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const v=(n-2*r)/(h-2*r),m=(s-2*a)/(p-2*a),E=-v*(c+r)+e+r,S=-m*(d+a)+t+a;if(v!==1||m!==1||E!==0||S!==0)for(const{line:N,points:C}of this.#n)lt._rescale(N,E,S,v,m,N),lt._rescale(C,E,S,v,m,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${lt.svgRound(e)} ${lt.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,t],n){const[s,r]=n,a=this.#e,l=e-a[0],c=t-a[1];if(this.#a===s&&this.#r===r)for(const{line:d,points:h}of this.#n)lt._translate(d,l,c,d),lt._translate(h,l,c,h);else{const d=this.#a/s,h=this.#r/r;this.#a=s,this.#r=r;for(const{line:p,points:v}of this.#n)lt._rescale(p,l,c,d,h,p),lt._rescale(v,l,c,d,h,v);a[2]*=d,a[3]*=h}return a[0]=e,a[1]=t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${lt.svgRound(e)} ${lt.svgRound(t)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${lt.svgRound(e[0])} ${lt.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class cg extends GS{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Rt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??=this["stroke-width"],t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new cg(this._viewParameters);return e.updateAll(this),e}}class ry extends Rn{static _type="ink";static _editorType=Zt.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){Rt.initialize(e,t),this._defaultDrawingOptions=new cg(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return Qt(this,"typesMap",new Map([[gn.INK_THICKNESS,"stroke-width"],[gn.INK_COLOR,"stroke"],[gn.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,n,s,r){return new K6(e,t,n,s,r,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,n,s,r,a){return Gf.deserialize(e,t,n,s,r,a)}static async deserialize(e,t,n){let s=null;if(e instanceof iy){const{data:{inkLists:a,rect:l,rotation:c,id:d,color:h,opacity:p,borderStyle:{rawWidth:v},popupRef:m,richText:E,contentsObj:S,creationDate:N,modificationDate:C},parent:{page:{pageNumber:P}}}=e;s=e={annotationType:Zt.INK,color:Array.from(h),thickness:v,opacity:p,paths:{points:a},boxes:null,pageIndex:P-1,rect:l.slice(0),rotation:c,annotationElementId:d,id:d,deleted:!1,popupRef:m,richText:E,comment:S?.str||null,creationDate:N,modificationDate:C}}const r=await super.deserialize(e,t,n);return r._initialData=s,e.comment&&r.setCommentData(e),r}get toolbarButtons(){return this._colorPicker||=new Lf(this),[["colorPicker",this._colorPicker]]}get colorType(){return gn.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:n}=this;t.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:t,opacity:n}){this._drawingOptions=ry.getDefaultDrawingOptions({stroke:ht.makeHexColor(...e),"stroke-width":t,"stroke-opacity":n})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:n}=this.serializeDraw(e),{_drawingOptions:{stroke:s,"stroke-opacity":r,"stroke-width":a}}=this,l=Object.assign(super.serialize(e),{color:Rt._colorManager.convert(s),opacity:r,thickness:a,paths:{lines:t,points:n}});return this.addComment(l),e?(l.isCopy=!0,l):this.annotationElementId&&!this.#e(l)?null:(l.id=this.annotationElementId,l)}#e(e){const{color:t,thickness:n,opacity:s,pageIndex:r}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((a,l)=>a!==t[l])||e.thickness!==n||e.opacity!==s||e.pageIndex!==r}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:t,rect:n}=this.serializeDraw(!1);return e.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:t,popup:this.comment}),null}}class av extends Gf{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const r0=8,tf=3;class Dd{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(e,t,n,s){return n-=e,s-=t,n===0?s>0?0:4:n===1?s+6:2-s}static#i=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(e,t,n,s,r,a,l){const c=this.#t(n,s,r,a);for(let d=0;d<8;d++){const h=(-d+c-l+16)%8,p=this.#i[2*h],v=this.#i[2*h+1];if(e[(n+p)*t+(s+v)]!==0)return h}return-1}static#a(e,t,n,s,r,a,l){const c=this.#t(n,s,r,a);for(let d=0;d<8;d++){const h=(d+c+l+16)%8,p=this.#i[2*h],v=this.#i[2*h+1];if(e[(n+p)*t+(s+v)]!==0)return h}return-1}static#r(e,t,n,s){const r=e.length,a=new Int32Array(r);for(let h=0;h<r;h++)a[h]=e[h]<=s?1:0;for(let h=1;h<n-1;h++)a[h*t]=a[h*t+t-1]=0;for(let h=0;h<t;h++)a[h]=a[t*n-1-h]=0;let l=1,c;const d=[];for(let h=1;h<n-1;h++){c=1;for(let p=1;p<t-1;p++){const v=h*t+p,m=a[v];if(m===0)continue;let E=h,S=p;if(m===1&&a[v-1]===0)l+=1,S-=1;else if(m>=1&&a[v+1]===0)l+=1,S+=1,m>1&&(c=m);else{m!==1&&(c=Math.abs(m));continue}const N=[p,h],C=S===p+1,P={isHole:C,points:N,id:l,parent:0};d.push(P);let L;for(const B of d)if(B.id===c){L=B;break}L?L.isHole?P.parent=C?L.parent:c:P.parent=C?c:L.parent:P.parent=C?c:0;const O=this.#n(a,t,h,p,E,S,0);if(O===-1){a[v]=-l,a[v]!==1&&(c=Math.abs(a[v]));continue}let q=this.#i[2*O],G=this.#i[2*O+1];const W=h+q,K=p+G;E=W,S=K;let j=h,ee=p;for(;;){const B=this.#a(a,t,j,ee,E,S,1);q=this.#i[2*B],G=this.#i[2*B+1];const H=j+q,se=ee+G;N.push(se,H);const ie=j*t+ee;if(a[ie+1]===0?a[ie]=-l:a[ie]===1&&(a[ie]=l),H===h&&se===p&&j===W&&ee===K){a[v]!==1&&(c=Math.abs(a[v]));break}else E=j,S=ee,j=H,ee=se}}}return d}static#s(e,t,n,s){if(n-t<=4){for(let W=t;W<n-2;W+=2)s.push(e[W],e[W+1]);return}const r=e[t],a=e[t+1],l=e[n-4]-r,c=e[n-3]-a,d=Math.hypot(l,c),h=l/d,p=c/d,v=h*a-p*r,m=c/l,E=1/d,S=Math.atan(m),N=Math.cos(S),C=Math.sin(S),P=E*(Math.abs(N)+Math.abs(C)),L=E*(1-P+P**2),O=Math.max(Math.atan(Math.abs(C+N)*L),Math.atan(Math.abs(C-N)*L));let q=0,G=t;for(let W=t+2;W<n-2;W+=2){const K=Math.abs(v-h*e[W+1]+p*e[W]);K>q&&(G=W,q=K)}q>(d*O)**2?(this.#s(e,t,G+2,s),this.#s(e,G,n,s)):s.push(r,a)}static#o(e){const t=[],n=e.length;return this.#s(e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t}static#u(e,t,n,s,r,a){const l=new Float32Array(a**2),c=-2*s**2,d=a>>1;for(let S=0;S<a;S++){const N=(S-d)**2;for(let C=0;C<a;C++)l[S*a+C]=Math.exp((N+(C-d)**2)/c)}const h=new Float32Array(256),p=-2*r**2;for(let S=0;S<256;S++)h[S]=Math.exp(S**2/p);const v=e.length,m=new Uint8Array(v),E=new Uint32Array(256);for(let S=0;S<n;S++)for(let N=0;N<t;N++){const C=S*t+N,P=e[C];let L=0,O=0;for(let G=0;G<a;G++){const W=S+G-d;if(!(W<0||W>=n))for(let K=0;K<a;K++){const j=N+K-d;if(j<0||j>=t)continue;const ee=e[W*t+j],B=l[G*a+K]*h[Math.abs(ee-P)];L+=ee*B,O+=B}}const q=m[C]=Math.round(L/O);E[q]++}return[m,E]}static#l(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t}static#h(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let s=-1/0,r=1/0;for(let l=0,c=n.length;l<c;l++){const d=n[l]=e[l<<2];s=Math.max(s,d),r=Math.min(r,d)}const a=255/(s-r);for(let l=0,c=n.length;l<c;l++)n[l]=(n[l]-r)*a;return n}static#d(e){let t,n=-1/0,s=-1/0;const r=e.findIndex(c=>c!==0);let a=r,l=r;for(t=r;t<256;t++){const c=e[t];c>n&&(t-a>s&&(s=t-a,l=t-1),n=c,a=t)}for(t=l-1;t>=0&&!(e[t]>e[t+1]);t--);return t}static#f(e){const t=e,{width:n,height:s}=e,{maxDim:r}=this.#e;let a=n,l=s;if(n>r||s>r){let v=n,m=s,E=Math.log2(Math.max(n,s)/r);const S=Math.floor(E);E=E===S?S-1:S;for(let C=0;C<E;C++){a=Math.ceil(v/2),l=Math.ceil(m/2);const P=new OffscreenCanvas(a,l);P.getContext("2d").drawImage(e,0,0,v,m,0,0,a,l),v=a,m=l,e!==t&&e.close(),e=P.transferToImageBitmap()}const N=Math.min(r/a,r/l);a=Math.round(a*N),l=Math.round(l*N)}const d=new OffscreenCanvas(a,l).getContext("2d",{willReadFrequently:!0});d.fillStyle="white",d.fillRect(0,0,a,l),d.filter="grayscale(1)",d.drawImage(e,0,0,e.width,e.height,0,0,a,l);const h=d.getImageData(0,0,a,l).data;return[this.#h(h),a,l]}static extractContoursFromText(e,{fontFamily:t,fontStyle:n,fontWeight:s},r,a,l,c){let d=new OffscreenCanvas(1,1),h=d.getContext("2d",{alpha:!1});const p=200,v=h.font=`${n} ${s} ${p}px ${t}`,{actualBoundingBoxLeft:m,actualBoundingBoxRight:E,actualBoundingBoxAscent:S,actualBoundingBoxDescent:N,fontBoundingBoxAscent:C,fontBoundingBoxDescent:P,width:L}=h.measureText(e),O=1.5,q=Math.ceil(Math.max(Math.abs(m)+Math.abs(E)||0,L)*O),G=Math.ceil(Math.max(Math.abs(S)+Math.abs(N)||p,Math.abs(C)+Math.abs(P)||p)*O);d=new OffscreenCanvas(q,G),h=d.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=v,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,q,G),h.fillStyle="black",h.fillText(e,q*(O-1)/2,G*(3-O)/2);const W=this.#h(h.getImageData(0,0,q,G).data),K=this.#l(W),j=this.#d(K),ee=this.#r(W,q,G,j);return this.processDrawnLines({lines:{curves:ee,width:q,height:G},pageWidth:r,pageHeight:a,rotation:l,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(e,t,n,s,r){const[a,l,c]=this.#f(e),[d,h]=this.#u(a,l,c,Math.hypot(l,c)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),p=this.#d(h),v=this.#r(d,l,c,p);return this.processDrawnLines({lines:{curves:v,width:l,height:c},pageWidth:t,pageHeight:n,rotation:s,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:s,innerMargin:r,mustSmooth:a,areContours:l}){s%180!==0&&([t,n]=[n,t]);const{curves:c,width:d,height:h}=e,p=e.thickness??0,v=[],m=Math.min(t/d,n/h),E=m/t,S=m/n,N=[];for(const{points:P}of c){const L=a?this.#o(P):P;if(!L)continue;N.push(L);const O=L.length,q=new Float32Array(O),G=new Float32Array(3*(O===2?2:O-2));if(v.push({line:G,points:q}),O===2){q[0]=L[0]*E,q[1]=L[1]*S,G.set([NaN,NaN,NaN,NaN,q[0],q[1]],0);continue}let[W,K,j,ee]=L;W*=E,K*=S,j*=E,ee*=S,q.set([W,K,j,ee],0),G.set([NaN,NaN,NaN,NaN,W,K],0);for(let B=4;B<O;B+=2){const H=q[B]=L[B]*E,se=q[B+1]=L[B+1]*S;G.set(lt.createBezierPoints(W,K,j,ee,H,se),(B-2)*3),[W,K,j,ee]=[j,ee,H,se]}}if(v.length===0)return null;const C=l?new av:new Gf;return C.build(v,t,n,1,s,l?0:p,r),{outline:C,newCurves:N,areContours:l,thickness:p,width:d,height:h}}static async compressSignature({outlines:e,areContours:t,thickness:n,width:s,height:r}){let a=1/0,l=-1/0,c=0;for(const L of e){c+=L.length;for(let O=2,q=L.length;O<q;O++){const G=L[O]-L[O-2];a=Math.min(a,G),l=Math.max(l,G)}}let d;a>=-128&&l<=127?d=Int8Array:a>=-32768&&l<=32767?d=Int16Array:d=Int32Array;const h=e.length,p=r0+tf*h,v=new Uint32Array(p);let m=0;v[m++]=p*Uint32Array.BYTES_PER_ELEMENT+(c-2*h)*d.BYTES_PER_ELEMENT,v[m++]=0,v[m++]=s,v[m++]=r,v[m++]=t?0:1,v[m++]=Math.max(0,Math.floor(n??0)),v[m++]=h,v[m++]=d.BYTES_PER_ELEMENT;for(const L of e)v[m++]=L.length-2,v[m++]=L[0],v[m++]=L[1];const E=new CompressionStream("deflate-raw"),S=E.writable.getWriter();await S.ready,S.write(v);const N=d.prototype.constructor;for(const L of e){const O=new N(L.length-2);for(let q=2,G=L.length;q<G;q++)O[q-2]=L[q]-L[q-2];S.write(O)}S.close();const C=await new Response(E.readable).arrayBuffer(),P=new Uint8Array(C);return vS(P)}static async decompressSignature(e){try{const t=dR(e),{readable:n,writable:s}=new DecompressionStream("deflate-raw"),r=s.getWriter();await r.ready,r.write(t).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let a=null,l=0;for await(const L of n)a||=new Uint8Array(new Uint32Array(L.buffer,0,4)[0]),a.set(L,l),l+=L.length;const c=new Uint32Array(a.buffer,0,a.length>>2),d=c[1];if(d!==0)throw new Error(`Invalid version: ${d}`);const h=c[2],p=c[3],v=c[4]===0,m=c[5],E=c[6],S=c[7],N=[],C=(r0+tf*E)*Uint32Array.BYTES_PER_ELEMENT;let P;switch(S){case Int8Array.BYTES_PER_ELEMENT:P=new Int8Array(a.buffer,C);break;case Int16Array.BYTES_PER_ELEMENT:P=new Int16Array(a.buffer,C);break;case Int32Array.BYTES_PER_ELEMENT:P=new Int32Array(a.buffer,C);break}l=0;for(let L=0;L<E;L++){const O=c[tf*L+r0],q=new Float32Array(O+2);N.push(q);for(let G=0;G<tf-1;G++)q[G]=c[tf*L+r0+G+1];for(let G=0;G<O;G++)q[G+2]=q[G]+P[l++]}return{areContours:v,thickness:m,outlines:N,width:h,height:p}}catch(t){return Jt(`decompressSignature: ${t}`),null}}}class ay extends GS{constructor(){super(),super.updateProperties({fill:Rt._defaultLineColor,"stroke-width":0})}clone(){const e=new ay;return e.updateAll(this),e}}class oy extends cg{constructor(e){super(e),super.updateProperties({stroke:Rt._defaultLineColor,"stroke-width":1})}clone(){const e=new oy(this._viewParameters);return e.updateAll(this),e}}class jo extends Rn{#e=!1;#t=null;#i=null;#n=null;static _type="signature";static _editorType=Zt.SIGNATURE;static _defaultDrawingOptions=null;constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#i=e.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){Rt.initialize(e,t),this._defaultDrawingOptions=new ay,this._defaultDrawnSignatureOptions=new oy(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return Qt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(e){const t=e.get("hasDescription");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,t;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,e=this.x,t=this.y),super.render(),this._drawId===null)if(this.#i){const{lines:s,mustSmooth:r,areContours:a,description:l,uuid:c,heightInPage:d}=this.#i,{rawDims:{pageWidth:h,pageHeight:p},rotation:v}=this.parent.viewport,m=Dd.processDrawnLines({lines:s,pageWidth:h,pageHeight:p,rotation:v,innerMargin:jo._INNER_MARGIN,mustSmooth:r,areContours:a});this.addSignature(m,d,l,c)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#t||""}));return n&&(this._isCopy=!0,this._moveAfterPaste(e,t)),this.div}setUuid(e){this.#n=e,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#t}set description(e){this.#t=e,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(t=>{t?.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:t,thickness:n,width:s,height:r}=this.#i,a=Math.max(s,r),l=Dd.processDrawnLines({lines:{curves:e.map(c=>({points:c})),thickness:n,width:s,height:r},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t});return{areContours:t,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,t,n,s){const{x:r,y:a}=this,{outline:l}=this.#i=e;this.#e=l instanceof av,this.description=n;let c;this.#e?c=jo.getDefaultDrawingOptions():(c=jo._defaultDrawnSignatureOptions.clone(),c.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:c});const[,d]=this.pageDimensions;let h=t/d;h=h>=1?.5:h,this.width*=h/this.height,this.width>=1&&(h*=.9/this.width,this.width=.9),this.height=h,this.setDims(),this.x=r,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(s),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!s,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:s}=this.parent.viewport;return Dd.process(e,t,n,s,jo._INNER_MARGIN)}getFromText(e,t){const{rawDims:{pageWidth:n,pageHeight:s},rotation:r}=this.parent.viewport;return Dd.extractContoursFromText(e,t,n,s,r,jo._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:s}=this.parent.viewport;return Dd.processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:s,innerMargin:jo._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:t}){e?this._drawingOptions=jo.getDefaultDrawingOptions():(this._drawingOptions=jo._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":t}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:t,points:n}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":s}}=this,r=Object.assign(super.serialize(e),{isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:s});return this.addComment(r),e?(r.paths={lines:t,points:n},r.uuid=this.#n,r.isCopy=!0):r.lines=t,this.#t&&(r.accessibilityData={type:"Figure",alt:this.#t}),r}static deserializeDraw(e,t,n,s,r,a){return a.areContours?av.deserialize(e,t,n,s,r,a):Gf.deserialize(e,t,n,s,r,a)}static async deserialize(e,t,n){const s=await super.deserialize(e,t,n);return s.#e=e.areContours,s.description=e.accessibilityData?.alt||"",s.#n=e.uuid,s}}class J6 extends Rt{#e=null;#t=null;#i=null;#n=null;#a=null;#r="";#s=null;#o=!1;#u=null;#l=!1;#h=!1;static _type="stamp";static _editorType=Zt.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#n=e.bitmapUrl,this.#a=e.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){Rt.initialize(e,t)}static isHandlingMimeForPasting(e){return J1.includes(e)}static paste(e,t){t.pasteEditor({mode:Zt.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#d(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#l=e.isSvg),e.file&&(this.#r=e.file.name),this.#g()}#f(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#s){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:r,height:a}=e||this.copyCanvas(null,null,!0).imageData,l=await n.guess({name:"altText",request:{data:s,width:r,height:a,channels:s.length/(r*a)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const c=l.output;return await this.setGuessedAltText(c),t&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}#m(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(n=>this.#d(n,!0)).finally(()=>this.#f());return}if(this.#n){const n=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(n).then(s=>this.#d(s)).finally(()=>this.#f());return}if(this.#a){const n=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(n).then(s=>this.#d(s)).finally(()=>this.#f());return}const e=document.createElement("input");e.type="file",e.accept=J1.join(",");const t=this._uiManager._signal;this.#i=new Promise(n=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#d(s)}n()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),n()},{signal:t})}).finally(()=>this.#f()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#s?.remove(),this.#s=null,this.#u&&(clearTimeout(this.#u),this.#u=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#m();return}super.rebuild(),this.div!==null&&(this.#t&&this.#s===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#i||this.#e||this.#n||this.#a||this.#t||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#e?this.#g():this.#m()),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){const{id:n,bitmap:s}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(this.#t=n,s&&(this.#e=s),this.#o=!1,this.#g())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#u!==null&&clearTimeout(this.#u);const e=200;this.#u=setTimeout(()=>{this.#u=null,this.#p()},e)}#g(){const{div:e}=this;let{width:t,height:n}=this.#e;const[s,r]=this.pageDimensions,a=.75;if(this.width)t=this.width*s,n=this.height*r;else if(t>a*s||n>a*r){const c=Math.min(a*s/t,a*r/n);t*=c,n*=c}this._uiManager.enableWaiting(!1);const l=this.#s=document.createElement("canvas");l.setAttribute("role","img"),this.addContainer(l),this.width=t/s,this.height=n/r,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#p(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#r&&this.div.setAttribute("aria-description",this.#r),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(e,t,n=!1){e||(e=224);const{width:s,height:r}=this.#e,a=new zo;let l=this.#e,c=s,d=r,h=null;if(t){if(s>t||r>t){const G=Math.min(t/s,t/r);c=Math.floor(s*G),d=Math.floor(r*G)}h=document.createElement("canvas");const v=h.width=Math.ceil(c*a.sx),m=h.height=Math.ceil(d*a.sy);this.#l||(l=this.#c(v,m));const E=h.getContext("2d");E.filter=this._uiManager.hcmFilter;let S="white",N="#cfcfd8";this._uiManager.hcmFilter!=="none"?N="black":vR.isDarkMode&&(S="#8f8f9d",N="#42414d");const C=15,P=C*a.sx,L=C*a.sy,O=new OffscreenCanvas(P*2,L*2),q=O.getContext("2d");q.fillStyle=S,q.fillRect(0,0,P*2,L*2),q.fillStyle=N,q.fillRect(0,0,P,L),q.fillRect(P,L,P,L),E.fillStyle=E.createPattern(O,"repeat"),E.fillRect(0,0,v,m),E.drawImage(l,0,0,l.width,l.height,0,0,v,m)}let p=null;if(n){let v,m;if(a.symmetric&&l.width<e&&l.height<e)v=l.width,m=l.height;else if(l=this.#e,s>e||r>e){const N=Math.min(e/s,e/r);v=Math.floor(s*N),m=Math.floor(r*N),this.#l||(l=this.#c(v,m))}const S=new OffscreenCanvas(v,m).getContext("2d",{willReadFrequently:!0});S.drawImage(l,0,0,l.width,l.height,0,0,v,m),p={width:v,height:m,data:S.getImageData(0,0,v,m).data}}return{canvas:h,width:c,height:d,imageData:p}}#c(e,t){const{width:n,height:s}=this.#e;let r=n,a=s,l=this.#e;for(;r>2*e||a>2*t;){const c=r,d=a;r>2*e&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const h=new OffscreenCanvas(r,a);h.getContext("2d").drawImage(l,0,0,c,d,0,0,r,a),l=h.transferToImageBitmap()}return l}#p(){const[e,t]=this.parentDimensions,{width:n,height:s}=this,r=new zo,a=Math.ceil(n*e*r.sx),l=Math.ceil(s*t*r.sy),c=this.#s;if(!c||c.width===a&&c.height===l)return;c.width=a,c.height=l;const d=this.#l?this.#e:this.#c(a,l),h=c.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(d,0,0,d.width,d.height,0,0,a,l)}#v(e){if(e){if(this.#l){const s=this._uiManager.imageManager.getSvgUrl(this.#t);if(s)return s}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#l){const[t,n]=this.pageDimensions,s=Math.round(this.width*t*ih.PDF_TO_CSS_UNITS),r=Math.round(this.height*n*ih.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(s,r);return a.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,s,r),a.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,t,n){let s=null,r=!1;if(e instanceof zS){const{data:{rect:S,rotation:N,id:C,structParent:P,popupRef:L,richText:O,contentsObj:q,creationDate:G,modificationDate:W},container:K,parent:{page:{pageNumber:j}},canvas:ee}=e;let B,H;ee?(delete e.canvas,{id:B,bitmap:H}=n.imageManager.getFromCanvas(K.id,ee),ee.remove()):(r=!0,e._hasNoCanvas=!0);const se=(await t._structTree.getAriaAttributes(`${Fd}${C}`))?.get("aria-label")||"";s=e={annotationType:Zt.STAMP,bitmapId:B,bitmap:H,pageIndex:j-1,rect:S.slice(0),rotation:N,annotationElementId:C,id:C,deleted:!1,accessibilityData:{decorative:!1,altText:se},isSvg:!1,structParent:P,popupRef:L,richText:O,comment:q?.str||null,creationDate:G,modificationDate:W}}const a=await super.deserialize(e,t,n),{rect:l,bitmap:c,bitmapUrl:d,bitmapId:h,isSvg:p,accessibilityData:v}=e;r?(n.addMissingCanvas(e.id,a),a.#o=!0):h&&n.imageManager.isValidId(h)?(a.#t=h,c&&(a.#e=c)):a.#n=d,a.#l=p;const[m,E]=a.pageDimensions;return a.width=(l[2]-l[0])/m,a.height=(l[3]-l[1])/E,v&&(a.altTextData=v),a._initialData=s,e.comment&&a.setCommentData(e),a.#h=!!s,a}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Object.assign(super.serialize(e),{bitmapId:this.#t,isSvg:this.#l});if(this.addComment(n),e)return n.bitmapUrl=this.#v(!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:s,altText:r}=this.serializeAltText(!1);if(!s&&r&&(n.accessibilityData={type:"Figure",alt:r}),this.annotationElementId){const l=this.#b(n);return l.isSame?null:(l.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1,n.id=this.annotationElementId,delete n.bitmapId,n)}if(t===null)return n;t.stamps||=new Map;const a=this.#l?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:a,serialized:n}),n.bitmap=this.#v(!1);else if(this.#l){const l=t.stamps.get(this.#t);a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=this.#v(!1))}return n}#b(e){const{pageIndex:t,accessibilityData:{altText:n}}=this._initialData,s=e.pageIndex===t,r=(e.accessibilityData?.alt||"")===n;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&s&&r,isSameAltText:r}}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class Sl{#e;#t=!1;#i=null;#n=null;#a=null;#r=new Map;#s=!1;#o=!1;#u=!1;#l=null;#h=null;#d=null;#f=null;#m=null;#g=-1;#c;static _initialized=!1;static#p=new Map([bs,ry,J6,qi,jo].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:s,accessibilityManager:r,annotationLayer:a,drawLayer:l,textLayer:c,viewport:d,l10n:h}){const p=[...Sl.#p.values()];if(!Sl._initialized){Sl._initialized=!0;for(const v of p)v.initialize(h,e)}e.registerEditorTypes(p),this.#c=e,this.pageIndex=t,this.div=n,this.#e=r,this.#i=a,this.viewport=d,this.#d=c,this.drawLayer=l,this._structTree=s,this.#c.addLayer(this)}get isEmpty(){return this.#r.size===0}get isInvisible(){return this.isEmpty&&this.#c.getMode()===Zt.NONE}updateToolbar(e){this.#c.updateToolbar(e)}updateMode(e=this.#c.getMode()){switch(this.#x(),e){case Zt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Zt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Zt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===Zt.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const n of Sl.#p.values())t.toggle(`${n._type}Editing`,e===n._editorType)}this.div.hidden=!1}hasTextLayer(e){return e===this.#d?.div}setEditingState(e){this.#c.setEditingState(e)}addCommands(e){this.#c.addCommands(e)}cleanUndoStack(e){this.#c.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#i?.togglePointerEvents(e)}get#v(){return this.#r.size!==0?this.#r.values():this.#c.getEditors(this.pageIndex)}async enable(){this.#u=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#m?.abort(),this.#m=null;const e=new Set;for(const n of this.#v)n.enableEditing(),n.show(!0),n.annotationElementId&&(this.#c.removeChangedExistingAnnotation(n),e.add(n.annotationElementId));const t=this.#i;if(t)for(const n of t.getEditableAnnotations()){if(n.hide(),this.#c.isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;const s=await this.deserialize(n);s&&(this.addOrRebuild(s),s.enableEditing())}this.#u=!1,this.#c._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#d&&!this.#m){this.#m=new AbortController;const s=this.#c.combinedSignal(this.#m);this.#d.div.addEventListener("pointerdown",r=>{const{clientX:l,clientY:c,timeStamp:d}=r,h=this.#g;if(d-h>500){this.#g=d;return}this.#g=-1;const{classList:p}=this.div;p.toggle("getElements",!0);const v=document.elementsFromPoint(l,c);if(p.toggle("getElements",!1),!this.div.contains(v[0]))return;let m;const E=new RegExp(`^${Cf}[0-9]+$`);for(const N of v)if(E.test(N.id)){m=N.id;break}if(!m)return;const S=this.#r.get(m);S?.annotationElementId===null&&(r.stopPropagation(),r.preventDefault(),S.dblclick(r))},{signal:s,capture:!0})}const e=this.#i,t=[];if(e){const s=new Map,r=new Map;for(const l of this.#v){if(l.disableEditing(),!l.annotationElementId){t.push(l);continue}if(l.serialize()!==null){s.set(l.annotationElementId,l);continue}else r.set(l.annotationElementId,l);this.getEditableAnnotation(l.annotationElementId)?.show(),l.remove()}const a=e.getEditableAnnotations();for(const l of a){const{id:c}=l.data;if(this.#c.isDeletedAnnotationElement(c)){l.updateEdited({deleted:!0});continue}let d=r.get(c);if(d){d.resetAnnotationElement(l),d.show(!1),l.show();continue}d=s.get(c),d&&(this.#c.addChangedExistingAnnotation(d),d.renderAnnotationElement(l)&&d.show(!1)),l.show()}}this.#x(),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const s of Sl.#p.values())n.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),e?.updateFakeAnnotations(t),this.#o=!1}getEditableAnnotation(e){return this.#i?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#c.getActive()!==e&&this.#c.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#d?.div&&!this.#f){this.#f=new AbortController;const e=this.#c.combinedSignal(this.#f);this.#d.div.addEventListener("pointerdown",this.#b.bind(this),{signal:e}),this.#d.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#d?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#d.div.classList.remove("highlighting"))}#b(e){this.#c.unselectAll();const{target:t}=e;if(t===this.#d.div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&this.#d.div.contains(t)){const{isMac:n}=Ds.platform;if(e.button!==0||e.ctrlKey&&n)return;this.#c.showAllEditors("highlight",!0,!0),this.#d.div.classList.add("free"),this.toggleDrawing(),qi.startHighlighting(this,this.#c.direction==="ltr",{target:this.#d.div,x:e.x,y:e.y}),this.#d.div.addEventListener("pointerup",()=>{this.#d.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#c._signal}),e.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const e=this.#c.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){this.#n?.abort(),this.#n=null}attach(e){this.#r.set(e.id,e);const{annotationElementId:t}=e;t&&this.#c.isDeletedAnnotationElement(t)&&this.#c.removeDeletedAnnotationElement(e)}detach(e){this.#r.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#o&&e.annotationElementId&&this.#c.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#c.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#c.addDeletedAnnotationElement(e.annotationElementId),Rt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#c.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#u),this.#c.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!this.#a&&(e._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#c._signal}),t.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getEditorByUID(e){for(const t of this.#r.values())if(t.uid===e)return t;return null}getNextId(){return this.#c.getId()}get#y(){return Sl.#p.get(this.#c.getMode())}combinedSignal(e){return this.#c.combinedSignal(e)}#E(e){const t=this.#y;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#y?.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await this.#c.updateMode(e.mode);const{offsetX:n,offsetY:s}=this.#A(),r=this.getNextId(),a=this.#E({parent:this,id:r,x:n,y:s,uiManager:this.#c,isCentered:!0,...t});a&&this.add(a)}async deserialize(e){return await Sl.#p.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#c)||null}createAndAddNewEditor(e,t,n={}){const s=this.getNextId(),r=this.#E({parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:this.#c,isCentered:t,...n});return r&&this.add(r),r}get boundingClientRect(){return this.div.getBoundingClientRect()}#A(){const{x:e,y:t,width:n,height:s}=this.boundingClientRect,r=Math.max(0,e),a=Math.max(0,t),l=Math.min(window.innerWidth,e+n),c=Math.min(window.innerHeight,t+s),d=(r+l)/2-e,h=(a+c)/2-t,[p,v]=this.viewport.rotation%180===0?[d,h]:[h,d];return{offsetX:p,offsetY:v}}addNewEditor(e={}){this.createAndAddNewEditor(this.#A(),!0,e)}setSelected(e){this.#c.setSelected(e)}toggleSelected(e){this.#c.toggleSelected(e)}unselect(e){this.#c.unselect(e)}pointerup(e){const{isMac:t}=Ds.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!this.#s||(this.#s=!1,this.#y?.isDrawer&&this.#y.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}const n=this.#c.getMode();if(n===Zt.STAMP||n===Zt.SIGNATURE){this.#c.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#c.getMode()===Zt.HIGHLIGHT&&this.enableTextSelection(),this.#s){this.#s=!1;return}const{isMac:t}=Ds.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(this.#s=!0,this.#y?.isDrawer){this.startDrawingSession(e);return}const n=this.#c.getActive();this.#t=!n||n.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#l){this.#y.startDrawing(this,this.#c,!1,e);return}this.#c.setCurrentDrawingSession(this),this.#l=new AbortController;const t=this.#c.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(this.#h=null,this.commitOrRemove())},{signal:t}),this.#y.startDrawing(this,this.#c,!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&(this.#h=t);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(e=!1){return this.#l?(this.#c.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#h=null,this.#y.endDrawing(e)):null}findNewParent(e,t,n){const s=this.#c.findParent(t,n);return s===null||s===this?!1:(s.changeParent(e),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#y.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#c.getActive()?.parent===this&&(this.#c.commitOrRemove(),this.#c.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const e of this.#r.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#r.clear(),this.#c.removeLayer(this)}#x(){for(const e of this.#r.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,xc(this.div,e);for(const t of this.#c.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){this.#c.commitOrRemove(),this.#x();const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,xc(this.div,{rotation:n}),t!==n)for(const s of this.#r.values())s.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#c.viewParameters.realScale}}class Ps{#e=null;#t=new Map;#i=new Map;static#n=0;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#t.size>0)for(const t of this.#t.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return Qt(this,"_svgFactory",new V0)}static#a(e,[t,n,s,r]){const{style:a}=e;a.top=`${100*n}%`,a.left=`${100*t}%`,a.width=`${100*s}%`,a.height=`${100*r}%`}#r(){const e=Ps._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#s(e,t){const n=Ps._svgFactory.createElement("clipPath");e.append(n);const s=`clip_${t}`;n.setAttribute("id",s),n.setAttribute("clipPathUnits","objectBoundingBox");const r=Ps._svgFactory.createElement("use");return n.append(r),r.setAttribute("href",`#${t}`),r.classList.add("clip"),s}#o(e,t){for(const[n,s]of Object.entries(t))s===null?e.removeAttribute(n):e.setAttribute(n,s)}draw(e,t=!1,n=!1){const s=Ps.#n++,r=this.#r(),a=Ps._svgFactory.createElement("defs");r.append(a);const l=Ps._svgFactory.createElement("path");a.append(l);const c=`path_p${this.pageIndex}_${s}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),t&&this.#i.set(s,l);const d=n?this.#s(a,c):null,h=Ps._svgFactory.createElement("use");return r.append(h),h.setAttribute("href",`#${c}`),this.updateProperties(r,e),this.#t.set(s,r),{id:s,clipPathId:`url(#${d})`}}drawOutline(e,t){const n=Ps.#n++,s=this.#r(),r=Ps._svgFactory.createElement("defs");s.append(r);const a=Ps._svgFactory.createElement("path");r.append(a);const l=`path_p${this.pageIndex}_${n}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke");let c;if(t){const p=Ps._svgFactory.createElement("mask");r.append(p),c=`mask_p${this.pageIndex}_${n}`,p.setAttribute("id",c),p.setAttribute("maskUnits","objectBoundingBox");const v=Ps._svgFactory.createElement("rect");p.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const m=Ps._svgFactory.createElement("use");p.append(m),m.setAttribute("href",`#${l}`),m.setAttribute("stroke","none"),m.setAttribute("fill","black"),m.setAttribute("fill-rule","nonzero"),m.classList.add("mask")}const d=Ps._svgFactory.createElement("use");s.append(d),d.setAttribute("href",`#${l}`),c&&d.setAttribute("mask",`url(#${c})`);const h=d.cloneNode();return s.append(h),d.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(s,e),this.#t.set(n,s),n}finalizeDraw(e,t){this.#i.delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:n,bbox:s,rootClass:r,path:a}=t,l=typeof e=="number"?this.#t.get(e):e;if(l){if(n&&this.#o(l,n),s&&Ps.#a(l,s),r){const{classList:c}=l;for(const[d,h]of Object.entries(r))c.toggle(d,h)}if(a){const d=l.firstChild.firstChild;this.#o(d,a)}}}updateParent(e,t){if(t===this)return;const n=this.#t.get(e);n&&(t.#e.append(n),this.#t.delete(e),t.#t.set(e,n))}remove(e){this.#i.delete(e),this.#e!==null&&(this.#t.get(e).remove(),this.#t.delete(e))}destroy(){this.#e=null;for(const e of this.#t.values())e.remove();this.#t.clear(),this.#i.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:sv};globalThis.pdfjsLib={AbortException:Su,AnnotationEditorLayer:Sl,AnnotationEditorParamsType:gn,AnnotationEditorType:Zt,AnnotationEditorUIManager:Eu,AnnotationLayer:sy,AnnotationMode:bu,AnnotationType:Zi,applyOpacity:bR,build:T6,ColorPicker:_a,createValidAbsoluteUrl:fS,CSSConstants:yR,DOMSVGFactory:V0,DrawLayer:Ps,FeatureTest:Ds,fetchData:jf,findContrastColor:wR,getDocument:nv,getFilenameFromUrl:hR,getPdfFilenameFromUrl:fR,getRGB:Hf,getUuid:mS,getXfaPageViewport:gR,GlobalWorkerOptions:Wd,ImageKind:w0,InvalidPDFException:Y1,isDataScheme:og,isPdfFile:Yv,isValidExplicitDest:RR,MathClamp:or,noContextMenu:Ea,normalizeUnicode:uR,OPS:Nf,OutputScale:zo,PasswordResponses:eR,PDFDataRangeTransport:OS,PDFDateString:K1,PDFWorker:Rf,PermissionFlag:Qk,PixelsPerInch:ih,RenderingCancelledException:Wv,renderRichText:bS,ResponseException:H0,setLayerDimensions:xc,shadow:Qt,SignatureExtractor:Dd,stopEvent:Oi,SupportedImageMimeTypes:J1,TextLayer:rr,TouchManager:lg,updateUrlHash:pS,Util:ht,VerbosityLevel:sg,version:E6,XfaLayer:yS};let X6,Z6;function Q6(){return{geminiUrl:X6,vertexUrl:Z6}}function eL(i,e,t,n){var s,r;if(!i?.baseUrl){const a=Q6();return e?(s=a.vertexUrl)!==null&&s!==void 0?s:t:(r=a.geminiUrl)!==null&&r!==void 0?r:n}return i.baseUrl}class Pl{}function et(i,e){const t=/\{([^}]+)\}/g;return i.replace(t,(n,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const r=e[s];return r!=null?String(r):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function w(i,e,t){for(let r=0;r<e.length-1;r++){const a=e[r];if(a.endsWith("[]")){const l=a.slice(0,-2);if(!(l in i))if(Array.isArray(t))i[l]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(i[l])){const c=i[l];if(Array.isArray(t))for(let d=0;d<c.length;d++){const h=c[d];w(h,e.slice(r+1),t[d])}else for(const d of c)w(d,e.slice(r+1),t)}return}else if(a.endsWith("[0]")){const l=a.slice(0,-3);l in i||(i[l]=[{}]);const c=i[l];w(c[0],e.slice(r+1),t);return}(!i[a]||typeof i[a]!="object")&&(i[a]={}),i=i[a]}const n=e[e.length-1],s=i[n];if(s!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===s)return;if(typeof s=="object"&&typeof t=="object"&&s!==null&&t!==null)Object.assign(s,t);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else n==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(i,t):i[n]=t}function y(i,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return i;for(let n=0;n<e.length;n++){if(typeof i!="object"||i===null)return t;const s=e[n];if(s.endsWith("[]")){const r=s.slice(0,-2);if(r in i){const a=i[r];return Array.isArray(a)?a.map(l=>y(l,e.slice(n+1),t)):t}else return t}else i=i[s]}return i}catch(n){if(n instanceof TypeError)return t;throw n}}function tL(i,e){for(const[t,n]of Object.entries(e)){const s=t.split("."),r=n.split("."),a=new Set;let l=-1;for(let c=0;c<s.length;c++)if(s[c]==="*"){l=c;break}if(l!==-1&&r.length>l)for(let c=l;c<r.length;c++){const d=r[c];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&a.add(d)}ov(i,s,r,0,a)}}function ov(i,e,t,n,s){if(n>=e.length||typeof i!="object"||i===null)return;const r=e[n];if(r.endsWith("[]")){const a=r.slice(0,-2),l=i;if(a in l&&Array.isArray(l[a]))for(const c of l[a])ov(c,e,t,n+1,s)}else if(r==="*"){if(typeof i=="object"&&i!==null&&!Array.isArray(i)){const a=i,l=Object.keys(a).filter(d=>!d.startsWith("_")&&!s.has(d)),c={};for(const d of l)c[d]=a[d];for(const[d,h]of Object.entries(c)){const p=[];for(const v of t.slice(n))v==="*"?p.push(d):p.push(v);w(a,p,h)}for(const d of l)delete a[d]}}else{const a=i;r in a&&ov(a[r],e,t,n+1,s)}}function ly(i){if(typeof i!="string")throw new Error("fromImageBytes must be a string");return i}function nL(i){const e={},t=y(i,["operationName"]);t!=null&&w(e,["operationName"],t);const n=y(i,["resourceName"]);return n!=null&&w(e,["_url","resourceName"],n),e}function iL(i){const e={},t=y(i,["name"]);t!=null&&w(e,["name"],t);const n=y(i,["metadata"]);n!=null&&w(e,["metadata"],n);const s=y(i,["done"]);s!=null&&w(e,["done"],s);const r=y(i,["error"]);r!=null&&w(e,["error"],r);const a=y(i,["response","generateVideoResponse"]);return a!=null&&w(e,["response"],rL(a)),e}function sL(i){const e={},t=y(i,["name"]);t!=null&&w(e,["name"],t);const n=y(i,["metadata"]);n!=null&&w(e,["metadata"],n);const s=y(i,["done"]);s!=null&&w(e,["done"],s);const r=y(i,["error"]);r!=null&&w(e,["error"],r);const a=y(i,["response"]);return a!=null&&w(e,["response"],aL(a)),e}function rL(i){const e={},t=y(i,["generatedSamples"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>oL(a))),w(e,["generatedVideos"],r)}const n=y(i,["raiMediaFilteredCount"]);n!=null&&w(e,["raiMediaFilteredCount"],n);const s=y(i,["raiMediaFilteredReasons"]);return s!=null&&w(e,["raiMediaFilteredReasons"],s),e}function aL(i){const e={},t=y(i,["videos"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>lL(a))),w(e,["generatedVideos"],r)}const n=y(i,["raiMediaFilteredCount"]);n!=null&&w(e,["raiMediaFilteredCount"],n);const s=y(i,["raiMediaFilteredReasons"]);return s!=null&&w(e,["raiMediaFilteredReasons"],s),e}function oL(i){const e={},t=y(i,["video"]);return t!=null&&w(e,["video"],pL(t)),e}function lL(i){const e={},t=y(i,["_self"]);return t!=null&&w(e,["video"],gL(t)),e}function uL(i){const e={},t=y(i,["operationName"]);return t!=null&&w(e,["_url","operationName"],t),e}function cL(i){const e={},t=y(i,["operationName"]);return t!=null&&w(e,["_url","operationName"],t),e}function dL(i){const e={},t=y(i,["name"]);t!=null&&w(e,["name"],t);const n=y(i,["metadata"]);n!=null&&w(e,["metadata"],n);const s=y(i,["done"]);s!=null&&w(e,["done"],s);const r=y(i,["error"]);r!=null&&w(e,["error"],r);const a=y(i,["response"]);return a!=null&&w(e,["response"],hL(a)),e}function hL(i){const e={},t=y(i,["sdkHttpResponse"]);t!=null&&w(e,["sdkHttpResponse"],t);const n=y(i,["parent"]);n!=null&&w(e,["parent"],n);const s=y(i,["documentName"]);return s!=null&&w(e,["documentName"],s),e}function $S(i){const e={},t=y(i,["name"]);t!=null&&w(e,["name"],t);const n=y(i,["metadata"]);n!=null&&w(e,["metadata"],n);const s=y(i,["done"]);s!=null&&w(e,["done"],s);const r=y(i,["error"]);r!=null&&w(e,["error"],r);const a=y(i,["response"]);return a!=null&&w(e,["response"],fL(a)),e}function fL(i){const e={},t=y(i,["sdkHttpResponse"]);t!=null&&w(e,["sdkHttpResponse"],t);const n=y(i,["parent"]);n!=null&&w(e,["parent"],n);const s=y(i,["documentName"]);return s!=null&&w(e,["documentName"],s),e}function pL(i){const e={},t=y(i,["uri"]);t!=null&&w(e,["uri"],t);const n=y(i,["encodedVideo"]);n!=null&&w(e,["videoBytes"],ly(n));const s=y(i,["encoding"]);return s!=null&&w(e,["mimeType"],s),e}function gL(i){const e={},t=y(i,["gcsUri"]);t!=null&&w(e,["uri"],t);const n=y(i,["bytesBase64Encoded"]);n!=null&&w(e,["videoBytes"],ly(n));const s=y(i,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}var ow;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(ow||(ow={}));var lw;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(lw||(lw={}));var uw;(function(i){i.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",i.SILENT="SILENT",i.WHEN_IDLE="WHEN_IDLE",i.INTERRUPT="INTERRUPT"})(uw||(uw={}));var Ai;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT",i.NULL="NULL"})(Ai||(Ai={}));var cw;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(cw||(cw={}));var dw;(function(i){i.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",i.SIMPLE_SEARCH="SIMPLE_SEARCH",i.ELASTIC_SEARCH="ELASTIC_SEARCH"})(dw||(dw={}));var hw;(function(i){i.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",i.NO_AUTH="NO_AUTH",i.API_KEY_AUTH="API_KEY_AUTH",i.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",i.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",i.OAUTH="OAUTH",i.OIDC_AUTH="OIDC_AUTH"})(hw||(hw={}));var fw;(function(i){i.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",i.HTTP_IN_QUERY="HTTP_IN_QUERY",i.HTTP_IN_HEADER="HTTP_IN_HEADER",i.HTTP_IN_PATH="HTTP_IN_PATH",i.HTTP_IN_BODY="HTTP_IN_BODY",i.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(fw||(fw={}));var pw;(function(i){i.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",i.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",i.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",i.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(pw||(pw={}));var gw;(function(i){i.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",i.LOW="LOW",i.HIGH="HIGH"})(gw||(gw={}));var mw;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",i.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",i.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",i.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",i.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(mw||(mw={}));var vw;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})(vw||(vw={}));var yw;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(yw||(yw={}));var bw;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.IMAGE_SAFETY="IMAGE_SAFETY",i.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",i.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",i.NO_IMAGE="NO_IMAGE"})(bw||(bw={}));var ww;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(ww||(ww={}));var xw;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(xw||(xw={}));var _w;(function(i){i.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",i.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",i.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",i.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",i.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(_w||(_w={}));var Aw;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.IMAGE_SAFETY="IMAGE_SAFETY",i.MODEL_ARMOR="MODEL_ARMOR",i.JAILBREAK="JAILBREAK"})(Aw||(Aw={}));var Sw;(function(i){i.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",i.ON_DEMAND="ON_DEMAND",i.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Sw||(Sw={}));var G0;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(G0||(G0={}));var Ew;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Ew||(Ew={}));var Tw;(function(i){i.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",i.TUNING_MODE_FULL="TUNING_MODE_FULL",i.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Tw||(Tw={}));var Cw;(function(i){i.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",i.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",i.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",i.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",i.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",i.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",i.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Cw||(Cw={}));var lv;(function(i){i.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",i.JOB_STATE_QUEUED="JOB_STATE_QUEUED",i.JOB_STATE_PENDING="JOB_STATE_PENDING",i.JOB_STATE_RUNNING="JOB_STATE_RUNNING",i.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",i.JOB_STATE_FAILED="JOB_STATE_FAILED",i.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",i.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",i.JOB_STATE_PAUSED="JOB_STATE_PAUSED",i.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",i.JOB_STATE_UPDATING="JOB_STATE_UPDATING",i.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(lv||(lv={}));var Nw;(function(i){i.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",i.TUNING_TASK_I2V="TUNING_TASK_I2V",i.TUNING_TASK_T2V="TUNING_TASK_T2V",i.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Nw||(Nw={}));var kw;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(kw||(kw={}));var Rw;(function(i){i.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",i.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",i.BALANCED="BALANCED",i.PRIORITIZE_COST="PRIORITIZE_COST"})(Rw||(Rw={}));var Lw;(function(i){i.UNSPECIFIED="UNSPECIFIED",i.BLOCKING="BLOCKING",i.NON_BLOCKING="NON_BLOCKING"})(Lw||(Lw={}));var Pw;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(Pw||(Pw={}));var Iw;(function(i){i.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",i.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Iw||(Iw={}));var Mw;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE",i.VALIDATED="VALIDATED"})(Mw||(Mw={}));var Dw;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(Dw||(Dw={}));var Ow;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})(Ow||(Ow={}));var Bw;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi",i.zh="zh",i.pt="pt",i.es="es"})(Bw||(Bw={}));var Fw;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Fw||(Fw={}));var Uw;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Uw||(Uw={}));var jw;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(jw||(jw={}));var qw;(function(i){i.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",i.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",i.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",i.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",i.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",i.EDIT_MODE_STYLE="EDIT_MODE_STYLE",i.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",i.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(qw||(qw={}));var Hw;(function(i){i.FOREGROUND="FOREGROUND",i.BACKGROUND="BACKGROUND",i.PROMPT="PROMPT",i.SEMANTIC="SEMANTIC",i.INTERACTIVE="INTERACTIVE"})(Hw||(Hw={}));var zw;(function(i){i.ASSET="ASSET",i.STYLE="STYLE"})(zw||(zw={}));var Vw;(function(i){i.INSERT="INSERT",i.REMOVE="REMOVE",i.REMOVE_STATIC="REMOVE_STATIC",i.OUTPAINT="OUTPAINT"})(Vw||(Vw={}));var Gw;(function(i){i.OPTIMIZED="OPTIMIZED",i.LOSSLESS="LOSSLESS"})(Gw||(Gw={}));var $w;(function(i){i.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",i.PREFERENCE_TUNING="PREFERENCE_TUNING"})($w||($w={}));var Ww;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.STATE_PENDING="STATE_PENDING",i.STATE_ACTIVE="STATE_ACTIVE",i.STATE_FAILED="STATE_FAILED"})(Ww||(Ww={}));var Yw;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})(Yw||(Yw={}));var Kw;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED"})(Kw||(Kw={}));var Jw;(function(i){i.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.RESPONSE_REJECTED="RESPONSE_REJECTED",i.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Jw||(Jw={}));var Xw;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.VIDEO="VIDEO",i.AUDIO="AUDIO",i.DOCUMENT="DOCUMENT"})(Xw||(Xw={}));var Zw;(function(i){i.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",i.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",i.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Zw||(Zw={}));var Qw;(function(i){i.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",i.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",i.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Qw||(Qw={}));var ex;(function(i){i.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",i.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",i.NO_INTERRUPTION="NO_INTERRUPTION"})(ex||(ex={}));var tx;(function(i){i.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",i.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",i.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(tx||(tx={}));var nx;(function(i){i.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",i.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",i.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",i.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",i.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",i.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",i.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",i.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",i.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",i.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",i.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",i.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",i.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(nx||(nx={}));var ix;(function(i){i.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",i.QUALITY="QUALITY",i.DIVERSITY="DIVERSITY",i.VOCALIZATION="VOCALIZATION"})(ix||(ix={}));var qd;(function(i){i.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",i.PLAY="PLAY",i.PAUSE="PAUSE",i.STOP="STOP",i.RESET_CONTEXT="RESET_CONTEXT"})(qd||(qd={}));class uv{constructor(e){const t={};for(const n of e.headers.entries())t[n[0]]=n[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class nf{get text(){var e,t,n,s,r,a,l,c;if(((s=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",h=!1;const p=[];for(const v of(c=(l=(a=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[m,E]of Object.entries(v))m!=="text"&&m!=="thought"&&m!=="thoughtSignature"&&(E!==null||E!==void 0)&&p.push(m);if(typeof v.text=="string"){if(typeof v.thought=="boolean"&&v.thought)continue;h=!0,d+=v.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?d:void 0}get data(){var e,t,n,s,r,a,l,c;if(((s=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const h=[];for(const p of(c=(l=(a=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[v,m]of Object.entries(p))v!=="inlineData"&&(m!==null||m!==void 0)&&h.push(v);p.inlineData&&typeof p.inlineData.data=="string"&&(d+=atob(p.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,t,n,s,r,a,l,c;if(((s=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(l=(a=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if(d?.length!==0)return d}get executableCode(){var e,t,n,s,r,a,l,c,d;if(((s=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(c=(l=(a=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if(h?.length!==0)return(d=h?.[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,t,n,s,r,a,l,c,d;if(((s=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(c=(l=(a=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if(h?.length!==0)return(d=h?.[0])===null||d===void 0?void 0:d.output}}class sx{}class rx{}class mL{}class vL{}class yL{}class bL{}class ax{}class ox{}class lx{}class wL{}class $0{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const n=new $0;let s;const r=e;return t?s=sL(r):s=iL(r),Object.assign(n,s),n}}class ux{}class cx{}class dx{}class xL{}class _L{}class AL{}class uy{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const n=new uy,r=dL(e);return Object.assign(n,r),n}}class SL{}class EL{}class TL{}class hx{}class CL{get text(){var e,t,n;let s="",r=!1;const a=[];for(const l of(n=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&n!==void 0?n:[]){for(const[c,d]of Object.entries(l))c!=="text"&&c!=="thought"&&d!==null&&a.push(c);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;r=!0,s+=l.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?s:void 0}get data(){var e,t,n;let s="";const r=[];for(const a of(n=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&n!==void 0?n:[]){for(const[l,c]of Object.entries(a))l!=="inlineData"&&c!==null&&r.push(l);a.inlineData&&typeof a.inlineData.data=="string"&&(s+=atob(a.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class NL{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class cy{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const n=new cy,r=$S(e);return Object.assign(n,r),n}}function Tn(i,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(i.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function WS(i,e){const t=Tn(i,e);return t?t.startsWith("publishers/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}`:t.startsWith("models/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/publishers/google/${t}`:t:""}function YS(i){return Array.isArray(i)?i.map(e=>W0(e)):[W0(i)]}function W0(i){if(typeof i=="object"&&i!==null)return i;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof i}`)}function KS(i){const e=W0(i);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function JS(i){const e=W0(i);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function fx(i){if(i==null)throw new Error("PartUnion is required");if(typeof i=="object")return i;if(typeof i=="string")return{text:i};throw new Error(`Unsupported part type: ${typeof i}`)}function XS(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("PartListUnion is required");return Array.isArray(i)?i.map(e=>fx(e)):[fx(i)]}function cv(i){return i!=null&&typeof i=="object"&&"parts"in i&&Array.isArray(i.parts)}function px(i){return i!=null&&typeof i=="object"&&"functionCall"in i}function gx(i){return i!=null&&typeof i=="object"&&"functionResponse"in i}function $s(i){if(i==null)throw new Error("ContentUnion is required");return cv(i)?i:{role:"user",parts:XS(i)}}function dy(i,e){if(!e)return[];if(i.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const n=$s(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(i.isVertexAI()){const t=$s(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>$s(t)):[$s(e)]}function Aa(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("contents are required");if(!Array.isArray(i)){if(px(i)||gx(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[$s(i)]}const e=[],t=[],n=cv(i[0]);for(const s of i){const r=cv(s);if(r!=n)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(r)e.push(s);else{if(px(s)||gx(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(s)}}return n||e.push({role:"user",parts:XS(t)}),e}function kL(i,e){i.includes("null")&&(e.nullable=!0);const t=i.filter(n=>n!=="null");if(t.length===1)e.type=Object.values(Ai).includes(t[0].toUpperCase())?t[0].toUpperCase():Ai.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const n of t)e.anyOf.push({type:Object.values(Ai).includes(n.toUpperCase())?n.toUpperCase():Ai.TYPE_UNSPECIFIED})}}function Yd(i){const e={},t=["items"],n=["anyOf"],s=["properties"];if(i.type&&i.anyOf)throw new Error("type and anyOf cannot be both populated.");const r=i.anyOf;r!=null&&r.length==2&&(r[0].type==="null"?(e.nullable=!0,i=r[1]):r[1].type==="null"&&(e.nullable=!0,i=r[0])),i.type instanceof Array&&kL(i.type,e);for(const[a,l]of Object.entries(i))if(l!=null)if(a=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;e.type=Object.values(Ai).includes(l.toUpperCase())?l.toUpperCase():Ai.TYPE_UNSPECIFIED}else if(t.includes(a))e[a]=Yd(l);else if(n.includes(a)){const c=[];for(const d of l){if(d.type=="null"){e.nullable=!0;continue}c.push(Yd(d))}e[a]=c}else if(s.includes(a)){const c={};for(const[d,h]of Object.entries(l))c[d]=Yd(h);e[a]=c}else{if(a==="additionalProperties")continue;e[a]=l}return e}function hy(i){return Yd(i)}function fy(i){if(typeof i=="object")return i;if(typeof i=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:i}}};throw new Error(`Unsupported speechConfig type: ${typeof i}`)}function py(i){if("multiSpeakerVoiceConfig"in i)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return i}function uh(i){if(i.functionDeclarations)for(const e of i.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Yd(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Yd(e.response));return i}function ch(i){if(i==null)throw new Error("tools is required");if(!Array.isArray(i))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of i)e.push(t);return e}function RL(i,e,t,n=1){const s=!e.startsWith(`${t}/`)&&e.split("/").length===n;return i.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${i.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${i.getProject()}/locations/${i.getLocation()}/${e}`:s?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}/${e}`:e:s?`${t}/${e}`:e}function Il(i,e){if(typeof e!="string")throw new Error("name must be a string");return RL(i,e,"cachedContents")}function ZS(i){switch(i){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return i}}function Nu(i){return ly(i)}function LL(i){return i!=null&&typeof i=="object"&&"name"in i}function PL(i){return i!=null&&typeof i=="object"&&"video"in i}function IL(i){return i!=null&&typeof i=="object"&&"uri"in i}function QS(i){var e;let t;if(LL(i)&&(t=i.name),!(IL(i)&&(t=i.uri,t===void 0))&&!(PL(i)&&(t=(e=i.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof i=="string"&&(t=i),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const s=t.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${t}`);t=s[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function eE(i,e){let t;return i.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function tE(i){for(const e of["models","tunedModels","publisherModels"])if(ML(i,e))return i[e];return[]}function ML(i,e){return i!==null&&typeof i=="object"&&e in i}function DL(i,e={}){const t=i,n={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(n.responseJsonSchema=t.outputSchema),e.behavior&&(n.behavior=e.behavior),{functionDeclarations:[n]}}function OL(i,e={}){const t=[],n=new Set;for(const s of i){const r=s.name;if(n.has(r))throw new Error(`Duplicate function name ${r} found in MCP tools. Please ensure function names are unique.`);n.add(r);const a=DL(s,e);a.functionDeclarations&&t.push(...a.functionDeclarations)}return{functionDeclarations:t}}function nE(i,e){let t;if(typeof e=="string")if(i.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(i.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const n=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,s=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(i.isVertexAI()){if(s>0||n!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(n>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function BL(i){if(typeof i!="string")return i;const e=i;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function iE(i){if(typeof i!="object"||i===null)return{};const e=i,t=e.inlinedResponses;if(typeof t!="object"||t===null)return i;const s=t.inlinedResponses;if(!Array.isArray(s)||s.length===0)return i;let r=!1;for(const a of s){if(typeof a!="object"||a===null)continue;const c=a.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){r=!0;break}}return r&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),i}function dh(i,e){const t=e;if(!i.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function sE(i){const e=i;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function FL(i){const e={},t=y(i,["responsesFile"]);t!=null&&w(e,["fileName"],t);const n=y(i,["inlinedResponses","inlinedResponses"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>yP(a))),w(e,["inlinedResponses"],r)}const s=y(i,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>a)),w(e,["inlinedEmbedContentResponses"],r)}return e}function UL(i){const e={},t=y(i,["predictionsFormat"]);t!=null&&w(e,["format"],t);const n=y(i,["gcsDestination","outputUriPrefix"]);n!=null&&w(e,["gcsUri"],n);const s=y(i,["bigqueryDestination","outputUri"]);return s!=null&&w(e,["bigqueryUri"],s),e}function jL(i){const e={},t=y(i,["format"]);t!=null&&w(e,["predictionsFormat"],t);const n=y(i,["gcsUri"]);n!=null&&w(e,["gcsDestination","outputUriPrefix"],n);const s=y(i,["bigqueryUri"]);if(s!=null&&w(e,["bigqueryDestination","outputUri"],s),y(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(y(i,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(y(i,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function A0(i){const e={},t=y(i,["name"]);t!=null&&w(e,["name"],t);const n=y(i,["metadata","displayName"]);n!=null&&w(e,["displayName"],n);const s=y(i,["metadata","state"]);s!=null&&w(e,["state"],sE(s));const r=y(i,["metadata","createTime"]);r!=null&&w(e,["createTime"],r);const a=y(i,["metadata","endTime"]);a!=null&&w(e,["endTime"],a);const l=y(i,["metadata","updateTime"]);l!=null&&w(e,["updateTime"],l);const c=y(i,["metadata","model"]);c!=null&&w(e,["model"],c);const d=y(i,["metadata","output"]);return d!=null&&w(e,["dest"],FL(iE(d))),e}function dv(i){const e={},t=y(i,["name"]);t!=null&&w(e,["name"],t);const n=y(i,["displayName"]);n!=null&&w(e,["displayName"],n);const s=y(i,["state"]);s!=null&&w(e,["state"],sE(s));const r=y(i,["error"]);r!=null&&w(e,["error"],r);const a=y(i,["createTime"]);a!=null&&w(e,["createTime"],a);const l=y(i,["startTime"]);l!=null&&w(e,["startTime"],l);const c=y(i,["endTime"]);c!=null&&w(e,["endTime"],c);const d=y(i,["updateTime"]);d!=null&&w(e,["updateTime"],d);const h=y(i,["model"]);h!=null&&w(e,["model"],h);const p=y(i,["inputConfig"]);p!=null&&w(e,["src"],qL(p));const v=y(i,["outputConfig"]);v!=null&&w(e,["dest"],UL(iE(v)));const m=y(i,["completionStats"]);return m!=null&&w(e,["completionStats"],m),e}function qL(i){const e={},t=y(i,["instancesFormat"]);t!=null&&w(e,["format"],t);const n=y(i,["gcsSource","uris"]);n!=null&&w(e,["gcsUri"],n);const s=y(i,["bigquerySource","inputUri"]);return s!=null&&w(e,["bigqueryUri"],s),e}function HL(i,e){const t={};if(y(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(y(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(y(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const n=y(e,["fileName"]);n!=null&&w(t,["fileName"],n);const s=y(e,["inlinedRequests"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>vP(i,a))),w(t,["requests","requests"],r)}return t}function zL(i){const e={},t=y(i,["format"]);t!=null&&w(e,["instancesFormat"],t);const n=y(i,["gcsUri"]);n!=null&&w(e,["gcsSource","uris"],n);const s=y(i,["bigqueryUri"]);if(s!=null&&w(e,["bigquerySource","inputUri"],s),y(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(y(i,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function VL(i){const e={},t=y(i,["data"]);if(t!=null&&w(e,["data"],t),y(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=y(i,["mimeType"]);return n!=null&&w(e,["mimeType"],n),e}function GL(i,e){const t={},n=y(e,["name"]);return n!=null&&w(t,["_url","name"],dh(i,n)),t}function $L(i,e){const t={},n=y(e,["name"]);return n!=null&&w(t,["_url","name"],dh(i,n)),t}function WL(i){const e={},t=y(i,["content"]);t!=null&&w(e,["content"],t);const n=y(i,["citationMetadata"]);n!=null&&w(e,["citationMetadata"],YL(n));const s=y(i,["tokenCount"]);s!=null&&w(e,["tokenCount"],s);const r=y(i,["finishReason"]);r!=null&&w(e,["finishReason"],r);const a=y(i,["avgLogprobs"]);a!=null&&w(e,["avgLogprobs"],a);const l=y(i,["groundingMetadata"]);l!=null&&w(e,["groundingMetadata"],l);const c=y(i,["index"]);c!=null&&w(e,["index"],c);const d=y(i,["logprobsResult"]);d!=null&&w(e,["logprobsResult"],d);const h=y(i,["safetyRatings"]);if(h!=null){let v=h;Array.isArray(v)&&(v=v.map(m=>m)),w(e,["safetyRatings"],v)}const p=y(i,["urlContextMetadata"]);return p!=null&&w(e,["urlContextMetadata"],p),e}function YL(i){const e={},t=y(i,["citationSources"]);if(t!=null){let n=t;Array.isArray(n)&&(n=n.map(s=>s)),w(e,["citations"],n)}return e}function rE(i){const e={},t=y(i,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>EP(r))),w(e,["parts"],s)}const n=y(i,["role"]);return n!=null&&w(e,["role"],n),e}function KL(i,e){const t={},n=y(i,["displayName"]);if(e!==void 0&&n!=null&&w(e,["batch","displayName"],n),y(i,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function JL(i,e){const t={},n=y(i,["displayName"]);e!==void 0&&n!=null&&w(e,["displayName"],n);const s=y(i,["dest"]);return e!==void 0&&s!=null&&w(e,["outputConfig"],jL(BL(s))),t}function mx(i,e){const t={},n=y(e,["model"]);n!=null&&w(t,["_url","model"],Tn(i,n));const s=y(e,["src"]);s!=null&&w(t,["batch","inputConfig"],HL(i,nE(i,s)));const r=y(e,["config"]);return r!=null&&KL(r,t),t}function XL(i,e){const t={},n=y(e,["model"]);n!=null&&w(t,["model"],Tn(i,n));const s=y(e,["src"]);s!=null&&w(t,["inputConfig"],zL(nE(i,s)));const r=y(e,["config"]);return r!=null&&JL(r,t),t}function ZL(i,e){const t={},n=y(i,["displayName"]);return e!==void 0&&n!=null&&w(e,["batch","displayName"],n),t}function QL(i,e){const t={},n=y(e,["model"]);n!=null&&w(t,["_url","model"],Tn(i,n));const s=y(e,["src"]);s!=null&&w(t,["batch","inputConfig"],aP(i,s));const r=y(e,["config"]);return r!=null&&ZL(r,t),t}function eP(i,e){const t={},n=y(e,["name"]);return n!=null&&w(t,["_url","name"],dh(i,n)),t}function tP(i,e){const t={},n=y(e,["name"]);return n!=null&&w(t,["_url","name"],dh(i,n)),t}function nP(i){const e={},t=y(i,["sdkHttpResponse"]);t!=null&&w(e,["sdkHttpResponse"],t);const n=y(i,["name"]);n!=null&&w(e,["name"],n);const s=y(i,["done"]);s!=null&&w(e,["done"],s);const r=y(i,["error"]);return r!=null&&w(e,["error"],r),e}function iP(i){const e={},t=y(i,["sdkHttpResponse"]);t!=null&&w(e,["sdkHttpResponse"],t);const n=y(i,["name"]);n!=null&&w(e,["name"],n);const s=y(i,["done"]);s!=null&&w(e,["done"],s);const r=y(i,["error"]);return r!=null&&w(e,["error"],r),e}function sP(i,e){const t={},n=y(e,["contents"]);if(n!=null){let r=dy(i,n);Array.isArray(r)&&(r=r.map(a=>a)),w(t,["requests[]","request","content"],r)}const s=y(e,["config"]);return s!=null&&(w(t,["_self"],rP(s,t)),tL(t,{"requests[].*":"requests[].request.*"})),t}function rP(i,e){const t={},n=y(i,["taskType"]);e!==void 0&&n!=null&&w(e,["requests[]","taskType"],n);const s=y(i,["title"]);e!==void 0&&s!=null&&w(e,["requests[]","title"],s);const r=y(i,["outputDimensionality"]);if(e!==void 0&&r!=null&&w(e,["requests[]","outputDimensionality"],r),y(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(y(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function aP(i,e){const t={},n=y(e,["fileName"]);n!=null&&w(t,["file_name"],n);const s=y(e,["inlinedRequests"]);return s!=null&&w(t,["requests"],sP(i,s)),t}function oP(i){const e={};if(y(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=y(i,["fileUri"]);t!=null&&w(e,["fileUri"],t);const n=y(i,["mimeType"]);return n!=null&&w(e,["mimeType"],n),e}function lP(i){const e={},t=y(i,["id"]);t!=null&&w(e,["id"],t);const n=y(i,["args"]);n!=null&&w(e,["args"],n);const s=y(i,["name"]);if(s!=null&&w(e,["name"],s),y(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(y(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function uP(i){const e={},t=y(i,["mode"]);t!=null&&w(e,["mode"],t);const n=y(i,["allowedFunctionNames"]);if(n!=null&&w(e,["allowedFunctionNames"],n),y(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function cP(i,e,t){const n={},s=y(e,["systemInstruction"]);t!==void 0&&s!=null&&w(t,["systemInstruction"],rE($s(s)));const r=y(e,["temperature"]);r!=null&&w(n,["temperature"],r);const a=y(e,["topP"]);a!=null&&w(n,["topP"],a);const l=y(e,["topK"]);l!=null&&w(n,["topK"],l);const c=y(e,["candidateCount"]);c!=null&&w(n,["candidateCount"],c);const d=y(e,["maxOutputTokens"]);d!=null&&w(n,["maxOutputTokens"],d);const h=y(e,["stopSequences"]);h!=null&&w(n,["stopSequences"],h);const p=y(e,["responseLogprobs"]);p!=null&&w(n,["responseLogprobs"],p);const v=y(e,["logprobs"]);v!=null&&w(n,["logprobs"],v);const m=y(e,["presencePenalty"]);m!=null&&w(n,["presencePenalty"],m);const E=y(e,["frequencyPenalty"]);E!=null&&w(n,["frequencyPenalty"],E);const S=y(e,["seed"]);S!=null&&w(n,["seed"],S);const N=y(e,["responseMimeType"]);N!=null&&w(n,["responseMimeType"],N);const C=y(e,["responseSchema"]);C!=null&&w(n,["responseSchema"],hy(C));const P=y(e,["responseJsonSchema"]);if(P!=null&&w(n,["responseJsonSchema"],P),y(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(y(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const L=y(e,["safetySettings"]);if(t!==void 0&&L!=null){let H=L;Array.isArray(H)&&(H=H.map(se=>TP(se))),w(t,["safetySettings"],H)}const O=y(e,["tools"]);if(t!==void 0&&O!=null){let H=ch(O);Array.isArray(H)&&(H=H.map(se=>NP(uh(se)))),w(t,["tools"],H)}const q=y(e,["toolConfig"]);if(t!==void 0&&q!=null&&w(t,["toolConfig"],CP(q)),y(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const G=y(e,["cachedContent"]);t!==void 0&&G!=null&&w(t,["cachedContent"],Il(i,G));const W=y(e,["responseModalities"]);W!=null&&w(n,["responseModalities"],W);const K=y(e,["mediaResolution"]);K!=null&&w(n,["mediaResolution"],K);const j=y(e,["speechConfig"]);if(j!=null&&w(n,["speechConfig"],fy(j)),y(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ee=y(e,["thinkingConfig"]);ee!=null&&w(n,["thinkingConfig"],ee);const B=y(e,["imageConfig"]);return B!=null&&w(n,["imageConfig"],mP(B)),n}function dP(i){const e={},t=y(i,["sdkHttpResponse"]);t!=null&&w(e,["sdkHttpResponse"],t);const n=y(i,["candidates"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>WL(d))),w(e,["candidates"],c)}const s=y(i,["modelVersion"]);s!=null&&w(e,["modelVersion"],s);const r=y(i,["promptFeedback"]);r!=null&&w(e,["promptFeedback"],r);const a=y(i,["responseId"]);a!=null&&w(e,["responseId"],a);const l=y(i,["usageMetadata"]);return l!=null&&w(e,["usageMetadata"],l),e}function hP(i,e){const t={},n=y(e,["name"]);return n!=null&&w(t,["_url","name"],dh(i,n)),t}function fP(i,e){const t={},n=y(e,["name"]);return n!=null&&w(t,["_url","name"],dh(i,n)),t}function pP(i){const e={};if(y(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=y(i,["enableWidget"]);return t!=null&&w(e,["enableWidget"],t),e}function gP(i){const e={};if(y(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(y(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=y(i,["timeRangeFilter"]);return t!=null&&w(e,["timeRangeFilter"],t),e}function mP(i){const e={},t=y(i,["aspectRatio"]);t!=null&&w(e,["aspectRatio"],t);const n=y(i,["imageSize"]);if(n!=null&&w(e,["imageSize"],n),y(i,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(y(i,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function vP(i,e){const t={},n=y(e,["model"]);n!=null&&w(t,["request","model"],Tn(i,n));const s=y(e,["contents"]);if(s!=null){let l=Aa(s);Array.isArray(l)&&(l=l.map(c=>rE(c))),w(t,["request","contents"],l)}const r=y(e,["metadata"]);r!=null&&w(t,["metadata"],r);const a=y(e,["config"]);return a!=null&&w(t,["request","generationConfig"],cP(i,a,y(t,["request"],{}))),t}function yP(i){const e={},t=y(i,["response"]);t!=null&&w(e,["response"],dP(t));const n=y(i,["error"]);return n!=null&&w(e,["error"],n),e}function bP(i,e){const t={},n=y(i,["pageSize"]);e!==void 0&&n!=null&&w(e,["_query","pageSize"],n);const s=y(i,["pageToken"]);if(e!==void 0&&s!=null&&w(e,["_query","pageToken"],s),y(i,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function wP(i,e){const t={},n=y(i,["pageSize"]);e!==void 0&&n!=null&&w(e,["_query","pageSize"],n);const s=y(i,["pageToken"]);e!==void 0&&s!=null&&w(e,["_query","pageToken"],s);const r=y(i,["filter"]);return e!==void 0&&r!=null&&w(e,["_query","filter"],r),t}function xP(i){const e={},t=y(i,["config"]);return t!=null&&bP(t,e),e}function _P(i){const e={},t=y(i,["config"]);return t!=null&&wP(t,e),e}function AP(i){const e={},t=y(i,["sdkHttpResponse"]);t!=null&&w(e,["sdkHttpResponse"],t);const n=y(i,["nextPageToken"]);n!=null&&w(e,["nextPageToken"],n);const s=y(i,["operations"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>A0(a))),w(e,["batchJobs"],r)}return e}function SP(i){const e={},t=y(i,["sdkHttpResponse"]);t!=null&&w(e,["sdkHttpResponse"],t);const n=y(i,["nextPageToken"]);n!=null&&w(e,["nextPageToken"],n);const s=y(i,["batchPredictionJobs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>dv(a))),w(e,["batchJobs"],r)}return e}function EP(i){const e={},t=y(i,["mediaResolution"]);t!=null&&w(e,["mediaResolution"],t);const n=y(i,["codeExecutionResult"]);n!=null&&w(e,["codeExecutionResult"],n);const s=y(i,["executableCode"]);s!=null&&w(e,["executableCode"],s);const r=y(i,["fileData"]);r!=null&&w(e,["fileData"],oP(r));const a=y(i,["functionCall"]);a!=null&&w(e,["functionCall"],lP(a));const l=y(i,["functionResponse"]);l!=null&&w(e,["functionResponse"],l);const c=y(i,["inlineData"]);c!=null&&w(e,["inlineData"],VL(c));const d=y(i,["text"]);d!=null&&w(e,["text"],d);const h=y(i,["thought"]);h!=null&&w(e,["thought"],h);const p=y(i,["thoughtSignature"]);p!=null&&w(e,["thoughtSignature"],p);const v=y(i,["videoMetadata"]);return v!=null&&w(e,["videoMetadata"],v),e}function TP(i){const e={},t=y(i,["category"]);if(t!=null&&w(e,["category"],t),y(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=y(i,["threshold"]);return n!=null&&w(e,["threshold"],n),e}function CP(i){const e={},t=y(i,["functionCallingConfig"]);t!=null&&w(e,["functionCallingConfig"],uP(t));const n=y(i,["retrievalConfig"]);return n!=null&&w(e,["retrievalConfig"],n),e}function NP(i){const e={},t=y(i,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(p=>p)),w(e,["functionDeclarations"],h)}if(y(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=y(i,["googleSearchRetrieval"]);n!=null&&w(e,["googleSearchRetrieval"],n);const s=y(i,["computerUse"]);s!=null&&w(e,["computerUse"],s);const r=y(i,["fileSearch"]);r!=null&&w(e,["fileSearch"],r);const a=y(i,["codeExecution"]);if(a!=null&&w(e,["codeExecution"],a),y(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=y(i,["googleMaps"]);l!=null&&w(e,["googleMaps"],pP(l));const c=y(i,["googleSearch"]);c!=null&&w(e,["googleSearch"],gP(c));const d=y(i,["urlContext"]);return d!=null&&w(e,["urlContext"],d),e}var Rl;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents",i.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",i.PAGED_ITEM_DOCUMENTS="documents"})(Rl||(Rl={}));class Nc{constructor(e,t,n,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,n,s)}init(e,t,n){var s,r;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t?.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!n||Object.keys(n).length===0?a={config:{}}:typeof n=="object"?a=Object.assign({},n):a=n,a.config&&(a.config.pageToken=t.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(r=(s=a.config)===null||s===void 0?void 0:s.pageSize)!==null&&r!==void 0?r:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}class kP extends Pl{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new Nc(Rl.PAGED_ITEM_BATCH_JOBS,n=>this.listInternal(n),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=mx(this.apiClient,e),n=t._url,s=et("{model}:batchGenerateContent",n),l=t.batch.inputConfig.requests,c=l.requests,d=[];for(const h of c){const p=Object.assign({},h);if(p.systemInstruction){const v=p.systemInstruction;delete p.systemInstruction;const m=p.request;m.systemInstruction=v,p.request=m}d.push(p)}return l.requests=d,delete t.config,delete t._url,delete t._query,{path:s,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const n=t?Object.assign({},t):{},s=Date.now().toString();if(n.displayName||(n.displayName=`genaiBatchJob_${s}`),n.dest===void 0){const r=this.getGcsUri(e),a=this.getBigqueryUri(e);if(r)r.endsWith(".jsonl")?n.dest=`${r.slice(0,-6)}/dest`:n.dest=`${r}_dest_${s}`;else if(a)n.dest=`${a}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return n}async createInternal(e){var t,n,s,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=XL(this.apiClient,e);return l=et("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),a.then(h=>dv(h))}else{const d=mx(this.apiClient,e);return l=et("{model}:batchGenerateContent",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),a.then(h=>A0(h))}}async createEmbeddingsInternal(e){var t,n;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=QL(this.apiClient,e);return r=et("{model}:asyncBatchEmbedContent",l._url),a=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),s.then(c=>A0(c))}}async get(e){var t,n,s,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=fP(this.apiClient,e);return l=et("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),a.then(h=>dv(h))}else{const d=hP(this.apiClient,e);return l=et("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),a.then(h=>A0(h))}}async cancel(e){var t,n,s,r;let a="",l={};if(this.apiClient.isVertexAI()){const c=$L(this.apiClient,e);a=et("batchPredictionJobs/{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}else{const c=GL(this.apiClient,e);a=et("batches/{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var t,n,s,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=_P(e);return l=et("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),a.then(h=>{const p=SP(h),v=new hx;return Object.assign(v,p),v})}else{const d=xP(e);return l=et("batches",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),a.then(h=>{const p=AP(h),v=new hx;return Object.assign(v,p),v})}}async delete(e){var t,n,s,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=tP(this.apiClient,e);return l=et("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),a.then(h=>iP(h))}else{const d=eP(this.apiClient,e);return l=et("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),a.then(h=>nP(h))}}}function RP(i){const e={},t=y(i,["data"]);if(t!=null&&w(e,["data"],t),y(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=y(i,["mimeType"]);return n!=null&&w(e,["mimeType"],n),e}function vx(i){const e={},t=y(i,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>QP(r))),w(e,["parts"],s)}const n=y(i,["role"]);return n!=null&&w(e,["role"],n),e}function LP(i,e){const t={},n=y(i,["ttl"]);e!==void 0&&n!=null&&w(e,["ttl"],n);const s=y(i,["expireTime"]);e!==void 0&&s!=null&&w(e,["expireTime"],s);const r=y(i,["displayName"]);e!==void 0&&r!=null&&w(e,["displayName"],r);const a=y(i,["contents"]);if(e!==void 0&&a!=null){let h=Aa(a);Array.isArray(h)&&(h=h.map(p=>vx(p))),w(e,["contents"],h)}const l=y(i,["systemInstruction"]);e!==void 0&&l!=null&&w(e,["systemInstruction"],vx($s(l)));const c=y(i,["tools"]);if(e!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(p=>tI(p))),w(e,["tools"],h)}const d=y(i,["toolConfig"]);if(e!==void 0&&d!=null&&w(e,["toolConfig"],eI(d)),y(i,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function PP(i,e){const t={},n=y(i,["ttl"]);e!==void 0&&n!=null&&w(e,["ttl"],n);const s=y(i,["expireTime"]);e!==void 0&&s!=null&&w(e,["expireTime"],s);const r=y(i,["displayName"]);e!==void 0&&r!=null&&w(e,["displayName"],r);const a=y(i,["contents"]);if(e!==void 0&&a!=null){let p=Aa(a);Array.isArray(p)&&(p=p.map(v=>v)),w(e,["contents"],p)}const l=y(i,["systemInstruction"]);e!==void 0&&l!=null&&w(e,["systemInstruction"],$s(l));const c=y(i,["tools"]);if(e!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(v=>nI(v))),w(e,["tools"],p)}const d=y(i,["toolConfig"]);e!==void 0&&d!=null&&w(e,["toolConfig"],d);const h=y(i,["kmsKeyName"]);return e!==void 0&&h!=null&&w(e,["encryption_spec","kmsKeyName"],h),t}function IP(i,e){const t={},n=y(e,["model"]);n!=null&&w(t,["model"],WS(i,n));const s=y(e,["config"]);return s!=null&&LP(s,t),t}function MP(i,e){const t={},n=y(e,["model"]);n!=null&&w(t,["model"],WS(i,n));const s=y(e,["config"]);return s!=null&&PP(s,t),t}function DP(i,e){const t={},n=y(e,["name"]);return n!=null&&w(t,["_url","name"],Il(i,n)),t}function OP(i,e){const t={},n=y(e,["name"]);return n!=null&&w(t,["_url","name"],Il(i,n)),t}function BP(i){const e={},t=y(i,["sdkHttpResponse"]);return t!=null&&w(e,["sdkHttpResponse"],t),e}function FP(i){const e={},t=y(i,["sdkHttpResponse"]);return t!=null&&w(e,["sdkHttpResponse"],t),e}function UP(i){const e={};if(y(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=y(i,["fileUri"]);t!=null&&w(e,["fileUri"],t);const n=y(i,["mimeType"]);return n!=null&&w(e,["mimeType"],n),e}function jP(i){const e={},t=y(i,["id"]);t!=null&&w(e,["id"],t);const n=y(i,["args"]);n!=null&&w(e,["args"],n);const s=y(i,["name"]);if(s!=null&&w(e,["name"],s),y(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(y(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function qP(i){const e={},t=y(i,["mode"]);t!=null&&w(e,["mode"],t);const n=y(i,["allowedFunctionNames"]);if(n!=null&&w(e,["allowedFunctionNames"],n),y(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function HP(i){const e={};if(y(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=y(i,["description"]);t!=null&&w(e,["description"],t);const n=y(i,["name"]);n!=null&&w(e,["name"],n);const s=y(i,["parameters"]);s!=null&&w(e,["parameters"],s);const r=y(i,["parametersJsonSchema"]);r!=null&&w(e,["parametersJsonSchema"],r);const a=y(i,["response"]);a!=null&&w(e,["response"],a);const l=y(i,["responseJsonSchema"]);return l!=null&&w(e,["responseJsonSchema"],l),e}function zP(i,e){const t={},n=y(e,["name"]);return n!=null&&w(t,["_url","name"],Il(i,n)),t}function VP(i,e){const t={},n=y(e,["name"]);return n!=null&&w(t,["_url","name"],Il(i,n)),t}function GP(i){const e={};if(y(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=y(i,["enableWidget"]);return t!=null&&w(e,["enableWidget"],t),e}function $P(i){const e={};if(y(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(y(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=y(i,["timeRangeFilter"]);return t!=null&&w(e,["timeRangeFilter"],t),e}function WP(i,e){const t={},n=y(i,["pageSize"]);e!==void 0&&n!=null&&w(e,["_query","pageSize"],n);const s=y(i,["pageToken"]);return e!==void 0&&s!=null&&w(e,["_query","pageToken"],s),t}function YP(i,e){const t={},n=y(i,["pageSize"]);e!==void 0&&n!=null&&w(e,["_query","pageSize"],n);const s=y(i,["pageToken"]);return e!==void 0&&s!=null&&w(e,["_query","pageToken"],s),t}function KP(i){const e={},t=y(i,["config"]);return t!=null&&WP(t,e),e}function JP(i){const e={},t=y(i,["config"]);return t!=null&&YP(t,e),e}function XP(i){const e={},t=y(i,["sdkHttpResponse"]);t!=null&&w(e,["sdkHttpResponse"],t);const n=y(i,["nextPageToken"]);n!=null&&w(e,["nextPageToken"],n);const s=y(i,["cachedContents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>a)),w(e,["cachedContents"],r)}return e}function ZP(i){const e={},t=y(i,["sdkHttpResponse"]);t!=null&&w(e,["sdkHttpResponse"],t);const n=y(i,["nextPageToken"]);n!=null&&w(e,["nextPageToken"],n);const s=y(i,["cachedContents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>a)),w(e,["cachedContents"],r)}return e}function QP(i){const e={},t=y(i,["mediaResolution"]);t!=null&&w(e,["mediaResolution"],t);const n=y(i,["codeExecutionResult"]);n!=null&&w(e,["codeExecutionResult"],n);const s=y(i,["executableCode"]);s!=null&&w(e,["executableCode"],s);const r=y(i,["fileData"]);r!=null&&w(e,["fileData"],UP(r));const a=y(i,["functionCall"]);a!=null&&w(e,["functionCall"],jP(a));const l=y(i,["functionResponse"]);l!=null&&w(e,["functionResponse"],l);const c=y(i,["inlineData"]);c!=null&&w(e,["inlineData"],RP(c));const d=y(i,["text"]);d!=null&&w(e,["text"],d);const h=y(i,["thought"]);h!=null&&w(e,["thought"],h);const p=y(i,["thoughtSignature"]);p!=null&&w(e,["thoughtSignature"],p);const v=y(i,["videoMetadata"]);return v!=null&&w(e,["videoMetadata"],v),e}function eI(i){const e={},t=y(i,["functionCallingConfig"]);t!=null&&w(e,["functionCallingConfig"],qP(t));const n=y(i,["retrievalConfig"]);return n!=null&&w(e,["retrievalConfig"],n),e}function tI(i){const e={},t=y(i,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(p=>p)),w(e,["functionDeclarations"],h)}if(y(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=y(i,["googleSearchRetrieval"]);n!=null&&w(e,["googleSearchRetrieval"],n);const s=y(i,["computerUse"]);s!=null&&w(e,["computerUse"],s);const r=y(i,["fileSearch"]);r!=null&&w(e,["fileSearch"],r);const a=y(i,["codeExecution"]);if(a!=null&&w(e,["codeExecution"],a),y(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=y(i,["googleMaps"]);l!=null&&w(e,["googleMaps"],GP(l));const c=y(i,["googleSearch"]);c!=null&&w(e,["googleSearch"],$P(c));const d=y(i,["urlContext"]);return d!=null&&w(e,["urlContext"],d),e}function nI(i){const e={},t=y(i,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(v=>HP(v))),w(e,["functionDeclarations"],p)}const n=y(i,["retrieval"]);n!=null&&w(e,["retrieval"],n);const s=y(i,["googleSearchRetrieval"]);s!=null&&w(e,["googleSearchRetrieval"],s);const r=y(i,["computerUse"]);if(r!=null&&w(e,["computerUse"],r),y(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=y(i,["codeExecution"]);a!=null&&w(e,["codeExecution"],a);const l=y(i,["enterpriseWebSearch"]);l!=null&&w(e,["enterpriseWebSearch"],l);const c=y(i,["googleMaps"]);c!=null&&w(e,["googleMaps"],c);const d=y(i,["googleSearch"]);d!=null&&w(e,["googleSearch"],d);const h=y(i,["urlContext"]);return h!=null&&w(e,["urlContext"],h),e}function iI(i,e){const t={},n=y(i,["ttl"]);e!==void 0&&n!=null&&w(e,["ttl"],n);const s=y(i,["expireTime"]);return e!==void 0&&s!=null&&w(e,["expireTime"],s),t}function sI(i,e){const t={},n=y(i,["ttl"]);e!==void 0&&n!=null&&w(e,["ttl"],n);const s=y(i,["expireTime"]);return e!==void 0&&s!=null&&w(e,["expireTime"],s),t}function rI(i,e){const t={},n=y(e,["name"]);n!=null&&w(t,["_url","name"],Il(i,n));const s=y(e,["config"]);return s!=null&&iI(s,t),t}function aI(i,e){const t={},n=y(e,["name"]);n!=null&&w(t,["_url","name"],Il(i,n));const s=y(e,["config"]);return s!=null&&sI(s,t),t}class oI extends Pl{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Nc(Rl.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(t),t)}async create(e){var t,n,s,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=MP(this.apiClient,e);return l=et("cachedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),a.then(h=>h)}else{const d=IP(this.apiClient,e);return l=et("cachedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),a.then(h=>h)}}async get(e){var t,n,s,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=VP(this.apiClient,e);return l=et("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),a.then(h=>h)}else{const d=zP(this.apiClient,e);return l=et("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),a.then(h=>h)}}async delete(e){var t,n,s,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=OP(this.apiClient,e);return l=et("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),a.then(h=>{const p=FP(h),v=new cx;return Object.assign(v,p),v})}else{const d=DP(this.apiClient,e);return l=et("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),a.then(h=>{const p=BP(h),v=new cx;return Object.assign(v,p),v})}}async update(e){var t,n,s,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=aI(this.apiClient,e);return l=et("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),a.then(h=>h)}else{const d=rI(this.apiClient,e);return l=et("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),a.then(h=>h)}}async listInternal(e){var t,n,s,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=JP(e);return l=et("cachedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),a.then(h=>{const p=ZP(h),v=new dx;return Object.assign(v,p),v})}else{const d=KP(e);return l=et("cachedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),a.then(h=>{const p=XP(h),v=new dx;return Object.assign(v,p),v})}}}function yx(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],n=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ai(i){return this instanceof ai?(this.v=i,this):new ai(i)}function Kd(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(i,e||[]),s,r=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",a),s[Symbol.asyncIterator]=function(){return this},s;function a(m){return function(E){return Promise.resolve(E).then(m,p)}}function l(m,E){n[m]&&(s[m]=function(S){return new Promise(function(N,C){r.push([m,S,N,C])>1||c(m,S)})},E&&(s[m]=E(s[m])))}function c(m,E){try{d(n[m](E))}catch(S){v(r[0][3],S)}}function d(m){m.value instanceof ai?Promise.resolve(m.value.v).then(h,p):v(r[0][2],m)}function h(m){c("next",m)}function p(m){c("throw",m)}function v(m,E){m(E),r.shift(),r.length&&c(r[0][0],r[0][1])}}function vf(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof yx=="function"?yx(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=i[r]&&function(a){return new Promise(function(l,c){a=i[r](a),s(l,c,a.done,a.value)})}}function s(r,a,l,c){Promise.resolve(c).then(function(d){r({value:d,done:l})},a)}}function lI(i){var e;if(i.candidates==null||i.candidates.length===0)return!1;const t=(e=i.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:aE(t)}function aE(i){if(i.parts===void 0||i.parts.length===0)return!1;for(const e of i.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function uI(i){if(i.length!==0){for(const e of i)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function bx(i){if(i===void 0||i.length===0)return[];const e=[],t=i.length;let n=0;for(;n<t;)if(i[n].role==="user")e.push(i[n]),n++;else{const s=[];let r=!0;for(;n<t&&i[n].role==="model";)s.push(i[n]),r&&!aE(i[n])&&(r=!1),n++;r?e.push(...s):e.pop()}return e}class cI{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new dI(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class dI{constructor(e,t,n,s={},r=[]){this.apiClient=e,this.modelsModule=t,this.model=n,this.config=s,this.history=r,this.sendPromise=Promise.resolve(),uI(r)}async sendMessage(e){var t;await this.sendPromise;const n=$s(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var r,a,l;const c=await s,d=(a=(r=c.candidates)===null||r===void 0?void 0:r[0])===null||a===void 0?void 0:a.content,h=c.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let v=[];h!=null&&(v=(l=h.slice(p))!==null&&l!==void 0?l:[]);const m=d?[d]:[];this.recordHistory(n,m,v)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var t;await this.sendPromise;const n=$s(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const r=await s;return this.processStreamResponse(r,n)}getHistory(e=!1){const t=e?bx(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var n,s;return Kd(this,arguments,function*(){var a,l,c,d;const h=[];try{for(var p=!0,v=vf(e),m;m=yield ai(v.next()),a=m.done,!a;p=!0){d=m.value,p=!1;const E=d;if(lI(E)){const S=(s=(n=E.candidates)===null||n===void 0?void 0:n[0])===null||s===void 0?void 0:s.content;S!==void 0&&h.push(S)}yield yield ai(E)}}catch(E){l={error:E}}finally{try{!p&&!a&&(c=v.return)&&(yield ai(c.call(v)))}finally{if(l)throw l.error}}this.recordHistory(t,h)})}recordHistory(e,t,n){let s=[];t.length>0&&t.every(r=>r.role!==void 0)?s=t:s.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...bx(n)):this.history.push(e),this.history.push(...s)}}class dg extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,dg.prototype)}}function hI(i){const e={},t=y(i,["file"]);return t!=null&&w(e,["file"],t),e}function fI(i){const e={},t=y(i,["sdkHttpResponse"]);return t!=null&&w(e,["sdkHttpResponse"],t),e}function pI(i){const e={},t=y(i,["name"]);return t!=null&&w(e,["_url","file"],QS(t)),e}function gI(i){const e={},t=y(i,["sdkHttpResponse"]);return t!=null&&w(e,["sdkHttpResponse"],t),e}function mI(i){const e={},t=y(i,["name"]);return t!=null&&w(e,["_url","file"],QS(t)),e}function vI(i,e){const t={},n=y(i,["pageSize"]);e!==void 0&&n!=null&&w(e,["_query","pageSize"],n);const s=y(i,["pageToken"]);return e!==void 0&&s!=null&&w(e,["_query","pageToken"],s),t}function yI(i){const e={},t=y(i,["config"]);return t!=null&&vI(t,e),e}function bI(i){const e={},t=y(i,["sdkHttpResponse"]);t!=null&&w(e,["sdkHttpResponse"],t);const n=y(i,["nextPageToken"]);n!=null&&w(e,["nextPageToken"],n);const s=y(i,["files"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>a)),w(e,["files"],r)}return e}class wI extends Pl{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Nc(Rl.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,n;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=yI(e);return r=et("files",l._url),a=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),s.then(c=>{const d=bI(c),h=new SL;return Object.assign(h,d),h})}}async createInternal(e){var t,n;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=hI(e);return r=et("upload/v1beta/files",l._url),a=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),s.then(c=>{const d=fI(c),h=new EL;return Object.assign(h,d),h})}}async get(e){var t,n;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=mI(e);return r=et("files/{file}",l._url),a=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),s.then(c=>c)}}async delete(e){var t,n;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=pI(e);return r=et("files/{file}",l._url),a=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),s.then(c=>{const d=gI(c),h=new TL;return Object.assign(h,d),h})}}}function S0(i){const e={},t=y(i,["data"]);if(t!=null&&w(e,["data"],t),y(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=y(i,["mimeType"]);return n!=null&&w(e,["mimeType"],n),e}function xI(i){const e={},t=y(i,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>BI(r))),w(e,["parts"],s)}const n=y(i,["role"]);return n!=null&&w(e,["role"],n),e}function _I(i){const e={};if(y(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=y(i,["fileUri"]);t!=null&&w(e,["fileUri"],t);const n=y(i,["mimeType"]);return n!=null&&w(e,["mimeType"],n),e}function AI(i){const e={},t=y(i,["id"]);t!=null&&w(e,["id"],t);const n=y(i,["args"]);n!=null&&w(e,["args"],n);const s=y(i,["name"]);if(s!=null&&w(e,["name"],s),y(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(y(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function SI(i){const e={};if(y(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=y(i,["description"]);t!=null&&w(e,["description"],t);const n=y(i,["name"]);n!=null&&w(e,["name"],n);const s=y(i,["parameters"]);s!=null&&w(e,["parameters"],s);const r=y(i,["parametersJsonSchema"]);r!=null&&w(e,["parametersJsonSchema"],r);const a=y(i,["response"]);a!=null&&w(e,["response"],a);const l=y(i,["responseJsonSchema"]);return l!=null&&w(e,["responseJsonSchema"],l),e}function EI(i){const e={},t=y(i,["modelSelectionConfig"]);t!=null&&w(e,["modelConfig"],t);const n=y(i,["responseJsonSchema"]);n!=null&&w(e,["responseJsonSchema"],n);const s=y(i,["audioTimestamp"]);s!=null&&w(e,["audioTimestamp"],s);const r=y(i,["candidateCount"]);r!=null&&w(e,["candidateCount"],r);const a=y(i,["enableAffectiveDialog"]);a!=null&&w(e,["enableAffectiveDialog"],a);const l=y(i,["frequencyPenalty"]);l!=null&&w(e,["frequencyPenalty"],l);const c=y(i,["logprobs"]);c!=null&&w(e,["logprobs"],c);const d=y(i,["maxOutputTokens"]);d!=null&&w(e,["maxOutputTokens"],d);const h=y(i,["mediaResolution"]);h!=null&&w(e,["mediaResolution"],h);const p=y(i,["presencePenalty"]);p!=null&&w(e,["presencePenalty"],p);const v=y(i,["responseLogprobs"]);v!=null&&w(e,["responseLogprobs"],v);const m=y(i,["responseMimeType"]);m!=null&&w(e,["responseMimeType"],m);const E=y(i,["responseModalities"]);E!=null&&w(e,["responseModalities"],E);const S=y(i,["responseSchema"]);S!=null&&w(e,["responseSchema"],S);const N=y(i,["routingConfig"]);N!=null&&w(e,["routingConfig"],N);const C=y(i,["seed"]);C!=null&&w(e,["seed"],C);const P=y(i,["speechConfig"]);P!=null&&w(e,["speechConfig"],oE(P));const L=y(i,["stopSequences"]);L!=null&&w(e,["stopSequences"],L);const O=y(i,["temperature"]);O!=null&&w(e,["temperature"],O);const q=y(i,["thinkingConfig"]);q!=null&&w(e,["thinkingConfig"],q);const G=y(i,["topK"]);G!=null&&w(e,["topK"],G);const W=y(i,["topP"]);if(W!=null&&w(e,["topP"],W),y(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function TI(i){const e={};if(y(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=y(i,["enableWidget"]);return t!=null&&w(e,["enableWidget"],t),e}function CI(i){const e={};if(y(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(y(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=y(i,["timeRangeFilter"]);return t!=null&&w(e,["timeRangeFilter"],t),e}function NI(i,e){const t={},n=y(i,["generationConfig"]);e!==void 0&&n!=null&&w(e,["setup","generationConfig"],n);const s=y(i,["responseModalities"]);e!==void 0&&s!=null&&w(e,["setup","generationConfig","responseModalities"],s);const r=y(i,["temperature"]);e!==void 0&&r!=null&&w(e,["setup","generationConfig","temperature"],r);const a=y(i,["topP"]);e!==void 0&&a!=null&&w(e,["setup","generationConfig","topP"],a);const l=y(i,["topK"]);e!==void 0&&l!=null&&w(e,["setup","generationConfig","topK"],l);const c=y(i,["maxOutputTokens"]);e!==void 0&&c!=null&&w(e,["setup","generationConfig","maxOutputTokens"],c);const d=y(i,["mediaResolution"]);e!==void 0&&d!=null&&w(e,["setup","generationConfig","mediaResolution"],d);const h=y(i,["seed"]);e!==void 0&&h!=null&&w(e,["setup","generationConfig","seed"],h);const p=y(i,["speechConfig"]);e!==void 0&&p!=null&&w(e,["setup","generationConfig","speechConfig"],py(p));const v=y(i,["thinkingConfig"]);e!==void 0&&v!=null&&w(e,["setup","generationConfig","thinkingConfig"],v);const m=y(i,["enableAffectiveDialog"]);e!==void 0&&m!=null&&w(e,["setup","generationConfig","enableAffectiveDialog"],m);const E=y(i,["systemInstruction"]);e!==void 0&&E!=null&&w(e,["setup","systemInstruction"],xI($s(E)));const S=y(i,["tools"]);if(e!==void 0&&S!=null){let G=ch(S);Array.isArray(G)&&(G=G.map(W=>UI(uh(W)))),w(e,["setup","tools"],G)}const N=y(i,["sessionResumption"]);e!==void 0&&N!=null&&w(e,["setup","sessionResumption"],FI(N));const C=y(i,["inputAudioTranscription"]);e!==void 0&&C!=null&&w(e,["setup","inputAudioTranscription"],C);const P=y(i,["outputAudioTranscription"]);e!==void 0&&P!=null&&w(e,["setup","outputAudioTranscription"],P);const L=y(i,["realtimeInputConfig"]);e!==void 0&&L!=null&&w(e,["setup","realtimeInputConfig"],L);const O=y(i,["contextWindowCompression"]);e!==void 0&&O!=null&&w(e,["setup","contextWindowCompression"],O);const q=y(i,["proactivity"]);return e!==void 0&&q!=null&&w(e,["setup","proactivity"],q),t}function kI(i,e){const t={},n=y(i,["generationConfig"]);e!==void 0&&n!=null&&w(e,["setup","generationConfig"],EI(n));const s=y(i,["responseModalities"]);e!==void 0&&s!=null&&w(e,["setup","generationConfig","responseModalities"],s);const r=y(i,["temperature"]);e!==void 0&&r!=null&&w(e,["setup","generationConfig","temperature"],r);const a=y(i,["topP"]);e!==void 0&&a!=null&&w(e,["setup","generationConfig","topP"],a);const l=y(i,["topK"]);e!==void 0&&l!=null&&w(e,["setup","generationConfig","topK"],l);const c=y(i,["maxOutputTokens"]);e!==void 0&&c!=null&&w(e,["setup","generationConfig","maxOutputTokens"],c);const d=y(i,["mediaResolution"]);e!==void 0&&d!=null&&w(e,["setup","generationConfig","mediaResolution"],d);const h=y(i,["seed"]);e!==void 0&&h!=null&&w(e,["setup","generationConfig","seed"],h);const p=y(i,["speechConfig"]);e!==void 0&&p!=null&&w(e,["setup","generationConfig","speechConfig"],oE(py(p)));const v=y(i,["thinkingConfig"]);e!==void 0&&v!=null&&w(e,["setup","generationConfig","thinkingConfig"],v);const m=y(i,["enableAffectiveDialog"]);e!==void 0&&m!=null&&w(e,["setup","generationConfig","enableAffectiveDialog"],m);const E=y(i,["systemInstruction"]);e!==void 0&&E!=null&&w(e,["setup","systemInstruction"],$s(E));const S=y(i,["tools"]);if(e!==void 0&&S!=null){let G=ch(S);Array.isArray(G)&&(G=G.map(W=>jI(uh(W)))),w(e,["setup","tools"],G)}const N=y(i,["sessionResumption"]);e!==void 0&&N!=null&&w(e,["setup","sessionResumption"],N);const C=y(i,["inputAudioTranscription"]);e!==void 0&&C!=null&&w(e,["setup","inputAudioTranscription"],C);const P=y(i,["outputAudioTranscription"]);e!==void 0&&P!=null&&w(e,["setup","outputAudioTranscription"],P);const L=y(i,["realtimeInputConfig"]);e!==void 0&&L!=null&&w(e,["setup","realtimeInputConfig"],L);const O=y(i,["contextWindowCompression"]);e!==void 0&&O!=null&&w(e,["setup","contextWindowCompression"],O);const q=y(i,["proactivity"]);return e!==void 0&&q!=null&&w(e,["setup","proactivity"],q),t}function RI(i,e){const t={},n=y(e,["model"]);n!=null&&w(t,["setup","model"],Tn(i,n));const s=y(e,["config"]);return s!=null&&w(t,["config"],NI(s,t)),t}function LI(i,e){const t={},n=y(e,["model"]);n!=null&&w(t,["setup","model"],Tn(i,n));const s=y(e,["config"]);return s!=null&&w(t,["config"],kI(s,t)),t}function PI(i){const e={},t=y(i,["musicGenerationConfig"]);return t!=null&&w(e,["musicGenerationConfig"],t),e}function II(i){const e={},t=y(i,["weightedPrompts"]);if(t!=null){let n=t;Array.isArray(n)&&(n=n.map(s=>s)),w(e,["weightedPrompts"],n)}return e}function MI(i){const e={},t=y(i,["media"]);if(t!=null){let d=YS(t);Array.isArray(d)&&(d=d.map(h=>S0(h))),w(e,["mediaChunks"],d)}const n=y(i,["audio"]);n!=null&&w(e,["audio"],S0(JS(n)));const s=y(i,["audioStreamEnd"]);s!=null&&w(e,["audioStreamEnd"],s);const r=y(i,["video"]);r!=null&&w(e,["video"],S0(KS(r)));const a=y(i,["text"]);a!=null&&w(e,["text"],a);const l=y(i,["activityStart"]);l!=null&&w(e,["activityStart"],l);const c=y(i,["activityEnd"]);return c!=null&&w(e,["activityEnd"],c),e}function DI(i){const e={},t=y(i,["media"]);if(t!=null){let d=YS(t);Array.isArray(d)&&(d=d.map(h=>h)),w(e,["mediaChunks"],d)}const n=y(i,["audio"]);n!=null&&w(e,["audio"],JS(n));const s=y(i,["audioStreamEnd"]);s!=null&&w(e,["audioStreamEnd"],s);const r=y(i,["video"]);r!=null&&w(e,["video"],KS(r));const a=y(i,["text"]);a!=null&&w(e,["text"],a);const l=y(i,["activityStart"]);l!=null&&w(e,["activityStart"],l);const c=y(i,["activityEnd"]);return c!=null&&w(e,["activityEnd"],c),e}function OI(i){const e={},t=y(i,["setupComplete"]);t!=null&&w(e,["setupComplete"],t);const n=y(i,["serverContent"]);n!=null&&w(e,["serverContent"],n);const s=y(i,["toolCall"]);s!=null&&w(e,["toolCall"],s);const r=y(i,["toolCallCancellation"]);r!=null&&w(e,["toolCallCancellation"],r);const a=y(i,["usageMetadata"]);a!=null&&w(e,["usageMetadata"],qI(a));const l=y(i,["goAway"]);l!=null&&w(e,["goAway"],l);const c=y(i,["sessionResumptionUpdate"]);return c!=null&&w(e,["sessionResumptionUpdate"],c),e}function BI(i){const e={},t=y(i,["mediaResolution"]);t!=null&&w(e,["mediaResolution"],t);const n=y(i,["codeExecutionResult"]);n!=null&&w(e,["codeExecutionResult"],n);const s=y(i,["executableCode"]);s!=null&&w(e,["executableCode"],s);const r=y(i,["fileData"]);r!=null&&w(e,["fileData"],_I(r));const a=y(i,["functionCall"]);a!=null&&w(e,["functionCall"],AI(a));const l=y(i,["functionResponse"]);l!=null&&w(e,["functionResponse"],l);const c=y(i,["inlineData"]);c!=null&&w(e,["inlineData"],S0(c));const d=y(i,["text"]);d!=null&&w(e,["text"],d);const h=y(i,["thought"]);h!=null&&w(e,["thought"],h);const p=y(i,["thoughtSignature"]);p!=null&&w(e,["thoughtSignature"],p);const v=y(i,["videoMetadata"]);return v!=null&&w(e,["videoMetadata"],v),e}function FI(i){const e={},t=y(i,["handle"]);if(t!=null&&w(e,["handle"],t),y(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function oE(i){const e={},t=y(i,["languageCode"]);t!=null&&w(e,["languageCode"],t);const n=y(i,["voiceConfig"]);if(n!=null&&w(e,["voiceConfig"],n),y(i,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function UI(i){const e={},t=y(i,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(p=>p)),w(e,["functionDeclarations"],h)}if(y(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=y(i,["googleSearchRetrieval"]);n!=null&&w(e,["googleSearchRetrieval"],n);const s=y(i,["computerUse"]);s!=null&&w(e,["computerUse"],s);const r=y(i,["fileSearch"]);r!=null&&w(e,["fileSearch"],r);const a=y(i,["codeExecution"]);if(a!=null&&w(e,["codeExecution"],a),y(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=y(i,["googleMaps"]);l!=null&&w(e,["googleMaps"],TI(l));const c=y(i,["googleSearch"]);c!=null&&w(e,["googleSearch"],CI(c));const d=y(i,["urlContext"]);return d!=null&&w(e,["urlContext"],d),e}function jI(i){const e={},t=y(i,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(v=>SI(v))),w(e,["functionDeclarations"],p)}const n=y(i,["retrieval"]);n!=null&&w(e,["retrieval"],n);const s=y(i,["googleSearchRetrieval"]);s!=null&&w(e,["googleSearchRetrieval"],s);const r=y(i,["computerUse"]);if(r!=null&&w(e,["computerUse"],r),y(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=y(i,["codeExecution"]);a!=null&&w(e,["codeExecution"],a);const l=y(i,["enterpriseWebSearch"]);l!=null&&w(e,["enterpriseWebSearch"],l);const c=y(i,["googleMaps"]);c!=null&&w(e,["googleMaps"],c);const d=y(i,["googleSearch"]);d!=null&&w(e,["googleSearch"],d);const h=y(i,["urlContext"]);return h!=null&&w(e,["urlContext"],h),e}function qI(i){const e={},t=y(i,["promptTokenCount"]);t!=null&&w(e,["promptTokenCount"],t);const n=y(i,["cachedContentTokenCount"]);n!=null&&w(e,["cachedContentTokenCount"],n);const s=y(i,["candidatesTokenCount"]);s!=null&&w(e,["responseTokenCount"],s);const r=y(i,["toolUsePromptTokenCount"]);r!=null&&w(e,["toolUsePromptTokenCount"],r);const a=y(i,["thoughtsTokenCount"]);a!=null&&w(e,["thoughtsTokenCount"],a);const l=y(i,["totalTokenCount"]);l!=null&&w(e,["totalTokenCount"],l);const c=y(i,["promptTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(E=>E)),w(e,["promptTokensDetails"],m)}const d=y(i,["cacheTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(E=>E)),w(e,["cacheTokensDetails"],m)}const h=y(i,["candidatesTokensDetails"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(E=>E)),w(e,["responseTokensDetails"],m)}const p=y(i,["toolUsePromptTokensDetails"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(E=>E)),w(e,["toolUsePromptTokensDetails"],m)}const v=y(i,["trafficType"]);return v!=null&&w(e,["trafficType"],v),e}function HI(i){const e={},t=y(i,["data"]);if(t!=null&&w(e,["data"],t),y(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=y(i,["mimeType"]);return n!=null&&w(e,["mimeType"],n),e}function zI(i){const e={},t=y(i,["content"]);t!=null&&w(e,["content"],t);const n=y(i,["citationMetadata"]);n!=null&&w(e,["citationMetadata"],VI(n));const s=y(i,["tokenCount"]);s!=null&&w(e,["tokenCount"],s);const r=y(i,["finishReason"]);r!=null&&w(e,["finishReason"],r);const a=y(i,["avgLogprobs"]);a!=null&&w(e,["avgLogprobs"],a);const l=y(i,["groundingMetadata"]);l!=null&&w(e,["groundingMetadata"],l);const c=y(i,["index"]);c!=null&&w(e,["index"],c);const d=y(i,["logprobsResult"]);d!=null&&w(e,["logprobsResult"],d);const h=y(i,["safetyRatings"]);if(h!=null){let v=h;Array.isArray(v)&&(v=v.map(m=>m)),w(e,["safetyRatings"],v)}const p=y(i,["urlContextMetadata"]);return p!=null&&w(e,["urlContextMetadata"],p),e}function VI(i){const e={},t=y(i,["citationSources"]);if(t!=null){let n=t;Array.isArray(n)&&(n=n.map(s=>s)),w(e,["citations"],n)}return e}function GI(i,e){const t={},n=y(e,["model"]);n!=null&&w(t,["_url","model"],Tn(i,n));const s=y(e,["contents"]);if(s!=null){let r=Aa(s);Array.isArray(r)&&(r=r.map(a=>a)),w(t,["contents"],r)}return t}function $I(i){const e={},t=y(i,["sdkHttpResponse"]);t!=null&&w(e,["sdkHttpResponse"],t);const n=y(i,["tokensInfo"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>r)),w(e,["tokensInfo"],s)}return e}function WI(i){const e={},t=y(i,["values"]);t!=null&&w(e,["values"],t);const n=y(i,["statistics"]);return n!=null&&w(e,["statistics"],YI(n)),e}function YI(i){const e={},t=y(i,["truncated"]);t!=null&&w(e,["truncated"],t);const n=y(i,["token_count"]);return n!=null&&w(e,["tokenCount"],n),e}function hg(i){const e={},t=y(i,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>i8(r))),w(e,["parts"],s)}const n=y(i,["role"]);return n!=null&&w(e,["role"],n),e}function KI(i){const e={},t=y(i,["controlType"]);t!=null&&w(e,["controlType"],t);const n=y(i,["enableControlImageComputation"]);return n!=null&&w(e,["computeControl"],n),e}function JI(i){const e={};if(y(i,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(y(i,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(y(i,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function XI(i,e){const t={},n=y(i,["systemInstruction"]);e!==void 0&&n!=null&&w(e,["systemInstruction"],$s(n));const s=y(i,["tools"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>hE(l))),w(e,["tools"],a)}const r=y(i,["generationConfig"]);return e!==void 0&&r!=null&&w(e,["generationConfig"],HM(r)),t}function ZI(i,e){const t={},n=y(e,["model"]);n!=null&&w(t,["_url","model"],Tn(i,n));const s=y(e,["contents"]);if(s!=null){let a=Aa(s);Array.isArray(a)&&(a=a.map(l=>hg(l))),w(t,["contents"],a)}const r=y(e,["config"]);return r!=null&&JI(r),t}function QI(i,e){const t={},n=y(e,["model"]);n!=null&&w(t,["_url","model"],Tn(i,n));const s=y(e,["contents"]);if(s!=null){let a=Aa(s);Array.isArray(a)&&(a=a.map(l=>l)),w(t,["contents"],a)}const r=y(e,["config"]);return r!=null&&XI(r,t),t}function eM(i){const e={},t=y(i,["sdkHttpResponse"]);t!=null&&w(e,["sdkHttpResponse"],t);const n=y(i,["totalTokens"]);n!=null&&w(e,["totalTokens"],n);const s=y(i,["cachedContentTokenCount"]);return s!=null&&w(e,["cachedContentTokenCount"],s),e}function tM(i){const e={},t=y(i,["sdkHttpResponse"]);t!=null&&w(e,["sdkHttpResponse"],t);const n=y(i,["totalTokens"]);return n!=null&&w(e,["totalTokens"],n),e}function nM(i,e){const t={},n=y(e,["model"]);return n!=null&&w(t,["_url","name"],Tn(i,n)),t}function iM(i,e){const t={},n=y(e,["model"]);return n!=null&&w(t,["_url","name"],Tn(i,n)),t}function sM(i){const e={},t=y(i,["sdkHttpResponse"]);return t!=null&&w(e,["sdkHttpResponse"],t),e}function rM(i){const e={},t=y(i,["sdkHttpResponse"]);return t!=null&&w(e,["sdkHttpResponse"],t),e}function aM(i,e){const t={},n=y(i,["outputGcsUri"]);e!==void 0&&n!=null&&w(e,["parameters","storageUri"],n);const s=y(i,["negativePrompt"]);e!==void 0&&s!=null&&w(e,["parameters","negativePrompt"],s);const r=y(i,["numberOfImages"]);e!==void 0&&r!=null&&w(e,["parameters","sampleCount"],r);const a=y(i,["aspectRatio"]);e!==void 0&&a!=null&&w(e,["parameters","aspectRatio"],a);const l=y(i,["guidanceScale"]);e!==void 0&&l!=null&&w(e,["parameters","guidanceScale"],l);const c=y(i,["seed"]);e!==void 0&&c!=null&&w(e,["parameters","seed"],c);const d=y(i,["safetyFilterLevel"]);e!==void 0&&d!=null&&w(e,["parameters","safetySetting"],d);const h=y(i,["personGeneration"]);e!==void 0&&h!=null&&w(e,["parameters","personGeneration"],h);const p=y(i,["includeSafetyAttributes"]);e!==void 0&&p!=null&&w(e,["parameters","includeSafetyAttributes"],p);const v=y(i,["includeRaiReason"]);e!==void 0&&v!=null&&w(e,["parameters","includeRaiReason"],v);const m=y(i,["language"]);e!==void 0&&m!=null&&w(e,["parameters","language"],m);const E=y(i,["outputMimeType"]);e!==void 0&&E!=null&&w(e,["parameters","outputOptions","mimeType"],E);const S=y(i,["outputCompressionQuality"]);e!==void 0&&S!=null&&w(e,["parameters","outputOptions","compressionQuality"],S);const N=y(i,["addWatermark"]);e!==void 0&&N!=null&&w(e,["parameters","addWatermark"],N);const C=y(i,["labels"]);e!==void 0&&C!=null&&w(e,["labels"],C);const P=y(i,["editMode"]);e!==void 0&&P!=null&&w(e,["parameters","editMode"],P);const L=y(i,["baseSteps"]);return e!==void 0&&L!=null&&w(e,["parameters","editConfig","baseSteps"],L),t}function oM(i,e){const t={},n=y(e,["model"]);n!=null&&w(t,["_url","model"],Tn(i,n));const s=y(e,["prompt"]);s!=null&&w(t,["instances[0]","prompt"],s);const r=y(e,["referenceImages"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>u8(c))),w(t,["instances[0]","referenceImages"],l)}const a=y(e,["config"]);return a!=null&&aM(a,t),t}function lM(i){const e={},t=y(i,["sdkHttpResponse"]);t!=null&&w(e,["sdkHttpResponse"],t);const n=y(i,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>fg(r))),w(e,["generatedImages"],s)}return e}function uM(i,e){const t={},n=y(i,["taskType"]);e!==void 0&&n!=null&&w(e,["requests[]","taskType"],n);const s=y(i,["title"]);e!==void 0&&s!=null&&w(e,["requests[]","title"],s);const r=y(i,["outputDimensionality"]);if(e!==void 0&&r!=null&&w(e,["requests[]","outputDimensionality"],r),y(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(y(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function cM(i,e){const t={},n=y(i,["taskType"]);e!==void 0&&n!=null&&w(e,["instances[]","task_type"],n);const s=y(i,["title"]);e!==void 0&&s!=null&&w(e,["instances[]","title"],s);const r=y(i,["outputDimensionality"]);e!==void 0&&r!=null&&w(e,["parameters","outputDimensionality"],r);const a=y(i,["mimeType"]);e!==void 0&&a!=null&&w(e,["instances[]","mimeType"],a);const l=y(i,["autoTruncate"]);return e!==void 0&&l!=null&&w(e,["parameters","autoTruncate"],l),t}function dM(i,e){const t={},n=y(e,["model"]);n!=null&&w(t,["_url","model"],Tn(i,n));const s=y(e,["contents"]);if(s!=null){let l=dy(i,s);Array.isArray(l)&&(l=l.map(c=>c)),w(t,["requests[]","content"],l)}const r=y(e,["config"]);r!=null&&uM(r,t);const a=y(e,["model"]);return a!==void 0&&w(t,["requests[]","model"],Tn(i,a)),t}function hM(i,e){const t={},n=y(e,["model"]);n!=null&&w(t,["_url","model"],Tn(i,n));const s=y(e,["contents"]);if(s!=null){let a=dy(i,s);Array.isArray(a)&&(a=a.map(l=>l)),w(t,["instances[]","content"],a)}const r=y(e,["config"]);return r!=null&&cM(r,t),t}function fM(i){const e={},t=y(i,["sdkHttpResponse"]);t!=null&&w(e,["sdkHttpResponse"],t);const n=y(i,["embeddings"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>a)),w(e,["embeddings"],r)}const s=y(i,["metadata"]);return s!=null&&w(e,["metadata"],s),e}function pM(i){const e={},t=y(i,["sdkHttpResponse"]);t!=null&&w(e,["sdkHttpResponse"],t);const n=y(i,["predictions[]","embeddings"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>WI(a))),w(e,["embeddings"],r)}const s=y(i,["metadata"]);return s!=null&&w(e,["metadata"],s),e}function gM(i){const e={},t=y(i,["endpoint"]);t!=null&&w(e,["name"],t);const n=y(i,["deployedModelId"]);return n!=null&&w(e,["deployedModelId"],n),e}function mM(i){const e={};if(y(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=y(i,["fileUri"]);t!=null&&w(e,["fileUri"],t);const n=y(i,["mimeType"]);return n!=null&&w(e,["mimeType"],n),e}function vM(i){const e={},t=y(i,["id"]);t!=null&&w(e,["id"],t);const n=y(i,["args"]);n!=null&&w(e,["args"],n);const s=y(i,["name"]);if(s!=null&&w(e,["name"],s),y(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(y(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function yM(i){const e={},t=y(i,["mode"]);t!=null&&w(e,["mode"],t);const n=y(i,["allowedFunctionNames"]);if(n!=null&&w(e,["allowedFunctionNames"],n),y(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function bM(i){const e={};if(y(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=y(i,["description"]);t!=null&&w(e,["description"],t);const n=y(i,["name"]);n!=null&&w(e,["name"],n);const s=y(i,["parameters"]);s!=null&&w(e,["parameters"],s);const r=y(i,["parametersJsonSchema"]);r!=null&&w(e,["parametersJsonSchema"],r);const a=y(i,["response"]);a!=null&&w(e,["response"],a);const l=y(i,["responseJsonSchema"]);return l!=null&&w(e,["responseJsonSchema"],l),e}function wM(i,e,t){const n={},s=y(e,["systemInstruction"]);t!==void 0&&s!=null&&w(t,["systemInstruction"],hg($s(s)));const r=y(e,["temperature"]);r!=null&&w(n,["temperature"],r);const a=y(e,["topP"]);a!=null&&w(n,["topP"],a);const l=y(e,["topK"]);l!=null&&w(n,["topK"],l);const c=y(e,["candidateCount"]);c!=null&&w(n,["candidateCount"],c);const d=y(e,["maxOutputTokens"]);d!=null&&w(n,["maxOutputTokens"],d);const h=y(e,["stopSequences"]);h!=null&&w(n,["stopSequences"],h);const p=y(e,["responseLogprobs"]);p!=null&&w(n,["responseLogprobs"],p);const v=y(e,["logprobs"]);v!=null&&w(n,["logprobs"],v);const m=y(e,["presencePenalty"]);m!=null&&w(n,["presencePenalty"],m);const E=y(e,["frequencyPenalty"]);E!=null&&w(n,["frequencyPenalty"],E);const S=y(e,["seed"]);S!=null&&w(n,["seed"],S);const N=y(e,["responseMimeType"]);N!=null&&w(n,["responseMimeType"],N);const C=y(e,["responseSchema"]);C!=null&&w(n,["responseSchema"],hy(C));const P=y(e,["responseJsonSchema"]);if(P!=null&&w(n,["responseJsonSchema"],P),y(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(y(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const L=y(e,["safetySettings"]);if(t!==void 0&&L!=null){let H=L;Array.isArray(H)&&(H=H.map(se=>c8(se))),w(t,["safetySettings"],H)}const O=y(e,["tools"]);if(t!==void 0&&O!=null){let H=ch(O);Array.isArray(H)&&(H=H.map(se=>v8(uh(se)))),w(t,["tools"],H)}const q=y(e,["toolConfig"]);if(t!==void 0&&q!=null&&w(t,["toolConfig"],m8(q)),y(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const G=y(e,["cachedContent"]);t!==void 0&&G!=null&&w(t,["cachedContent"],Il(i,G));const W=y(e,["responseModalities"]);W!=null&&w(n,["responseModalities"],W);const K=y(e,["mediaResolution"]);K!=null&&w(n,["mediaResolution"],K);const j=y(e,["speechConfig"]);if(j!=null&&w(n,["speechConfig"],fy(j)),y(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ee=y(e,["thinkingConfig"]);ee!=null&&w(n,["thinkingConfig"],ee);const B=y(e,["imageConfig"]);return B!=null&&w(n,["imageConfig"],WM(B)),n}function xM(i,e,t){const n={},s=y(e,["systemInstruction"]);t!==void 0&&s!=null&&w(t,["systemInstruction"],$s(s));const r=y(e,["temperature"]);r!=null&&w(n,["temperature"],r);const a=y(e,["topP"]);a!=null&&w(n,["topP"],a);const l=y(e,["topK"]);l!=null&&w(n,["topK"],l);const c=y(e,["candidateCount"]);c!=null&&w(n,["candidateCount"],c);const d=y(e,["maxOutputTokens"]);d!=null&&w(n,["maxOutputTokens"],d);const h=y(e,["stopSequences"]);h!=null&&w(n,["stopSequences"],h);const p=y(e,["responseLogprobs"]);p!=null&&w(n,["responseLogprobs"],p);const v=y(e,["logprobs"]);v!=null&&w(n,["logprobs"],v);const m=y(e,["presencePenalty"]);m!=null&&w(n,["presencePenalty"],m);const E=y(e,["frequencyPenalty"]);E!=null&&w(n,["frequencyPenalty"],E);const S=y(e,["seed"]);S!=null&&w(n,["seed"],S);const N=y(e,["responseMimeType"]);N!=null&&w(n,["responseMimeType"],N);const C=y(e,["responseSchema"]);C!=null&&w(n,["responseSchema"],hy(C));const P=y(e,["responseJsonSchema"]);P!=null&&w(n,["responseJsonSchema"],P);const L=y(e,["routingConfig"]);L!=null&&w(n,["routingConfig"],L);const O=y(e,["modelSelectionConfig"]);O!=null&&w(n,["modelConfig"],O);const q=y(e,["safetySettings"]);if(t!==void 0&&q!=null){let X=q;Array.isArray(X)&&(X=X.map(ue=>ue)),w(t,["safetySettings"],X)}const G=y(e,["tools"]);if(t!==void 0&&G!=null){let X=ch(G);Array.isArray(X)&&(X=X.map(ue=>hE(uh(ue)))),w(t,["tools"],X)}const W=y(e,["toolConfig"]);t!==void 0&&W!=null&&w(t,["toolConfig"],W);const K=y(e,["labels"]);t!==void 0&&K!=null&&w(t,["labels"],K);const j=y(e,["cachedContent"]);t!==void 0&&j!=null&&w(t,["cachedContent"],Il(i,j));const ee=y(e,["responseModalities"]);ee!=null&&w(n,["responseModalities"],ee);const B=y(e,["mediaResolution"]);B!=null&&w(n,["mediaResolution"],B);const H=y(e,["speechConfig"]);H!=null&&w(n,["speechConfig"],dE(fy(H)));const se=y(e,["audioTimestamp"]);se!=null&&w(n,["audioTimestamp"],se);const ie=y(e,["thinkingConfig"]);ie!=null&&w(n,["thinkingConfig"],ie);const ye=y(e,["imageConfig"]);return ye!=null&&w(n,["imageConfig"],YM(ye)),n}function wx(i,e){const t={},n=y(e,["model"]);n!=null&&w(t,["_url","model"],Tn(i,n));const s=y(e,["contents"]);if(s!=null){let a=Aa(s);Array.isArray(a)&&(a=a.map(l=>hg(l))),w(t,["contents"],a)}const r=y(e,["config"]);return r!=null&&w(t,["generationConfig"],wM(i,r,t)),t}function xx(i,e){const t={},n=y(e,["model"]);n!=null&&w(t,["_url","model"],Tn(i,n));const s=y(e,["contents"]);if(s!=null){let a=Aa(s);Array.isArray(a)&&(a=a.map(l=>l)),w(t,["contents"],a)}const r=y(e,["config"]);return r!=null&&w(t,["generationConfig"],xM(i,r,t)),t}function _x(i){const e={},t=y(i,["sdkHttpResponse"]);t!=null&&w(e,["sdkHttpResponse"],t);const n=y(i,["candidates"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>zI(d))),w(e,["candidates"],c)}const s=y(i,["modelVersion"]);s!=null&&w(e,["modelVersion"],s);const r=y(i,["promptFeedback"]);r!=null&&w(e,["promptFeedback"],r);const a=y(i,["responseId"]);a!=null&&w(e,["responseId"],a);const l=y(i,["usageMetadata"]);return l!=null&&w(e,["usageMetadata"],l),e}function Ax(i){const e={},t=y(i,["sdkHttpResponse"]);t!=null&&w(e,["sdkHttpResponse"],t);const n=y(i,["candidates"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(h=>h)),w(e,["candidates"],d)}const s=y(i,["createTime"]);s!=null&&w(e,["createTime"],s);const r=y(i,["modelVersion"]);r!=null&&w(e,["modelVersion"],r);const a=y(i,["promptFeedback"]);a!=null&&w(e,["promptFeedback"],a);const l=y(i,["responseId"]);l!=null&&w(e,["responseId"],l);const c=y(i,["usageMetadata"]);return c!=null&&w(e,["usageMetadata"],c),e}function _M(i,e){const t={};if(y(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(y(i,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const n=y(i,["numberOfImages"]);e!==void 0&&n!=null&&w(e,["parameters","sampleCount"],n);const s=y(i,["aspectRatio"]);e!==void 0&&s!=null&&w(e,["parameters","aspectRatio"],s);const r=y(i,["guidanceScale"]);if(e!==void 0&&r!=null&&w(e,["parameters","guidanceScale"],r),y(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=y(i,["safetyFilterLevel"]);e!==void 0&&a!=null&&w(e,["parameters","safetySetting"],a);const l=y(i,["personGeneration"]);e!==void 0&&l!=null&&w(e,["parameters","personGeneration"],l);const c=y(i,["includeSafetyAttributes"]);e!==void 0&&c!=null&&w(e,["parameters","includeSafetyAttributes"],c);const d=y(i,["includeRaiReason"]);e!==void 0&&d!=null&&w(e,["parameters","includeRaiReason"],d);const h=y(i,["language"]);e!==void 0&&h!=null&&w(e,["parameters","language"],h);const p=y(i,["outputMimeType"]);e!==void 0&&p!=null&&w(e,["parameters","outputOptions","mimeType"],p);const v=y(i,["outputCompressionQuality"]);if(e!==void 0&&v!=null&&w(e,["parameters","outputOptions","compressionQuality"],v),y(i,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(y(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const m=y(i,["imageSize"]);if(e!==void 0&&m!=null&&w(e,["parameters","sampleImageSize"],m),y(i,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function AM(i,e){const t={},n=y(i,["outputGcsUri"]);e!==void 0&&n!=null&&w(e,["parameters","storageUri"],n);const s=y(i,["negativePrompt"]);e!==void 0&&s!=null&&w(e,["parameters","negativePrompt"],s);const r=y(i,["numberOfImages"]);e!==void 0&&r!=null&&w(e,["parameters","sampleCount"],r);const a=y(i,["aspectRatio"]);e!==void 0&&a!=null&&w(e,["parameters","aspectRatio"],a);const l=y(i,["guidanceScale"]);e!==void 0&&l!=null&&w(e,["parameters","guidanceScale"],l);const c=y(i,["seed"]);e!==void 0&&c!=null&&w(e,["parameters","seed"],c);const d=y(i,["safetyFilterLevel"]);e!==void 0&&d!=null&&w(e,["parameters","safetySetting"],d);const h=y(i,["personGeneration"]);e!==void 0&&h!=null&&w(e,["parameters","personGeneration"],h);const p=y(i,["includeSafetyAttributes"]);e!==void 0&&p!=null&&w(e,["parameters","includeSafetyAttributes"],p);const v=y(i,["includeRaiReason"]);e!==void 0&&v!=null&&w(e,["parameters","includeRaiReason"],v);const m=y(i,["language"]);e!==void 0&&m!=null&&w(e,["parameters","language"],m);const E=y(i,["outputMimeType"]);e!==void 0&&E!=null&&w(e,["parameters","outputOptions","mimeType"],E);const S=y(i,["outputCompressionQuality"]);e!==void 0&&S!=null&&w(e,["parameters","outputOptions","compressionQuality"],S);const N=y(i,["addWatermark"]);e!==void 0&&N!=null&&w(e,["parameters","addWatermark"],N);const C=y(i,["labels"]);e!==void 0&&C!=null&&w(e,["labels"],C);const P=y(i,["imageSize"]);e!==void 0&&P!=null&&w(e,["parameters","sampleImageSize"],P);const L=y(i,["enhancePrompt"]);return e!==void 0&&L!=null&&w(e,["parameters","enhancePrompt"],L),t}function SM(i,e){const t={},n=y(e,["model"]);n!=null&&w(t,["_url","model"],Tn(i,n));const s=y(e,["prompt"]);s!=null&&w(t,["instances[0]","prompt"],s);const r=y(e,["config"]);return r!=null&&_M(r,t),t}function EM(i,e){const t={},n=y(e,["model"]);n!=null&&w(t,["_url","model"],Tn(i,n));const s=y(e,["prompt"]);s!=null&&w(t,["instances[0]","prompt"],s);const r=y(e,["config"]);return r!=null&&AM(r,t),t}function TM(i){const e={},t=y(i,["sdkHttpResponse"]);t!=null&&w(e,["sdkHttpResponse"],t);const n=y(i,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>FM(a))),w(e,["generatedImages"],r)}const s=y(i,["positivePromptSafetyAttributes"]);return s!=null&&w(e,["positivePromptSafetyAttributes"],uE(s)),e}function CM(i){const e={},t=y(i,["sdkHttpResponse"]);t!=null&&w(e,["sdkHttpResponse"],t);const n=y(i,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>fg(a))),w(e,["generatedImages"],r)}const s=y(i,["positivePromptSafetyAttributes"]);return s!=null&&w(e,["positivePromptSafetyAttributes"],cE(s)),e}function NM(i,e){const t={},n=y(i,["numberOfVideos"]);if(e!==void 0&&n!=null&&w(e,["parameters","sampleCount"],n),y(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(y(i,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=y(i,["durationSeconds"]);if(e!==void 0&&s!=null&&w(e,["parameters","durationSeconds"],s),y(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const r=y(i,["aspectRatio"]);e!==void 0&&r!=null&&w(e,["parameters","aspectRatio"],r);const a=y(i,["resolution"]);e!==void 0&&a!=null&&w(e,["parameters","resolution"],a);const l=y(i,["personGeneration"]);if(e!==void 0&&l!=null&&w(e,["parameters","personGeneration"],l),y(i,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=y(i,["negativePrompt"]);e!==void 0&&c!=null&&w(e,["parameters","negativePrompt"],c);const d=y(i,["enhancePrompt"]);if(e!==void 0&&d!=null&&w(e,["parameters","enhancePrompt"],d),y(i,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const h=y(i,["lastFrame"]);e!==void 0&&h!=null&&w(e,["instances[0]","lastFrame"],pg(h));const p=y(i,["referenceImages"]);if(e!==void 0&&p!=null){let v=p;Array.isArray(v)&&(v=v.map(m=>R8(m))),w(e,["instances[0]","referenceImages"],v)}if(y(i,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(y(i,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function kM(i,e){const t={},n=y(i,["numberOfVideos"]);e!==void 0&&n!=null&&w(e,["parameters","sampleCount"],n);const s=y(i,["outputGcsUri"]);e!==void 0&&s!=null&&w(e,["parameters","storageUri"],s);const r=y(i,["fps"]);e!==void 0&&r!=null&&w(e,["parameters","fps"],r);const a=y(i,["durationSeconds"]);e!==void 0&&a!=null&&w(e,["parameters","durationSeconds"],a);const l=y(i,["seed"]);e!==void 0&&l!=null&&w(e,["parameters","seed"],l);const c=y(i,["aspectRatio"]);e!==void 0&&c!=null&&w(e,["parameters","aspectRatio"],c);const d=y(i,["resolution"]);e!==void 0&&d!=null&&w(e,["parameters","resolution"],d);const h=y(i,["personGeneration"]);e!==void 0&&h!=null&&w(e,["parameters","personGeneration"],h);const p=y(i,["pubsubTopic"]);e!==void 0&&p!=null&&w(e,["parameters","pubsubTopic"],p);const v=y(i,["negativePrompt"]);e!==void 0&&v!=null&&w(e,["parameters","negativePrompt"],v);const m=y(i,["enhancePrompt"]);e!==void 0&&m!=null&&w(e,["parameters","enhancePrompt"],m);const E=y(i,["generateAudio"]);e!==void 0&&E!=null&&w(e,["parameters","generateAudio"],E);const S=y(i,["lastFrame"]);e!==void 0&&S!=null&&w(e,["instances[0]","lastFrame"],co(S));const N=y(i,["referenceImages"]);if(e!==void 0&&N!=null){let L=N;Array.isArray(L)&&(L=L.map(O=>L8(O))),w(e,["instances[0]","referenceImages"],L)}const C=y(i,["mask"]);e!==void 0&&C!=null&&w(e,["instances[0]","mask"],k8(C));const P=y(i,["compressionQuality"]);return e!==void 0&&P!=null&&w(e,["parameters","compressionQuality"],P),t}function RM(i){const e={},t=y(i,["name"]);t!=null&&w(e,["name"],t);const n=y(i,["metadata"]);n!=null&&w(e,["metadata"],n);const s=y(i,["done"]);s!=null&&w(e,["done"],s);const r=y(i,["error"]);r!=null&&w(e,["error"],r);const a=y(i,["response","generateVideoResponse"]);return a!=null&&w(e,["response"],MM(a)),e}function LM(i){const e={},t=y(i,["name"]);t!=null&&w(e,["name"],t);const n=y(i,["metadata"]);n!=null&&w(e,["metadata"],n);const s=y(i,["done"]);s!=null&&w(e,["done"],s);const r=y(i,["error"]);r!=null&&w(e,["error"],r);const a=y(i,["response"]);return a!=null&&w(e,["response"],DM(a)),e}function PM(i,e){const t={},n=y(e,["model"]);n!=null&&w(t,["_url","model"],Tn(i,n));const s=y(e,["prompt"]);s!=null&&w(t,["instances[0]","prompt"],s);const r=y(e,["image"]);r!=null&&w(t,["instances[0]","image"],pg(r));const a=y(e,["video"]);a!=null&&w(t,["instances[0]","video"],fE(a));const l=y(e,["source"]);l!=null&&OM(l,t);const c=y(e,["config"]);return c!=null&&NM(c,t),t}function IM(i,e){const t={},n=y(e,["model"]);n!=null&&w(t,["_url","model"],Tn(i,n));const s=y(e,["prompt"]);s!=null&&w(t,["instances[0]","prompt"],s);const r=y(e,["image"]);r!=null&&w(t,["instances[0]","image"],co(r));const a=y(e,["video"]);a!=null&&w(t,["instances[0]","video"],pE(a));const l=y(e,["source"]);l!=null&&BM(l,t);const c=y(e,["config"]);return c!=null&&kM(c,t),t}function MM(i){const e={},t=y(i,["generatedSamples"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>jM(a))),w(e,["generatedVideos"],r)}const n=y(i,["raiMediaFilteredCount"]);n!=null&&w(e,["raiMediaFilteredCount"],n);const s=y(i,["raiMediaFilteredReasons"]);return s!=null&&w(e,["raiMediaFilteredReasons"],s),e}function DM(i){const e={},t=y(i,["videos"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>qM(a))),w(e,["generatedVideos"],r)}const n=y(i,["raiMediaFilteredCount"]);n!=null&&w(e,["raiMediaFilteredCount"],n);const s=y(i,["raiMediaFilteredReasons"]);return s!=null&&w(e,["raiMediaFilteredReasons"],s),e}function OM(i,e){const t={},n=y(i,["prompt"]);e!==void 0&&n!=null&&w(e,["instances[0]","prompt"],n);const s=y(i,["image"]);e!==void 0&&s!=null&&w(e,["instances[0]","image"],pg(s));const r=y(i,["video"]);return e!==void 0&&r!=null&&w(e,["instances[0]","video"],fE(r)),t}function BM(i,e){const t={},n=y(i,["prompt"]);e!==void 0&&n!=null&&w(e,["instances[0]","prompt"],n);const s=y(i,["image"]);e!==void 0&&s!=null&&w(e,["instances[0]","image"],co(s));const r=y(i,["video"]);return e!==void 0&&r!=null&&w(e,["instances[0]","video"],pE(r)),t}function FM(i){const e={},t=y(i,["_self"]);t!=null&&w(e,["image"],KM(t));const n=y(i,["raiFilteredReason"]);n!=null&&w(e,["raiFilteredReason"],n);const s=y(i,["_self"]);return s!=null&&w(e,["safetyAttributes"],uE(s)),e}function fg(i){const e={},t=y(i,["_self"]);t!=null&&w(e,["image"],lE(t));const n=y(i,["raiFilteredReason"]);n!=null&&w(e,["raiFilteredReason"],n);const s=y(i,["_self"]);s!=null&&w(e,["safetyAttributes"],cE(s));const r=y(i,["prompt"]);return r!=null&&w(e,["enhancedPrompt"],r),e}function UM(i){const e={},t=y(i,["_self"]);t!=null&&w(e,["mask"],lE(t));const n=y(i,["labels"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>r)),w(e,["labels"],s)}return e}function jM(i){const e={},t=y(i,["video"]);return t!=null&&w(e,["video"],C8(t)),e}function qM(i){const e={},t=y(i,["_self"]);return t!=null&&w(e,["video"],N8(t)),e}function HM(i){const e={},t=y(i,["modelSelectionConfig"]);t!=null&&w(e,["modelConfig"],t);const n=y(i,["responseJsonSchema"]);n!=null&&w(e,["responseJsonSchema"],n);const s=y(i,["audioTimestamp"]);s!=null&&w(e,["audioTimestamp"],s);const r=y(i,["candidateCount"]);r!=null&&w(e,["candidateCount"],r);const a=y(i,["enableAffectiveDialog"]);a!=null&&w(e,["enableAffectiveDialog"],a);const l=y(i,["frequencyPenalty"]);l!=null&&w(e,["frequencyPenalty"],l);const c=y(i,["logprobs"]);c!=null&&w(e,["logprobs"],c);const d=y(i,["maxOutputTokens"]);d!=null&&w(e,["maxOutputTokens"],d);const h=y(i,["mediaResolution"]);h!=null&&w(e,["mediaResolution"],h);const p=y(i,["presencePenalty"]);p!=null&&w(e,["presencePenalty"],p);const v=y(i,["responseLogprobs"]);v!=null&&w(e,["responseLogprobs"],v);const m=y(i,["responseMimeType"]);m!=null&&w(e,["responseMimeType"],m);const E=y(i,["responseModalities"]);E!=null&&w(e,["responseModalities"],E);const S=y(i,["responseSchema"]);S!=null&&w(e,["responseSchema"],S);const N=y(i,["routingConfig"]);N!=null&&w(e,["routingConfig"],N);const C=y(i,["seed"]);C!=null&&w(e,["seed"],C);const P=y(i,["speechConfig"]);P!=null&&w(e,["speechConfig"],dE(P));const L=y(i,["stopSequences"]);L!=null&&w(e,["stopSequences"],L);const O=y(i,["temperature"]);O!=null&&w(e,["temperature"],O);const q=y(i,["thinkingConfig"]);q!=null&&w(e,["thinkingConfig"],q);const G=y(i,["topK"]);G!=null&&w(e,["topK"],G);const W=y(i,["topP"]);if(W!=null&&w(e,["topP"],W),y(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function zM(i,e){const t={},n=y(e,["model"]);return n!=null&&w(t,["_url","name"],Tn(i,n)),t}function VM(i,e){const t={},n=y(e,["model"]);return n!=null&&w(t,["_url","name"],Tn(i,n)),t}function GM(i){const e={};if(y(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=y(i,["enableWidget"]);return t!=null&&w(e,["enableWidget"],t),e}function $M(i){const e={};if(y(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(y(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=y(i,["timeRangeFilter"]);return t!=null&&w(e,["timeRangeFilter"],t),e}function WM(i){const e={},t=y(i,["aspectRatio"]);t!=null&&w(e,["aspectRatio"],t);const n=y(i,["imageSize"]);if(n!=null&&w(e,["imageSize"],n),y(i,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(y(i,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function YM(i){const e={},t=y(i,["aspectRatio"]);t!=null&&w(e,["aspectRatio"],t);const n=y(i,["imageSize"]);n!=null&&w(e,["imageSize"],n);const s=y(i,["outputMimeType"]);s!=null&&w(e,["imageOutputOptions","mimeType"],s);const r=y(i,["outputCompressionQuality"]);return r!=null&&w(e,["imageOutputOptions","compressionQuality"],r),e}function KM(i){const e={},t=y(i,["bytesBase64Encoded"]);t!=null&&w(e,["imageBytes"],Nu(t));const n=y(i,["mimeType"]);return n!=null&&w(e,["mimeType"],n),e}function lE(i){const e={},t=y(i,["gcsUri"]);t!=null&&w(e,["gcsUri"],t);const n=y(i,["bytesBase64Encoded"]);n!=null&&w(e,["imageBytes"],Nu(n));const s=y(i,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function pg(i){const e={};if(y(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=y(i,["imageBytes"]);t!=null&&w(e,["bytesBase64Encoded"],Nu(t));const n=y(i,["mimeType"]);return n!=null&&w(e,["mimeType"],n),e}function co(i){const e={},t=y(i,["gcsUri"]);t!=null&&w(e,["gcsUri"],t);const n=y(i,["imageBytes"]);n!=null&&w(e,["bytesBase64Encoded"],Nu(n));const s=y(i,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function JM(i,e,t){const n={},s=y(e,["pageSize"]);t!==void 0&&s!=null&&w(t,["_query","pageSize"],s);const r=y(e,["pageToken"]);t!==void 0&&r!=null&&w(t,["_query","pageToken"],r);const a=y(e,["filter"]);t!==void 0&&a!=null&&w(t,["_query","filter"],a);const l=y(e,["queryBase"]);return t!==void 0&&l!=null&&w(t,["_url","models_url"],eE(i,l)),n}function XM(i,e,t){const n={},s=y(e,["pageSize"]);t!==void 0&&s!=null&&w(t,["_query","pageSize"],s);const r=y(e,["pageToken"]);t!==void 0&&r!=null&&w(t,["_query","pageToken"],r);const a=y(e,["filter"]);t!==void 0&&a!=null&&w(t,["_query","filter"],a);const l=y(e,["queryBase"]);return t!==void 0&&l!=null&&w(t,["_url","models_url"],eE(i,l)),n}function ZM(i,e){const t={},n=y(e,["config"]);return n!=null&&JM(i,n,t),t}function QM(i,e){const t={},n=y(e,["config"]);return n!=null&&XM(i,n,t),t}function e8(i){const e={},t=y(i,["sdkHttpResponse"]);t!=null&&w(e,["sdkHttpResponse"],t);const n=y(i,["nextPageToken"]);n!=null&&w(e,["nextPageToken"],n);const s=y(i,["_self"]);if(s!=null){let r=tE(s);Array.isArray(r)&&(r=r.map(a=>hv(a))),w(e,["models"],r)}return e}function t8(i){const e={},t=y(i,["sdkHttpResponse"]);t!=null&&w(e,["sdkHttpResponse"],t);const n=y(i,["nextPageToken"]);n!=null&&w(e,["nextPageToken"],n);const s=y(i,["_self"]);if(s!=null){let r=tE(s);Array.isArray(r)&&(r=r.map(a=>fv(a))),w(e,["models"],r)}return e}function n8(i){const e={},t=y(i,["maskMode"]);t!=null&&w(e,["maskMode"],t);const n=y(i,["segmentationClasses"]);n!=null&&w(e,["maskClasses"],n);const s=y(i,["maskDilation"]);return s!=null&&w(e,["dilation"],s),e}function hv(i){const e={},t=y(i,["name"]);t!=null&&w(e,["name"],t);const n=y(i,["displayName"]);n!=null&&w(e,["displayName"],n);const s=y(i,["description"]);s!=null&&w(e,["description"],s);const r=y(i,["version"]);r!=null&&w(e,["version"],r);const a=y(i,["_self"]);a!=null&&w(e,["tunedModelInfo"],y8(a));const l=y(i,["inputTokenLimit"]);l!=null&&w(e,["inputTokenLimit"],l);const c=y(i,["outputTokenLimit"]);c!=null&&w(e,["outputTokenLimit"],c);const d=y(i,["supportedGenerationMethods"]);d!=null&&w(e,["supportedActions"],d);const h=y(i,["temperature"]);h!=null&&w(e,["temperature"],h);const p=y(i,["maxTemperature"]);p!=null&&w(e,["maxTemperature"],p);const v=y(i,["topP"]);v!=null&&w(e,["topP"],v);const m=y(i,["topK"]);m!=null&&w(e,["topK"],m);const E=y(i,["thinking"]);return E!=null&&w(e,["thinking"],E),e}function fv(i){const e={},t=y(i,["name"]);t!=null&&w(e,["name"],t);const n=y(i,["displayName"]);n!=null&&w(e,["displayName"],n);const s=y(i,["description"]);s!=null&&w(e,["description"],s);const r=y(i,["versionId"]);r!=null&&w(e,["version"],r);const a=y(i,["deployedModels"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(v=>gM(v))),w(e,["endpoints"],p)}const l=y(i,["labels"]);l!=null&&w(e,["labels"],l);const c=y(i,["_self"]);c!=null&&w(e,["tunedModelInfo"],b8(c));const d=y(i,["defaultCheckpointId"]);d!=null&&w(e,["defaultCheckpointId"],d);const h=y(i,["checkpoints"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(v=>v)),w(e,["checkpoints"],p)}return e}function i8(i){const e={},t=y(i,["mediaResolution"]);t!=null&&w(e,["mediaResolution"],t);const n=y(i,["codeExecutionResult"]);n!=null&&w(e,["codeExecutionResult"],n);const s=y(i,["executableCode"]);s!=null&&w(e,["executableCode"],s);const r=y(i,["fileData"]);r!=null&&w(e,["fileData"],mM(r));const a=y(i,["functionCall"]);a!=null&&w(e,["functionCall"],vM(a));const l=y(i,["functionResponse"]);l!=null&&w(e,["functionResponse"],l);const c=y(i,["inlineData"]);c!=null&&w(e,["inlineData"],HI(c));const d=y(i,["text"]);d!=null&&w(e,["text"],d);const h=y(i,["thought"]);h!=null&&w(e,["thought"],h);const p=y(i,["thoughtSignature"]);p!=null&&w(e,["thoughtSignature"],p);const v=y(i,["videoMetadata"]);return v!=null&&w(e,["videoMetadata"],v),e}function s8(i){const e={},t=y(i,["productImage"]);return t!=null&&w(e,["image"],co(t)),e}function r8(i,e){const t={},n=y(i,["numberOfImages"]);e!==void 0&&n!=null&&w(e,["parameters","sampleCount"],n);const s=y(i,["baseSteps"]);e!==void 0&&s!=null&&w(e,["parameters","baseSteps"],s);const r=y(i,["outputGcsUri"]);e!==void 0&&r!=null&&w(e,["parameters","storageUri"],r);const a=y(i,["seed"]);e!==void 0&&a!=null&&w(e,["parameters","seed"],a);const l=y(i,["safetyFilterLevel"]);e!==void 0&&l!=null&&w(e,["parameters","safetySetting"],l);const c=y(i,["personGeneration"]);e!==void 0&&c!=null&&w(e,["parameters","personGeneration"],c);const d=y(i,["addWatermark"]);e!==void 0&&d!=null&&w(e,["parameters","addWatermark"],d);const h=y(i,["outputMimeType"]);e!==void 0&&h!=null&&w(e,["parameters","outputOptions","mimeType"],h);const p=y(i,["outputCompressionQuality"]);e!==void 0&&p!=null&&w(e,["parameters","outputOptions","compressionQuality"],p);const v=y(i,["enhancePrompt"]);e!==void 0&&v!=null&&w(e,["parameters","enhancePrompt"],v);const m=y(i,["labels"]);return e!==void 0&&m!=null&&w(e,["labels"],m),t}function a8(i,e){const t={},n=y(e,["model"]);n!=null&&w(t,["_url","model"],Tn(i,n));const s=y(e,["source"]);s!=null&&l8(s,t);const r=y(e,["config"]);return r!=null&&r8(r,t),t}function o8(i){const e={},t=y(i,["predictions"]);if(t!=null){let n=t;Array.isArray(n)&&(n=n.map(s=>fg(s))),w(e,["generatedImages"],n)}return e}function l8(i,e){const t={},n=y(i,["prompt"]);e!==void 0&&n!=null&&w(e,["instances[0]","prompt"],n);const s=y(i,["personImage"]);e!==void 0&&s!=null&&w(e,["instances[0]","personImage","image"],co(s));const r=y(i,["productImages"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>s8(l))),w(e,["instances[0]","productImages"],a)}return t}function u8(i){const e={},t=y(i,["referenceImage"]);t!=null&&w(e,["referenceImage"],co(t));const n=y(i,["referenceId"]);n!=null&&w(e,["referenceId"],n);const s=y(i,["referenceType"]);s!=null&&w(e,["referenceType"],s);const r=y(i,["maskImageConfig"]);r!=null&&w(e,["maskImageConfig"],n8(r));const a=y(i,["controlImageConfig"]);a!=null&&w(e,["controlImageConfig"],KI(a));const l=y(i,["styleImageConfig"]);l!=null&&w(e,["styleImageConfig"],l);const c=y(i,["subjectImageConfig"]);return c!=null&&w(e,["subjectImageConfig"],c),e}function uE(i){const e={},t=y(i,["safetyAttributes","categories"]);t!=null&&w(e,["categories"],t);const n=y(i,["safetyAttributes","scores"]);n!=null&&w(e,["scores"],n);const s=y(i,["contentType"]);return s!=null&&w(e,["contentType"],s),e}function cE(i){const e={},t=y(i,["safetyAttributes","categories"]);t!=null&&w(e,["categories"],t);const n=y(i,["safetyAttributes","scores"]);n!=null&&w(e,["scores"],n);const s=y(i,["contentType"]);return s!=null&&w(e,["contentType"],s),e}function c8(i){const e={},t=y(i,["category"]);if(t!=null&&w(e,["category"],t),y(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=y(i,["threshold"]);return n!=null&&w(e,["threshold"],n),e}function d8(i){const e={},t=y(i,["image"]);return t!=null&&w(e,["image"],co(t)),e}function h8(i,e){const t={},n=y(i,["mode"]);e!==void 0&&n!=null&&w(e,["parameters","mode"],n);const s=y(i,["maxPredictions"]);e!==void 0&&s!=null&&w(e,["parameters","maxPredictions"],s);const r=y(i,["confidenceThreshold"]);e!==void 0&&r!=null&&w(e,["parameters","confidenceThreshold"],r);const a=y(i,["maskDilation"]);e!==void 0&&a!=null&&w(e,["parameters","maskDilation"],a);const l=y(i,["binaryColorThreshold"]);e!==void 0&&l!=null&&w(e,["parameters","binaryColorThreshold"],l);const c=y(i,["labels"]);return e!==void 0&&c!=null&&w(e,["labels"],c),t}function f8(i,e){const t={},n=y(e,["model"]);n!=null&&w(t,["_url","model"],Tn(i,n));const s=y(e,["source"]);s!=null&&g8(s,t);const r=y(e,["config"]);return r!=null&&h8(r,t),t}function p8(i){const e={},t=y(i,["predictions"]);if(t!=null){let n=t;Array.isArray(n)&&(n=n.map(s=>UM(s))),w(e,["generatedMasks"],n)}return e}function g8(i,e){const t={},n=y(i,["prompt"]);e!==void 0&&n!=null&&w(e,["instances[0]","prompt"],n);const s=y(i,["image"]);e!==void 0&&s!=null&&w(e,["instances[0]","image"],co(s));const r=y(i,["scribbleImage"]);return e!==void 0&&r!=null&&w(e,["instances[0]","scribble"],d8(r)),t}function dE(i){const e={},t=y(i,["languageCode"]);t!=null&&w(e,["languageCode"],t);const n=y(i,["voiceConfig"]);if(n!=null&&w(e,["voiceConfig"],n),y(i,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function m8(i){const e={},t=y(i,["functionCallingConfig"]);t!=null&&w(e,["functionCallingConfig"],yM(t));const n=y(i,["retrievalConfig"]);return n!=null&&w(e,["retrievalConfig"],n),e}function v8(i){const e={},t=y(i,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(p=>p)),w(e,["functionDeclarations"],h)}if(y(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=y(i,["googleSearchRetrieval"]);n!=null&&w(e,["googleSearchRetrieval"],n);const s=y(i,["computerUse"]);s!=null&&w(e,["computerUse"],s);const r=y(i,["fileSearch"]);r!=null&&w(e,["fileSearch"],r);const a=y(i,["codeExecution"]);if(a!=null&&w(e,["codeExecution"],a),y(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=y(i,["googleMaps"]);l!=null&&w(e,["googleMaps"],GM(l));const c=y(i,["googleSearch"]);c!=null&&w(e,["googleSearch"],$M(c));const d=y(i,["urlContext"]);return d!=null&&w(e,["urlContext"],d),e}function hE(i){const e={},t=y(i,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(v=>bM(v))),w(e,["functionDeclarations"],p)}const n=y(i,["retrieval"]);n!=null&&w(e,["retrieval"],n);const s=y(i,["googleSearchRetrieval"]);s!=null&&w(e,["googleSearchRetrieval"],s);const r=y(i,["computerUse"]);if(r!=null&&w(e,["computerUse"],r),y(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=y(i,["codeExecution"]);a!=null&&w(e,["codeExecution"],a);const l=y(i,["enterpriseWebSearch"]);l!=null&&w(e,["enterpriseWebSearch"],l);const c=y(i,["googleMaps"]);c!=null&&w(e,["googleMaps"],c);const d=y(i,["googleSearch"]);d!=null&&w(e,["googleSearch"],d);const h=y(i,["urlContext"]);return h!=null&&w(e,["urlContext"],h),e}function y8(i){const e={},t=y(i,["baseModel"]);t!=null&&w(e,["baseModel"],t);const n=y(i,["createTime"]);n!=null&&w(e,["createTime"],n);const s=y(i,["updateTime"]);return s!=null&&w(e,["updateTime"],s),e}function b8(i){const e={},t=y(i,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&w(e,["baseModel"],t);const n=y(i,["createTime"]);n!=null&&w(e,["createTime"],n);const s=y(i,["updateTime"]);return s!=null&&w(e,["updateTime"],s),e}function w8(i,e){const t={},n=y(i,["displayName"]);e!==void 0&&n!=null&&w(e,["displayName"],n);const s=y(i,["description"]);e!==void 0&&s!=null&&w(e,["description"],s);const r=y(i,["defaultCheckpointId"]);return e!==void 0&&r!=null&&w(e,["defaultCheckpointId"],r),t}function x8(i,e){const t={},n=y(i,["displayName"]);e!==void 0&&n!=null&&w(e,["displayName"],n);const s=y(i,["description"]);e!==void 0&&s!=null&&w(e,["description"],s);const r=y(i,["defaultCheckpointId"]);return e!==void 0&&r!=null&&w(e,["defaultCheckpointId"],r),t}function _8(i,e){const t={},n=y(e,["model"]);n!=null&&w(t,["_url","name"],Tn(i,n));const s=y(e,["config"]);return s!=null&&w8(s,t),t}function A8(i,e){const t={},n=y(e,["model"]);n!=null&&w(t,["_url","model"],Tn(i,n));const s=y(e,["config"]);return s!=null&&x8(s,t),t}function S8(i,e){const t={},n=y(i,["outputGcsUri"]);e!==void 0&&n!=null&&w(e,["parameters","storageUri"],n);const s=y(i,["safetyFilterLevel"]);e!==void 0&&s!=null&&w(e,["parameters","safetySetting"],s);const r=y(i,["personGeneration"]);e!==void 0&&r!=null&&w(e,["parameters","personGeneration"],r);const a=y(i,["includeRaiReason"]);e!==void 0&&a!=null&&w(e,["parameters","includeRaiReason"],a);const l=y(i,["outputMimeType"]);e!==void 0&&l!=null&&w(e,["parameters","outputOptions","mimeType"],l);const c=y(i,["outputCompressionQuality"]);e!==void 0&&c!=null&&w(e,["parameters","outputOptions","compressionQuality"],c);const d=y(i,["enhanceInputImage"]);e!==void 0&&d!=null&&w(e,["parameters","upscaleConfig","enhanceInputImage"],d);const h=y(i,["imagePreservationFactor"]);e!==void 0&&h!=null&&w(e,["parameters","upscaleConfig","imagePreservationFactor"],h);const p=y(i,["labels"]);e!==void 0&&p!=null&&w(e,["labels"],p);const v=y(i,["numberOfImages"]);e!==void 0&&v!=null&&w(e,["parameters","sampleCount"],v);const m=y(i,["mode"]);return e!==void 0&&m!=null&&w(e,["parameters","mode"],m),t}function E8(i,e){const t={},n=y(e,["model"]);n!=null&&w(t,["_url","model"],Tn(i,n));const s=y(e,["image"]);s!=null&&w(t,["instances[0]","image"],co(s));const r=y(e,["upscaleFactor"]);r!=null&&w(t,["parameters","upscaleConfig","upscaleFactor"],r);const a=y(e,["config"]);return a!=null&&S8(a,t),t}function T8(i){const e={},t=y(i,["sdkHttpResponse"]);t!=null&&w(e,["sdkHttpResponse"],t);const n=y(i,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>fg(r))),w(e,["generatedImages"],s)}return e}function C8(i){const e={},t=y(i,["uri"]);t!=null&&w(e,["uri"],t);const n=y(i,["encodedVideo"]);n!=null&&w(e,["videoBytes"],Nu(n));const s=y(i,["encoding"]);return s!=null&&w(e,["mimeType"],s),e}function N8(i){const e={},t=y(i,["gcsUri"]);t!=null&&w(e,["uri"],t);const n=y(i,["bytesBase64Encoded"]);n!=null&&w(e,["videoBytes"],Nu(n));const s=y(i,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}function k8(i){const e={},t=y(i,["image"]);t!=null&&w(e,["_self"],co(t));const n=y(i,["maskMode"]);return n!=null&&w(e,["maskMode"],n),e}function R8(i){const e={},t=y(i,["image"]);t!=null&&w(e,["image"],pg(t));const n=y(i,["referenceType"]);return n!=null&&w(e,["referenceType"],n),e}function L8(i){const e={},t=y(i,["image"]);t!=null&&w(e,["image"],co(t));const n=y(i,["referenceType"]);return n!=null&&w(e,["referenceType"],n),e}function fE(i){const e={},t=y(i,["uri"]);t!=null&&w(e,["uri"],t);const n=y(i,["videoBytes"]);n!=null&&w(e,["encodedVideo"],Nu(n));const s=y(i,["mimeType"]);return s!=null&&w(e,["encoding"],s),e}function pE(i){const e={},t=y(i,["uri"]);t!=null&&w(e,["gcsUri"],t);const n=y(i,["videoBytes"]);n!=null&&w(e,["bytesBase64Encoded"],Nu(n));const s=y(i,["mimeType"]);return s!=null&&w(e,["mimeType"],s),e}const P8="Content-Type",I8="X-Server-Timeout",M8="User-Agent",pv="x-goog-api-client",D8="1.30.0",O8=`google-genai-sdk/${D8}`,B8="v1beta1",F8="v1beta",Sx=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class U8{constructor(e){var t,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:B8,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:F8,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&n.push(e.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,n){const s=[this.getRequestUrlInternal(t)];return n&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,t,n);if(e.queryParams)for(const[a,l]of Object.entries(e.queryParams))s.searchParams.append(a,String(l));let r={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=e.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,t,s.toString(),e.abortSignal),this.unaryApiCall(s,r,e.httpMethod)}patchHttpOptions(e,t){const n=JSON.parse(JSON.stringify(e));for(const[s,r]of Object.entries(t))typeof r=="object"?n[s]=Object.assign(Object.assign({},n[s]),r):r!==void 0&&(n[s]=r);return n}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,t,n);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let r={};return r.body=e.body,r=await this.includeExtraHttpOptionsToRequestInit(r,t,s.toString(),e.abortSignal),this.streamApiCall(s,r,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,n,s){if(t&&t.timeout||s){const r=new AbortController,a=r.signal;if(t.timeout&&t?.timeout>0){const l=setTimeout(()=>r.abort(),t.timeout);l&&typeof l.unref=="function"&&l.unref()}s&&s.addEventListener("abort",()=>{r.abort()}),e.signal=a}return t&&t.extraBody!==null&&j8(e,t.extraBody),e.headers=await this.getHeadersInternal(t,n),e}async unaryApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async s=>(await Ex(s),new uv(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async s=>(await Ex(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var t;return Kd(this,arguments,function*(){const s=(t=e?.body)===null||t===void 0?void 0:t.getReader(),r=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let a="";for(;;){const{done:l,value:c}=yield ai(s.read());if(l){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=r.decode(c,{stream:!0});try{const p=JSON.parse(d);if("error"in p){const v=JSON.parse(JSON.stringify(p.error)),m=v.status,E=v.code,S=`got status: ${m}. ${JSON.stringify(p)}`;if(E>=400&&E<600)throw new dg({message:S,status:E})}}catch(p){if(p.name==="ApiError")throw p}a+=d;let h=a.match(Sx);for(;h;){const p=h[1];try{const v=new Response(p,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield ai(new uv(v)),a=a.slice(h[0].length),h=a.match(Sx)}catch(v){throw new Error(`exception parsing stream chunk ${p}. ${v}`)}}}}finally{s.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){const e={},t=O8+" "+this.clientOptions.userAgentExtra;return e[M8]=t,e[pv]=t,e[P8]="application/json",e}async getHeadersInternal(e,t){const n=new Headers;if(e&&e.headers){for(const[s,r]of Object.entries(e.headers))n.append(s,r);e.timeout&&e.timeout>0&&n.append(I8,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n,t),n}getFileName(e){var t;let n="";return typeof e=="string"&&(n=e.replace(/[/\\]+$/,""),n=(t=n.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),n}async uploadFile(e,t){var n;const s={};t!=null&&(s.mimeType=t.mimeType,s.name=t.name,s.displayName=t.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const r=this.clientOptions.uploader,a=await r.stat(e);s.sizeBytes=String(a.size);const l=(n=t?.mimeType)!==null&&n!==void 0?n:a.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=l;const c={file:s},d=this.getFileName(e),h=et("upload/v1beta/files",c._url),p=await this.fetchUploadUrl(h,s.sizeBytes,s.mimeType,d,c,t?.httpOptions);return r.upload(e,p,this)}async uploadFileToFileSearchStore(e,t,n){var s;const r=this.clientOptions.uploader,a=await r.stat(t),l=String(a.size),c=(s=n?.mimeType)!==null&&s!==void 0?s:a.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,h=this.getFileName(t),p={};n?.customMetadata&&(p.customMetadata=n.customMetadata),n?.chunkingConfig&&(p.chunkingConfig=n.chunkingConfig);const v=await this.fetchUploadUrl(d,l,c,h,p,n?.httpOptions);return r.uploadToFileSearchStore(t,v,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,n,s,r,a){var l;let c={};a?c=a:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${n}`},s?{"X-Goog-Upload-File-Name":s}:{})};const d=await this.request({path:e,body:JSON.stringify(r),httpMethod:"POST",httpOptions:c});if(!d||!d?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(l=d?.headers)===null||l===void 0?void 0:l["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function Ex(i){var e;if(i===void 0)throw new Error("response is undefined");if(!i.ok){const t=i.status;let n;!((e=i.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?n=await i.json():n={error:{message:await i.text(),code:i.status,status:i.statusText}};const s=JSON.stringify(n);throw t>=400&&t<600?new dg({message:s,status:t}):new Error(s)}}function j8(i,e){if(!e||Object.keys(e).length===0)return;if(i.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof i.body=="string"&&i.body.length>0)try{const r=JSON.parse(i.body);if(typeof r=="object"&&r!==null&&!Array.isArray(r))t=r;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function n(r,a){const l=Object.assign({},r);for(const c in a)if(Object.prototype.hasOwnProperty.call(a,c)){const d=a[c],h=l[c];d&&typeof d=="object"&&!Array.isArray(d)&&h&&typeof h=="object"&&!Array.isArray(h)?l[c]=n(h,d):(h&&d&&typeof h!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof h}, New type: ${typeof d}. Overwriting.`),l[c]=d)}return l}const s=n(t,e);i.body=JSON.stringify(s)}const q8="mcp_used/unknown";let H8=!1;function gE(i){for(const e of i)if(z8(e)||typeof e=="object"&&"inputSchema"in e)return!0;return H8}function mE(i){var e;const t=(e=i[pv])!==null&&e!==void 0?e:"";i[pv]=(t+` ${q8}`).trimStart()}function z8(i){return i!==null&&typeof i=="object"&&i instanceof gy}function V8(i,e=100){return Kd(this,arguments,function*(){let n,s=0;for(;s<e;){const r=yield ai(i.listTools({cursor:n}));for(const a of r.tools)yield yield ai(a),s++;if(!r.nextCursor)break;n=r.nextCursor}})}class gy{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new gy(e,t)}async initialize(){var e,t,n,s;if(this.mcpTools.length>0)return;const r={},a=[];for(const h of this.mcpClients)try{for(var l=!0,c=(t=void 0,vf(V8(h))),d;d=await c.next(),e=d.done,!e;l=!0){s=d.value,l=!1;const p=s;a.push(p);const v=p.name;if(r[v])throw new Error(`Duplicate function name ${v} found in MCP tools. Please ensure function names are unique.`);r[v]=h}}catch(p){t={error:p}}finally{try{!l&&!e&&(n=c.return)&&await n.call(c)}finally{if(t)throw t.error}}this.mcpTools=a,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),OL(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const n of e)if(n.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[n.name];let r;this.config.timeout&&(r={timeout:this.config.timeout});const a=await s.callTool({name:n.name,arguments:n.args},void 0,r);t.push({functionResponse:{name:n.name,response:a.isError?{error:a}:a}})}return t}}async function G8(i,e,t){const n=new NL;let s;t.data instanceof Blob?s=JSON.parse(await t.data.text()):s=JSON.parse(t.data),Object.assign(n,s),e(n)}class $8{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n}async connect(e){var t,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),a=K8(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),c=`${s}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${l}`;let d=()=>{};const h=new Promise(L=>{d=L}),p=e.callbacks,v=function(){d({})},m=this.apiClient,E={onopen:v,onmessage:L=>{G8(m,p.onmessage,L)},onerror:(t=p?.onerror)!==null&&t!==void 0?t:function(L){},onclose:(n=p?.onclose)!==null&&n!==void 0?n:function(L){}},S=this.webSocketFactory.create(c,Y8(a),E);S.connect(),await h;const P={setup:{model:Tn(this.apiClient,e.model)}};return S.send(JSON.stringify(P)),new W8(S,this.apiClient)}}class W8{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=II(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=PI(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(qd.PLAY)}pause(){this.sendPlaybackControl(qd.PAUSE)}stop(){this.sendPlaybackControl(qd.STOP)}resetContext(){this.sendPlaybackControl(qd.RESET_CONTEXT)}close(){this.conn.close()}}function Y8(i){const e={};return i.forEach((t,n)=>{e[n]=t}),e}function K8(i){const e=new Headers;for(const[t,n]of Object.entries(i))e.append(t,n);return e}const J8="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function X8(i,e,t){const n=new CL;let s;t.data instanceof Blob?s=await t.data.text():t.data instanceof ArrayBuffer?s=new TextDecoder().decode(t.data):s=t.data;const r=JSON.parse(s);if(i.isVertexAI()){const a=OI(r);Object.assign(n,a)}else Object.assign(n,r);e(n)}class Z8{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n,this.music=new $8(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,n,s,r,a,l;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let h;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&gE(e.config.tools)&&mE(p);const v=nD(p);if(this.apiClient.isVertexAI())h=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(v,h);else{const j=this.apiClient.getApiKey();let ee="BidiGenerateContent",B="key";j?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),ee="BidiGenerateContentConstrained",B="access_token"),h=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${ee}?${B}=${j}`}let m=()=>{};const E=new Promise(j=>{m=j}),S=e.callbacks,N=function(){var j;(j=S?.onopen)===null||j===void 0||j.call(S),m({})},C=this.apiClient,P={onopen:N,onmessage:j=>{X8(C,S.onmessage,j)},onerror:(t=S?.onerror)!==null&&t!==void 0?t:function(j){},onclose:(n=S?.onclose)!==null&&n!==void 0?n:function(j){}},L=this.webSocketFactory.create(h,tD(v),P);L.connect(),await E;let O=Tn(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&O.startsWith("publishers/")){const j=this.apiClient.getProject(),ee=this.apiClient.getLocation();O=`projects/${j}/locations/${ee}/`+O}let q={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[G0.AUDIO]}:e.config.responseModalities=[G0.AUDIO]),!((r=e.config)===null||r===void 0)&&r.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const G=(l=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&l!==void 0?l:[],W=[];for(const j of G)if(this.isCallableTool(j)){const ee=j;W.push(await ee.tool())}else W.push(j);W.length>0&&(e.config.tools=W);const K={model:O,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?q=LI(this.apiClient,K):q=RI(this.apiClient,K),delete q.config,L.send(JSON.stringify(q)),new eD(L,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Q8={turnComplete:!0};class eD{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let n=[];try{n=Aa(t.turns),e.isVertexAI()||(n=n.map(s=>hg(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:n,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let n=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?n=t.functionResponses:n=[t.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(const r of n){if(typeof r!="object"||r===null||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!e.isVertexAI()&&!("id"in r))throw new Error(J8)}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},Q8),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:DI(e)}:t={realtimeInput:MI(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function tD(i){const e={};return i.forEach((t,n)=>{e[n]=t}),e}function nD(i){const e=new Headers;for(const[t,n]of Object.entries(i))e.append(t,n);return e}const Tx=10;function Cx(i){var e,t,n;if(!((e=i?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const a of(t=i?.tools)!==null&&t!==void 0?t:[])if(Jd(a)){s=!0;break}if(!s)return!0;const r=(n=i?.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return r&&(r<0||!Number.isInteger(r))||r==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",r),!0):!1}function Jd(i){return"callTool"in i&&typeof i.callTool=="function"}function iD(i){var e,t,n;return(n=(t=(e=i.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(s=>Jd(s)))!==null&&n!==void 0?n:!1}function Nx(i){var e;const t=[];return!((e=i?.config)===null||e===void 0)&&e.tools&&i.config.tools.forEach((n,s)=>{if(Jd(n))return;const r=n;r.functionDeclarations&&r.functionDeclarations.length>0&&t.push(s)}),t}function kx(i){var e;return!(!((e=i?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}class sD extends Pl{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var n,s,r,a,l;const c=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!iD(t)||Cx(t.config))return await this.generateContentInternal(c);const d=Nx(t);if(d.length>0){const S=d.map(N=>`tools[${N}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${S}.`)}let h,p;const v=Aa(c.contents),m=(r=(s=(n=c.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:Tx;let E=0;for(;E<m&&(h=await this.generateContentInternal(c),!(!h.functionCalls||h.functionCalls.length===0));){const S=h.candidates[0].content,N=[];for(const C of(l=(a=t.config)===null||a===void 0?void 0:a.tools)!==null&&l!==void 0?l:[])if(Jd(C)){const L=await C.callTool(h.functionCalls);N.push(...L)}E++,p={role:"user",parts:N},c.contents=Aa(c.contents),c.contents.push(S),c.contents.push(p),kx(c.config)&&(v.push(S),v.push(p))}return kx(c.config)&&(h.automaticFunctionCallingHistory=v),h},this.generateContentStream=async t=>{var n,s,r,a,l;if(this.maybeMoveToResponseJsonSchem(t),Cx(t.config)){const p=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(p)}const c=Nx(t);if(c.length>0){const p=c.map(v=>`tools[${v}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(r=(s=(n=t?.config)===null||n===void 0?void 0:n.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||r===void 0?void 0:r.streamFunctionCallArguments,h=(l=(a=t?.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||l===void 0?void 0:l.disable;if(d&&!h)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(n=>{var s;let r;const a=[];if(n?.generatedImages)for(const c of n.generatedImages)c&&c?.safetyAttributes&&((s=c?.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?r=c?.safetyAttributes:a.push(c);let l;return r?l={generatedImages:a,positivePromptSafetyAttributes:r,sdkHttpResponse:n.sdkHttpResponse}:l={generatedImages:a,sdkHttpResponse:n.sdkHttpResponse},l}),this.list=async t=>{var n;const a={config:Object.assign(Object.assign({},{queryBase:!0}),t?.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((n=a.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new Nc(Rl.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(a),a)},this.editImage=async t=>{const n={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(n.referenceImages=t.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async t=>{let n={numberOfImages:1,mode:"upscale"};t.config&&(n=Object.assign(Object.assign({},n),t.config));const s={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:n};return await this.upscaleImageInternal(s)},this.generateVideos=async t=>{var n,s,r,a,l,c;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((n=t.video)===null||n===void 0)&&n.uri&&(!((s=t.video)===null||s===void 0)&&s.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((a=(r=t.source)===null||r===void 0?void 0:r.video)===null||a===void 0)&&a.uri&&(!((c=(l=t.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,n,s;const r=(t=e.config)===null||t===void 0?void 0:t.tools;if(!r)return e;const a=await Promise.all(r.map(async c=>Jd(c)?await c.tool():c)),l={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(l.config.tools=a,e.config&&e.config.tools&&gE(e.config.tools)){const c=(s=(n=e.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&s!==void 0?s:{};let d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),mE(d),l.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return l}async initAfcToolsMap(e){var t,n,s;const r=new Map;for(const a of(n=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&n!==void 0?n:[])if(Jd(a)){const l=a,c=await l.tool();for(const d of(s=c.functionDeclarations)!==null&&s!==void 0?s:[]){if(!d.name)throw new Error("Function declaration name is required.");if(r.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);r.set(d.name,l)}}return r}async processAfcStream(e){var t,n,s;const r=(s=(n=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&s!==void 0?s:Tx;let a=!1,l=0;const c=await this.initAfcToolsMap(e);return(function(d,h,p){var v,m;return Kd(this,arguments,function*(){for(var E,S,N,C;l<r;){a&&(l++,a=!1);const q=yield ai(d.processParamsMaybeAddMcpUsage(p)),G=yield ai(d.generateContentStreamInternal(q)),W=[],K=[];try{for(var P=!0,L=(S=void 0,vf(G)),O;O=yield ai(L.next()),E=O.done,!E;P=!0){C=O.value,P=!1;const j=C;if(yield yield ai(j),j.candidates&&(!((v=j.candidates[0])===null||v===void 0)&&v.content)){K.push(j.candidates[0].content);for(const ee of(m=j.candidates[0].content.parts)!==null&&m!==void 0?m:[])if(l<r&&ee.functionCall){if(!ee.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(ee.functionCall.name)){const B=yield ai(h.get(ee.functionCall.name).callTool([ee.functionCall]));W.push(...B)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${ee.functionCall.name}`)}}}}catch(j){S={error:j}}finally{try{!P&&!E&&(N=L.return)&&(yield ai(N.call(L)))}finally{if(S)throw S.error}}if(W.length>0){a=!0;const j=new nf;j.candidates=[{content:{role:"user",parts:W}}],yield yield ai(j);const ee=[];ee.push(...K),ee.push({role:"user",parts:W});const B=Aa(p.contents).concat(ee);p.contents=B}else break}})})(this,c,e)}async generateContentInternal(e){var t,n,s,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=xx(this.apiClient,e);return l=et("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),a.then(h=>{const p=Ax(h),v=new nf;return Object.assign(v,p),v})}else{const d=wx(this.apiClient,e);return l=et("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),a.then(h=>{const p=_x(h),v=new nf;return Object.assign(v,p),v})}}async generateContentStreamInternal(e){var t,n,s,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=xx(this.apiClient,e);return l=et("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}),a.then(function(p){return Kd(this,arguments,function*(){var v,m,E,S;try{for(var N=!0,C=vf(p),P;P=yield ai(C.next()),v=P.done,!v;N=!0){S=P.value,N=!1;const L=S,O=Ax(yield ai(L.json()));O.sdkHttpResponse={headers:L.headers};const q=new nf;Object.assign(q,O),yield yield ai(q)}}catch(L){m={error:L}}finally{try{!N&&!v&&(E=C.return)&&(yield ai(E.call(C)))}finally{if(m)throw m.error}}})})}else{const d=wx(this.apiClient,e);return l=et("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),a.then(function(p){return Kd(this,arguments,function*(){var v,m,E,S;try{for(var N=!0,C=vf(p),P;P=yield ai(C.next()),v=P.done,!v;N=!0){S=P.value,N=!1;const L=S,O=_x(yield ai(L.json()));O.sdkHttpResponse={headers:L.headers};const q=new nf;Object.assign(q,O),yield yield ai(q)}}catch(L){m={error:L}}finally{try{!N&&!v&&(E=C.return)&&(yield ai(E.call(C)))}finally{if(m)throw m.error}}})})}}async embedContent(e){var t,n,s,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=hM(this.apiClient,e);return l=et("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),a.then(h=>{const p=pM(h),v=new sx;return Object.assign(v,p),v})}else{const d=dM(this.apiClient,e);return l=et("{model}:batchEmbedContents",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),a.then(h=>{const p=fM(h),v=new sx;return Object.assign(v,p),v})}}async generateImagesInternal(e){var t,n,s,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=EM(this.apiClient,e);return l=et("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),a.then(h=>{const p=CM(h),v=new rx;return Object.assign(v,p),v})}else{const d=SM(this.apiClient,e);return l=et("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),a.then(h=>{const p=TM(h),v=new rx;return Object.assign(v,p),v})}}async editImageInternal(e){var t,n;let s,r="",a={};if(this.apiClient.isVertexAI()){const l=oM(this.apiClient,e);return r=et("{model}:predict",l._url),a=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),s.then(c=>{const d=lM(c),h=new mL;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,n;let s,r="",a={};if(this.apiClient.isVertexAI()){const l=E8(this.apiClient,e);return r=et("{model}:predict",l._url),a=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),s.then(c=>{const d=T8(c),h=new vL;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,n;let s,r="",a={};if(this.apiClient.isVertexAI()){const l=a8(this.apiClient,e);return r=et("{model}:predict",l._url),a=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),s.then(c=>{const d=o8(c),h=new yL;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,n;let s,r="",a={};if(this.apiClient.isVertexAI()){const l=f8(this.apiClient,e);return r=et("{model}:predict",l._url),a=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),s.then(c=>{const d=p8(c),h=new bL;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,n,s,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=VM(this.apiClient,e);return l=et("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),a.then(h=>fv(h))}else{const d=zM(this.apiClient,e);return l=et("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),a.then(h=>hv(h))}}async listInternal(e){var t,n,s,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=QM(this.apiClient,e);return l=et("{models_url}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),a.then(h=>{const p=t8(h),v=new ax;return Object.assign(v,p),v})}else{const d=ZM(this.apiClient,e);return l=et("{models_url}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),a.then(h=>{const p=e8(h),v=new ax;return Object.assign(v,p),v})}}async update(e){var t,n,s,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=A8(this.apiClient,e);return l=et("{model}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),a.then(h=>fv(h))}else{const d=_8(this.apiClient,e);return l=et("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),a.then(h=>hv(h))}}async delete(e){var t,n,s,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=iM(this.apiClient,e);return l=et("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),a.then(h=>{const p=rM(h),v=new ox;return Object.assign(v,p),v})}else{const d=nM(this.apiClient,e);return l=et("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),a.then(h=>{const p=sM(h),v=new ox;return Object.assign(v,p),v})}}async countTokens(e){var t,n,s,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=QI(this.apiClient,e);return l=et("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),a.then(h=>{const p=tM(h),v=new lx;return Object.assign(v,p),v})}else{const d=ZI(this.apiClient,e);return l=et("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),a.then(h=>{const p=eM(h),v=new lx;return Object.assign(v,p),v})}}async computeTokens(e){var t,n;let s,r="",a={};if(this.apiClient.isVertexAI()){const l=GI(this.apiClient,e);return r=et("{model}:computeTokens",l._url),a=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),s.then(c=>{const d=$I(c),h=new wL;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,n,s,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=IM(this.apiClient,e);return l=et("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),a.then(h=>{const p=LM(h),v=new $0;return Object.assign(v,p),v})}else{const d=PM(this.apiClient,e);return l=et("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),a.then(h=>{const p=RM(h),v=new $0;return Object.assign(v,p),v})}}}class rD extends Pl{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,n=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let r;n&&"httpOptions"in n&&(r=n.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:r}});return t._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:t.name,config:n});return t._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const t=e.operation,n=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let r;n&&"httpOptions"in n&&(r=n.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:r}});return t._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:t.name,config:n});return t._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,n,s,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=cL(e);return l=et("{operationName}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json()),a}else{const d=uL(e);return l=et("{operationName}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),a}}async fetchPredictVideosOperationInternal(e){var t,n;let s,r="",a={};if(this.apiClient.isVertexAI()){const l=nL(e);return r=et("{resourceName}:fetchPredictOperation",l._url),a=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}function aD(i){const e={},t=y(i,["data"]);if(t!=null&&w(e,["data"],t),y(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=y(i,["mimeType"]);return n!=null&&w(e,["mimeType"],n),e}function oD(i){const e={},t=y(i,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>mD(r))),w(e,["parts"],s)}const n=y(i,["role"]);return n!=null&&w(e,["role"],n),e}function lD(i,e,t){const n={},s=y(e,["expireTime"]);t!==void 0&&s!=null&&w(t,["expireTime"],s);const r=y(e,["newSessionExpireTime"]);t!==void 0&&r!=null&&w(t,["newSessionExpireTime"],r);const a=y(e,["uses"]);t!==void 0&&a!=null&&w(t,["uses"],a);const l=y(e,["liveConnectConstraints"]);t!==void 0&&l!=null&&w(t,["bidiGenerateContentSetup"],gD(i,l));const c=y(e,["lockAdditionalFields"]);return t!==void 0&&c!=null&&w(t,["fieldMask"],c),n}function uD(i,e){const t={},n=y(e,["config"]);return n!=null&&w(t,["config"],lD(i,n,t)),t}function cD(i){const e={};if(y(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=y(i,["fileUri"]);t!=null&&w(e,["fileUri"],t);const n=y(i,["mimeType"]);return n!=null&&w(e,["mimeType"],n),e}function dD(i){const e={},t=y(i,["id"]);t!=null&&w(e,["id"],t);const n=y(i,["args"]);n!=null&&w(e,["args"],n);const s=y(i,["name"]);if(s!=null&&w(e,["name"],s),y(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(y(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function hD(i){const e={};if(y(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=y(i,["enableWidget"]);return t!=null&&w(e,["enableWidget"],t),e}function fD(i){const e={};if(y(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(y(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=y(i,["timeRangeFilter"]);return t!=null&&w(e,["timeRangeFilter"],t),e}function pD(i,e){const t={},n=y(i,["generationConfig"]);e!==void 0&&n!=null&&w(e,["setup","generationConfig"],n);const s=y(i,["responseModalities"]);e!==void 0&&s!=null&&w(e,["setup","generationConfig","responseModalities"],s);const r=y(i,["temperature"]);e!==void 0&&r!=null&&w(e,["setup","generationConfig","temperature"],r);const a=y(i,["topP"]);e!==void 0&&a!=null&&w(e,["setup","generationConfig","topP"],a);const l=y(i,["topK"]);e!==void 0&&l!=null&&w(e,["setup","generationConfig","topK"],l);const c=y(i,["maxOutputTokens"]);e!==void 0&&c!=null&&w(e,["setup","generationConfig","maxOutputTokens"],c);const d=y(i,["mediaResolution"]);e!==void 0&&d!=null&&w(e,["setup","generationConfig","mediaResolution"],d);const h=y(i,["seed"]);e!==void 0&&h!=null&&w(e,["setup","generationConfig","seed"],h);const p=y(i,["speechConfig"]);e!==void 0&&p!=null&&w(e,["setup","generationConfig","speechConfig"],py(p));const v=y(i,["thinkingConfig"]);e!==void 0&&v!=null&&w(e,["setup","generationConfig","thinkingConfig"],v);const m=y(i,["enableAffectiveDialog"]);e!==void 0&&m!=null&&w(e,["setup","generationConfig","enableAffectiveDialog"],m);const E=y(i,["systemInstruction"]);e!==void 0&&E!=null&&w(e,["setup","systemInstruction"],oD($s(E)));const S=y(i,["tools"]);if(e!==void 0&&S!=null){let G=ch(S);Array.isArray(G)&&(G=G.map(W=>yD(uh(W)))),w(e,["setup","tools"],G)}const N=y(i,["sessionResumption"]);e!==void 0&&N!=null&&w(e,["setup","sessionResumption"],vD(N));const C=y(i,["inputAudioTranscription"]);e!==void 0&&C!=null&&w(e,["setup","inputAudioTranscription"],C);const P=y(i,["outputAudioTranscription"]);e!==void 0&&P!=null&&w(e,["setup","outputAudioTranscription"],P);const L=y(i,["realtimeInputConfig"]);e!==void 0&&L!=null&&w(e,["setup","realtimeInputConfig"],L);const O=y(i,["contextWindowCompression"]);e!==void 0&&O!=null&&w(e,["setup","contextWindowCompression"],O);const q=y(i,["proactivity"]);return e!==void 0&&q!=null&&w(e,["setup","proactivity"],q),t}function gD(i,e){const t={},n=y(e,["model"]);n!=null&&w(t,["setup","model"],Tn(i,n));const s=y(e,["config"]);return s!=null&&w(t,["config"],pD(s,t)),t}function mD(i){const e={},t=y(i,["mediaResolution"]);t!=null&&w(e,["mediaResolution"],t);const n=y(i,["codeExecutionResult"]);n!=null&&w(e,["codeExecutionResult"],n);const s=y(i,["executableCode"]);s!=null&&w(e,["executableCode"],s);const r=y(i,["fileData"]);r!=null&&w(e,["fileData"],cD(r));const a=y(i,["functionCall"]);a!=null&&w(e,["functionCall"],dD(a));const l=y(i,["functionResponse"]);l!=null&&w(e,["functionResponse"],l);const c=y(i,["inlineData"]);c!=null&&w(e,["inlineData"],aD(c));const d=y(i,["text"]);d!=null&&w(e,["text"],d);const h=y(i,["thought"]);h!=null&&w(e,["thought"],h);const p=y(i,["thoughtSignature"]);p!=null&&w(e,["thoughtSignature"],p);const v=y(i,["videoMetadata"]);return v!=null&&w(e,["videoMetadata"],v),e}function vD(i){const e={},t=y(i,["handle"]);if(t!=null&&w(e,["handle"],t),y(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function yD(i){const e={},t=y(i,["functionDeclarations"]);if(t!=null){let h=t;Array.isArray(h)&&(h=h.map(p=>p)),w(e,["functionDeclarations"],h)}if(y(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=y(i,["googleSearchRetrieval"]);n!=null&&w(e,["googleSearchRetrieval"],n);const s=y(i,["computerUse"]);s!=null&&w(e,["computerUse"],s);const r=y(i,["fileSearch"]);r!=null&&w(e,["fileSearch"],r);const a=y(i,["codeExecution"]);if(a!=null&&w(e,["codeExecution"],a),y(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=y(i,["googleMaps"]);l!=null&&w(e,["googleMaps"],hD(l));const c=y(i,["googleSearch"]);c!=null&&w(e,["googleSearch"],fD(c));const d=y(i,["urlContext"]);return d!=null&&w(e,["urlContext"],d),e}function bD(i){const e=[];for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t)){const n=i[t];if(typeof n=="object"&&n!=null&&Object.keys(n).length>0){const s=Object.keys(n).map(r=>`${t}.${r}`);e.push(...s)}else e.push(t)}return e.join(",")}function wD(i,e){let t=null;const n=i.bidiGenerateContentSetup;if(typeof n=="object"&&n!==null&&"setup"in n){const r=n.setup;typeof r=="object"&&r!==null?(i.bidiGenerateContentSetup=r,t=r):delete i.bidiGenerateContentSetup}else n!==void 0&&delete i.bidiGenerateContentSetup;const s=i.fieldMask;if(t){const r=bD(t);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)r?i.fieldMask=r:delete i.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let l=[];s.length>0&&(l=s.map(d=>a.includes(d)?`generationConfig.${d}`:d));const c=[];r&&c.push(r),l.length>0&&c.push(...l),c.length>0?i.fieldMask=c.join(","):delete i.fieldMask}else delete i.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?i.fieldMask=s.join(","):delete i.fieldMask;return i}class xD extends Pl{constructor(e){super(),this.apiClient=e}async create(e){var t,n;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const l=uD(this.apiClient,e);r=et("auth_tokens",l._url),a=l._query,delete l.config,delete l._url,delete l._query;const c=wD(l,e.config);return s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),s.then(d=>d)}}}function _D(i,e){const t={},n=y(i,["displayName"]);return e!==void 0&&n!=null&&w(e,["displayName"],n),t}function AD(i){const e={},t=y(i,["config"]);return t!=null&&_D(t,e),e}function SD(i,e){const t={},n=y(i,["force"]);return e!==void 0&&n!=null&&w(e,["_query","force"],n),t}function ED(i){const e={},t=y(i,["name"]);t!=null&&w(e,["_url","name"],t);const n=y(i,["config"]);return n!=null&&SD(n,e),e}function TD(i){const e={},t=y(i,["name"]);return t!=null&&w(e,["_url","name"],t),e}function CD(i,e){const t={},n=y(i,["customMetadata"]);if(e!==void 0&&n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>a)),w(e,["customMetadata"],r)}const s=y(i,["chunkingConfig"]);return e!==void 0&&s!=null&&w(e,["chunkingConfig"],s),t}function ND(i){const e={},t=y(i,["name"]);t!=null&&w(e,["name"],t);const n=y(i,["metadata"]);n!=null&&w(e,["metadata"],n);const s=y(i,["done"]);s!=null&&w(e,["done"],s);const r=y(i,["error"]);r!=null&&w(e,["error"],r);const a=y(i,["response"]);return a!=null&&w(e,["response"],RD(a)),e}function kD(i){const e={},t=y(i,["fileSearchStoreName"]);t!=null&&w(e,["_url","file_search_store_name"],t);const n=y(i,["fileName"]);n!=null&&w(e,["fileName"],n);const s=y(i,["config"]);return s!=null&&CD(s,e),e}function RD(i){const e={},t=y(i,["sdkHttpResponse"]);t!=null&&w(e,["sdkHttpResponse"],t);const n=y(i,["parent"]);n!=null&&w(e,["parent"],n);const s=y(i,["documentName"]);return s!=null&&w(e,["documentName"],s),e}function LD(i,e){const t={},n=y(i,["pageSize"]);e!==void 0&&n!=null&&w(e,["_query","pageSize"],n);const s=y(i,["pageToken"]);return e!==void 0&&s!=null&&w(e,["_query","pageToken"],s),t}function PD(i){const e={},t=y(i,["config"]);return t!=null&&LD(t,e),e}function ID(i){const e={},t=y(i,["sdkHttpResponse"]);t!=null&&w(e,["sdkHttpResponse"],t);const n=y(i,["nextPageToken"]);n!=null&&w(e,["nextPageToken"],n);const s=y(i,["fileSearchStores"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>a)),w(e,["fileSearchStores"],r)}return e}function MD(i,e){const t={},n=y(i,["mimeType"]);e!==void 0&&n!=null&&w(e,["mimeType"],n);const s=y(i,["displayName"]);e!==void 0&&s!=null&&w(e,["displayName"],s);const r=y(i,["customMetadata"]);if(e!==void 0&&r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),w(e,["customMetadata"],l)}const a=y(i,["chunkingConfig"]);return e!==void 0&&a!=null&&w(e,["chunkingConfig"],a),t}function DD(i){const e={},t=y(i,["fileSearchStoreName"]);t!=null&&w(e,["_url","file_search_store_name"],t);const n=y(i,["config"]);return n!=null&&MD(n,e),e}function OD(i){const e={},t=y(i,["sdkHttpResponse"]);return t!=null&&w(e,["sdkHttpResponse"],t),e}function BD(i,e){const t={},n=y(i,["force"]);return e!==void 0&&n!=null&&w(e,["_query","force"],n),t}function FD(i){const e={},t=y(i,["name"]);t!=null&&w(e,["_url","name"],t);const n=y(i,["config"]);return n!=null&&BD(n,e),e}function UD(i){const e={},t=y(i,["name"]);return t!=null&&w(e,["_url","name"],t),e}function jD(i,e){const t={},n=y(i,["pageSize"]);e!==void 0&&n!=null&&w(e,["_query","pageSize"],n);const s=y(i,["pageToken"]);return e!==void 0&&s!=null&&w(e,["_query","pageToken"],s),t}function qD(i){const e={},t=y(i,["parent"]);t!=null&&w(e,["_url","parent"],t);const n=y(i,["config"]);return n!=null&&jD(n,e),e}function HD(i){const e={},t=y(i,["sdkHttpResponse"]);t!=null&&w(e,["sdkHttpResponse"],t);const n=y(i,["nextPageToken"]);n!=null&&w(e,["nextPageToken"],n);const s=y(i,["documents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>a)),w(e,["documents"],r)}return e}class zD extends Pl{constructor(e){super(),this.apiClient=e,this.list=async t=>new Nc(Rl.PAGED_ITEM_DOCUMENTS,n=>this.listInternal({parent:t.parent,config:n.config}),await this.listInternal(t),t)}async get(e){var t,n;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=UD(e);return r=et("{name}",l._url),a=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),s.then(c=>c)}}async delete(e){var t,n;let s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=FD(e);s=et("{name}",a._url),r=a._query,delete a._url,delete a._query,await this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}}async listInternal(e){var t,n;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=qD(e);return r=et("{parent}/documents",l._url),a=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),s.then(c=>{const d=HD(c),h=new xL;return Object.assign(h,d),h})}}}class VD extends Pl{constructor(e,t=new zD(e)){super(),this.apiClient=e,this.documents=t,this.list=async(n={})=>new Nc(Rl.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(n),n)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,n;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=AD(e);return r=et("fileSearchStores",l._url),a=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),s.then(c=>c)}}async get(e){var t,n;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=TD(e);return r=et("{name}",l._url),a=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),s.then(c=>c)}}async delete(e){var t,n;let s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=ED(e);s=et("{name}",a._url),r=a._query,delete a._url,delete a._query,await this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}}async listInternal(e){var t,n;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=PD(e);return r=et("fileSearchStores",l._url),a=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),s.then(c=>{const d=ID(c),h=new _L;return Object.assign(h,d),h})}}async uploadToFileSearchStoreInternal(e){var t,n;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=DD(e);return r=et("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",l._url),a=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),s.then(c=>{const d=OD(c),h=new AL;return Object.assign(h,d),h})}}async importFile(e){var t,n;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=kD(e);return r=et("{file_search_store_name}:importFile",l._url),a=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),s.then(c=>{const d=ND(c),h=new uy;return Object.assign(h,d),h})}}}function GD(i,e){const t={},n=y(i,["name"]);return n!=null&&w(t,["_url","name"],n),t}function $D(i,e){const t={},n=y(i,["name"]);return n!=null&&w(t,["_url","name"],n),t}function WD(i,e,t){const n={};if(y(i,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=y(i,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&w(e,["displayName"],s),y(i,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=y(i,["epochCount"]);e!==void 0&&r!=null&&w(e,["tuningTask","hyperparameters","epochCount"],r);const a=y(i,["learningRateMultiplier"]);if(a!=null&&w(n,["tuningTask","hyperparameters","learningRateMultiplier"],a),y(i,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(y(i,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(y(i,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=y(i,["batchSize"]);e!==void 0&&l!=null&&w(e,["tuningTask","hyperparameters","batchSize"],l);const c=y(i,["learningRate"]);if(e!==void 0&&c!=null&&w(e,["tuningTask","hyperparameters","learningRate"],c),y(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(y(i,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return n}function YD(i,e,t){const n={};let s=y(t,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const m=y(i,["validationDataset"]);e!==void 0&&m!=null&&w(e,["supervisedTuningSpec"],Rx(m))}else if(s==="PREFERENCE_TUNING"){const m=y(i,["validationDataset"]);e!==void 0&&m!=null&&w(e,["preferenceOptimizationSpec"],Rx(m))}const r=y(i,["tunedModelDisplayName"]);e!==void 0&&r!=null&&w(e,["tunedModelDisplayName"],r);const a=y(i,["description"]);e!==void 0&&a!=null&&w(e,["description"],a);let l=y(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const m=y(i,["epochCount"]);e!==void 0&&m!=null&&w(e,["supervisedTuningSpec","hyperParameters","epochCount"],m)}else if(l==="PREFERENCE_TUNING"){const m=y(i,["epochCount"]);e!==void 0&&m!=null&&w(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],m)}let c=y(t,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const m=y(i,["learningRateMultiplier"]);e!==void 0&&m!=null&&w(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],m)}else if(c==="PREFERENCE_TUNING"){const m=y(i,["learningRateMultiplier"]);e!==void 0&&m!=null&&w(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],m)}let d=y(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const m=y(i,["exportLastCheckpointOnly"]);e!==void 0&&m!=null&&w(e,["supervisedTuningSpec","exportLastCheckpointOnly"],m)}else if(d==="PREFERENCE_TUNING"){const m=y(i,["exportLastCheckpointOnly"]);e!==void 0&&m!=null&&w(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],m)}let h=y(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const m=y(i,["adapterSize"]);e!==void 0&&m!=null&&w(e,["supervisedTuningSpec","hyperParameters","adapterSize"],m)}else if(h==="PREFERENCE_TUNING"){const m=y(i,["adapterSize"]);e!==void 0&&m!=null&&w(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],m)}if(y(i,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(y(i,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=y(i,["labels"]);e!==void 0&&p!=null&&w(e,["labels"],p);const v=y(i,["beta"]);return e!==void 0&&v!=null&&w(e,["preferenceOptimizationSpec","hyperParameters","beta"],v),n}function KD(i,e){const t={},n=y(i,["baseModel"]);n!=null&&w(t,["baseModel"],n);const s=y(i,["preTunedModel"]);s!=null&&w(t,["preTunedModel"],s);const r=y(i,["trainingDataset"]);r!=null&&a7(r);const a=y(i,["config"]);return a!=null&&WD(a,t),t}function JD(i,e){const t={},n=y(i,["baseModel"]);n!=null&&w(t,["baseModel"],n);const s=y(i,["preTunedModel"]);s!=null&&w(t,["preTunedModel"],s);const r=y(i,["trainingDataset"]);r!=null&&o7(r,t,e);const a=y(i,["config"]);return a!=null&&YD(a,t,e),t}function XD(i,e){const t={},n=y(i,["name"]);return n!=null&&w(t,["_url","name"],n),t}function ZD(i,e){const t={},n=y(i,["name"]);return n!=null&&w(t,["_url","name"],n),t}function QD(i,e,t){const n={},s=y(i,["pageSize"]);e!==void 0&&s!=null&&w(e,["_query","pageSize"],s);const r=y(i,["pageToken"]);e!==void 0&&r!=null&&w(e,["_query","pageToken"],r);const a=y(i,["filter"]);return e!==void 0&&a!=null&&w(e,["_query","filter"],a),n}function e7(i,e,t){const n={},s=y(i,["pageSize"]);e!==void 0&&s!=null&&w(e,["_query","pageSize"],s);const r=y(i,["pageToken"]);e!==void 0&&r!=null&&w(e,["_query","pageToken"],r);const a=y(i,["filter"]);return e!==void 0&&a!=null&&w(e,["_query","filter"],a),n}function t7(i,e){const t={},n=y(i,["config"]);return n!=null&&QD(n,t),t}function n7(i,e){const t={},n=y(i,["config"]);return n!=null&&e7(n,t),t}function i7(i,e){const t={},n=y(i,["sdkHttpResponse"]);n!=null&&w(t,["sdkHttpResponse"],n);const s=y(i,["nextPageToken"]);s!=null&&w(t,["nextPageToken"],s);const r=y(i,["tunedModels"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>vE(l))),w(t,["tuningJobs"],a)}return t}function s7(i,e){const t={},n=y(i,["sdkHttpResponse"]);n!=null&&w(t,["sdkHttpResponse"],n);const s=y(i,["nextPageToken"]);s!=null&&w(t,["nextPageToken"],s);const r=y(i,["tuningJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>gv(l))),w(t,["tuningJobs"],a)}return t}function r7(i,e){const t={},n=y(i,["name"]);n!=null&&w(t,["model"],n);const s=y(i,["name"]);return s!=null&&w(t,["endpoint"],s),t}function a7(i,e){const t={};if(y(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(y(i,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=y(i,["examples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>r)),w(t,["examples","examples"],s)}return t}function o7(i,e,t){const n={};let s=y(t,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const a=y(i,["gcsUri"]);e!==void 0&&a!=null&&w(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(s==="PREFERENCE_TUNING"){const a=y(i,["gcsUri"]);e!==void 0&&a!=null&&w(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}let r=y(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const a=y(i,["vertexDatasetResource"]);e!==void 0&&a!=null&&w(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(r==="PREFERENCE_TUNING"){const a=y(i,["vertexDatasetResource"]);e!==void 0&&a!=null&&w(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}if(y(i,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function vE(i,e){const t={},n=y(i,["sdkHttpResponse"]);n!=null&&w(t,["sdkHttpResponse"],n);const s=y(i,["name"]);s!=null&&w(t,["name"],s);const r=y(i,["state"]);r!=null&&w(t,["state"],ZS(r));const a=y(i,["createTime"]);a!=null&&w(t,["createTime"],a);const l=y(i,["tuningTask","startTime"]);l!=null&&w(t,["startTime"],l);const c=y(i,["tuningTask","completeTime"]);c!=null&&w(t,["endTime"],c);const d=y(i,["updateTime"]);d!=null&&w(t,["updateTime"],d);const h=y(i,["description"]);h!=null&&w(t,["description"],h);const p=y(i,["baseModel"]);p!=null&&w(t,["baseModel"],p);const v=y(i,["_self"]);return v!=null&&w(t,["tunedModel"],r7(v)),t}function gv(i,e){const t={},n=y(i,["sdkHttpResponse"]);n!=null&&w(t,["sdkHttpResponse"],n);const s=y(i,["name"]);s!=null&&w(t,["name"],s);const r=y(i,["state"]);r!=null&&w(t,["state"],ZS(r));const a=y(i,["createTime"]);a!=null&&w(t,["createTime"],a);const l=y(i,["startTime"]);l!=null&&w(t,["startTime"],l);const c=y(i,["endTime"]);c!=null&&w(t,["endTime"],c);const d=y(i,["updateTime"]);d!=null&&w(t,["updateTime"],d);const h=y(i,["error"]);h!=null&&w(t,["error"],h);const p=y(i,["description"]);p!=null&&w(t,["description"],p);const v=y(i,["baseModel"]);v!=null&&w(t,["baseModel"],v);const m=y(i,["tunedModel"]);m!=null&&w(t,["tunedModel"],m);const E=y(i,["preTunedModel"]);E!=null&&w(t,["preTunedModel"],E);const S=y(i,["supervisedTuningSpec"]);S!=null&&w(t,["supervisedTuningSpec"],S);const N=y(i,["preferenceOptimizationSpec"]);N!=null&&w(t,["preferenceOptimizationSpec"],N);const C=y(i,["tuningDataStats"]);C!=null&&w(t,["tuningDataStats"],C);const P=y(i,["encryptionSpec"]);P!=null&&w(t,["encryptionSpec"],P);const L=y(i,["partnerModelTuningSpec"]);L!=null&&w(t,["partnerModelTuningSpec"],L);const O=y(i,["customBaseModel"]);O!=null&&w(t,["customBaseModel"],O);const q=y(i,["experiment"]);q!=null&&w(t,["experiment"],q);const G=y(i,["labels"]);G!=null&&w(t,["labels"],G);const W=y(i,["outputUri"]);W!=null&&w(t,["outputUri"],W);const K=y(i,["pipelineJob"]);K!=null&&w(t,["pipelineJob"],K);const j=y(i,["serviceAccount"]);j!=null&&w(t,["serviceAccount"],j);const ee=y(i,["tunedModelDisplayName"]);ee!=null&&w(t,["tunedModelDisplayName"],ee);const B=y(i,["veoTuningSpec"]);return B!=null&&w(t,["veoTuningSpec"],B),t}function l7(i,e){const t={},n=y(i,["sdkHttpResponse"]);n!=null&&w(t,["sdkHttpResponse"],n);const s=y(i,["name"]);s!=null&&w(t,["name"],s);const r=y(i,["metadata"]);r!=null&&w(t,["metadata"],r);const a=y(i,["done"]);a!=null&&w(t,["done"],a);const l=y(i,["error"]);return l!=null&&w(t,["error"],l),t}function Rx(i,e){const t={},n=y(i,["gcsUri"]);n!=null&&w(t,["validationDatasetUri"],n);const s=y(i,["vertexDatasetResource"]);return s!=null&&w(t,["validationDatasetUri"],s),t}class u7 extends Pl{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new Nc(Rl.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(t),t),this.tune=async t=>{var n;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const s={tunedModelName:t.baseModel};!((n=t.config)===null||n===void 0)&&n.preTunedModelCheckpointId&&(s.checkpointId=t.config.preTunedModelCheckpointId);const r=Object.assign(Object.assign({},t),{preTunedModel:s});return r.baseModel=void 0,await this.tuneInternal(r)}else{const s=Object.assign({},t);return await this.tuneInternal(s)}else{const s=Object.assign({},t),r=await this.tuneMldevInternal(s);let a="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?a=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(a=r.name.split("/operations/")[0]),{name:a,state:lv.JOB_STATE_QUEUED}}}}async getInternal(e){var t,n,s,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=ZD(e);return l=et("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),a.then(h=>gv(h))}else{const d=XD(e);return l=et("{name}",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),a.then(h=>vE(h))}}async listInternal(e){var t,n,s,r;let a,l="",c={};if(this.apiClient.isVertexAI()){const d=n7(e);return l=et("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),a.then(h=>{const p=s7(h),v=new ux;return Object.assign(v,p),v})}else{const d=t7(e);return l=et("tunedModels",d._url),c=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),a.then(h=>{const p=i7(h),v=new ux;return Object.assign(v,p),v})}}async cancel(e){var t,n,s,r;let a="",l={};if(this.apiClient.isVertexAI()){const c=$D(e);a=et("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}else{const c=GD(e);a=et("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async tuneInternal(e){var t,n;let s,r="",a={};if(this.apiClient.isVertexAI()){const l=JD(e,e);return r=et("tuningJobs",l._url),a=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),s.then(c=>gv(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,n;let s,r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=KD(e);return r=et("tunedModels",l._url),a=l._query,delete l._url,delete l._query,s=this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),s.then(c=>l7(c))}}}class c7{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const d7=1024*1024*8,h7=3,f7=1e3,p7=2,Y0="x-goog-upload-status";async function g7(i,e,t){var n;const s=await yE(i,e,t),r=await s?.json();if(((n=s?.headers)===null||n===void 0?void 0:n[Y0])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return r.file}async function m7(i,e,t){var n;const s=await yE(i,e,t),r=await s?.json();if(((n=s?.headers)===null||n===void 0?void 0:n[Y0])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const a=$S(r),l=new cy;return Object.assign(l,a),l}async function yE(i,e,t){var n,s;let r=0,a=0,l=new uv(new Response),c="upload";for(r=i.size;a<r;){const d=Math.min(d7,r-a),h=i.slice(a,a+d);a+d>=r&&(c+=", finalize");let p=0,v=f7;for(;p<h7&&(l=await t.request({path:"",body:h,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(a),"Content-Length":String(d)}}}),!(!((n=l?.headers)===null||n===void 0)&&n[Y0]));)p++,await y7(v),v=v*p7;if(a+=d,((s=l?.headers)===null||s===void 0?void 0:s[Y0])!=="active")break;if(r<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return l}async function v7(i){return{size:i.size,type:i.type}}function y7(i){return new Promise(e=>setTimeout(e,i))}class b7{async upload(e,t,n){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await g7(e,t,n)}async uploadToFileSearchStore(e,t,n){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await m7(e,t,n)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await v7(e)}}class w7{create(e,t,n){return new x7(e,t,n)}}class x7{constructor(e,t,n){this.url=e,this.headers=t,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const Lx="x-goog-api-key";class _7{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(Lx)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Lx,this.apiKey)}}}const A7="gl-node/";class yf{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const n=eL(e.httpOptions,e.vertexai,void 0,void 0);n&&(e.httpOptions?e.httpOptions.baseUrl=n:e.httpOptions={baseUrl:n}),this.apiVersion=e.apiVersion;const s=new _7(this.apiKey);this.apiClient=new U8({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:A7+"web",uploader:new b7,downloader:new c7}),this.models=new sD(this.apiClient),this.live=new Z8(this.apiClient,s,new w7),this.batches=new kP(this.apiClient),this.chats=new cI(this.models,this.apiClient),this.caches=new oI(this.apiClient),this.files=new wI(this.apiClient),this.operations=new rD(this.apiClient),this.authTokens=new xD(this.apiClient),this.tunings=new u7(this.apiClient),this.fileSearchStores=new VD(this.apiClient)}}const sf="transcriptions",n1="pdfs",ao={getAllTranscriptions:async i=>{if(console.log(" getAllTranscriptions - Usuario (propagado):",i),!i)return[];const{data:e,error:t}=await cs.from(sf).select("*").eq("user_id",i).order("created_at",{ascending:!1});return console.log(" getAllTranscriptions - Registros encontrados:",e?.length),t?(console.error("Error fetching transcriptions:",t),[]):(e||[]).map(n=>({id:n.id,name:n.name,fileName:n.file_name,pages:n.pages,pageCount:n.page_count,originalPageCount:n.original_page_count,provider:n.provider,transcription:n.transcription,date:new Date(n.created_at).toLocaleString(),error:n.error,tags:n.tags||[]}))},createTranscription:async(i,e)=>{const t=(await cs.auth.getUser()).data.user;if(!t)throw new Error("Usuario no autenticado");const{data:n,error:s}=await cs.from(sf).insert([{user_id:t.id,name:i.name,file_name:i.fileName,pages:i.pages,page_count:i.pageCount,original_page_count:i.originalPageCount,provider:i.provider,transcription:i.transcription,error:i.error,tags:i.tags}]).select().single();if(s)throw s;const r=n,a=r.id,l=`${t.id}/${a}.pdf`,{error:c}=await cs.storage.from(n1).upload(l,e);return c&&console.error("Error uploading file:",c),{id:r.id,name:r.name,fileName:r.file_name,pages:r.pages,pageCount:r.page_count,originalPageCount:r.original_page_count,provider:r.provider,transcription:r.transcription,date:new Date(r.created_at).toLocaleString(),error:r.error,tags:r.tags||[]}},deleteTranscription:async i=>{console.log(" dbService.deleteTranscription llamado con ID:",i);const{data:e,error:t}=await cs.auth.getUser();if(t||!e.user)throw console.error(" Error obteniendo usuario:",t),new Error("Usuario no autenticado");const n=e.user,s=`${n.id}/${i}.pdf`,{error:r}=await cs.storage.from(n1).remove([s]);r?console.warn(" Error deleting file:",r):console.log(" Archivo eliminado del storage");const{data:a,error:l}=await cs.from(sf).delete().eq("id",i).eq("user_id",n.id).select();if(l)throw console.error(" Error eliminando de la BD:",l),l;if(!a||a.length===0)throw new Error("No se pudo eliminar el registro. Verifica que te pertenezca.")},updateTranscriptionText:async(i,e)=>{const{error:t}=await cs.from(sf).update({transcription:e}).eq("id",i);if(t)throw t},updateTranscriptionTags:async(i,e)=>{const{error:t}=await cs.from(sf).update({tags:e}).eq("id",i);if(t)throw t},downloadOriginalPdf:async i=>{const e=(await cs.auth.getUser()).data.user;if(!e)return null;const t=`${e.id}/${i}.pdf`,{data:n,error:s}=await cs.storage.from(n1).download(t);if(s)throw s;return n},checkPdfExists:async()=>!0,getDocumentChat:async i=>{const{data:e}=await cs.auth.getUser(),t=e?.user?.id;if(!t)return[];const{data:n,error:s}=await cs.from("document_chats").select("messages").eq("user_id",t).eq("transcription_id",i).maybeSingle();return s?(console.error("Error fetching document chat:",s),[]):n?.messages||[]},saveDocumentChat:async(i,e)=>{const{data:t}=await cs.auth.getUser(),n=t?.user?.id;if(!n)return;const{error:s}=await cs.from("document_chats").upsert({user_id:n,transcription_id:i,messages:e},{onConflict:"user_id,transcription_id"});if(s)throw s}};function S7({onTranscriptionComplete:i,apiKeys:e,prompts:t}){const[n,s]=me.useState(null),[r,a]=me.useState([]),[l,c]=me.useState(0),[d,h]=me.useState(""),[p,v]=me.useState(""),[m,E]=me.useState(!1),[S,N]=me.useState(!1),[C,P]=me.useState(!1),[L,O]=me.useState(!1),[q,G]=me.useState(0),[W,K]=me.useState(""),[j,ee]=me.useState(!1),[B,H]=me.useState("gemini"),[se,ie]=me.useState(null),ye=async M=>{if(M&&M.type==="application/pdf"){O(!0),K(""),s(M),v(M.name.replace(/\.[^/.]+$/,"")),a([]),h(""),E(!1),N(!1),c(0);try{const V=await M.arrayBuffer(),Z=new Uint8Array(V),le=await nv(Z).promise;c(le.numPages);const ce=[],he=Math.min(le.numPages,20);for(let Ae=1;Ae<=he;Ae++){const Ee=await le.getPage(Ae),Ie=Ee.getViewport({scale:.5}),He=document.createElement("canvas"),Ye=He.getContext("2d");Ye&&(He.height=Ie.height,He.width=Ie.width,await Ee.render({canvasContext:Ye,viewport:Ie,canvas:He}).promise,ce.push(He.toDataURL("image/jpeg")))}a(ce)}catch(V){console.error("Error processing PDF:",V),K("No se pudo procesar el archivo PDF."),s(null)}finally{O(!1)}}else M&&K("Por favor, selecciona un archivo PDF vlido.")},X=M=>{M.preventDefault(),M.stopPropagation(),ee(!1),M.dataTransfer.files&&M.dataTransfer.files[0]&&ye(M.dataTransfer.files[0])},ue=M=>{M.preventDefault(),M.stopPropagation(),M.type==="dragenter"||M.type==="dragover"?ee(!0):M.type==="dragleave"&&ee(!1)},de=()=>{if(m)return Array.from({length:l},(Z,le)=>le+1);const M=new Set,V=d.split(",");for(const Z of V){const le=Z.trim();if(le.includes("-")){const[ce,he]=le.split("-").map(Number);if(!isNaN(ce)&&!isNaN(he)&&ce<=he)for(let Ae=ce;Ae<=he;Ae++)Ae>0&&Ae<=l&&M.add(Ae)}else{const ce=Number(le);!isNaN(ce)&&ce>0&&ce<=l&&M.add(ce)}}return Array.from(M).sort((Z,le)=>Z-le)},we=me.useMemo(de,[d,m,l]);me.useEffect(()=>{if(we.length===0){ie(null);return}const M=we.length;let V=0;B==="gemini"?(V=M*125e-6,ie(`$${V.toFixed(4)}`)):(V=M*(850/1e6)*5,ie(`$${V.toFixed(3)}`))},[we,B]);const Oe=async()=>{if(!n||we.length===0){K("Selecciona un PDF y especifica las pginas.");return}if(B==="openai"&&!e.openai){K("Configura tu API Key de OpenAI.");return}P(!0),K(""),G(0);try{let M="";const V=await n.arrayBuffer(),Z=await nv(V).promise,le=S?t.transcriptionTranslate:t.transcription;for(let he=0;he<we.length;he++){const Ae=we[he],Ee=await Z.getPage(Ae),Ie=Ee.getViewport({scale:2}),He=document.createElement("canvas"),Ye=He.getContext("2d");if(!Ye)continue;He.height=Ie.height,He.width=Ie.width,await Ee.render({canvasContext:Ye,viewport:Ie,canvas:He}).promise;const Ze=He.toDataURL("image/jpeg").split(",")[1],st=He.toDataURL("image/jpeg");let ne="";if(B==="gemini"){const Ge=new yf({apiKey:"AIzaSyAsUHH0VyT_kYUGinuA-g0V2yVucmXjuHs"}),Be={inlineData:{data:Ze,mimeType:"image/jpeg"}},Le={text:le};ne=(await Ge.models.generateContent({model:"gemini-2.0-flash",contents:{parts:[Be,Le]}})).text||""}else{const Ge=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.openai}`},body:JSON.stringify({model:"gpt-4o",messages:[{role:"user",content:[{type:"text",text:le},{type:"image_url",image_url:{url:st}}]}],max_tokens:4096})});if(!Ge.ok)throw new Error("Error OpenAI API");ne=(await Ge.json()).choices[0].message.content}const Je=he+1;M+=`--- PGINA ${Je} (PDF Original: ${Ae}) ---
`,M+=`[Transcription Page ${Je} | File Page ${Ae} REFERENCE  DO NOT CITE THIS NUMBER - for transcription reference only; not an official page number; do not use in citations, footnotes, bibliographies, or tables of contents]

`,M+=`${ne}

`,G((he+1)/we.length*100)}const ce=await ao.createTranscription({name:p||n.name,fileName:n.name,pages:m?"Todas":d,pageCount:we.length,originalPageCount:l,provider:B,transcription:M,tags:[]},n);i(ce)}catch(M){console.error(M),K(M.message||"Error desconocido")}finally{P(!1)}},Q=()=>{s(null),a([]),ie(null)};return x.jsx("div",{className:"bg-slate-50 dark:bg-gray-900 py-12 px-4 sm:px-6 font-sans transition-colors",children:x.jsxs("div",{className:"max-w-5xl mx-auto space-y-6 text-slate-800 dark:text-slate-100",children:[x.jsx("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4",children:x.jsxs("div",{children:[x.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Nueva Transcripcin"}),x.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Carga tu documento y configura la IA."})]})}),x.jsxs("div",{className:"bg-white dark:bg-gray-950 rounded-3xl shadow-xl shadow-slate-200/50 dark:shadow-slate-900/40 border border-slate-100 dark:border-slate-800 overflow-hidden relative transition-colors",children:[C&&x.jsx("div",{className:"absolute inset-0 z-50 bg-white/90 dark:bg-slate-950/90 backdrop-blur-sm flex flex-col items-center justify-center p-8",children:x.jsxs("div",{className:"w-full max-w-sm text-center",children:[x.jsx("div",{className:"w-16 h-16 border-4 border-blue-100 border-t-blue-600 rounded-full animate-spin mx-auto mb-6"}),x.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-slate-50 mb-2",children:"Transcribiendo..."}),x.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500 dark:text-slate-400 mb-2",children:[x.jsx("span",{children:"Progreso"}),x.jsxs("span",{children:[Math.round(q),"%"]})]}),x.jsx("div",{className:"w-full h-2 bg-slate-200 dark:bg-slate-800 rounded-full overflow-hidden",children:x.jsx("div",{className:"h-full bg-blue-600 transition-all duration-300",style:{width:`${q}%`}})}),x.jsx("p",{className:"mt-4 text-sm text-slate-400 dark:text-slate-500",children:"Por favor no cierres esta ventana."})]})}),!n&&!L&&x.jsx("div",{className:"p-8 md:p-12",children:x.jsxs("div",{className:`group relative border-2 border-dashed rounded-3xl h-80 flex flex-col items-center justify-center text-center transition-all duration-300 ease-in-out cursor-pointer overflow-hidden
      ${j?"border-blue-500 bg-blue-50 ring-4 ring-blue-100 scale-[1.01] dark:bg-blue-900/30 dark:ring-blue-500/30":"border-slate-200 bg-slate-50/50 hover:bg-white hover:border-blue-400 hover:shadow-xl hover:shadow-blue-500/5 dark:border-slate-700 dark:bg-slate-900/60 dark:hover:bg-slate-900"}`,onDrop:X,onDragOver:ue,onDragEnter:ue,onDragLeave:ue,onClick:()=>document.getElementById("file-input").click(),children:[x.jsx("input",{type:"file",id:"file-input",accept:"application/pdf",onChange:M=>ye(M.target.files?M.target.files[0]:null),className:"hidden"}),x.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity duration-500",children:[x.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-40 h-40 bg-blue-100/50 rounded-full blur-3xl"}),x.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-40 h-40 bg-blue-100/50 rounded-full blur-3xl"})]}),x.jsxs("div",{className:"relative z-10 mb-6 group-hover:-translate-y-1 transition-transform duration-300",children:[x.jsxs("div",{className:"w-20 h-20 bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700 flex items-center justify-center relative",children:[x.jsx("div",{className:"absolute inset-0 bg-blue-50 dark:bg-blue-900/20 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),x.jsx(Ok,{className:"w-10 h-10 text-slate-400 dark:text-slate-500 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors duration-300 relative z-10"})]}),x.jsx("div",{className:"absolute -bottom-3 left-1/2 -translate-x-1/2 w-12 h-2 bg-slate-200/50 rounded-full blur-sm group-hover:bg-blue-200/50 transition-colors"})]}),x.jsxs("div",{className:"relative z-10 space-y-2",children:[x.jsxs("p",{className:"text-xl font-bold text-slate-900 dark:text-slate-50",children:[x.jsx("span",{className:"text-blue-600 dark:text-blue-400 hover:underline decoration-2 underline-offset-2",children:"Haz clic para subir"})," ","o arrastra y suelta"]}),x.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm max-w-xs mx-auto leading-relaxed",children:"Sube tus expedientes judiciales o documentos legales en formato PDF."})]}),x.jsx("div",{className:"relative z-10 mt-6",children:x.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-slate-100 text-slate-500 border border-slate-200 group-hover:border-blue-200 group-hover:bg-blue-50 group-hover:text-blue-600 transition-colors dark:bg-slate-800 dark:text-slate-300 dark:border-slate-600 dark:group-hover:bg-slate-700 dark:group-hover:text-blue-300",children:"PDF  Mx. 50MB"})})]})}),L&&x.jsxs("div",{className:"p-32 text-center",children:[x.jsx("div",{className:"w-16 h-16 border-4 border-slate-100 dark:border-slate-700 border-t-blue-600 rounded-full animate-spin mx-auto mb-6"}),x.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-slate-50",children:"Analizando Documento..."}),x.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Preparando vista previa"})]}),n&&!L&&x.jsxs("div",{className:"p-8",children:[x.jsxs("div",{className:"flex items-center justify-between bg-slate-50 dark:bg-slate-900/60 p-5 rounded-2xl border border-slate-200 dark:border-slate-700 mb-8",children:[x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("div",{className:"w-12 h-12 bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-700 rounded-xl flex items-center justify-center shrink-0 text-red-500 shadow-sm",children:x.jsx(Au,{className:"w-7 h-7"})}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-bold text-slate-900 dark:text-slate-50 text-base",children:n.name}),x.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[(n.size/1024/1024).toFixed(2)," MB "," ",l," Pginas"]})]})]}),x.jsx("button",{onClick:Q,className:"px-4 py-2 bg-white border border-slate-200 text-slate-600 hover:text-red-600 hover:border-red-200 rounded-lg text-sm font-medium transition-all shadow-sm dark:bg-slate-900 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-800",children:"Cambiar archivo"})]}),x.jsxs("div",{className:"space-y-8",children:[x.jsxs("div",{className:"mb-8 space-y-8",children:[x.jsxs("div",{children:[x.jsxs("h3",{className:"text-sm font-bold text-slate-900 dark:text-slate-50 uppercase tracking-wide mb-4 flex items-center gap-2 border-b border-slate-100 dark:border-slate-800 pb-2",children:[x.jsx(Au,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),"1. Configuracin del Expediente"]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2 ml-1",children:"Nombre del Caso"}),x.jsx("input",{type:"text",value:p,onChange:M=>v(M.target.value),className:"w-full px-4 py-3.5 rounded-xl border border-slate-200 bg-white text-slate-900 font-medium placeholder:text-slate-400 focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 transition-all shadow-sm dark:bg-slate-950 dark:border-slate-700 dark:text-slate-100 dark:placeholder-slate-500",placeholder:"Ej: Caso 5402 - Declaracin Testimonial"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2 ml-1",children:"Alcance de lectura"}),x.jsx("div",{className:"p-1.5 bg-slate-100 dark:bg-slate-900/60 rounded-xl border border-slate-200 dark:border-slate-700",children:x.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[x.jsxs("div",{className:"flex bg-white dark:bg-slate-950 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 p-1 shrink-0",children:[x.jsxs("button",{onClick:()=>E(!0),className:`flex-1 px-4 py-2.5 text-xs font-bold rounded-md transition-all ${m?"bg-slate-800 text-white shadow-md":"text-slate-500 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-900"}`,children:["Todas (",l,")"]}),x.jsx("button",{onClick:()=>E(!1),className:`flex-1 px-4 py-2.5 text-xs font-bold rounded-md transition-all ${m?"text-slate-500 hover:bg-slate-50 dark:text-slate-400 dark:hover:bg-slate-900":"bg-slate-800 text-white shadow-md"}`,children:"Manual"})]}),x.jsx("div",{className:"flex-1 relative",children:x.jsx("input",{type:"text",disabled:m,value:m?"":d,onChange:M=>h(M.target.value),placeholder:m?"Documento completo":"Ej: 1-3, 5",className:`w-full h-full min-h-[46px] px-4 text-sm border-none bg-transparent focus:ring-0 outline-none rounded-lg ${m?"text-slate-400 dark:text-slate-500 italic cursor-not-allowed text-center":"text-slate-900 dark:text-slate-100 font-bold bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-700 shadow-inner"}`})})]})})]})]})]}),x.jsxs("div",{children:[x.jsxs("h3",{className:"text-sm font-bold text-slate-900 dark:text-slate-50 uppercase tracking-wide mb-4 flex items-center gap-2 border-b border-slate-100 dark:border-slate-800 pb-2",children:[x.jsx(Nl,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),"2. Configuracin de Procesamiento"]}),x.jsx("div",{className:"bg-slate-50/80 dark:bg-slate-900/60 rounded-2xl border border-slate-200 dark:border-slate-700 p-6",children:x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2 ml-1",children:"Motor de IA"}),x.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[x.jsxs("button",{onClick:()=>H("gemini"),className:`relative flex flex-col items-center justify-center py-3 px-4 rounded-xl border-2 transition-all ${B==="gemini"?"bg-white border-blue-500 text-blue-700 shadow-md ring-1 ring-blue-500/20 dark:bg-slate-950 dark:text-blue-300":"bg-white border-transparent text-slate-500 hover:border-slate-200 shadow-sm dark:bg-slate-900 dark:text-slate-300 dark:hover:border-slate-700"}`,children:[x.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[x.jsx("span",{className:"text-sm font-bold",children:"Gemini"}),x.jsx("span",{className:"bg-green-100 text-green-700 text-[9px] px-1.5 py-0.5 rounded font-bold uppercase dark:bg-green-900/50 dark:text-green-300",children:"Rpido"})]}),x.jsx("span",{className:"text-[10px] opacity-60",children:"Ideal para borradores"}),B==="gemini"&&x.jsx("div",{className:"absolute top-2 right-2 w-2 h-2 bg-blue-500 rounded-full"})]}),x.jsxs("button",{onClick:()=>H("openai"),className:`relative flex flex-col items-center justify-center py-3 px-4 rounded-xl border-2 transition-all ${B==="openai"?"bg-white border-blue-500 text-blue-700 shadow-md ring-1 ring-blue-500/20 dark:bg-slate-950 dark:text-blue-300":"bg-white border-transparent text-slate-500 hover:border-slate-200 shadow-sm dark:bg-slate-900 dark:text-slate-300 dark:hover:border-slate-700"}`,children:[x.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[x.jsx("span",{className:"text-sm font-bold",children:"GPT-4o"}),x.jsx("span",{className:"bg-purple-100 text-purple-700 text-[9px] px-1.5 py-0.5 rounded font-bold uppercase dark:bg-purple-900/40 dark:text-purple-300",children:"Preciso"})]}),x.jsx("span",{className:"text-[10px] opacity-60",children:"Ideal para contratos"}),B==="openai"&&x.jsx("div",{className:"absolute top-2 right-2 w-2 h-2 bg-blue-500 rounded-full"})]})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2 ml-1",children:"Opciones Adicionales"}),x.jsxs("label",{className:"flex items-center gap-4 px-5 py-3.5 bg-white border border-slate-200 rounded-xl cursor-pointer hover:border-blue-300 transition-all shadow-sm h-[76px] group dark:bg-slate-950 dark:border-slate-700 dark:hover:border-blue-500/70",children:[x.jsx("div",{className:`w-6 h-6 rounded border flex items-center justify-center transition-colors shrink-0 ${S?"bg-blue-600 border-blue-600":"border-slate-300 bg-slate-50 group-hover:bg-white dark:border-slate-600 dark:bg-slate-900"}`,children:S&&x.jsx(Ef,{className:"w-4 h-4 text-white"})}),x.jsx("input",{type:"checkbox",checked:S,onChange:M=>N(M.target.checked),className:"hidden"}),x.jsxs("div",{className:"flex flex-col",children:[x.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-100 group-hover:text-blue-700 dark:group-hover:text-blue-300 transition-colors",children:"Traducir al Espaol"}),x.jsx("span",{className:"text-[11px] text-slate-400 dark:text-slate-500 mt-0.5",children:"Detecta el idioma original y traduce la salida."})]})]})]})]})})]})]}),x.jsx("div",{className:"pt-6 border-t border-slate-100 dark:border-slate-800 flex flex-col md:flex-row items-center justify-between gap-4",children:x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsxs("div",{className:"px-4 py-2 bg-slate-50 rounded-lg border border-slate-200 text-sm text-slate-600 dark:bg-slate-900/60 dark:border-slate-700 dark:text-slate-300",children:[x.jsx("span",{className:"font-medium",children:"Pginas:"})," ",we.length]}),x.jsxs("div",{className:"px-4 py-2 bg-blue-50 rounded-lg border border-blue-100 text-sm text-blue-700 dark:bg-blue-950/40 dark:border-blue-900 dark:text-blue-300",children:[x.jsx("span",{className:"font-medium",children:"Costo Est.:"})," ",x.jsx("span",{className:"font-bold",children:se||"$0.00"})]})]})}),r.length>0&&x.jsxs("div",{className:"bg-slate-50/50 dark:bg-slate-900/60 rounded-2xl p-6 border border-slate-100 dark:border-slate-800",children:[x.jsx("div",{className:"flex items-center justify-between mb-4",children:x.jsxs("h4",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider flex items-center gap-2",children:[x.jsx(zk,{className:"w-4 h-4"}),"Vista Previa (",we.length," Seleccionadas)"]})}),x.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 lg:grid-cols-10 gap-3",children:r.map((M,V)=>{const Z=V+1,le=we.includes(Z);return x.jsxs("div",{className:`relative aspect-3/4 rounded-lg overflow-hidden border transition-all cursor-default ${le?"border-blue-500 ring-2 ring-blue-500/20 opacity-100 shadow-sm transform scale-105 z-10":"border-slate-200 opacity-50 grayscale hover:opacity-100 hover:grayscale-0 dark:border-slate-700"}`,children:[x.jsx("img",{src:M,alt:"",className:"w-full h-full object-cover"}),x.jsxs("div",{className:"absolute bottom-0 inset-x-0 bg-black/60 text-white text-[9px] text-center py-0.5 font-medium",children:["Pg ",Z]}),le&&x.jsx("div",{className:"absolute top-1 right-1 bg-blue-600 rounded-full p-0.5",children:x.jsx(Ef,{className:"w-3 h-3 text-white"})})]},V)})})]}),x.jsxs("button",{onClick:Oe,disabled:C||we.length===0,className:"px-8 py-3 bg-[#2563EB] hover:bg-blue-700 text-white text-sm font-bold rounded-xl shadow-lg shadow-blue-500/30 transition-all flex items-center gap-2 disabled:opacity-50 disabled:shadow-none w-full md:w-auto justify-center transform active:scale-95 dark:bg-blue-600 dark:hover:bg-blue-500 dark:shadow-blue-900/40 cursor-pointer",children:[x.jsx(dS,{className:"w-5 h-5"}),x.jsx("span",{children:"Iniciar Transcripcin"})]})]})]})]}),W&&x.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-xl text-sm border border-red-100 text-center font-medium animate-pulse dark:bg-red-950/40 dark:text-red-300 dark:border-red-900",children:W})]})})}function E7({transcriptions:i,clearHistory:e,onDeleteTranscription:t,onSelectTranscription:n}){const[s,r]=me.useState(""),[a,l]=me.useState(10),[c,d]=me.useState(1),[h,p]=me.useState("all"),[v,m]=me.useState("date-desc"),[E,S]=me.useState({isOpen:!1,transcriptionId:null,transcriptionName:""}),[N,C]=me.useState({isOpen:!1}),P=me.useMemo(()=>{let ee=[...i];if(s.trim()){const B=s.toLowerCase();ee=ee.filter(H=>H.name.toLowerCase().includes(B)||H.fileName.toLowerCase().includes(B)||H.tags&&H.tags.some(se=>se.toLowerCase().includes(B)))}return h!=="all"&&(h==="error"?ee=ee.filter(B=>B.error):h==="completed"?ee=ee.filter(B=>!B.error):h==="processing"&&(ee=[])),ee.sort((B,H)=>{switch(v){case"date-asc":return new Date(B.date).getTime()-new Date(H.date).getTime();case"date-desc":return new Date(H.date).getTime()-new Date(B.date).getTime();case"name-asc":return B.name.localeCompare(H.name);case"name-desc":return H.name.localeCompare(B.name);default:return 0}}),ee},[i,s,h,v]),L=Math.ceil(P.length/a),O=me.useMemo(()=>{const ee=(c-1)*a;return P.slice(ee,ee+a)},[P,c,a]);me.useMemo(()=>{d(1)},[s,h,a]);const q=ee=>{S({isOpen:!0,transcriptionId:ee.id,transcriptionName:ee.name})},G=()=>{E.transcriptionId!==null&&t(E.transcriptionId),S({isOpen:!1,transcriptionId:null,transcriptionName:""})},W=()=>{S({isOpen:!1,transcriptionId:null,transcriptionName:""})},K=()=>{e(),C({isOpen:!1})},j=()=>{C({isOpen:!1})};return i.length===0?x.jsxs("div",{className:"max-w-5xl mx-auto py-8 px-4 font-sans text-slate-800 dark:text-slate-100",children:[x.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Historial de Transcripciones"}),x.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"An no has realizado ninguna transcripcin."})]}):x.jsxs("div",{className:"max-w-5xl mx-auto py-8 px-4 font-sans text-slate-800 dark:text-slate-100",children:[x.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4",children:x.jsxs("div",{children:[x.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Historial de Transcripciones"}),x.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1",children:"Gestiona y revisa tus documentos procesados."})]})}),x.jsx("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-slate-200 mb-6 dark:bg-gray-900 dark:border-gray-700",children:x.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[x.jsxs("div",{className:"flex-1 relative",children:[x.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:x.jsx(R5,{className:"h-5 w-5 text-slate-400 dark:text-slate-500"})}),x.jsx("input",{type:"text",placeholder:"Buscar por nombre, archivo o etiqueta...",value:s,onChange:ee=>r(ee.target.value),className:"block w-full pl-10 pr-3 py-2.5 border border-slate-200 rounded-xl leading-5 bg-slate-50 placeholder-slate-400 focus:outline-none focus:bg-white focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all sm:text-sm dark:bg-gray-900 dark:border-gray-700 dark:text-gray-100 dark:placeholder-slate-500 dark:focus:bg-gray-900"})]}),x.jsxs("div",{className:"flex flex-wrap sm:flex-nowrap gap-3",children:[x.jsxs("div",{className:"relative min-w-[140px] flex-1 sm:flex-none",children:[x.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:x.jsx(Fk,{className:"h-4 w-4 text-slate-400"})}),x.jsxs("select",{value:h,onChange:ee=>p(ee.target.value),className:"block w-full pl-9 pr-8 py-2.5 text-sm border border-slate-200 rounded-xl bg-white focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 appearance-none cursor-pointer dark:bg-gray-900 dark:border-gray-700 dark:text-gray-100",children:[x.jsx("option",{value:"all",children:"Todos"}),x.jsx("option",{value:"completed",children:"Completado"}),x.jsx("option",{value:"error",children:"Con Errores"}),x.jsx("option",{value:"processing",children:"Procesando"})]}),x.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:x.jsx("svg",{className:"h-4 w-4 text-slate-400 dark:text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),x.jsxs("div",{className:"relative min-w-[140px] flex-1 sm:flex-none",children:[x.jsxs("select",{value:v,onChange:ee=>m(ee.target.value),className:"block w-full px-4 py-2.5 text-sm border border-slate-200 rounded-xl bg-white focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 appearance-none cursor-pointer dark:bg-gray-900 dark:border-gray-700 dark:text-gray-100",children:[x.jsx("option",{value:"date-desc",children:"Ms Reciente"}),x.jsx("option",{value:"date-asc",children:"Ms Antiguo"}),x.jsx("option",{value:"name-asc",children:"A - Z"}),x.jsx("option",{value:"name-desc",children:"Z - A"})]}),x.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:x.jsx("svg",{className:"h-4 w-4 text-slate-400 dark:text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),x.jsx("div",{className:"relative w-20 flex-none",children:x.jsxs("select",{value:a,onChange:ee=>l(Number(ee.target.value)),className:"block w-full px-3 py-2.5 text-center text-sm border border-slate-200 rounded-xl bg-white focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 appearance-none cursor-pointer dark:bg-gray-900 dark:border-gray-700 dark:text-gray-100",children:[x.jsx("option",{value:10,children:"10"}),x.jsx("option",{value:20,children:"20"}),x.jsx("option",{value:50,children:"50"})]})})]})]})}),O.length===0?x.jsxs("div",{className:"text-center py-20 bg-white rounded-2xl border border-dashed border-slate-300 dark:bg-gray-900 dark:border-slate-600",children:[x.jsx("div",{className:"mx-auto w-16 h-16 bg-slate-50 dark:bg-slate-800 rounded-full flex items-center justify-center mb-4",children:x.jsx(R5,{className:"w-8 h-8 text-slate-300 dark:text-slate-500"})}),x.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-slate-50",children:"No se encontraron resultados"}),x.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1",children:"Intenta ajustar tus filtros o trminos de bsqueda."})]}):x.jsx("div",{className:"space-y-3",children:O.map(ee=>x.jsxs("div",{onClick:()=>n(ee),className:"group bg-white rounded-xl border border-slate-200 p-4 sm:p-5 hover:border-blue-400 hover:shadow-md transition-all cursor-pointer flex flex-col sm:flex-row items-start sm:items-center gap-4 sm:gap-6 dark:bg-gray-900 dark:border-gray-700 dark:hover:border-blue-500",children:[x.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center shrink-0 transition-colors ${ee.error?"bg-red-50 text-red-500 dark:bg-red-950 dark:text-red-400":"bg-blue-50 text-blue-600 group-hover:bg-blue-100 dark:bg-blue-950 dark:text-blue-300 dark:group-hover:bg-blue-900"}`,children:x.jsx(Au,{className:"w-6 h-6"})}),x.jsxs("div",{className:"flex-1 min-w-0 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 w-full",children:[x.jsxs("div",{children:[x.jsx("h4",{className:"font-bold text-slate-900 dark:text-slate-50 truncate group-hover:text-blue-700 dark:group-hover:text-blue-300 transition-colors",children:ee.name}),x.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1 mt-1",children:[x.jsx(q1,{className:"w-3.5 h-3.5"}),ee.date]}),x.jsxs("span",{className:"text-[10px] text-slate-400 dark:text-slate-500 mt-1 mr-1",children:[ee.pageCount," ",ee.pageCount===1?"pgina":"pginas"]})]}),x.jsxs("div",{className:"flex flex-col justify-center",children:[x.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300 truncate",title:ee.fileName,children:[x.jsx("span",{className:"font-medium text-slate-400 dark:text-slate-500 text-xs uppercase mr-2",children:"Archivo:"}),ee.fileName]}),x.jsx("div",{className:"flex items-center gap-2 mt-1.5 flex-wrap",children:ee.tags&&ee.tags.length>0?ee.tags.map(B=>x.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-[10px] font-medium bg-slate-100 text-slate-600 border border-slate-200 dark:bg-slate-800 dark:text-slate-200 dark:border-slate-600",children:B},B)):x.jsx("span",{className:"text-[10px] text-slate-400 dark:text-slate-500 italic",children:"Sin etiquetas"})})]}),x.jsxs("div",{className:"flex items-center justify-start md:justify-end gap-3",children:[ee.error?x.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium bg-red-50 text-red-700 border border-red-100 dark:bg-red-950/40 dark:text-red-300 dark:border-red-900",children:[x.jsx(b0,{className:"w-4 h-4"}),"Error"]}):x.jsx("div",{className:"flex flex-col items-end",children:x.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium bg-emerald-50 text-emerald-700 border border-emerald-100 dark:bg-emerald-950/40 dark:text-emerald-300 dark:border-emerald-900",children:[x.jsx(Ef,{className:"w-4 h-4"}),"Completado"]})}),x.jsxs("button",{type:"button",onClick:B=>{B.stopPropagation(),q(ee)},className:"inline-flex items-center justify-center px-3 py-1 cursor-pointer rounded-full text-xs font-medium bg-red-50 text-red-600 border border-red-100 hover:bg-red-100 hover:text-red-700 transition-colors dark:bg-red-950/40 dark:text-red-300 dark:border-red-900 dark:hover:bg-red-900/60",title:"Eliminar transcripcin",children:[x.jsx(hS,{className:"w-4 h-4"}),x.jsx("span",{className:"ml-1 hidden sm:inline",children:"Eliminar"})]})]})]}),x.jsx("div",{className:"hidden sm:flex items-center justify-center text-slate-300 dark:text-slate-500 group-hover:text-blue-500 transition-colors pl-2",children:x.jsx(Ck,{className:"w-6 h-6"})})]},ee.id))}),L>1&&x.jsxs("div",{className:"flex items-center justify-between border-t border-slate-200 pt-6 mt-8 dark:border-slate-700",children:[x.jsx("button",{className:"flex items-center justify-center px-4 py-2 border border-slate-200 rounded-lg text-sm font-medium text-slate-700 bg-white hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors dark:bg-gray-900 dark:border-slate-700 dark:text-slate-100 dark:hover:bg-gray-800",onClick:()=>d(ee=>Math.max(1,ee-1)),disabled:c===1,children:"Anterior"}),x.jsxs("span",{className:"text-sm text-slate-600 dark:text-slate-400 font-medium",children:["Pgina",x.jsx("span",{className:"text-slate-900 dark:text-slate-100",children:c}),"de",x.jsx("span",{className:"text-slate-900 dark:text-slate-100",children:L})]}),x.jsx("button",{className:"flex items-center justify-center px-4 py-2 border border-slate-200 rounded-lg text-sm font-medium text-slate-700 bg-white hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors dark:bg-gray-900 dark:border-slate-700 dark:text-slate-100 dark:hover:bg-gray-800",onClick:()=>d(ee=>Math.min(L,ee+1)),disabled:c===L,children:"Siguiente"})]}),x.jsx(G1,{isOpen:E.isOpen,title:"Eliminar Transcripcin",message:`Ests seguro de que deseas eliminar "${E.transcriptionName}"? Esta accin no se puede deshacer y eliminar permanentemente la transcripcin y el archivo PDF asociado.`,confirmText:"S, eliminar",cancelText:"Cancelar",onConfirm:G,onCancel:W,variant:"danger"}),x.jsx(G1,{isOpen:N.isOpen,title:"Limpiar Todo el Historial",message:`Ests seguro de que deseas eliminar TODAS las transcripciones (${i.length} en total)? Esta accin no se puede deshacer y eliminar permanentemente todas las transcripciones y archivos PDF del historial.`,confirmText:"S, eliminar todo",cancelText:"Cancelar",onConfirm:K,onCancel:j,variant:"danger"})]})}const T7="modulepreload",C7=function(i){return"/transcriber-app/"+i},Px={},i1=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){let c=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");s=c(t.map(d=>{if(d=C7(d),d in Px)return;Px[d]=!0;const h=d.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const v=document.createElement("link");if(v.rel=h?"stylesheet":T7,h||(v.as="script"),v.crossOrigin="",v.href=d,l&&v.setAttribute("nonce",l),document.head.appendChild(v),h)return new Promise((m,E)=>{v.addEventListener("load",m),v.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${d}`)))})}))}function r(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&r(l.reason);return e().catch(r)})};function Fn(i){"@babel/helpers - typeof";return Fn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fn(i)}var oo=Uint8Array,ta=Uint16Array,my=Int32Array,vy=new oo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),yy=new oo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ix=new oo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),bE=function(i,e){for(var t=new ta(31),n=0;n<31;++n)t[n]=e+=1<<i[n-1];for(var s=new my(t[30]),n=1;n<30;++n)for(var r=t[n];r<t[n+1];++r)s[r]=r-t[n]<<5|n;return{b:t,r:s}},wE=bE(vy,2),N7=wE.b,mv=wE.r;N7[28]=258,mv[258]=28;var k7=bE(yy,0),Mx=k7.r,vv=new ta(32768);for(var oi=0;oi<32768;++oi){var gu=(oi&43690)>>1|(oi&21845)<<1;gu=(gu&52428)>>2|(gu&13107)<<2,gu=(gu&61680)>>4|(gu&3855)<<4,vv[oi]=((gu&65280)>>8|(gu&255)<<8)>>1}var bf=(function(i,e,t){for(var n=i.length,s=0,r=new ta(e);s<n;++s)i[s]&&++r[i[s]-1];var a=new ta(e);for(s=1;s<e;++s)a[s]=a[s-1]+r[s-1]<<1;var l;if(t){l=new ta(1<<e);var c=15-e;for(s=0;s<n;++s)if(i[s])for(var d=s<<4|i[s],h=e-i[s],p=a[i[s]-1]++<<h,v=p|(1<<h)-1;p<=v;++p)l[vv[p]>>c]=d}else for(l=new ta(n),s=0;s<n;++s)i[s]&&(l[s]=vv[a[i[s]-1]++]>>15-i[s]);return l}),Ac=new oo(288);for(var oi=0;oi<144;++oi)Ac[oi]=8;for(var oi=144;oi<256;++oi)Ac[oi]=9;for(var oi=256;oi<280;++oi)Ac[oi]=7;for(var oi=280;oi<288;++oi)Ac[oi]=8;var K0=new oo(32);for(var oi=0;oi<32;++oi)K0[oi]=5;var R7=bf(Ac,9,0),L7=bf(K0,5,0),xE=function(i){return(i+7)/8|0},P7=function(i,e,t){return(t==null||t>i.length)&&(t=i.length),new oo(i.subarray(e,t))},wl=function(i,e,t){t<<=e&7;var n=e/8|0;i[n]|=t,i[n+1]|=t>>8},rf=function(i,e,t){t<<=e&7;var n=e/8|0;i[n]|=t,i[n+1]|=t>>8,i[n+2]|=t>>16},s1=function(i,e){for(var t=[],n=0;n<i.length;++n)i[n]&&t.push({s:n,f:i[n]});var s=t.length,r=t.slice();if(!s)return{t:AE,l:0};if(s==1){var a=new oo(t[0].s+1);return a[t[0].s]=1,{t:a,l:1}}t.sort(function(q,G){return q.f-G.f}),t.push({s:-1,f:25001});var l=t[0],c=t[1],d=0,h=1,p=2;for(t[0]={s:-1,f:l.f+c.f,l,r:c};h!=s-1;)l=t[t[d].f<t[p].f?d++:p++],c=t[d!=h&&t[d].f<t[p].f?d++:p++],t[h++]={s:-1,f:l.f+c.f,l,r:c};for(var v=r[0].s,n=1;n<s;++n)r[n].s>v&&(v=r[n].s);var m=new ta(v+1),E=yv(t[h-1],m,0);if(E>e){var n=0,S=0,N=E-e,C=1<<N;for(r.sort(function(G,W){return m[W.s]-m[G.s]||G.f-W.f});n<s;++n){var P=r[n].s;if(m[P]>e)S+=C-(1<<E-m[P]),m[P]=e;else break}for(S>>=N;S>0;){var L=r[n].s;m[L]<e?S-=1<<e-m[L]++-1:++n}for(;n>=0&&S;--n){var O=r[n].s;m[O]==e&&(--m[O],++S)}E=e}return{t:new oo(m),l:E}},yv=function(i,e,t){return i.s==-1?Math.max(yv(i.l,e,t+1),yv(i.r,e,t+1)):e[i.s]=t},Dx=function(i){for(var e=i.length;e&&!i[--e];);for(var t=new ta(++e),n=0,s=i[0],r=1,a=function(c){t[n++]=c},l=1;l<=e;++l)if(i[l]==s&&l!=e)++r;else{if(!s&&r>2){for(;r>138;r-=138)a(32754);r>2&&(a(r>10?r-11<<5|28690:r-3<<5|12305),r=0)}else if(r>3){for(a(s),--r;r>6;r-=6)a(8304);r>2&&(a(r-3<<5|8208),r=0)}for(;r--;)a(s);r=1,s=i[l]}return{c:t.subarray(0,n),n:e}},af=function(i,e){for(var t=0,n=0;n<e.length;++n)t+=i[n]*e[n];return t},_E=function(i,e,t){var n=t.length,s=xE(e+2);i[s]=n&255,i[s+1]=n>>8,i[s+2]=i[s]^255,i[s+3]=i[s+1]^255;for(var r=0;r<n;++r)i[s+r+4]=t[r];return(s+4+n)*8},Ox=function(i,e,t,n,s,r,a,l,c,d,h){wl(e,h++,t),++s[256];for(var p=s1(s,15),v=p.t,m=p.l,E=s1(r,15),S=E.t,N=E.l,C=Dx(v),P=C.c,L=C.n,O=Dx(S),q=O.c,G=O.n,W=new ta(19),K=0;K<P.length;++K)++W[P[K]&31];for(var K=0;K<q.length;++K)++W[q[K]&31];for(var j=s1(W,7),ee=j.t,B=j.l,H=19;H>4&&!ee[Ix[H-1]];--H);var se=d+5<<3,ie=af(s,Ac)+af(r,K0)+a,ye=af(s,v)+af(r,S)+a+14+3*H+af(W,ee)+2*W[16]+3*W[17]+7*W[18];if(c>=0&&se<=ie&&se<=ye)return _E(e,h,i.subarray(c,c+d));var X,ue,de,we;if(wl(e,h,1+(ye<ie)),h+=2,ye<ie){X=bf(v,m,0),ue=v,de=bf(S,N,0),we=S;var Oe=bf(ee,B,0);wl(e,h,L-257),wl(e,h+5,G-1),wl(e,h+10,H-4),h+=14;for(var K=0;K<H;++K)wl(e,h+3*K,ee[Ix[K]]);h+=3*H;for(var Q=[P,q],M=0;M<2;++M)for(var V=Q[M],K=0;K<V.length;++K){var Z=V[K]&31;wl(e,h,Oe[Z]),h+=ee[Z],Z>15&&(wl(e,h,V[K]>>5&127),h+=V[K]>>12)}}else X=R7,ue=Ac,de=L7,we=K0;for(var K=0;K<l;++K){var le=n[K];if(le>255){var Z=le>>18&31;rf(e,h,X[Z+257]),h+=ue[Z+257],Z>7&&(wl(e,h,le>>23&31),h+=vy[Z]);var ce=le&31;rf(e,h,de[ce]),h+=we[ce],ce>3&&(rf(e,h,le>>5&8191),h+=yy[ce])}else rf(e,h,X[le]),h+=ue[le]}return rf(e,h,X[256]),h+ue[256]},I7=new my([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),AE=new oo(0),M7=function(i,e,t,n,s,r){var a=r.z||i.length,l=new oo(n+a+5*(1+Math.ceil(a/7e3))+s),c=l.subarray(n,l.length-s),d=r.l,h=(r.r||0)&7;if(e){h&&(c[0]=r.r>>3);for(var p=I7[e-1],v=p>>13,m=p&8191,E=(1<<t)-1,S=r.p||new ta(32768),N=r.h||new ta(E+1),C=Math.ceil(t/3),P=2*C,L=function(st){return(i[st]^i[st+1]<<C^i[st+2]<<P)&E},O=new my(25e3),q=new ta(288),G=new ta(32),W=0,K=0,j=r.i||0,ee=0,B=r.w||0,H=0;j+2<a;++j){var se=L(j),ie=j&32767,ye=N[se];if(S[ie]=ye,N[se]=ie,B<=j){var X=a-j;if((W>7e3||ee>24576)&&(X>423||!d)){h=Ox(i,c,0,O,q,G,K,ee,H,j-H,h),ee=W=K=0,H=j;for(var ue=0;ue<286;++ue)q[ue]=0;for(var ue=0;ue<30;++ue)G[ue]=0}var de=2,we=0,Oe=m,Q=ie-ye&32767;if(X>2&&se==L(j-Q))for(var M=Math.min(v,X)-1,V=Math.min(32767,j),Z=Math.min(258,X);Q<=V&&--Oe&&ie!=ye;){if(i[j+de]==i[j+de-Q]){for(var le=0;le<Z&&i[j+le]==i[j+le-Q];++le);if(le>de){if(de=le,we=Q,le>M)break;for(var ce=Math.min(Q,le-2),he=0,ue=0;ue<ce;++ue){var Ae=j-Q+ue&32767,Ee=S[Ae],Ie=Ae-Ee&32767;Ie>he&&(he=Ie,ye=Ae)}}}ie=ye,ye=S[ie],Q+=ie-ye&32767}if(we){O[ee++]=268435456|mv[de]<<18|Mx[we];var He=mv[de]&31,Ye=Mx[we]&31;K+=vy[He]+yy[Ye],++q[257+He],++G[Ye],B=j+de,++W}else O[ee++]=i[j],++q[i[j]]}}for(j=Math.max(j,B);j<a;++j)O[ee++]=i[j],++q[i[j]];h=Ox(i,c,d,O,q,G,K,ee,H,j-H,h),d||(r.r=h&7|c[h/8|0]<<3,h-=7,r.h=N,r.p=S,r.i=j,r.w=B)}else{for(var j=r.w||0;j<a+d;j+=65535){var Ze=j+65535;Ze>=a&&(c[h/8|0]=d,Ze=a),h=_E(c,h+1,i.subarray(j,Ze))}r.i=a}return P7(l,0,n+xE(h)+s)},SE=function(){var i=1,e=0;return{p:function(t){for(var n=i,s=e,r=t.length|0,a=0;a!=r;){for(var l=Math.min(a+2655,r);a<l;++a)s+=n+=t[a];n=(n&65535)+15*(n>>16),s=(s&65535)+15*(s>>16)}i=n,e=s},d:function(){return i%=65521,e%=65521,(i&255)<<24|(i&65280)<<8|(e&255)<<8|e>>8}}},D7=function(i,e,t,n,s){if(!s&&(s={l:1},e.dictionary)){var r=e.dictionary.subarray(-32768),a=new oo(r.length+i.length);a.set(r),a.set(i,r.length),i=a,s.w=r.length}return M7(i,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(i.length)))*1.5):20:12+e.mem,t,n,s)},EE=function(i,e,t){for(;t;++e)i[e]=t,t>>>=8},O7=function(i,e){var t=e.level,n=t==0?0:t<6?1:t==9?3:2;if(i[0]=120,i[1]=n<<6|(e.dictionary&&32),i[1]|=31-(i[0]<<8|i[1])%31,e.dictionary){var s=SE();s.p(e.dictionary),EE(i,2,s.d())}};function bv(i,e){e||(e={});var t=SE();t.p(i);var n=D7(i,e,e.dictionary?6:2,4);return O7(n,e),EE(n,n.length-4,t.d()),n}var B7=typeof TextDecoder<"u"&&new TextDecoder,F7=0;try{B7.decode(AE,{stream:!0}),F7=1}catch{}function U7(i){if(Array.isArray(i))return i}function j7(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,s,r,a,l=[],c=!0,d=!1;try{if(r=(t=t.call(i)).next,e!==0)for(;!(c=(n=r.call(t)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(h){d=!0,s=h}finally{try{if(!c&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(d)throw s}}return l}}function Bx(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function q7(i,e){if(i){if(typeof i=="string")return Bx(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Bx(i,e):void 0}}function H7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fx(i,e){return U7(i)||j7(i,e)||q7(i,e)||H7()}function Ux(i,e="utf8"){return new TextDecoder(e).decode(i)}const z7=new TextEncoder;function V7(i){return z7.encode(i)}const G7=1024*8,$7=(()=>{const i=new Uint8Array(4),e=new Uint32Array(i.buffer);return!((e[0]=1)&i[0])})(),r1={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class by{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=G7,t={}){let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const s=t.offset?t.offset>>>0:0,r=e.byteLength-s;let a=s;(ArrayBuffer.isView(e)||e instanceof by)&&(e.byteLength!==e.buffer.byteLength&&(a=e.byteOffset+s),e=e.buffer),n?this.lastWrittenByte=r:this.lastWrittenByte=0,this.buffer=e,this.length=r,this.byteLength=r,this.byteOffset=a,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,a,r),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,s=new Uint8Array(n);s.set(new Uint8Array(this.buffer)),this.buffer=s.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const n=r1[t].BYTES_PER_ELEMENT*e,s=this.byteOffset+this.offset,r=this.buffer.slice(s,s+n);if(this.littleEndian===$7&&t!=="uint8"&&t!=="int8"){const l=new Uint8Array(this.buffer.slice(s,s+n));l.reverse();const c=new r1[t](l.buffer);return this.offset+=n,c.reverse(),c}const a=new r1[t](r);return this.offset+=n,a}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let n=0;n<e;n++)t+=this.readChar();return t}readUtf8(e=1){return Ux(this.readBytes(e))}decodeText(e=1,t="utf8"){return Ux(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(V7(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function hh(i){let e=i.length;for(;--e>=0;)i[e]=0}const W7=3,Y7=258,TE=29,K7=256,J7=K7+1+TE,CE=30,X7=512,Z7=new Array((J7+2)*2);hh(Z7);const Q7=new Array(CE*2);hh(Q7);const eO=new Array(X7);hh(eO);const tO=new Array(Y7-W7+1);hh(tO);const nO=new Array(TE);hh(nO);const iO=new Array(CE);hh(iO);const sO=(i,e,t,n)=>{let s=i&65535|0,r=i>>>16&65535|0,a=0;for(;t!==0;){a=t>2e3?2e3:t,t-=a;do s=s+e[n++]|0,r=r+s|0;while(--a);s%=65521,r%=65521}return s|r<<16|0};var wv=sO;const rO=()=>{let i,e=[];for(var t=0;t<256;t++){i=t;for(var n=0;n<8;n++)i=i&1?3988292384^i>>>1:i>>>1;e[t]=i}return e},aO=new Uint32Array(rO()),oO=(i,e,t,n)=>{const s=aO,r=n+t;i^=-1;for(let a=n;a<r;a++)i=i>>>8^s[(i^e[a])&255];return i^-1};var Fo=oO,xv={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},NE={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const lO=(i,e)=>Object.prototype.hasOwnProperty.call(i,e);var uO=function(i){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const n in t)lO(t,n)&&(i[n]=t[n])}}return i},cO=i=>{let e=0;for(let n=0,s=i.length;n<s;n++)e+=i[n].length;const t=new Uint8Array(e);for(let n=0,s=0,r=i.length;n<r;n++){let a=i[n];t.set(a,s),s+=a.length}return t},kE={assign:uO,flattenChunks:cO};let RE=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{RE=!1}const Pf=new Uint8Array(256);for(let i=0;i<256;i++)Pf[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;Pf[254]=Pf[254]=1;var dO=i=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(i);let e,t,n,s,r,a=i.length,l=0;for(s=0;s<a;s++)t=i.charCodeAt(s),(t&64512)===55296&&s+1<a&&(n=i.charCodeAt(s+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),s++)),l+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(l),r=0,s=0;r<l;s++)t=i.charCodeAt(s),(t&64512)===55296&&s+1<a&&(n=i.charCodeAt(s+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),s++)),t<128?e[r++]=t:t<2048?(e[r++]=192|t>>>6,e[r++]=128|t&63):t<65536?(e[r++]=224|t>>>12,e[r++]=128|t>>>6&63,e[r++]=128|t&63):(e[r++]=240|t>>>18,e[r++]=128|t>>>12&63,e[r++]=128|t>>>6&63,e[r++]=128|t&63);return e};const hO=(i,e)=>{if(e<65534&&i.subarray&&RE)return String.fromCharCode.apply(null,i.length===e?i:i.subarray(0,e));let t="";for(let n=0;n<e;n++)t+=String.fromCharCode(i[n]);return t};var fO=(i,e)=>{const t=e||i.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(i.subarray(0,e));let n,s;const r=new Array(t*2);for(s=0,n=0;n<t;){let a=i[n++];if(a<128){r[s++]=a;continue}let l=Pf[a];if(l>4){r[s++]=65533,n+=l-1;continue}for(a&=l===2?31:l===3?15:7;l>1&&n<t;)a=a<<6|i[n++]&63,l--;if(l>1){r[s++]=65533;continue}a<65536?r[s++]=a:(a-=65536,r[s++]=55296|a>>10&1023,r[s++]=56320|a&1023)}return hO(r,s)},pO=(i,e)=>{e=e||i.length,e>i.length&&(e=i.length);let t=e-1;for(;t>=0&&(i[t]&192)===128;)t--;return t<0||t===0?e:t+Pf[i[t]]>e?t:e},_v={string2buf:dO,buf2string:fO,utf8border:pO};function gO(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var mO=gO;const a0=16209,vO=16191;var yO=function(e,t){let n,s,r,a,l,c,d,h,p,v,m,E,S,N,C,P,L,O,q,G,W,K,j,ee;const B=e.state;n=e.next_in,j=e.input,s=n+(e.avail_in-5),r=e.next_out,ee=e.output,a=r-(t-e.avail_out),l=r+(e.avail_out-257),c=B.dmax,d=B.wsize,h=B.whave,p=B.wnext,v=B.window,m=B.hold,E=B.bits,S=B.lencode,N=B.distcode,C=(1<<B.lenbits)-1,P=(1<<B.distbits)-1;e:do{E<15&&(m+=j[n++]<<E,E+=8,m+=j[n++]<<E,E+=8),L=S[m&C];t:for(;;){if(O=L>>>24,m>>>=O,E-=O,O=L>>>16&255,O===0)ee[r++]=L&65535;else if(O&16){q=L&65535,O&=15,O&&(E<O&&(m+=j[n++]<<E,E+=8),q+=m&(1<<O)-1,m>>>=O,E-=O),E<15&&(m+=j[n++]<<E,E+=8,m+=j[n++]<<E,E+=8),L=N[m&P];n:for(;;){if(O=L>>>24,m>>>=O,E-=O,O=L>>>16&255,O&16){if(G=L&65535,O&=15,E<O&&(m+=j[n++]<<E,E+=8,E<O&&(m+=j[n++]<<E,E+=8)),G+=m&(1<<O)-1,G>c){e.msg="invalid distance too far back",B.mode=a0;break e}if(m>>>=O,E-=O,O=r-a,G>O){if(O=G-O,O>h&&B.sane){e.msg="invalid distance too far back",B.mode=a0;break e}if(W=0,K=v,p===0){if(W+=d-O,O<q){q-=O;do ee[r++]=v[W++];while(--O);W=r-G,K=ee}}else if(p<O){if(W+=d+p-O,O-=p,O<q){q-=O;do ee[r++]=v[W++];while(--O);if(W=0,p<q){O=p,q-=O;do ee[r++]=v[W++];while(--O);W=r-G,K=ee}}}else if(W+=p-O,O<q){q-=O;do ee[r++]=v[W++];while(--O);W=r-G,K=ee}for(;q>2;)ee[r++]=K[W++],ee[r++]=K[W++],ee[r++]=K[W++],q-=3;q&&(ee[r++]=K[W++],q>1&&(ee[r++]=K[W++]))}else{W=r-G;do ee[r++]=ee[W++],ee[r++]=ee[W++],ee[r++]=ee[W++],q-=3;while(q>2);q&&(ee[r++]=ee[W++],q>1&&(ee[r++]=ee[W++]))}}else if((O&64)===0){L=N[(L&65535)+(m&(1<<O)-1)];continue n}else{e.msg="invalid distance code",B.mode=a0;break e}break}}else if((O&64)===0){L=S[(L&65535)+(m&(1<<O)-1)];continue t}else if(O&32){B.mode=vO;break e}else{e.msg="invalid literal/length code",B.mode=a0;break e}break}}while(n<s&&r<l);q=E>>3,n-=q,E-=q<<3,m&=(1<<E)-1,e.next_in=n,e.next_out=r,e.avail_in=n<s?5+(s-n):5-(n-s),e.avail_out=r<l?257+(l-r):257-(r-l),B.hold=m,B.bits=E};const Nd=15,jx=852,qx=592,Hx=0,a1=1,zx=2,bO=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),wO=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),xO=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),_O=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),AO=(i,e,t,n,s,r,a,l)=>{const c=l.bits;let d=0,h=0,p=0,v=0,m=0,E=0,S=0,N=0,C=0,P=0,L,O,q,G,W,K=null,j;const ee=new Uint16Array(Nd+1),B=new Uint16Array(Nd+1);let H=null,se,ie,ye;for(d=0;d<=Nd;d++)ee[d]=0;for(h=0;h<n;h++)ee[e[t+h]]++;for(m=c,v=Nd;v>=1&&ee[v]===0;v--);if(m>v&&(m=v),v===0)return s[r++]=1<<24|64<<16|0,s[r++]=1<<24|64<<16|0,l.bits=1,0;for(p=1;p<v&&ee[p]===0;p++);for(m<p&&(m=p),N=1,d=1;d<=Nd;d++)if(N<<=1,N-=ee[d],N<0)return-1;if(N>0&&(i===Hx||v!==1))return-1;for(B[1]=0,d=1;d<Nd;d++)B[d+1]=B[d]+ee[d];for(h=0;h<n;h++)e[t+h]!==0&&(a[B[e[t+h]]++]=h);if(i===Hx?(K=H=a,j=20):i===a1?(K=bO,H=wO,j=257):(K=xO,H=_O,j=0),P=0,h=0,d=p,W=r,E=m,S=0,q=-1,C=1<<m,G=C-1,i===a1&&C>jx||i===zx&&C>qx)return 1;for(;;){se=d-S,a[h]+1<j?(ie=0,ye=a[h]):a[h]>=j?(ie=H[a[h]-j],ye=K[a[h]-j]):(ie=96,ye=0),L=1<<d-S,O=1<<E,p=O;do O-=L,s[W+(P>>S)+O]=se<<24|ie<<16|ye|0;while(O!==0);for(L=1<<d-1;P&L;)L>>=1;if(L!==0?(P&=L-1,P+=L):P=0,h++,--ee[d]===0){if(d===v)break;d=e[t+a[h]]}if(d>m&&(P&G)!==q){for(S===0&&(S=m),W+=p,E=d-S,N=1<<E;E+S<v&&(N-=ee[E+S],!(N<=0));)E++,N<<=1;if(C+=1<<E,i===a1&&C>jx||i===zx&&C>qx)return 1;q=P&G,s[q]=m<<24|E<<16|W-r|0}}return P!==0&&(s[W+P]=d-S<<24|64<<16|0),l.bits=m,0};var wf=AO;const SO=0,LE=1,PE=2,{Z_FINISH:Vx,Z_BLOCK:EO,Z_TREES:o0,Z_OK:Sc,Z_STREAM_END:TO,Z_NEED_DICT:CO,Z_STREAM_ERROR:Ta,Z_DATA_ERROR:IE,Z_MEM_ERROR:ME,Z_BUF_ERROR:NO,Z_DEFLATED:Gx}=NE,gg=16180,$x=16181,Wx=16182,Yx=16183,Kx=16184,Jx=16185,Xx=16186,Zx=16187,Qx=16188,e_=16189,J0=16190,xl=16191,o1=16192,t_=16193,l1=16194,n_=16195,i_=16196,s_=16197,r_=16198,l0=16199,u0=16200,a_=16201,o_=16202,l_=16203,u_=16204,c_=16205,u1=16206,d_=16207,h_=16208,fi=16209,DE=16210,OE=16211,kO=852,RO=592,LO=15,PO=LO,f_=i=>(i>>>24&255)+(i>>>8&65280)+((i&65280)<<8)+((i&255)<<24);function IO(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const kc=i=>{if(!i)return 1;const e=i.state;return!e||e.strm!==i||e.mode<gg||e.mode>OE?1:0},BE=i=>{if(kc(i))return Ta;const e=i.state;return i.total_in=i.total_out=e.total=0,i.msg="",e.wrap&&(i.adler=e.wrap&1),e.mode=gg,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(kO),e.distcode=e.distdyn=new Int32Array(RO),e.sane=1,e.back=-1,Sc},FE=i=>{if(kc(i))return Ta;const e=i.state;return e.wsize=0,e.whave=0,e.wnext=0,BE(i)},UE=(i,e)=>{let t;if(kc(i))return Ta;const n=i.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Ta:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,FE(i))},jE=(i,e)=>{if(!i)return Ta;const t=new IO;i.state=t,t.strm=i,t.window=null,t.mode=gg;const n=UE(i,e);return n!==Sc&&(i.state=null),n},MO=i=>jE(i,PO);let p_=!0,c1,d1;const DO=i=>{if(p_){c1=new Int32Array(512),d1=new Int32Array(32);let e=0;for(;e<144;)i.lens[e++]=8;for(;e<256;)i.lens[e++]=9;for(;e<280;)i.lens[e++]=7;for(;e<288;)i.lens[e++]=8;for(wf(LE,i.lens,0,288,c1,0,i.work,{bits:9}),e=0;e<32;)i.lens[e++]=5;wf(PE,i.lens,0,32,d1,0,i.work,{bits:5}),p_=!1}i.lencode=c1,i.lenbits=9,i.distcode=d1,i.distbits=5},qE=(i,e,t,n)=>{let s;const r=i.state;return r.window===null&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Uint8Array(r.wsize)),n>=r.wsize?(r.window.set(e.subarray(t-r.wsize,t),0),r.wnext=0,r.whave=r.wsize):(s=r.wsize-r.wnext,s>n&&(s=n),r.window.set(e.subarray(t-n,t-n+s),r.wnext),n-=s,n?(r.window.set(e.subarray(t-n,t),0),r.wnext=n,r.whave=r.wsize):(r.wnext+=s,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=s))),0},OO=(i,e)=>{let t,n,s,r,a,l,c,d,h,p,v,m,E,S,N=0,C,P,L,O,q,G,W,K;const j=new Uint8Array(4);let ee,B;const H=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(kc(i)||!i.output||!i.input&&i.avail_in!==0)return Ta;t=i.state,t.mode===xl&&(t.mode=o1),a=i.next_out,s=i.output,c=i.avail_out,r=i.next_in,n=i.input,l=i.avail_in,d=t.hold,h=t.bits,p=l,v=c,K=Sc;e:for(;;)switch(t.mode){case gg:if(t.wrap===0){t.mode=o1;break}for(;h<16;){if(l===0)break e;l--,d+=n[r++]<<h,h+=8}if(t.wrap&2&&d===35615){t.wbits===0&&(t.wbits=15),t.check=0,j[0]=d&255,j[1]=d>>>8&255,t.check=Fo(t.check,j,2,0),d=0,h=0,t.mode=$x;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((d&255)<<8)+(d>>8))%31){i.msg="incorrect header check",t.mode=fi;break}if((d&15)!==Gx){i.msg="unknown compression method",t.mode=fi;break}if(d>>>=4,h-=4,W=(d&15)+8,t.wbits===0&&(t.wbits=W),W>15||W>t.wbits){i.msg="invalid window size",t.mode=fi;break}t.dmax=1<<t.wbits,t.flags=0,i.adler=t.check=1,t.mode=d&512?e_:xl,d=0,h=0;break;case $x:for(;h<16;){if(l===0)break e;l--,d+=n[r++]<<h,h+=8}if(t.flags=d,(t.flags&255)!==Gx){i.msg="unknown compression method",t.mode=fi;break}if(t.flags&57344){i.msg="unknown header flags set",t.mode=fi;break}t.head&&(t.head.text=d>>8&1),t.flags&512&&t.wrap&4&&(j[0]=d&255,j[1]=d>>>8&255,t.check=Fo(t.check,j,2,0)),d=0,h=0,t.mode=Wx;case Wx:for(;h<32;){if(l===0)break e;l--,d+=n[r++]<<h,h+=8}t.head&&(t.head.time=d),t.flags&512&&t.wrap&4&&(j[0]=d&255,j[1]=d>>>8&255,j[2]=d>>>16&255,j[3]=d>>>24&255,t.check=Fo(t.check,j,4,0)),d=0,h=0,t.mode=Yx;case Yx:for(;h<16;){if(l===0)break e;l--,d+=n[r++]<<h,h+=8}t.head&&(t.head.xflags=d&255,t.head.os=d>>8),t.flags&512&&t.wrap&4&&(j[0]=d&255,j[1]=d>>>8&255,t.check=Fo(t.check,j,2,0)),d=0,h=0,t.mode=Kx;case Kx:if(t.flags&1024){for(;h<16;){if(l===0)break e;l--,d+=n[r++]<<h,h+=8}t.length=d,t.head&&(t.head.extra_len=d),t.flags&512&&t.wrap&4&&(j[0]=d&255,j[1]=d>>>8&255,t.check=Fo(t.check,j,2,0)),d=0,h=0}else t.head&&(t.head.extra=null);t.mode=Jx;case Jx:if(t.flags&1024&&(m=t.length,m>l&&(m=l),m&&(t.head&&(W=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(r,r+m),W)),t.flags&512&&t.wrap&4&&(t.check=Fo(t.check,n,m,r)),l-=m,r+=m,t.length-=m),t.length))break e;t.length=0,t.mode=Xx;case Xx:if(t.flags&2048){if(l===0)break e;m=0;do W=n[r+m++],t.head&&W&&t.length<65536&&(t.head.name+=String.fromCharCode(W));while(W&&m<l);if(t.flags&512&&t.wrap&4&&(t.check=Fo(t.check,n,m,r)),l-=m,r+=m,W)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=Zx;case Zx:if(t.flags&4096){if(l===0)break e;m=0;do W=n[r+m++],t.head&&W&&t.length<65536&&(t.head.comment+=String.fromCharCode(W));while(W&&m<l);if(t.flags&512&&t.wrap&4&&(t.check=Fo(t.check,n,m,r)),l-=m,r+=m,W)break e}else t.head&&(t.head.comment=null);t.mode=Qx;case Qx:if(t.flags&512){for(;h<16;){if(l===0)break e;l--,d+=n[r++]<<h,h+=8}if(t.wrap&4&&d!==(t.check&65535)){i.msg="header crc mismatch",t.mode=fi;break}d=0,h=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),i.adler=t.check=0,t.mode=xl;break;case e_:for(;h<32;){if(l===0)break e;l--,d+=n[r++]<<h,h+=8}i.adler=t.check=f_(d),d=0,h=0,t.mode=J0;case J0:if(t.havedict===0)return i.next_out=a,i.avail_out=c,i.next_in=r,i.avail_in=l,t.hold=d,t.bits=h,CO;i.adler=t.check=1,t.mode=xl;case xl:if(e===EO||e===o0)break e;case o1:if(t.last){d>>>=h&7,h-=h&7,t.mode=u1;break}for(;h<3;){if(l===0)break e;l--,d+=n[r++]<<h,h+=8}switch(t.last=d&1,d>>>=1,h-=1,d&3){case 0:t.mode=t_;break;case 1:if(DO(t),t.mode=l0,e===o0){d>>>=2,h-=2;break e}break;case 2:t.mode=i_;break;case 3:i.msg="invalid block type",t.mode=fi}d>>>=2,h-=2;break;case t_:for(d>>>=h&7,h-=h&7;h<32;){if(l===0)break e;l--,d+=n[r++]<<h,h+=8}if((d&65535)!==(d>>>16^65535)){i.msg="invalid stored block lengths",t.mode=fi;break}if(t.length=d&65535,d=0,h=0,t.mode=l1,e===o0)break e;case l1:t.mode=n_;case n_:if(m=t.length,m){if(m>l&&(m=l),m>c&&(m=c),m===0)break e;s.set(n.subarray(r,r+m),a),l-=m,r+=m,c-=m,a+=m,t.length-=m;break}t.mode=xl;break;case i_:for(;h<14;){if(l===0)break e;l--,d+=n[r++]<<h,h+=8}if(t.nlen=(d&31)+257,d>>>=5,h-=5,t.ndist=(d&31)+1,d>>>=5,h-=5,t.ncode=(d&15)+4,d>>>=4,h-=4,t.nlen>286||t.ndist>30){i.msg="too many length or distance symbols",t.mode=fi;break}t.have=0,t.mode=s_;case s_:for(;t.have<t.ncode;){for(;h<3;){if(l===0)break e;l--,d+=n[r++]<<h,h+=8}t.lens[H[t.have++]]=d&7,d>>>=3,h-=3}for(;t.have<19;)t.lens[H[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,ee={bits:t.lenbits},K=wf(SO,t.lens,0,19,t.lencode,0,t.work,ee),t.lenbits=ee.bits,K){i.msg="invalid code lengths set",t.mode=fi;break}t.have=0,t.mode=r_;case r_:for(;t.have<t.nlen+t.ndist;){for(;N=t.lencode[d&(1<<t.lenbits)-1],C=N>>>24,P=N>>>16&255,L=N&65535,!(C<=h);){if(l===0)break e;l--,d+=n[r++]<<h,h+=8}if(L<16)d>>>=C,h-=C,t.lens[t.have++]=L;else{if(L===16){for(B=C+2;h<B;){if(l===0)break e;l--,d+=n[r++]<<h,h+=8}if(d>>>=C,h-=C,t.have===0){i.msg="invalid bit length repeat",t.mode=fi;break}W=t.lens[t.have-1],m=3+(d&3),d>>>=2,h-=2}else if(L===17){for(B=C+3;h<B;){if(l===0)break e;l--,d+=n[r++]<<h,h+=8}d>>>=C,h-=C,W=0,m=3+(d&7),d>>>=3,h-=3}else{for(B=C+7;h<B;){if(l===0)break e;l--,d+=n[r++]<<h,h+=8}d>>>=C,h-=C,W=0,m=11+(d&127),d>>>=7,h-=7}if(t.have+m>t.nlen+t.ndist){i.msg="invalid bit length repeat",t.mode=fi;break}for(;m--;)t.lens[t.have++]=W}}if(t.mode===fi)break;if(t.lens[256]===0){i.msg="invalid code -- missing end-of-block",t.mode=fi;break}if(t.lenbits=9,ee={bits:t.lenbits},K=wf(LE,t.lens,0,t.nlen,t.lencode,0,t.work,ee),t.lenbits=ee.bits,K){i.msg="invalid literal/lengths set",t.mode=fi;break}if(t.distbits=6,t.distcode=t.distdyn,ee={bits:t.distbits},K=wf(PE,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,ee),t.distbits=ee.bits,K){i.msg="invalid distances set",t.mode=fi;break}if(t.mode=l0,e===o0)break e;case l0:t.mode=u0;case u0:if(l>=6&&c>=258){i.next_out=a,i.avail_out=c,i.next_in=r,i.avail_in=l,t.hold=d,t.bits=h,yO(i,v),a=i.next_out,s=i.output,c=i.avail_out,r=i.next_in,n=i.input,l=i.avail_in,d=t.hold,h=t.bits,t.mode===xl&&(t.back=-1);break}for(t.back=0;N=t.lencode[d&(1<<t.lenbits)-1],C=N>>>24,P=N>>>16&255,L=N&65535,!(C<=h);){if(l===0)break e;l--,d+=n[r++]<<h,h+=8}if(P&&(P&240)===0){for(O=C,q=P,G=L;N=t.lencode[G+((d&(1<<O+q)-1)>>O)],C=N>>>24,P=N>>>16&255,L=N&65535,!(O+C<=h);){if(l===0)break e;l--,d+=n[r++]<<h,h+=8}d>>>=O,h-=O,t.back+=O}if(d>>>=C,h-=C,t.back+=C,t.length=L,P===0){t.mode=c_;break}if(P&32){t.back=-1,t.mode=xl;break}if(P&64){i.msg="invalid literal/length code",t.mode=fi;break}t.extra=P&15,t.mode=a_;case a_:if(t.extra){for(B=t.extra;h<B;){if(l===0)break e;l--,d+=n[r++]<<h,h+=8}t.length+=d&(1<<t.extra)-1,d>>>=t.extra,h-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=o_;case o_:for(;N=t.distcode[d&(1<<t.distbits)-1],C=N>>>24,P=N>>>16&255,L=N&65535,!(C<=h);){if(l===0)break e;l--,d+=n[r++]<<h,h+=8}if((P&240)===0){for(O=C,q=P,G=L;N=t.distcode[G+((d&(1<<O+q)-1)>>O)],C=N>>>24,P=N>>>16&255,L=N&65535,!(O+C<=h);){if(l===0)break e;l--,d+=n[r++]<<h,h+=8}d>>>=O,h-=O,t.back+=O}if(d>>>=C,h-=C,t.back+=C,P&64){i.msg="invalid distance code",t.mode=fi;break}t.offset=L,t.extra=P&15,t.mode=l_;case l_:if(t.extra){for(B=t.extra;h<B;){if(l===0)break e;l--,d+=n[r++]<<h,h+=8}t.offset+=d&(1<<t.extra)-1,d>>>=t.extra,h-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){i.msg="invalid distance too far back",t.mode=fi;break}t.mode=u_;case u_:if(c===0)break e;if(m=v-c,t.offset>m){if(m=t.offset-m,m>t.whave&&t.sane){i.msg="invalid distance too far back",t.mode=fi;break}m>t.wnext?(m-=t.wnext,E=t.wsize-m):E=t.wnext-m,m>t.length&&(m=t.length),S=t.window}else S=s,E=a-t.offset,m=t.length;m>c&&(m=c),c-=m,t.length-=m;do s[a++]=S[E++];while(--m);t.length===0&&(t.mode=u0);break;case c_:if(c===0)break e;s[a++]=t.length,c--,t.mode=u0;break;case u1:if(t.wrap){for(;h<32;){if(l===0)break e;l--,d|=n[r++]<<h,h+=8}if(v-=c,i.total_out+=v,t.total+=v,t.wrap&4&&v&&(i.adler=t.check=t.flags?Fo(t.check,s,v,a-v):wv(t.check,s,v,a-v)),v=c,t.wrap&4&&(t.flags?d:f_(d))!==t.check){i.msg="incorrect data check",t.mode=fi;break}d=0,h=0}t.mode=d_;case d_:if(t.wrap&&t.flags){for(;h<32;){if(l===0)break e;l--,d+=n[r++]<<h,h+=8}if(t.wrap&4&&d!==(t.total&4294967295)){i.msg="incorrect length check",t.mode=fi;break}d=0,h=0}t.mode=h_;case h_:K=TO;break e;case fi:K=IE;break e;case DE:return ME;case OE:default:return Ta}return i.next_out=a,i.avail_out=c,i.next_in=r,i.avail_in=l,t.hold=d,t.bits=h,(t.wsize||v!==i.avail_out&&t.mode<fi&&(t.mode<u1||e!==Vx))&&qE(i,i.output,i.next_out,v-i.avail_out),p-=i.avail_in,v-=i.avail_out,i.total_in+=p,i.total_out+=v,t.total+=v,t.wrap&4&&v&&(i.adler=t.check=t.flags?Fo(t.check,s,v,i.next_out-v):wv(t.check,s,v,i.next_out-v)),i.data_type=t.bits+(t.last?64:0)+(t.mode===xl?128:0)+(t.mode===l0||t.mode===l1?256:0),(p===0&&v===0||e===Vx)&&K===Sc&&(K=NO),K},BO=i=>{if(kc(i))return Ta;let e=i.state;return e.window&&(e.window=null),i.state=null,Sc},FO=(i,e)=>{if(kc(i))return Ta;const t=i.state;return(t.wrap&2)===0?Ta:(t.head=e,e.done=!1,Sc)},UO=(i,e)=>{const t=e.length;let n,s,r;return kc(i)||(n=i.state,n.wrap!==0&&n.mode!==J0)?Ta:n.mode===J0&&(s=1,s=wv(s,e,t,0),s!==n.check)?IE:(r=qE(i,e,t,t),r?(n.mode=DE,ME):(n.havedict=1,Sc))};var jO=FE,qO=UE,HO=BE,zO=MO,VO=jE,GO=OO,$O=BO,WO=FO,YO=UO,KO="pako inflate (from Nodeca project)",El={inflateReset:jO,inflateReset2:qO,inflateResetKeep:HO,inflateInit:zO,inflateInit2:VO,inflate:GO,inflateEnd:$O,inflateGetHeader:WO,inflateSetDictionary:YO,inflateInfo:KO};function JO(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var XO=JO;const HE=Object.prototype.toString,{Z_NO_FLUSH:ZO,Z_FINISH:QO,Z_OK:If,Z_STREAM_END:h1,Z_NEED_DICT:f1,Z_STREAM_ERROR:eB,Z_DATA_ERROR:g_,Z_MEM_ERROR:tB}=NE;function $f(i){this.options=kE.assign({chunkSize:1024*64,windowBits:15,to:""},i||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(i&&i.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new mO,this.strm.avail_out=0;let t=El.inflateInit2(this.strm,e.windowBits);if(t!==If)throw new Error(xv[t]);if(this.header=new XO,El.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=_v.string2buf(e.dictionary):HE.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=El.inflateSetDictionary(this.strm,e.dictionary),t!==If)))throw new Error(xv[t])}$f.prototype.push=function(i,e){const t=this.strm,n=this.options.chunkSize,s=this.options.dictionary;let r,a,l;if(this.ended)return!1;for(e===~~e?a=e:a=e===!0?QO:ZO,HE.call(i)==="[object ArrayBuffer]"?t.input=new Uint8Array(i):t.input=i,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),r=El.inflate(t,a),r===f1&&s&&(r=El.inflateSetDictionary(t,s),r===If?r=El.inflate(t,a):r===g_&&(r=f1));t.avail_in>0&&r===h1&&t.state.wrap>0&&i[t.next_in]!==0;)El.inflateReset(t),r=El.inflate(t,a);switch(r){case eB:case g_:case f1:case tB:return this.onEnd(r),this.ended=!0,!1}if(l=t.avail_out,t.next_out&&(t.avail_out===0||r===h1))if(this.options.to==="string"){let c=_v.utf8border(t.output,t.next_out),d=t.next_out-c,h=_v.buf2string(t.output,c);t.next_out=d,t.avail_out=n-d,d&&t.output.set(t.output.subarray(c,c+d),0),this.onData(h)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(r===If&&l===0)){if(r===h1)return r=El.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};$f.prototype.onData=function(i){this.chunks.push(i)};$f.prototype.onEnd=function(i){i===If&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=kE.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};function nB(i,e){const t=new $f(e);if(t.push(i),t.err)throw t.msg||xv[t.err];return t.result}var iB=$f,sB=nB,rB={Inflate:iB,inflate:sB};const{Inflate:aB,inflate:oB}=rB;var m_=aB,lB=oB;const zE=[];for(let i=0;i<256;i++){let e=i;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;zE[i]=e}const v_=4294967295;function uB(i,e,t){let n=i;for(let s=0;s<t;s++)n=zE[(n^e[s])&255]^n>>>8;return n}function cB(i,e){return(uB(v_,i,e)^v_)>>>0}function y_(i,e,t){const n=i.readUint32(),s=cB(new Uint8Array(i.buffer,i.byteOffset+i.offset-e-4,e),e);if(s!==n)throw new Error(`CRC mismatch for chunk ${t}. Expected ${n}, found ${s}`)}function VE(i,e,t){for(let n=0;n<t;n++)e[n]=i[n]}function GE(i,e,t,n){let s=0;for(;s<n;s++)e[s]=i[s];for(;s<t;s++)e[s]=i[s]+e[s-n]&255}function $E(i,e,t,n){let s=0;if(t.length===0)for(;s<n;s++)e[s]=i[s];else for(;s<n;s++)e[s]=i[s]+t[s]&255}function WE(i,e,t,n,s){let r=0;if(t.length===0){for(;r<s;r++)e[r]=i[r];for(;r<n;r++)e[r]=i[r]+(e[r-s]>>1)&255}else{for(;r<s;r++)e[r]=i[r]+(t[r]>>1)&255;for(;r<n;r++)e[r]=i[r]+(e[r-s]+t[r]>>1)&255}}function YE(i,e,t,n,s){let r=0;if(t.length===0){for(;r<s;r++)e[r]=i[r];for(;r<n;r++)e[r]=i[r]+e[r-s]&255}else{for(;r<s;r++)e[r]=i[r]+t[r]&255;for(;r<n;r++)e[r]=i[r]+dB(e[r-s],t[r],t[r-s])&255}}function dB(i,e,t){const n=i+e-t,s=Math.abs(n-i),r=Math.abs(n-e),a=Math.abs(n-t);return s<=r&&s<=a?i:r<=a?e:t}function hB(i,e,t,n,s,r){switch(i){case 0:VE(e,t,s);break;case 1:GE(e,t,s,r);break;case 2:$E(e,t,n,s);break;case 3:WE(e,t,n,s,r);break;case 4:YE(e,t,n,s,r);break;default:throw new Error(`Unsupported filter: ${i}`)}}const fB=new Uint16Array([255]),pB=new Uint8Array(fB.buffer),gB=pB[0]===255;function mB(i){const{data:e,width:t,height:n,channels:s,depth:r}=i,a=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(r/8)*s,c=new Uint8Array(n*t*l);let d=0;for(let h=0;h<7;h++){const p=a[h],v=Math.ceil((t-p.x)/p.xStep),m=Math.ceil((n-p.y)/p.yStep);if(v<=0||m<=0)continue;const E=v*l,S=new Uint8Array(E);for(let N=0;N<m;N++){const C=e[d++],P=e.subarray(d,d+E);d+=E;const L=new Uint8Array(E);hB(C,P,L,S,E,l),S.set(L);for(let O=0;O<v;O++){const q=p.x+O*p.xStep,G=p.y+N*p.yStep;if(!(q>=t||G>=n))for(let W=0;W<l;W++)c[(G*t+q)*l+W]=L[O*l+W]}}}if(r===16){const h=new Uint16Array(c.buffer);if(gB)for(let p=0;p<h.length;p++)h[p]=vB(h[p]);return h}else return c}function vB(i){return(i&255)<<8|i>>8&255}const yB=new Uint16Array([255]),bB=new Uint8Array(yB.buffer),wB=bB[0]===255,xB=new Uint8Array(0);function b_(i){const{data:e,width:t,height:n,channels:s,depth:r}=i,a=Math.ceil(r/8)*s,l=Math.ceil(r/8*s*t),c=new Uint8Array(n*l);let d=xB,h=0,p,v;for(let m=0;m<n;m++){switch(p=e.subarray(h+1,h+1+l),v=c.subarray(m*l,(m+1)*l),e[h]){case 0:VE(p,v,l);break;case 1:GE(p,v,l,a);break;case 2:$E(p,v,d,l);break;case 3:WE(p,v,d,l,a);break;case 4:YE(p,v,d,l,a);break;default:throw new Error(`Unsupported filter: ${e[h]}`)}d=v,h+=l+1}if(r===16){const m=new Uint16Array(c.buffer);if(wB)for(let E=0;E<m.length;E++)m[E]=_B(m[E]);return m}else return c}function _B(i){return(i&255)<<8|i>>8&255}const E0=Uint8Array.of(137,80,78,71,13,10,26,10);function w_(i){if(!AB(i.readBytes(E0.length)))throw new Error("wrong PNG signature")}function AB(i){if(i.length<E0.length)return!1;for(let e=0;e<E0.length;e++)if(i[e]!==E0[e])return!1;return!0}const SB="tEXt",EB=0,KE=new TextDecoder("latin1");function TB(i){if(NB(i),i.length===0||i.length>79)throw new Error("keyword length must be between 1 and 79")}const CB=/^[\u0000-\u00FF]*$/;function NB(i){if(!CB.test(i))throw new Error("invalid latin1 text")}function kB(i,e,t){const n=JE(e);i[n]=RB(e,t-n.length-1)}function JE(i){for(i.mark();i.readByte()!==EB;);const e=i.offset;i.reset();const t=KE.decode(i.readBytes(e-i.offset-1));return i.skip(1),TB(t),t}function RB(i,e){return KE.decode(i.readBytes(e))}const Kr={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},p1={UNKNOWN:-1,DEFLATE:0},x_={UNKNOWN:-1,ADAPTIVE:0},g1={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},c0={NONE:0,BACKGROUND:1,PREVIOUS:2},m1={SOURCE:0,OVER:1};class LB extends by{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);const{checkCrc:n=!1}=t;this._checkCrc=n,this._inflator=new m_,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=p1.UNKNOWN,this._filterMethod=x_.UNKNOWN,this._interlaceMethod=g1.UNKNOWN,this._colorType=Kr.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(w_(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(w_(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){const n=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case SB:kB(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-n!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?y_(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){const n=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=n+e;break}if(this.offset-n!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?y_(this,e+4,t):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=PB(this.readUint8());const t=this.readUint8();this._colorType=t;let n;switch(t){case Kr.GREYSCALE:n=1;break;case Kr.TRUECOLOUR:n=3;break;case Kr.INDEXED_COLOUR:n=1;break;case Kr.GREYSCALE_ALPHA:n=2;break;case Kr.TRUECOLOUR_ALPHA:n=4;break;case Kr.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=n,this._compressionMethod=this.readUint8(),this._compressionMethod!==p1.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const t=e/3;this._hasPalette=!0;const n=[];this._palette=n;for(let s=0;s<t;s++)n.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const t=e,n=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,n,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,n=this.offset+this.byteOffset;if(n+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,n,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case Kr.GREYSCALE:case Kr.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case Kr.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){const n=this.readByte();this._palette[t].push(n)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case Kr.UNKNOWN:case Kr.GREYSCALE_ALPHA:case Kr.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const t=JE(this),n=this.readUint8();if(n!==p1.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${n}`);const s=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:lB(s)}}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),n=this.readByte();this._png.resolution={x:e,y:t,unit:n}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},n=this._frames.at(e);if(n){if(n.data=b_({data:n.data,width:n.width,height:n.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||n.xOffset===0&&n.yOffset===0&&n.width===this._png.width&&n.height===this._png.height)t.data=n.data;else{const s=this._apng.frames.at(e-1);this.disposeFrame(n,s,t),this.addFrameDataToCanvas(t,n)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,n){switch(e.disposeOp){case c0.NONE:break;case c0.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let r=0;r<this._png.width;r++){const a=(s*e.width+r)*this._png.channels;for(let l=0;l<this._png.channels;l++)n.data[a+l]=0}break;case c0.PREVIOUS:n.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){const n=1<<this._png.depth,s=(r,a)=>{const l=((r+t.yOffset)*this._png.width+t.xOffset+a)*this._png.channels,c=(r*t.width+a)*this._png.channels;return{index:l,frameIndex:c}};switch(t.blendOp){case m1.SOURCE:for(let r=0;r<t.height;r++)for(let a=0;a<t.width;a++){const{index:l,frameIndex:c}=s(r,a);for(let d=0;d<this._png.channels;d++)e.data[l+d]=t.data[c+d]}break;case m1.OVER:for(let r=0;r<t.height;r++)for(let a=0;a<t.width;a++){const{index:l,frameIndex:c}=s(r,a);for(let d=0;d<this._png.channels;d++){const h=t.data[c+this._png.channels-1]/n,p=d%(this._png.channels-1)===0?1:t.data[c+d],v=Math.floor(h*p+(1-h)*e.data[l+d]);e.data[l+d]+=v}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==x_.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===g1.NO_INTERLACE)this._png.data=b_({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===g1.ADAM7)this._png.data=mB({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:c0.NONE,blendOp:m1.SOURCE,data:e}),this._inflator=new m_,this._writingDataChunks=!1}}function PB(i){if(i!==1&&i!==2&&i!==4&&i!==8&&i!==16)throw new Error(`invalid bit depth: ${i}`);return i}var __;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.METRE=1]="METRE"})(__||(__={}));function IB(i,e){return new LB(i,e).decode()}var Ht=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function v1(){Ht.console&&typeof Ht.console.log=="function"&&Ht.console.log.apply(Ht.console,arguments)}var Jn={log:v1,warn:function(i){Ht.console&&(typeof Ht.console.warn=="function"?Ht.console.warn.apply(Ht.console,arguments):v1.call(null,arguments))},error:function(i){Ht.console&&(typeof Ht.console.error=="function"?Ht.console.error.apply(Ht.console,arguments):v1(i))}};function y1(i,e,t){var n=new XMLHttpRequest;n.open("GET",i),n.responseType="blob",n.onload=function(){cc(n.response,e,t)},n.onerror=function(){Jn.error("could not download file")},n.send()}function A_(i){var e=new XMLHttpRequest;e.open("HEAD",i,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function d0(i){try{i.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),i.dispatchEvent(e)}}var cc=Ht.saveAs||((typeof window>"u"?"undefined":Fn(window))!=="object"||window!==Ht?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(i,e,t){var n=Ht.URL||Ht.webkitURL,s=document.createElement("a");e=e||i.name||"download",s.download=e,s.rel="noopener",typeof i=="string"?(s.href=i,s.origin!==location.origin?A_(s.href)?y1(i,e,t):d0(s,s.target="_blank"):d0(s)):(s.href=n.createObjectURL(i),setTimeout(function(){n.revokeObjectURL(s.href)},4e4),setTimeout(function(){d0(s)},0))}:"msSaveOrOpenBlob"in navigator?function(i,e,t){if(e=e||i.name||"download",typeof i=="string")if(A_(i))y1(i,e,t);else{var n=document.createElement("a");n.href=i,n.target="_blank",setTimeout(function(){d0(n)})}else navigator.msSaveOrOpenBlob((function(s,r){return r===void 0?r={autoBom:!1}:Fn(r)!=="object"&&(Jn.warn("Deprecated: Expected third argument to be a object"),r={autoBom:!r}),r.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s})(i,t),e)}:function(i,e,t,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof i=="string")return y1(i,e,t);var s=i.type==="application/octet-stream",r=/constructor/i.test(Ht.HTMLElement)||Ht.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||s&&r)&&(typeof FileReader>"u"?"undefined":Fn(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var h=l.result;h=a?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=h:location=h,n=null},l.readAsDataURL(i)}else{var c=Ht.URL||Ht.webkitURL,d=c.createObjectURL(i);n?n.location=d:location.href=d,n=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});function XE(i){var e;i=i||"",this.ok=!1,i.charAt(0)=="#"&&(i=i.substr(1,6)),i={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[i=(i=i.replace(/ /g,"")).toLowerCase()]||i;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<t.length;n++){var s=t[n].re,r=t[n].process,a=s.exec(i);a&&(e=r(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}var T0=Ht.atob.bind(Ht),S_=Ht.btoa.bind(Ht);function b1(i,e){var t=i[0],n=i[1],s=i[2],r=i[3];t=Hs(t,n,s,r,e[0],7,-680876936),r=Hs(r,t,n,s,e[1],12,-389564586),s=Hs(s,r,t,n,e[2],17,606105819),n=Hs(n,s,r,t,e[3],22,-1044525330),t=Hs(t,n,s,r,e[4],7,-176418897),r=Hs(r,t,n,s,e[5],12,1200080426),s=Hs(s,r,t,n,e[6],17,-1473231341),n=Hs(n,s,r,t,e[7],22,-45705983),t=Hs(t,n,s,r,e[8],7,1770035416),r=Hs(r,t,n,s,e[9],12,-1958414417),s=Hs(s,r,t,n,e[10],17,-42063),n=Hs(n,s,r,t,e[11],22,-1990404162),t=Hs(t,n,s,r,e[12],7,1804603682),r=Hs(r,t,n,s,e[13],12,-40341101),s=Hs(s,r,t,n,e[14],17,-1502002290),t=zs(t,n=Hs(n,s,r,t,e[15],22,1236535329),s,r,e[1],5,-165796510),r=zs(r,t,n,s,e[6],9,-1069501632),s=zs(s,r,t,n,e[11],14,643717713),n=zs(n,s,r,t,e[0],20,-373897302),t=zs(t,n,s,r,e[5],5,-701558691),r=zs(r,t,n,s,e[10],9,38016083),s=zs(s,r,t,n,e[15],14,-660478335),n=zs(n,s,r,t,e[4],20,-405537848),t=zs(t,n,s,r,e[9],5,568446438),r=zs(r,t,n,s,e[14],9,-1019803690),s=zs(s,r,t,n,e[3],14,-187363961),n=zs(n,s,r,t,e[8],20,1163531501),t=zs(t,n,s,r,e[13],5,-1444681467),r=zs(r,t,n,s,e[2],9,-51403784),s=zs(s,r,t,n,e[7],14,1735328473),t=Vs(t,n=zs(n,s,r,t,e[12],20,-1926607734),s,r,e[5],4,-378558),r=Vs(r,t,n,s,e[8],11,-2022574463),s=Vs(s,r,t,n,e[11],16,1839030562),n=Vs(n,s,r,t,e[14],23,-35309556),t=Vs(t,n,s,r,e[1],4,-1530992060),r=Vs(r,t,n,s,e[4],11,1272893353),s=Vs(s,r,t,n,e[7],16,-155497632),n=Vs(n,s,r,t,e[10],23,-1094730640),t=Vs(t,n,s,r,e[13],4,681279174),r=Vs(r,t,n,s,e[0],11,-358537222),s=Vs(s,r,t,n,e[3],16,-722521979),n=Vs(n,s,r,t,e[6],23,76029189),t=Vs(t,n,s,r,e[9],4,-640364487),r=Vs(r,t,n,s,e[12],11,-421815835),s=Vs(s,r,t,n,e[15],16,530742520),t=Gs(t,n=Vs(n,s,r,t,e[2],23,-995338651),s,r,e[0],6,-198630844),r=Gs(r,t,n,s,e[7],10,1126891415),s=Gs(s,r,t,n,e[14],15,-1416354905),n=Gs(n,s,r,t,e[5],21,-57434055),t=Gs(t,n,s,r,e[12],6,1700485571),r=Gs(r,t,n,s,e[3],10,-1894986606),s=Gs(s,r,t,n,e[10],15,-1051523),n=Gs(n,s,r,t,e[1],21,-2054922799),t=Gs(t,n,s,r,e[8],6,1873313359),r=Gs(r,t,n,s,e[15],10,-30611744),s=Gs(s,r,t,n,e[6],15,-1560198380),n=Gs(n,s,r,t,e[13],21,1309151649),t=Gs(t,n,s,r,e[4],6,-145523070),r=Gs(r,t,n,s,e[11],10,-1120210379),s=Gs(s,r,t,n,e[2],15,718787259),n=Gs(n,s,r,t,e[9],21,-343485551),i[0]=xu(t,i[0]),i[1]=xu(n,i[1]),i[2]=xu(s,i[2]),i[3]=xu(r,i[3])}function mg(i,e,t,n,s,r){return e=xu(xu(e,i),xu(n,r)),xu(e<<s|e>>>32-s,t)}function Hs(i,e,t,n,s,r,a){return mg(e&t|~e&n,i,e,s,r,a)}function zs(i,e,t,n,s,r,a){return mg(e&n|t&~n,i,e,s,r,a)}function Vs(i,e,t,n,s,r,a){return mg(e^t^n,i,e,s,r,a)}function Gs(i,e,t,n,s,r,a){return mg(t^(e|~n),i,e,s,r,a)}function ZE(i){var e,t=i.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=i.length;e+=64)b1(n,MB(i.substring(e-64,e)));i=i.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<i.length;e++)s[e>>2]|=i.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(b1(n,s),e=0;e<16;e++)s[e]=0;return s[14]=8*t,b1(n,s),n}function MB(i){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=i.charCodeAt(e)+(i.charCodeAt(e+1)<<8)+(i.charCodeAt(e+2)<<16)+(i.charCodeAt(e+3)<<24);return t}var E_="0123456789abcdef".split("");function DB(i){for(var e="",t=0;t<4;t++)e+=E_[i>>8*t+4&15]+E_[i>>8*t&15];return e}function OB(i){return String.fromCharCode(255&i,(65280&i)>>8,(16711680&i)>>16,(4278190080&i)>>24)}function Av(i){return ZE(i).map(OB).join("")}var BB=(function(i){for(var e=0;e<i.length;e++)i[e]=DB(i[e]);return i.join("")})(ZE("hello"))!="5d41402abc4b2a76b9719d911017c592";function xu(i,e){if(BB){var t=(65535&i)+(65535&e);return(i>>16)+(e>>16)+(t>>16)<<16|65535&t}return i+e&4294967295}function Sv(i,e){var t,n,s,r;if(i!==t){for(var a=(s=i,r=1+(256/i.length|0),new Array(r+1).join(s)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var h=l[c];d=(d+h+a.charCodeAt(c))%256,l[c]=l[d],l[d]=h}t=i,n=l}else l=n;var p=e.length,v=0,m=0,E="";for(c=0;c<p;c++)m=(m+(h=l[v=(v+1)%256]))%256,l[v]=l[m],l[m]=h,a=l[(l[v]+l[m])%256],E+=String.fromCharCode(e.charCodeAt(c)^a);return E}var T_={print:4,modify:8,copy:16,"annot-forms":32};function Od(i,e,t,n){this.v=1,this.r=2;var s=192;i.forEach(function(l){if(T_.perm!==void 0)throw new Error("Invalid permission: "+l);s+=T_[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var r=(e+this.padding).substr(0,32),a=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(r,a),this.P=-(1+(255^s)),this.encryptionKey=Av(r+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Sv(this.encryptionKey,this.padding)}function Bd(i){if(/[^\u0000-\u00ff]/.test(i))throw new Error("Invalid PDF Name Object: "+i+", Only accept ASCII characters.");for(var e="",t=i.length,n=0;n<t;n++){var s=i.charCodeAt(n);e+=s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?"#"+("0"+s.toString(16)).slice(-2):i[n]}return e}function C_(i){if(Fn(i)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,s){if(s=s||!1,typeof t!="string"||typeof n!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var r=Math.random().toString(35);return e[t][r]=[n,!!s],r},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var n=Array.prototype.slice.call(arguments,1),s=[];for(var r in e[t]){var a=e[t][r];try{a[0].apply(i,n)}catch(l){Ht.console&&Jn.error("jsPDF PubSub Error",l.message,l)}a[1]&&s.push(r)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function X0(i){if(!(this instanceof X0))return new X0(i);var e="opacity,stroke-opacity".split(",");for(var t in i)i.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=i[t]);this.id="",this.objectNumber=-1}function QE(i,e){this.gState=i,this.matrix=e,this.id="",this.objectNumber=-1}function pc(i,e,t,n,s){if(!(this instanceof pc))return new pc(i,e,t,n,s);this.type=i==="axial"?2:3,this.coords=e,this.colors=t,QE.call(this,n,s)}function Hd(i,e,t,n,s){if(!(this instanceof Hd))return new Hd(i,e,t,n,s);this.boundingBox=i,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,QE.call(this,n,s)}function _t(i){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],s=arguments[2],r=arguments[3],a=[],l=1,c=16,d="S",h=null;Fn(i=i||{})==="object"&&(t=i.orientation,n=i.unit||n,s=i.format||s,r=i.compress||i.compressPdf||r,(h=i.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),l=typeof i.userUnit=="number"?Math.abs(i.userUnit):1,i.precision!==void 0&&(e=i.precision),i.floatPrecision!==void 0&&(c=i.floatPrecision),d=i.defaultPathOperation||"S"),a=i.filters||(r===!0?["FlateEncode"]:a),n=n||"mm",t=(""+(t||"P")).toLowerCase();var p=i.putOnlyUsedFonts||!1,v={},m={internal:{},__private__:{}};m.__private__.PubSub=C_;var E="1.3",S=m.__private__.getPdfVersion=function(){return E};m.__private__.setPdfVersion=function(k){E=k};var N={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return N};var C=m.__private__.getPageFormat=function(k){return N[k]};s=s||"a4";var P="compat",L="advanced",O=P;function q(){this.saveGraphicsState(),ne(new wt(Pt,0,0,-Pt,0,Oa()*Pt).toString()+" cm"),this.setFontSize(this.getFontSize()/Pt),d="n",O=L}function G(){this.restoreGraphicsState(),d="S",O=P}var W=m.__private__.combineFontStyleAndFontWeight=function(k,F){if(k=="bold"&&F=="normal"||k=="bold"&&F==400||k=="normal"&&F=="italic"||k=="bold"&&F=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return F&&(k=F==400||F==="normal"?k==="italic"?"italic":"normal":F!=700&&F!=="bold"||k!=="normal"?(F==700?"bold":F)+""+k:"bold"),k};m.advancedAPI=function(k){var F=O===P;return F&&q.call(this),typeof k!="function"||(k(this),F&&G.call(this)),this},m.compatAPI=function(k){var F=O===L;return F&&G.call(this),typeof k!="function"||(k(this),F&&q.call(this)),this},m.isAdvancedAPI=function(){return O===L};var K,j=function(k){if(O!==L)throw new Error(k+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},ee=m.roundToPrecision=m.__private__.roundToPrecision=function(k,F){var oe=e||F;if(isNaN(k)||isNaN(oe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return k.toFixed(oe).replace(/0+$/,"")};K=m.hpf=m.__private__.hpf=typeof c=="number"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return ee(k,c)}:c==="smart"?function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return ee(k,k>-1&&k<1?16:5)}:function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.hpf");return ee(k,16)};var B=m.f2=m.__private__.f2=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f2");return ee(k,2)},H=m.__private__.f3=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.f3");return ee(k,3)},se=m.scale=m.__private__.scale=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.scale");return O===P?k*Pt:O===L?k:void 0},ie=function(k){return se((function(F){return O===P?Oa()-F:O===L?F:void 0})(k))};m.__private__.setPrecision=m.setPrecision=function(k){typeof parseInt(k,10)=="number"&&(e=parseInt(k,10))};var ye,X="00000000000000000000000000000000",ue=m.__private__.getFileId=function(){return X},de=m.__private__.setFileId=function(k){return X=k!==void 0&&/^[a-fA-F0-9]{32}$/.test(k)?k.toUpperCase():X.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(Bi=new Od(h.userPermissions,h.userPassword,h.ownerPassword,X)),X};m.setFileId=function(k){return de(k),this},m.getFileId=function(){return ue()};var we=m.__private__.convertDateToPDFDate=function(k){var F=k.getTimezoneOffset(),oe=F<0?"+":"-",pe=Math.floor(Math.abs(F/60)),xe=Math.abs(F%60),Ue=[oe,Z(pe),"'",Z(xe),"'"].join("");return["D:",k.getFullYear(),Z(k.getMonth()+1),Z(k.getDate()),Z(k.getHours()),Z(k.getMinutes()),Z(k.getSeconds()),Ue].join("")},Oe=m.__private__.convertPDFDateToDate=function(k){var F=parseInt(k.substr(2,4),10),oe=parseInt(k.substr(6,2),10)-1,pe=parseInt(k.substr(8,2),10),xe=parseInt(k.substr(10,2),10),Ue=parseInt(k.substr(12,2),10),$e=parseInt(k.substr(14,2),10);return new Date(F,oe,pe,xe,Ue,$e,0)},Q=m.__private__.setCreationDate=function(k){var F;if(k===void 0&&(k=new Date),k instanceof Date)F=we(k);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(k))throw new Error("Invalid argument passed to jsPDF.setCreationDate");F=k}return ye=F},M=m.__private__.getCreationDate=function(k){var F=ye;return k==="jsDate"&&(F=Oe(ye)),F};m.setCreationDate=function(k){return Q(k),this},m.getCreationDate=function(k){return M(k)};var V,Z=m.__private__.padd2=function(k){return("0"+parseInt(k)).slice(-2)},le=m.__private__.padd2Hex=function(k){return("00"+(k=k.toString())).substr(k.length)},ce=0,he=[],Ae=[],Ee=0,Ie=[],He=[],Ye=!1,Ze=Ae;m.__private__.setCustomOutputDestination=function(k){Ye=!0,Ze=k};var st=function(k){Ye||(Ze=k)};m.__private__.resetCustomOutputDestination=function(){Ye=!1,Ze=Ae};var ne=m.__private__.out=function(k){return k=k.toString(),Ee+=k.length+1,Ze.push(k),Ze},Je=m.__private__.write=function(k){return ne(arguments.length===1?k.toString():Array.prototype.join.call(arguments," "))},Ge=m.__private__.getArrayBuffer=function(k){for(var F=k.length,oe=new ArrayBuffer(F),pe=new Uint8Array(oe);F--;)pe[F]=k.charCodeAt(F);return oe},Be=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return Be};var Le=i.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(k){return Le=O===L?k/Pt:k,this};var at,Ke=m.__private__.getFontSize=m.getFontSize=function(){return O===P?Le:Le*Pt},Qe=i.R2L||!1;m.__private__.setR2L=m.setR2L=function(k){return Qe=k,this},m.__private__.getR2L=m.getR2L=function(){return Qe};var rt,Tt=m.__private__.setZoomMode=function(k){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(k))at=k;else if(isNaN(k)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(k)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+k+'" is not recognized.');at=k}else at=parseInt(k,10)};m.__private__.getZoomMode=function(){return at};var zt,At=m.__private__.setPageMode=function(k){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(k)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+k+'" is not recognized.');rt=k};m.__private__.getPageMode=function(){return rt};var tn=m.__private__.setLayoutMode=function(k){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(k)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+k+'" is not recognized.');zt=k};m.__private__.getLayoutMode=function(){return zt},m.__private__.setDisplayMode=m.setDisplayMode=function(k,F,oe){return Tt(k),tn(F),At(oe),this};var Vt={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(k){if(Object.keys(Vt).indexOf(k)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Vt[k]},m.__private__.getDocumentProperties=function(){return Vt},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(k){for(var F in Vt)Vt.hasOwnProperty(F)&&k[F]&&(Vt[F]=k[F]);return this},m.__private__.setDocumentProperty=function(k,F){if(Object.keys(Vt).indexOf(k)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Vt[k]=F};var ut,Pt,tt,Pn,bt,Ct={},Ft={},nn=[],St={},In={},Lt={},Ot={},An=null,Gt=0,gt=[],rn=new C_(m),Ws=i.hotfixes||[],Un={},Lr={},Os=[],wt=function k(F,oe,pe,xe,Ue,$e){if(!(this instanceof k))return new k(F,oe,pe,xe,Ue,$e);isNaN(F)&&(F=1),isNaN(oe)&&(oe=0),isNaN(pe)&&(pe=0),isNaN(xe)&&(xe=1),isNaN(Ue)&&(Ue=0),isNaN($e)&&($e=0),this._matrix=[F,oe,pe,xe,Ue,$e]};Object.defineProperty(wt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(wt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(wt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(wt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(wt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(wt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(wt.prototype,"a",{get:function(){return this._matrix[0]},set:function(k){this._matrix[0]=k}}),Object.defineProperty(wt.prototype,"b",{get:function(){return this._matrix[1]},set:function(k){this._matrix[1]=k}}),Object.defineProperty(wt.prototype,"c",{get:function(){return this._matrix[2]},set:function(k){this._matrix[2]=k}}),Object.defineProperty(wt.prototype,"d",{get:function(){return this._matrix[3]},set:function(k){this._matrix[3]=k}}),Object.defineProperty(wt.prototype,"e",{get:function(){return this._matrix[4]},set:function(k){this._matrix[4]=k}}),Object.defineProperty(wt.prototype,"f",{get:function(){return this._matrix[5]},set:function(k){this._matrix[5]=k}}),Object.defineProperty(wt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(wt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(wt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(wt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),wt.prototype.join=function(k){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(K).join(k)},wt.prototype.multiply=function(k){var F=k.sx*this.sx+k.shy*this.shx,oe=k.sx*this.shy+k.shy*this.sy,pe=k.shx*this.sx+k.sy*this.shx,xe=k.shx*this.shy+k.sy*this.sy,Ue=k.tx*this.sx+k.ty*this.shx+this.tx,$e=k.tx*this.shy+k.ty*this.sy+this.ty;return new wt(F,oe,pe,xe,Ue,$e)},wt.prototype.decompose=function(){var k=this.sx,F=this.shy,oe=this.shx,pe=this.sy,xe=this.tx,Ue=this.ty,$e=Math.sqrt(k*k+F*F),ct=(k/=$e)*oe+(F/=$e)*pe;oe-=k*ct,pe-=F*ct;var mt=Math.sqrt(oe*oe+pe*pe);return ct/=mt,k*(pe/=mt)<F*(oe/=mt)&&(k=-k,F=-F,ct=-ct,$e=-$e),{scale:new wt($e,0,0,mt,0,0),translate:new wt(1,0,0,1,xe,Ue),rotate:new wt(k,F,-F,k,0,0),skew:new wt(1,0,ct,1,0,0)}},wt.prototype.toString=function(k){return this.join(" ")},wt.prototype.inversed=function(){var k=this.sx,F=this.shy,oe=this.shx,pe=this.sy,xe=this.tx,Ue=this.ty,$e=1/(k*pe-F*oe),ct=pe*$e,mt=-F*$e,Ut=-oe*$e,$t=k*$e;return new wt(ct,mt,Ut,$t,-ct*xe-Ut*Ue,-mt*xe-$t*Ue)},wt.prototype.applyToPoint=function(k){var F=k.x*this.sx+k.y*this.shx+this.tx,oe=k.x*this.shy+k.y*this.sy+this.ty;return new dr(F,oe)},wt.prototype.applyToRectangle=function(k){var F=this.applyToPoint(k),oe=this.applyToPoint(new dr(k.x+k.w,k.y+k.h));return new La(F.x,F.y,oe.x-F.x,oe.y-F.y)},wt.prototype.clone=function(){var k=this.sx,F=this.shy,oe=this.shx,pe=this.sy,xe=this.tx,Ue=this.ty;return new wt(k,F,oe,pe,xe,Ue)},m.Matrix=wt;var Ca=m.matrixMult=function(k,F){return F.multiply(k)},na=new wt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=na;var Ys=function(k,F){if(!In[k]){var oe=(F instanceof pc?"Sh":"P")+(Object.keys(St).length+1).toString(10);F.id=oe,In[k]=oe,St[oe]=F,rn.publish("addPattern",F)}};m.ShadingPattern=pc,m.TilingPattern=Hd,m.addShadingPattern=function(k,F){return j("addShadingPattern()"),Ys(k,F),this},m.beginTilingPattern=function(k){j("beginTilingPattern()"),Zo(k.boundingBox[0],k.boundingBox[1],k.boundingBox[2]-k.boundingBox[0],k.boundingBox[3]-k.boundingBox[1],k.matrix)},m.endTilingPattern=function(k,F){j("endTilingPattern()"),F.stream=He[V].join(`
`),Ys(k,F),rn.publish("endTilingPattern",F),Os.pop().restore()};var Ks,Zn=m.__private__.newObject=function(){var k=Ti();return Gi(k,!0),k},Ti=m.__private__.newObjectDeferred=function(){return ce++,he[ce]=function(){return Ee},ce},Gi=function(k,F){return F=typeof F=="boolean"&&F,he[k]=Ee,F&&ne(k+" 0 obj"),k},po=m.__private__.newAdditionalObject=function(){var k={objId:Ti(),content:""};return Ie.push(k),k},xs=Ti(),Mn=Ti(),ei=m.__private__.decodeColorString=function(k){var F=k.split(" ");if(F.length!==2||F[1]!=="g"&&F[1]!=="G")F.length!==5||F[4]!=="k"&&F[4]!=="K"||(F=[(1-F[0])*(1-F[3]),(1-F[1])*(1-F[3]),(1-F[2])*(1-F[3]),"r"]);else{var oe=parseFloat(F[0]);F=[oe,oe,oe,"r"]}for(var pe="#",xe=0;xe<3;xe++)pe+=("0"+Math.floor(255*parseFloat(F[xe])).toString(16)).slice(-2);return pe},ds=m.__private__.encodeColorString=function(k){var F;typeof k=="string"&&(k={ch1:k});var oe=k.ch1,pe=k.ch2,xe=k.ch3,Ue=k.ch4,$e=k.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof oe=="string"&&oe.charAt(0)!=="#"){var ct=new XE(oe);if(ct.ok)oe=ct.toHex();else if(!/^\d*\.?\d*$/.test(oe))throw new Error('Invalid color "'+oe+'" passed to jsPDF.encodeColorString.')}if(typeof oe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(oe)&&(oe="#"+oe[1]+oe[1]+oe[2]+oe[2]+oe[3]+oe[3]),typeof oe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(oe)){var mt=parseInt(oe.substr(1),16);oe=mt>>16&255,pe=mt>>8&255,xe=255&mt}if(pe===void 0||Ue===void 0&&oe===pe&&pe===xe)F=typeof oe=="string"?oe+" "+$e[0]:k.precision===2?B(oe/255)+" "+$e[0]:H(oe/255)+" "+$e[0];else if(Ue===void 0||Fn(Ue)==="object"){if(Ue&&!isNaN(Ue.a)&&Ue.a===0)return["1.","1.","1.",$e[1]].join(" ");F=typeof oe=="string"?[oe,pe,xe,$e[1]].join(" "):k.precision===2?[B(oe/255),B(pe/255),B(xe/255),$e[1]].join(" "):[H(oe/255),H(pe/255),H(xe/255),$e[1]].join(" ")}else F=typeof oe=="string"?[oe,pe,xe,Ue,$e[2]].join(" "):k.precision===2?[B(oe),B(pe),B(xe),B(Ue),$e[2]].join(" "):[H(oe),H(pe),H(xe),H(Ue),$e[2]].join(" ");return F},Js=m.__private__.getFilters=function(){return a},ur=m.__private__.putStream=function(k){var F=(k=k||{}).data||"",oe=k.filters||Js(),pe=k.alreadyAppliedFilters||[],xe=k.addLength1||!1,Ue=F.length,$e=k.objectId,ct=function(Fi){return Fi};if(h!==null&&$e===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(ct=Bi.encryptor($e,0));var mt={};oe===!0&&(oe=["FlateEncode"]);var Ut=k.additionalKeyValues||[],$t=(mt=_t.API.processDataByFilters!==void 0?_t.API.processDataByFilters(F,oe):{data:F,reverseChain:[]}).reverseChain+(Array.isArray(pe)?pe.join(" "):pe.toString());if(mt.data.length!==0&&(Ut.push({key:"Length",value:mt.data.length}),xe===!0&&Ut.push({key:"Length1",value:Ue})),$t.length!=0)if($t.split("/").length-1==1)Ut.push({key:"Filter",value:$t});else{Ut.push({key:"Filter",value:"["+$t+"]"});for(var hn=0;hn<Ut.length;hn+=1)if(Ut[hn].key==="DecodeParms"){for(var ti=[],vi=0;vi<mt.reverseChain.split("/").length-1;vi+=1)ti.push("null");ti.push(Ut[hn].value),Ut[hn].value="["+ti.join(" ")+"]"}}ne("<<");for(var jn=0;jn<Ut.length;jn++)ne("/"+Ut[jn].key+" "+Ut[jn].value);ne(">>"),mt.data.length!==0&&(ne("stream"),ne(ct(mt.data)),ne("endstream"))},$o=m.__private__.putPage=function(k){var F=k.number,oe=k.data,pe=k.objId,xe=k.contentsObjId;Gi(pe,!0),ne("<</Type /Page"),ne("/Parent "+k.rootDictionaryObjId+" 0 R"),ne("/Resources "+k.resourceDictionaryObjId+" 0 R"),ne("/MediaBox ["+parseFloat(K(k.mediaBox.bottomLeftX))+" "+parseFloat(K(k.mediaBox.bottomLeftY))+" "+K(k.mediaBox.topRightX)+" "+K(k.mediaBox.topRightY)+"]"),k.cropBox!==null&&ne("/CropBox ["+K(k.cropBox.bottomLeftX)+" "+K(k.cropBox.bottomLeftY)+" "+K(k.cropBox.topRightX)+" "+K(k.cropBox.topRightY)+"]"),k.bleedBox!==null&&ne("/BleedBox ["+K(k.bleedBox.bottomLeftX)+" "+K(k.bleedBox.bottomLeftY)+" "+K(k.bleedBox.topRightX)+" "+K(k.bleedBox.topRightY)+"]"),k.trimBox!==null&&ne("/TrimBox ["+K(k.trimBox.bottomLeftX)+" "+K(k.trimBox.bottomLeftY)+" "+K(k.trimBox.topRightX)+" "+K(k.trimBox.topRightY)+"]"),k.artBox!==null&&ne("/ArtBox ["+K(k.artBox.bottomLeftX)+" "+K(k.artBox.bottomLeftY)+" "+K(k.artBox.topRightX)+" "+K(k.artBox.topRightY)+"]"),typeof k.userUnit=="number"&&k.userUnit!==1&&ne("/UserUnit "+k.userUnit),rn.publish("putPage",{objId:pe,pageContext:gt[F],pageNumber:F,page:oe}),ne("/Contents "+xe+" 0 R"),ne(">>"),ne("endobj");var Ue=oe.join(`
`);return O===L&&(Ue+=`
Q`),Gi(xe,!0),ur({data:Ue,filters:Js(),objectId:xe}),ne("endobj"),pe},Pr=m.__private__.putPages=function(){var k,F,oe=[];for(k=1;k<=Gt;k++)gt[k].objId=Ti(),gt[k].contentsObjId=Ti();for(k=1;k<=Gt;k++)oe.push($o({number:k,data:He[k],objId:gt[k].objId,contentsObjId:gt[k].contentsObjId,mediaBox:gt[k].mediaBox,cropBox:gt[k].cropBox,bleedBox:gt[k].bleedBox,trimBox:gt[k].trimBox,artBox:gt[k].artBox,userUnit:gt[k].userUnit,rootDictionaryObjId:xs,resourceDictionaryObjId:Mn}));Gi(xs,!0),ne("<</Type /Pages");var pe="/Kids [";for(F=0;F<Gt;F++)pe+=oe[F]+" 0 R ";ne(pe+"]"),ne("/Count "+Gt),ne(">>"),ne("endobj"),rn.publish("postPutPages")},Ir=function(k){rn.publish("putFont",{font:k,out:ne,newObject:Zn,putStream:ur}),k.isAlreadyPutted!==!0&&(k.objectNumber=Zn(),ne("<<"),ne("/Type /Font"),ne("/BaseFont /"+Bd(k.postScriptName)),ne("/Subtype /Type1"),typeof k.encoding=="string"&&ne("/Encoding /"+k.encoding),ne("/FirstChar 32"),ne("/LastChar 255"),ne(">>"),ne("endobj"))},go=function(k){k.objectNumber=Zn();var F=[];F.push({key:"Type",value:"/XObject"}),F.push({key:"Subtype",value:"/Form"}),F.push({key:"BBox",value:"["+[K(k.x),K(k.y),K(k.x+k.width),K(k.y+k.height)].join(" ")+"]"}),F.push({key:"Matrix",value:"["+k.matrix.toString()+"]"});var oe=k.pages[1].join(`
`);ur({data:oe,additionalKeyValues:F,objectId:k.objectNumber}),ne("endobj")},Mr=function(k,F){F||(F=21);var oe=Zn(),pe=(function($e,ct){var mt,Ut=[],$t=1/(ct-1);for(mt=0;mt<1;mt+=$t)Ut.push(mt);if(Ut.push(1),$e[0].offset!=0){var hn={offset:0,color:$e[0].color};$e.unshift(hn)}if($e[$e.length-1].offset!=1){var ti={offset:1,color:$e[$e.length-1].color};$e.push(ti)}for(var vi="",jn=0,Fi=0;Fi<Ut.length;Fi++){for(mt=Ut[Fi];mt>$e[jn+1].offset;)jn++;var Ni=$e[jn].offset,ts=(mt-Ni)/($e[jn+1].offset-Ni),Ba=$e[jn].color,jr=$e[jn+1].color;vi+=le(Math.round((1-ts)*Ba[0]+ts*jr[0]).toString(16))+le(Math.round((1-ts)*Ba[1]+ts*jr[1]).toString(16))+le(Math.round((1-ts)*Ba[2]+ts*jr[2]).toString(16))}return vi.trim()})(k.colors,F),xe=[];xe.push({key:"FunctionType",value:"0"}),xe.push({key:"Domain",value:"[0.0 1.0]"}),xe.push({key:"Size",value:"["+F+"]"}),xe.push({key:"BitsPerSample",value:"8"}),xe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),xe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ur({data:pe,additionalKeyValues:xe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:oe}),ne("endobj"),k.objectNumber=Zn(),ne("<< /ShadingType "+k.type),ne("/ColorSpace /DeviceRGB");var Ue="/Coords ["+K(parseFloat(k.coords[0]))+" "+K(parseFloat(k.coords[1]))+" ";k.type===2?Ue+=K(parseFloat(k.coords[2]))+" "+K(parseFloat(k.coords[3])):Ue+=K(parseFloat(k.coords[2]))+" "+K(parseFloat(k.coords[3]))+" "+K(parseFloat(k.coords[4]))+" "+K(parseFloat(k.coords[5])),ne(Ue+="]"),k.matrix&&ne("/Matrix ["+k.matrix.toString()+"]"),ne("/Function "+oe+" 0 R"),ne("/Extend [true true]"),ne(">>"),ne("endobj")},Dr=function(k,F){var oe=Ti(),pe=Zn();F.push({resourcesOid:oe,objectOid:pe}),k.objectNumber=pe;var xe=[];xe.push({key:"Type",value:"/Pattern"}),xe.push({key:"PatternType",value:"1"}),xe.push({key:"PaintType",value:"1"}),xe.push({key:"TilingType",value:"1"}),xe.push({key:"BBox",value:"["+k.boundingBox.map(K).join(" ")+"]"}),xe.push({key:"XStep",value:K(k.xStep)}),xe.push({key:"YStep",value:K(k.yStep)}),xe.push({key:"Resources",value:oe+" 0 R"}),k.matrix&&xe.push({key:"Matrix",value:"["+k.matrix.toString()+"]"}),ur({data:k.stream,additionalKeyValues:xe,objectId:k.objectNumber}),ne("endobj")},Wo=function(k){for(var F in k.objectNumber=Zn(),ne("<<"),k)switch(F){case"opacity":ne("/ca "+B(k[F]));break;case"stroke-opacity":ne("/CA "+B(k[F]))}ne(">>"),ne("endobj")},ia=function(k){Gi(k.resourcesOid,!0),ne("<<"),ne("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var F in ne("/Font <<"),Ct)Ct.hasOwnProperty(F)&&(p===!1||p===!0&&v.hasOwnProperty(F))&&ne("/"+F+" "+Ct[F].objectNumber+" 0 R");ne(">>")})(),(function(){if(Object.keys(St).length>0){for(var F in ne("/Shading <<"),St)St.hasOwnProperty(F)&&St[F]instanceof pc&&St[F].objectNumber>=0&&ne("/"+F+" "+St[F].objectNumber+" 0 R");rn.publish("putShadingPatternDict"),ne(">>")}})(),(function(F){if(Object.keys(St).length>0){for(var oe in ne("/Pattern <<"),St)St.hasOwnProperty(oe)&&St[oe]instanceof m.TilingPattern&&St[oe].objectNumber>=0&&St[oe].objectNumber<F&&ne("/"+oe+" "+St[oe].objectNumber+" 0 R");rn.publish("putTilingPatternDict"),ne(">>")}})(k.objectOid),(function(){if(Object.keys(Lt).length>0){var F;for(F in ne("/ExtGState <<"),Lt)Lt.hasOwnProperty(F)&&Lt[F].objectNumber>=0&&ne("/"+F+" "+Lt[F].objectNumber+" 0 R");rn.publish("putGStateDict"),ne(">>")}})(),(function(){for(var F in ne("/XObject <<"),Un)Un.hasOwnProperty(F)&&Un[F].objectNumber>=0&&ne("/"+F+" "+Un[F].objectNumber+" 0 R");rn.publish("putXobjectDict"),ne(">>")})(),ne(">>"),ne("endobj")},mi=function(k){Ft[k.fontName]=Ft[k.fontName]||{},Ft[k.fontName][k.fontStyle]=k.id},ku=function(k,F,oe,pe,xe){var Ue={id:"F"+(Object.keys(Ct).length+1).toString(10),postScriptName:k,fontName:F,fontStyle:oe,encoding:pe,isStandardFont:xe||!1,metadata:{}};return rn.publish("addFont",{font:Ue,instance:this}),Ct[Ue.id]=Ue,mi(Ue),Ue.id},Xs=m.__private__.pdfEscape=m.pdfEscape=function(k,F){return(function(oe,pe){var xe,Ue,$e,ct,mt,Ut,$t,hn,ti;if($e=(pe=pe||{}).sourceEncoding||"Unicode",mt=pe.outputEncoding,(pe.autoencode||mt)&&Ct[ut].metadata&&Ct[ut].metadata[$e]&&Ct[ut].metadata[$e].encoding&&(ct=Ct[ut].metadata[$e].encoding,!mt&&Ct[ut].encoding&&(mt=Ct[ut].encoding),!mt&&ct.codePages&&(mt=ct.codePages[0]),typeof mt=="string"&&(mt=ct[mt]),mt)){for($t=!1,Ut=[],xe=0,Ue=oe.length;xe<Ue;xe++)(hn=mt[oe.charCodeAt(xe)])?Ut.push(String.fromCharCode(hn)):Ut.push(oe[xe]),Ut[xe].charCodeAt(0)>>8&&($t=!0);oe=Ut.join("")}for(xe=oe.length;$t===void 0&&xe!==0;)oe.charCodeAt(xe-1)>>8&&($t=!0),xe--;if(!$t)return oe;for(Ut=pe.noBOM?[]:[254,255],xe=0,Ue=oe.length;xe<Ue;xe++){if((ti=(hn=oe.charCodeAt(xe))>>8)>>8)throw new Error("Character at position "+xe+" of string '"+oe+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ut.push(ti),Ut.push(hn-(ti<<8))}return String.fromCharCode.apply(void 0,Ut)})(k,F).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Or=m.__private__.beginPage=function(k){He[++Gt]=[],gt[Gt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(k[0]),topRightY:Number(k[1])}},Lu(Gt),st(He[V])},Na=function(k,F){var oe,pe,xe;switch(t=F||t,typeof k=="string"&&(oe=C(k.toLowerCase()),Array.isArray(oe)&&(pe=oe[0],xe=oe[1])),Array.isArray(k)&&(pe=k[0]*Pt,xe=k[1]*Pt),isNaN(pe)&&(pe=s[0],xe=s[1]),(pe>14400||xe>14400)&&(Jn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),pe=Math.min(14400,pe),xe=Math.min(14400,xe)),s=[pe,xe],t.substr(0,1)){case"l":xe>pe&&(s=[xe,pe]);break;case"p":pe>xe&&(s=[xe,pe])}Or(s),It(Ko),ne(er),Ol!==0&&ne(Ol+" J"),$i!==0&&ne($i+" j"),rn.publish("addPage",{pageNumber:Gt})},Ru=function(k){k>0&&k<=Gt&&(He.splice(k,1),gt.splice(k,1),Gt--,V>Gt&&(V=Gt),this.setPage(V))},Lu=function(k){k>0&&k<=Gt&&(V=k)},Pu=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return He.length-1},Lc=function(k,F,oe){var pe,xe=void 0;return oe=oe||{},k=k!==void 0?k:Ct[ut].fontName,F=F!==void 0?F:Ct[ut].fontStyle,pe=k.toLowerCase(),Ft[pe]!==void 0&&Ft[pe][F]!==void 0?xe=Ft[pe][F]:Ft[k]!==void 0&&Ft[k][F]!==void 0?xe=Ft[k][F]:oe.disableWarning===!1&&Jn.warn("Unable to look up font label for font '"+k+"', '"+F+"'. Refer to getFontList() for available fonts."),xe||oe.noFallback||(xe=Ft.times[F])==null&&(xe=Ft.times.normal),xe},Zs=m.__private__.putInfo=function(){var k=Zn(),F=function(pe){return pe};for(var oe in h!==null&&(F=Bi.encryptor(k,0)),ne("<<"),ne("/Producer ("+Xs(F("jsPDF "+_t.version))+")"),Vt)Vt.hasOwnProperty(oe)&&Vt[oe]&&ne("/"+oe.substr(0,1).toUpperCase()+oe.substr(1)+" ("+Xs(F(Vt[oe]))+")");ne("/CreationDate ("+Xs(F(ye))+")"),ne(">>"),ne("endobj")},ka=m.__private__.putCatalog=function(k){var F=(k=k||{}).rootDictionaryObjId||xs;switch(Zn(),ne("<<"),ne("/Type /Catalog"),ne("/Pages "+F+" 0 R"),at||(at="fullwidth"),at){case"fullwidth":ne("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ne("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ne("/OpenAction [3 0 R /Fit]");break;case"original":ne("/OpenAction [3 0 R /XYZ null null 1]");break;default:var oe=""+at;oe.substr(oe.length-1)==="%"&&(at=parseInt(at)/100),typeof at=="number"&&ne("/OpenAction [3 0 R /XYZ null null "+B(at)+"]")}switch(zt||(zt="continuous"),zt){case"continuous":ne("/PageLayout /OneColumn");break;case"single":ne("/PageLayout /SinglePage");break;case"two":case"twoleft":ne("/PageLayout /TwoColumnLeft");break;case"tworight":ne("/PageLayout /TwoColumnRight")}rt&&ne("/PageMode /"+rt),rn.publish("putCatalog"),ne(">>"),ne("endobj")},Br=m.__private__.putTrailer=function(){ne("trailer"),ne("<<"),ne("/Size "+(ce+1)),ne("/Root "+ce+" 0 R"),ne("/Info "+(ce-1)+" 0 R"),h!==null&&ne("/Encrypt "+Bi.oid+" 0 R"),ne("/ID [ <"+X+"> <"+X+"> ]"),ne(">>")},wn=m.__private__.putHeader=function(){ne("%PDF-"+E),ne("%")},Iu=m.__private__.putXRef=function(){var k="0000000000";ne("xref"),ne("0 "+(ce+1)),ne("0000000000 65535 f ");for(var F=1;F<=ce;F++)typeof he[F]=="function"?ne((k+he[F]()).slice(-10)+" 00000 n "):he[F]!==void 0?ne((k+he[F]).slice(-10)+" 00000 n "):ne("0000000000 00000 n ")},sa=m.__private__.buildDocument=function(){var k;ce=0,Ee=0,Ae=[],he=[],Ie=[],xs=Ti(),Mn=Ti(),st(Ae),rn.publish("buildDocument"),wn(),Pr(),(function(){rn.publish("putAdditionalObjects");for(var oe=0;oe<Ie.length;oe++){var pe=Ie[oe];Gi(pe.objId,!0),ne(pe.content),ne("endobj")}rn.publish("postPutAdditionalObjects")})(),k=[],(function(){for(var oe in Ct)Ct.hasOwnProperty(oe)&&(p===!1||p===!0&&v.hasOwnProperty(oe))&&Ir(Ct[oe])})(),(function(){var oe;for(oe in Lt)Lt.hasOwnProperty(oe)&&Wo(Lt[oe])})(),(function(){for(var oe in Un)Un.hasOwnProperty(oe)&&go(Un[oe])})(),(function(oe){var pe;for(pe in St)St.hasOwnProperty(pe)&&(St[pe]instanceof pc?Mr(St[pe]):St[pe]instanceof Hd&&Dr(St[pe],oe))})(k),rn.publish("putResources"),k.forEach(ia),ia({resourcesOid:Mn,objectOid:Number.MAX_SAFE_INTEGER}),rn.publish("postPutResources"),h!==null&&(Bi.oid=Zn(),ne("<<"),ne("/Filter /Standard"),ne("/V "+Bi.v),ne("/R "+Bi.r),ne("/U <"+Bi.toHexString(Bi.U)+">"),ne("/O <"+Bi.toHexString(Bi.O)+">"),ne("/P "+Bi.P),ne(">>"),ne("endobj")),Zs(),ka();var F=Ee;return Iu(),Br(),ne("startxref"),ne(""+F),ne("%%EOF"),st(He[V]),Ae.join(`
`)},mo=m.__private__.getBlob=function(k){return new Blob([Ge(k)],{type:"application/pdf"})},Mu=m.output=m.__private__.output=(Ks=function(k,F){switch(typeof(F=F||{})=="string"?F={filename:F}:F.filename=F.filename||"generated.pdf",k){case void 0:return sa();case"save":m.save(F.filename);break;case"arraybuffer":return Ge(sa());case"blob":return mo(sa());case"bloburi":case"bloburl":if(Ht.URL!==void 0&&typeof Ht.URL.createObjectURL=="function")return Ht.URL&&Ht.URL.createObjectURL(mo(sa()))||void 0;Jn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var oe="",pe=sa();try{oe=S_(pe)}catch{oe=S_(unescape(encodeURIComponent(pe)))}return"data:application/pdf;filename="+F.filename+";base64,"+oe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Ht)==="[object Window]"){var xe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ue=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';F.pdfObjectUrl&&(xe=F.pdfObjectUrl,Ue="");var $e='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+xe+'"'+Ue+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(F)+");<\/script></body></html>",ct=Ht.open();return ct!==null&&ct.document.write($e),ct}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Ht)==="[object Window]"){var mt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(F.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+F.filename+'" width="500px" height="400px" /></body></html>',Ut=Ht.open();if(Ut!==null){Ut.document.write(mt);var $t=this;Ut.document.documentElement.querySelector("#pdfViewer").onload=function(){Ut.document.title=F.filename,Ut.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open($t.output("bloburl"))}}return Ut}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Ht)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var hn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",F)+'"></iframe></body></html>',ti=Ht.open();if(ti!==null&&(ti.document.write(hn),ti.document.title=F.filename),ti||typeof safari>"u")return ti;break;case"datauri":case"dataurl":return Ht.document.location.href=this.output("datauristring",F);default:return null}},Ks.foo=function(){try{return Ks.apply(this,arguments)}catch(oe){var k=oe.stack||"";~k.indexOf(" at ")&&(k=k.split(" at ")[1]);var F="Error in function "+k.split(`
`)[0].split("<")[0]+": "+oe.message;if(!Ht.console)throw new Error(F);Ht.console.error(F,oe),Ht.alert&&alert(F)}},Ks.foo.bar=Ks,Ks.foo),_s=function(k){return Array.isArray(Ws)===!0&&Ws.indexOf(k)>-1};switch(n){case"pt":Pt=1;break;case"mm":Pt=72/25.4;break;case"cm":Pt=72/2.54;break;case"in":Pt=72;break;case"px":Pt=_s("px_scaling")==1?.75:96/72;break;case"pc":case"em":Pt=12;break;case"ex":Pt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Pt=n}var Bi=null;Q(),de();var Ci=m.__private__.getPageInfo=m.getPageInfo=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:gt[k].objId,pageNumber:k,pageContext:gt[k]}},Ml=m.__private__.getPageInfoByObjId=function(k){if(isNaN(k)||k%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var F in gt)if(gt[F].objId===k)break;return Ci(F)},Pc=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:gt[V].objId,pageNumber:V,pageContext:gt[V]}};m.addPage=function(){return Na.apply(this,arguments),this},m.setPage=function(){return Lu.apply(this,arguments),st.call(this,He[V]),this},m.insertPage=function(k){return this.addPage(),this.movePage(V,k),this},m.movePage=function(k,F){var oe,pe;if(k>F){oe=He[k],pe=gt[k];for(var xe=k;xe>F;xe--)He[xe]=He[xe-1],gt[xe]=gt[xe-1];He[F]=oe,gt[F]=pe,this.setPage(F)}else if(k<F){oe=He[k],pe=gt[k];for(var Ue=k;Ue<F;Ue++)He[Ue]=He[Ue+1],gt[Ue]=gt[Ue+1];He[F]=oe,gt[F]=pe,this.setPage(F)}return this},m.deletePage=function(){return Ru.apply(this,arguments),this},m.__private__.text=m.text=function(k,F,oe,pe,xe){var Ue,$e,ct,mt,Ut,$t,hn,ti,vi,jn=(pe=pe||{}).scope||this;if(typeof k=="number"&&typeof F=="number"&&(typeof oe=="string"||Array.isArray(oe))){var Fi=oe;oe=F,F=k,k=Fi}if(arguments[3]instanceof wt==0?(ct=arguments[4],mt=arguments[5],Fn(hn=arguments[3])==="object"&&hn!==null||(typeof ct=="string"&&(mt=ct,ct=null),typeof hn=="string"&&(mt=hn,hn=null),typeof hn=="number"&&(ct=hn,hn=null),pe={flags:hn,angle:ct,align:mt})):(j("The transform parameter of text() with a Matrix value"),vi=xe),isNaN(F)||isNaN(oe)||k==null)throw new Error("Invalid arguments passed to jsPDF.text");if(k.length===0)return jn;var Ni,ts="",Ba=typeof pe.lineHeightFactor=="number"?pe.lineHeightFactor:Ra,jr=jn.internal.scaleFactor;function Fa(xn){return xn=xn.split("	").join(Array(pe.TabLen||9).join(" ")),Xs(xn,hn)}function zu(xn){for(var fn,qn=xn.concat(),bi=[],pa=qn.length;pa--;)typeof(fn=qn.shift())=="string"?bi.push(fn):Array.isArray(xn)&&(fn.length===1||fn[1]===void 0&&fn[2]===void 0)?bi.push(fn[0]):bi.push([fn[0],fn[1],fn[2]]);return bi}function Fl(xn,fn){var qn;if(typeof xn=="string")qn=fn(xn)[0];else if(Array.isArray(xn)){for(var bi,pa,Vr=xn.concat(),nl=[],$u=Vr.length;$u--;)typeof(bi=Vr.shift())=="string"?nl.push(fn(bi)[0]):Array.isArray(bi)&&typeof bi[0]=="string"&&(pa=fn(bi[0],bi[1],bi[2]),nl.push([pa[0],pa[1],pa[2]]));qn=nl}return qn}var oa=!1,qr=!0;if(typeof k=="string")oa=!0;else if(Array.isArray(k)){var el=k.concat();$e=[];for(var Ua,Wi=el.length;Wi--;)(typeof(Ua=el.shift())!="string"||Array.isArray(Ua)&&typeof Ua[0]!="string")&&(qr=!1);oa=qr}if(oa===!1)throw new Error('Type of text must be string or Array. "'+k+'" is not recognized.');typeof k=="string"&&(k=k.match(/[\r?\n]/)?k.split(/\r\n|\r|\n/g):[k]);var yo=Le/jn.internal.scaleFactor,bo=yo*(Ba-1);switch(pe.baseline){case"bottom":oe-=bo;break;case"top":oe+=yo-bo;break;case"hanging":oe+=yo-2*bo;break;case"middle":oe+=yo/2-bo}if(($t=pe.maxWidth||0)>0&&(typeof k=="string"?k=jn.splitTextToSize(k,$t):Object.prototype.toString.call(k)==="[object Array]"&&(k=k.reduce(function(xn,fn){return xn.concat(jn.splitTextToSize(fn,$t))},[]))),Ue={text:k,x:F,y:oe,options:pe,mutex:{pdfEscape:Xs,activeFontKey:ut,fonts:Ct,activeFontSize:Le}},rn.publish("preProcessText",Ue),k=Ue.text,ct=(pe=Ue.options).angle,vi instanceof wt==0&&ct&&typeof ct=="number"){ct*=Math.PI/180,pe.rotationDirection===0&&(ct=-ct),O===L&&(ct=-ct);var Ul=Math.cos(ct),la=Math.sin(ct);vi=new wt(Ul,la,-la,Ul,0,0)}else ct&&ct instanceof wt&&(vi=ct);O!==L||vi||(vi=na),(Ut=pe.charSpace||cr)!==void 0&&(ts+=K(se(Ut))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ti=pe.horizontalScale)!==void 0&&(ts+=K(100*ti)+` Tz
`),pe.lang;var Ss=-1,ja=pe.renderingMode!==void 0?pe.renderingMode:pe.stroke,jl=jn.internal.getCurrentPageInfo().pageContext;switch(ja){case 0:case!1:case"fill":Ss=0;break;case 1:case!0:case"stroke":Ss=1;break;case 2:case"fillThenStroke":Ss=2;break;case 3:case"invisible":Ss=3;break;case 4:case"fillAndAddForClipping":Ss=4;break;case 5:case"strokeAndAddPathForClipping":Ss=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ss=6;break;case 7:case"addToPathForClipping":Ss=7}var Vu=jl.usedRenderingMode!==void 0?jl.usedRenderingMode:-1;Ss!==-1?ts+=Ss+` Tr
`:Vu!==-1&&(ts+=`0 Tr
`),Ss!==-1&&(jl.usedRenderingMode=Ss),mt=pe.align||"left";var tr,Hr=Le*Ba,qa=jn.internal.pageSize.getWidth(),Gu=Ct[ut];Ut=pe.charSpace||cr,$t=pe.maxWidth||0,hn=Object.assign({autoencode:!0,noBOM:!0},pe.flags);var zr=[],wo=function(xn){return jn.getStringUnitWidth(xn,{font:Gu,charSpace:Ut,fontSize:Le,doKerning:!1})*Le/jr};if(Object.prototype.toString.call(k)==="[object Array]"){var Fs;$e=zu(k),mt!=="left"&&(tr=$e.map(wo));var Es,ua=0;if(mt==="right"){F-=tr[0],k=[],Wi=$e.length;for(var ca=0;ca<Wi;ca++)ca===0?(Es=Qs(F),Fs=es(oe)):(Es=se(ua-tr[ca]),Fs=-Hr),k.push([$e[ca],Es,Fs]),ua=tr[ca]}else if(mt==="center"){F-=tr[0]/2,k=[],Wi=$e.length;for(var Ha=0;Ha<Wi;Ha++)Ha===0?(Es=Qs(F),Fs=es(oe)):(Es=se((ua-tr[Ha])/2),Fs=-Hr),k.push([$e[Ha],Es,Fs]),ua=tr[Ha]}else if(mt==="left"){k=[],Wi=$e.length;for(var ql=0;ql<Wi;ql++)k.push($e[ql])}else if(mt==="justify"&&Gu.encoding==="Identity-H"){k=[],Wi=$e.length,$t=$t!==0?$t:qa;for(var Hl=0,yi=0;yi<Wi;yi++)if(Fs=yi===0?es(oe):-Hr,Es=yi===0?Qs(F):Hl,yi<Wi-1){var qc=se(($t-tr[yi])/($e[yi].split(" ").length-1)),da=$e[yi].split(" ");k.push([da[0]+" ",Es,Fs]),Hl=0;for(var ha=1;ha<da.length;ha++){var ns=(wo(da[ha-1]+" "+da[ha])-wo(da[ha]))*jr+qc;ha==da.length-1?k.push([da[ha],ns,0]):k.push([da[ha]+" ",ns,0]),Hl-=ns}}else k.push([$e[yi],Es,Fs]);k.push(["",Hl,0])}else{if(mt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(k=[],Wi=$e.length,$t=$t!==0?$t:qa,yi=0;yi<Wi;yi++){Fs=yi===0?es(oe):-Hr,Es=yi===0?Qs(F):0;var za=$e[yi].split(" ").length-1,zl=za>0?($t-tr[yi])/za:0;yi<Wi-1?zr.push(K(se(zl))):zr.push(0),k.push([$e[yi],Es,Fs])}}}(typeof pe.R2L=="boolean"?pe.R2L:Qe)===!0&&(k=Fl(k,function(xn,fn,qn){return[xn.split("").reverse().join(""),fn,qn]})),Ue={text:k,x:F,y:oe,options:pe,mutex:{pdfEscape:Xs,activeFontKey:ut,fonts:Ct,activeFontSize:Le}},rn.publish("postProcessText",Ue),k=Ue.text,Ni=Ue.mutex.isHex||!1;var Vl=Ct[ut].encoding;Vl!=="WinAnsiEncoding"&&Vl!=="StandardEncoding"||(k=Fl(k,function(xn,fn,qn){return[Fa(xn),fn,qn]})),$e=zu(k),k=[];for(var Va,Ga,fa,tl=Array.isArray($e[0])?1:0,nr="",$a=function(xn,fn,qn){var bi="";return qn instanceof wt?(qn=typeof pe.angle=="number"?Ca(qn,new wt(1,0,0,1,xn,fn)):Ca(new wt(1,0,0,1,xn,fn),qn),O===L&&(qn=Ca(new wt(1,0,0,-1,0,0),qn)),bi=qn.join(" ")+` Tm
`):bi=K(xn)+" "+K(fn)+` Td
`,bi},hs=0;hs<$e.length;hs++){switch(nr="",tl){case 1:fa=(Ni?"<":"(")+$e[hs][0]+(Ni?">":")"),Va=parseFloat($e[hs][1]),Ga=parseFloat($e[hs][2]);break;case 0:fa=(Ni?"<":"(")+$e[hs]+(Ni?">":")"),Va=Qs(F),Ga=es(oe)}zr!==void 0&&zr[hs]!==void 0&&(nr=zr[hs]+` Tw
`),hs===0?k.push(nr+$a(Va,Ga,vi)+fa):tl===0?k.push(nr+fa):tl===1&&k.push(nr+$a(Va,Ga,vi)+fa)}k=tl===0?k.join(` Tj
T* `):k.join(` Tj
`),k+=` Tj
`;var hr=`BT
/`;return hr+=ut+" "+Le+` Tf
`,hr+=K(Le*Ba)+` TL
`,hr+=ra+`
`,hr+=ts,hr+=k,ne(hr+="ET"),v[ut]=!0,jn};var Du=m.__private__.clip=m.clip=function(k){return ne(k==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Du("evenodd")},m.__private__.discardPath=m.discardPath=function(){return ne("n"),this};var As=m.__private__.isValidStyle=function(k){var F=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(k)!==-1&&(F=!0),F};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(k){return As(k)&&(d=k),this};var Ou=m.__private__.getStyle=m.getStyle=function(k){var F=d;switch(k){case"D":case"S":F="S";break;case"F":F="f";break;case"FD":case"DF":F="B";break;case"f":case"f*":case"B":case"B*":F=k}return F},Bu=m.close=function(){return ne("h"),this};m.stroke=function(){return ne("S"),this},m.fill=function(k){return Fr("f",k),this},m.fillEvenOdd=function(k){return Fr("f*",k),this},m.fillStroke=function(k){return Fr("B",k),this},m.fillStrokeEvenOdd=function(k){return Fr("B*",k),this};var Fr=function(k,F){Fn(F)==="object"?Mc(F,k):ne(k)},Yo=function(k){k===null||O===L&&k===void 0||(k=Ou(k),ne(k))};function Ic(k,F,oe,pe,xe){var Ue=new Hd(F||this.boundingBox,oe||this.xStep,pe||this.yStep,this.gState,xe||this.matrix);Ue.stream=this.stream;var $e=k+"$$"+this.cloneIndex+++"$$";return Ys($e,Ue),Ue}var Mc=function(k,F){var oe=In[k.key],pe=St[oe];if(pe instanceof pc)ne("q"),ne(Fu(F)),pe.gState&&m.setGState(pe.gState),ne(k.matrix.toString()+" cm"),ne("/"+oe+" sh"),ne("Q");else if(pe instanceof Hd){var xe=new wt(1,0,0,-1,0,Oa());k.matrix&&(xe=xe.multiply(k.matrix||na),oe=Ic.call(pe,k.key,k.boundingBox,k.xStep,k.yStep,xe).id),ne("q"),ne("/Pattern cs"),ne("/"+oe+" scn"),pe.gState&&m.setGState(pe.gState),ne(F),ne("Q")}},Fu=function(k){switch(k){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Uu=m.moveTo=function(k,F){return ne(K(se(k))+" "+K(ie(F))+" m"),this},Dc=m.lineTo=function(k,F){return ne(K(se(k))+" "+K(ie(F))+" l"),this},Bs=m.curveTo=function(k,F,oe,pe,xe,Ue){return ne([K(se(k)),K(ie(F)),K(se(oe)),K(ie(pe)),K(se(xe)),K(ie(Ue)),"c"].join(" ")),this};m.__private__.line=m.line=function(k,F,oe,pe,xe){if(isNaN(k)||isNaN(F)||isNaN(oe)||isNaN(pe)||!As(xe))throw new Error("Invalid arguments passed to jsPDF.line");return O===P?this.lines([[oe-k,pe-F]],k,F,[1,1],xe||"S"):this.lines([[oe-k,pe-F]],k,F,[1,1]).stroke()},m.__private__.lines=m.lines=function(k,F,oe,pe,xe,Ue){var $e,ct,mt,Ut,$t,hn,ti,vi,jn,Fi,Ni,ts;if(typeof k=="number"&&(ts=oe,oe=F,F=k,k=ts),pe=pe||[1,1],Ue=Ue||!1,isNaN(F)||isNaN(oe)||!Array.isArray(k)||!Array.isArray(pe)||!As(xe)||typeof Ue!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Uu(F,oe),$e=pe[0],ct=pe[1],Ut=k.length,Fi=F,Ni=oe,mt=0;mt<Ut;mt++)($t=k[mt]).length===2?(Fi=$t[0]*$e+Fi,Ni=$t[1]*ct+Ni,Dc(Fi,Ni)):(hn=$t[0]*$e+Fi,ti=$t[1]*ct+Ni,vi=$t[2]*$e+Fi,jn=$t[3]*ct+Ni,Fi=$t[4]*$e+Fi,Ni=$t[5]*ct+Ni,Bs(hn,ti,vi,jn,Fi,Ni));return Ue&&Bu(),Yo(xe),this},m.path=function(k){for(var F=0;F<k.length;F++){var oe=k[F],pe=oe.c;switch(oe.op){case"m":Uu(pe[0],pe[1]);break;case"l":Dc(pe[0],pe[1]);break;case"c":Bs.apply(this,pe);break;case"h":Bu()}}return this},m.__private__.rect=m.rect=function(k,F,oe,pe,xe){if(isNaN(k)||isNaN(F)||isNaN(oe)||isNaN(pe)||!As(xe))throw new Error("Invalid arguments passed to jsPDF.rect");return O===P&&(pe=-pe),ne([K(se(k)),K(ie(F)),K(se(oe)),K(se(pe)),"re"].join(" ")),Yo(xe),this},m.__private__.triangle=m.triangle=function(k,F,oe,pe,xe,Ue,$e){if(isNaN(k)||isNaN(F)||isNaN(oe)||isNaN(pe)||isNaN(xe)||isNaN(Ue)||!As($e))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[oe-k,pe-F],[xe-oe,Ue-pe],[k-xe,F-Ue]],k,F,[1,1],$e,!0),this},m.__private__.roundedRect=m.roundedRect=function(k,F,oe,pe,xe,Ue,$e){if(isNaN(k)||isNaN(F)||isNaN(oe)||isNaN(pe)||isNaN(xe)||isNaN(Ue)||!As($e))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ct=4/3*(Math.SQRT2-1);return xe=Math.min(xe,.5*oe),Ue=Math.min(Ue,.5*pe),this.lines([[oe-2*xe,0],[xe*ct,0,xe,Ue-Ue*ct,xe,Ue],[0,pe-2*Ue],[0,Ue*ct,-xe*ct,Ue,-xe,Ue],[2*xe-oe,0],[-xe*ct,0,-xe,-Ue*ct,-xe,-Ue],[0,2*Ue-pe],[0,-Ue*ct,xe*ct,-Ue,xe,-Ue]],k+xe,F,[1,1],$e,!0),this},m.__private__.ellipse=m.ellipse=function(k,F,oe,pe,xe){if(isNaN(k)||isNaN(F)||isNaN(oe)||isNaN(pe)||!As(xe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ue=4/3*(Math.SQRT2-1)*oe,$e=4/3*(Math.SQRT2-1)*pe;return Uu(k+oe,F),Bs(k+oe,F-$e,k+Ue,F-pe,k,F-pe),Bs(k-Ue,F-pe,k-oe,F-$e,k-oe,F),Bs(k-oe,F+$e,k-Ue,F+pe,k,F+pe),Bs(k+Ue,F+pe,k+oe,F+$e,k+oe,F),Yo(xe),this},m.__private__.circle=m.circle=function(k,F,oe,pe){if(isNaN(k)||isNaN(F)||isNaN(oe)||!As(pe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(k,F,oe,oe,pe)},m.setFont=function(k,F,oe){return oe&&(F=W(F,oe)),ut=Lc(k,F,{disableWarning:!1}),this};var Ur=m.__private__.getFont=m.getFont=function(){return Ct[Lc.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var k,F,oe={};for(k in Ft)if(Ft.hasOwnProperty(k))for(F in oe[k]=[],Ft[k])Ft[k].hasOwnProperty(F)&&oe[k].push(F);return oe},m.addFont=function(k,F,oe,pe,xe){var Ue=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ue.indexOf(arguments[3])!==-1?xe=arguments[3]:arguments[3]&&Ue.indexOf(arguments[3])==-1&&(oe=W(oe,pe)),ku.call(this,k,F,oe,xe=xe||"Identity-H")};var Ra,Ko=i.lineWidth||.200025,vo=m.__private__.getLineWidth=m.getLineWidth=function(){return Ko},It=m.__private__.setLineWidth=m.setLineWidth=function(k){return Ko=k,ne(K(se(k))+" w"),this};m.__private__.setLineDash=_t.API.setLineDash=_t.API.setLineDashPattern=function(k,F){if(k=k||[],F=F||0,isNaN(F)||!Array.isArray(k))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return k=k.map(function(oe){return K(se(oe))}).join(" "),F=K(se(F)),ne("["+k+"] "+F+" d"),this};var Oc=m.__private__.getLineHeight=m.getLineHeight=function(){return Le*Ra};m.__private__.getLineHeight=m.getLineHeight=function(){return Le*Ra};var ju=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(k){return typeof(k=k||1.15)=="number"&&(Ra=k),this},Bc=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return Ra};ju(i.lineHeight);var Qs=m.__private__.getHorizontalCoordinate=function(k){return se(k)},es=m.__private__.getVerticalCoordinate=function(k){return O===L?k:gt[V].mediaBox.topRightY-gt[V].mediaBox.bottomLeftY-se(k)},qu=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(k){return K(Qs(k))},Jo=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(k){return K(es(k))},er=i.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return ei(er)},m.__private__.setStrokeColor=m.setDrawColor=function(k,F,oe,pe){return er=ds({ch1:k,ch2:F,ch3:oe,ch4:pe,pdfColorType:"draw",precision:2}),ne(er),this};var Xo=i.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return ei(Xo)},m.__private__.setFillColor=m.setFillColor=function(k,F,oe,pe){return Xo=ds({ch1:k,ch2:F,ch3:oe,ch4:pe,pdfColorType:"fill",precision:2}),ne(Xo),this};var ra=i.textColor||"0 g",Fc=m.__private__.getTextColor=m.getTextColor=function(){return ei(ra)};m.__private__.setTextColor=m.setTextColor=function(k,F,oe,pe){return ra=ds({ch1:k,ch2:F,ch3:oe,ch4:pe,pdfColorType:"text",precision:3}),this};var cr=i.charSpace,Dl=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(cr||0)};m.__private__.setCharSpace=m.setCharSpace=function(k){if(isNaN(k))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return cr=k,this};var Ol=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(k){var F=m.CapJoinStyles[k];if(F===void 0)throw new Error("Line cap style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ol=F,ne(F+" J"),this};var $i=0;m.__private__.setLineJoin=m.setLineJoin=function(k){var F=m.CapJoinStyles[k];if(F===void 0)throw new Error("Line join style of '"+k+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return $i=F,ne(F+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(k){if(k=k||0,isNaN(k))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ne(K(se(k))+" M"),this},m.GState=X0,m.setGState=function(k){(k=typeof k=="string"?Lt[Ot[k]]:aa(null,k)).equals(An)||(ne("/"+k.id+" gs"),An=k)};var aa=function(k,F){if(!k||!Ot[k]){var oe=!1;for(var pe in Lt)if(Lt.hasOwnProperty(pe)&&Lt[pe].equals(F)){oe=!0;break}if(oe)F=Lt[pe];else{var xe="GS"+(Object.keys(Lt).length+1).toString(10);Lt[xe]=F,F.id=xe}return k&&(Ot[k]=F.id),rn.publish("addGState",F),F}};m.addGState=function(k,F){return aa(k,F),this},m.saveGraphicsState=function(){return ne("q"),nn.push({key:ut,size:Le,color:ra}),this},m.restoreGraphicsState=function(){ne("Q");var k=nn.pop();return ut=k.key,Le=k.size,ra=k.color,An=null,this},m.setCurrentTransformationMatrix=function(k){return ne(k.toString()+" cm"),this},m.comment=function(k){return ne("#"+k),this};var dr=function(k,F){var oe=k||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return oe},set:function(Ue){isNaN(Ue)||(oe=parseFloat(Ue))}});var pe=F||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return pe},set:function(Ue){isNaN(Ue)||(pe=parseFloat(Ue))}});var xe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return xe},set:function(Ue){xe=Ue.toString()}}),this},La=function(k,F,oe,pe){dr.call(this,k,F),this.type="rect";var xe=oe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return xe},set:function($e){isNaN($e)||(xe=parseFloat($e))}});var Ue=pe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ue},set:function($e){isNaN($e)||(Ue=parseFloat($e))}}),this},Bl=function(){this.page=Gt,this.currentPage=V,this.pages=He.slice(0),this.pagesContext=gt.slice(0),this.x=tt,this.y=Pn,this.matrix=bt,this.width=Ia(V),this.height=Hu(V),this.outputDestination=Ze,this.id="",this.objectNumber=-1};Bl.prototype.restore=function(){Gt=this.page,V=this.currentPage,gt=this.pagesContext,He=this.pages,tt=this.x,Pn=this.y,bt=this.matrix,Qo(V,this.width),Ma(V,this.height),Ze=this.outputDestination};var Zo=function(k,F,oe,pe,xe){Os.push(new Bl),Gt=V=0,He=[],tt=k,Pn=F,bt=xe,Or([oe,pe])};for(var Pa in m.beginFormObject=function(k,F,oe,pe,xe){return Zo(k,F,oe,pe,xe),this},m.endFormObject=function(k){return(function(F){if(Lr[F])Os.pop().restore();else{var oe=new Bl,pe="Xo"+(Object.keys(Un).length+1).toString(10);oe.id=pe,Lr[F]=pe,Un[pe]=oe,rn.publish("addFormObject",oe),Os.pop().restore()}})(k),this},m.doFormObject=function(k,F){var oe=Un[Lr[k]];return ne("q"),ne(F.toString()+" cm"),ne("/"+oe.id+" Do"),ne("Q"),this},m.getFormObject=function(k){var F=Un[Lr[k]];return{x:F.x,y:F.y,width:F.width,height:F.height,matrix:F.matrix}},m.save=function(k,F){return k=k||"generated.pdf",(F=F||{}).returnPromise=F.returnPromise||!1,F.returnPromise===!1?(cc(mo(sa()),k),typeof cc.unload=="function"&&Ht.setTimeout&&setTimeout(cc.unload,911),this):new Promise(function(oe,pe){try{var xe=cc(mo(sa()),k);typeof cc.unload=="function"&&Ht.setTimeout&&setTimeout(cc.unload,911),oe(xe)}catch(Ue){pe(Ue.message)}})},_t.API)_t.API.hasOwnProperty(Pa)&&(Pa==="events"&&_t.API.events.length?(function(k,F){var oe,pe,xe;for(xe=F.length-1;xe!==-1;xe--)oe=F[xe][0],pe=F[xe][1],k.subscribe.apply(k,[oe].concat(typeof pe=="function"?[pe]:pe))})(rn,_t.API.events):m[Pa]=_t.API[Pa]);function Ia(k){return gt[k].mediaBox.topRightX-gt[k].mediaBox.bottomLeftX}function Qo(k,F){gt[k].mediaBox.topRightX=F+gt[k].mediaBox.bottomLeftX}function Hu(k){return gt[k].mediaBox.topRightY-gt[k].mediaBox.bottomLeftY}function Ma(k,F){gt[k].mediaBox.topRightY=F+gt[k].mediaBox.bottomLeftY}var Da=m.getPageWidth=function(k){return Ia(k=k||V)/Pt},Uc=m.setPageWidth=function(k,F){Qo(k,F*Pt)},Oa=m.getPageHeight=function(k){return Hu(k=k||V)/Pt},jc=m.setPageHeight=function(k,F){Ma(k,F*Pt)};return m.internal={pdfEscape:Xs,getStyle:Ou,getFont:Ur,getFontSize:Ke,getCharSpace:Dl,getTextColor:Fc,getLineHeight:Oc,getLineHeightFactor:Bc,getLineWidth:vo,write:Je,getHorizontalCoordinate:Qs,getVerticalCoordinate:es,getCoordinateString:qu,getVerticalCoordinateString:Jo,collections:{},newObject:Zn,newAdditionalObject:po,newObjectDeferred:Ti,newObjectDeferredBegin:Gi,getFilters:Js,putStream:ur,events:rn,scaleFactor:Pt,pageSize:{getWidth:function(){return Da(V)},setWidth:function(k){Uc(V,k)},getHeight:function(){return Oa(V)},setHeight:function(k){jc(V,k)}},encryptionOptions:h,encryption:Bi,getEncryptor:function(k){return h!==null?Bi.encryptor(k,0):function(F){return F}},output:Mu,getNumberOfPages:Pu,get pages(){return He},out:ne,f2:B,f3:H,getPageInfo:Ci,getPageInfoByObjId:Ml,getCurrentPageInfo:Pc,getPDFVersion:S,Point:dr,Rectangle:La,Matrix:wt,hasHotfix:_s},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Da(V)},set:function(k){Uc(V,k)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Oa(V)},set:function(k){jc(V,k)},enumerable:!0,configurable:!0}),(function(k){for(var F=0,oe=Be.length;F<oe;F++){var pe=ku.call(this,k[F][0],k[F][1],k[F][2],Be[F][3],!0);p===!1&&(v[pe]=!0);var xe=k[F][0].split("-");mi({id:pe,fontName:xe[0],fontStyle:xe[1]||""})}rn.publish("addFonts",{fonts:Ct,dictionary:Ft})}).call(m,Be),ut="F1",Na(s,t),rn.publish("initialized"),m}Od.prototype.lsbFirstWord=function(i){return String.fromCharCode(255&i,i>>8&255,i>>16&255,i>>24&255)},Od.prototype.toHexString=function(i){return i.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Od.prototype.hexToBytes=function(i){for(var e=[],t=0;t<i.length;t+=2)e.push(String.fromCharCode(parseInt(i.substr(t,2),16)));return e.join("")},Od.prototype.processOwnerPassword=function(i,e){return Sv(Av(e).substr(0,5),i)},Od.prototype.encryptor=function(i,e){var t=Av(this.encryptionKey+String.fromCharCode(255&i,i>>8&255,i>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return Sv(t,n)}},X0.prototype.equals=function(i){var e,t="id,objectNumber,equals";if(!i||Fn(i)!==Fn(this))return!1;var n=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!i.hasOwnProperty(e)||this[e]!==i[e])return!1;n++}for(e in i)i.hasOwnProperty(e)&&t.indexOf(e)<0&&n--;return n===0},_t.API={events:[]},_t.version="3.0.4";var Di=_t.API,wy=1,Rc=function(i){return i.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},kd=function(i){return i.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Kt=function(i){return i.toFixed(2)},mu=function(i){return i.toFixed(5)};Di.__acroform__={};var Rr=function(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i},N_=function(i){return i*wy},Uo=function(i){var e=new tT,t=pt.internal.getHeight(i)||0,n=pt.internal.getWidth(i)||0;return e.BBox=[0,0,Number(Kt(n)),Number(Kt(t))],e},FB=Di.__acroform__.setBit=function(i,e){if(i=i||0,e=e||0,isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return i|1<<e},UB=Di.__acroform__.clearBit=function(i,e){if(i=i||0,e=e||0,isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return i&~(1<<e)},jB=Di.__acroform__.getBit=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return i&1<<e?1:0},Hi=Di.__acroform__.getBitForPdf=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return jB(i,e-1)},zi=Di.__acroform__.setBitForPdf=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return FB(i,e-1)},Vi=Di.__acroform__.clearBitForPdf=function(i,e){if(isNaN(i)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return UB(i,e-1)},qB=Di.__acroform__.calculateCoordinates=function(i,e){var t=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,s=i[0],r=i[1],a=i[2],l=i[3],c={};return c.lowerLeft_X=t(s)||0,c.lowerLeft_Y=n(r+l)||0,c.upperRight_X=t(s+a)||0,c.upperRight_Y=n(r)||0,[Number(Kt(c.lowerLeft_X)),Number(Kt(c.lowerLeft_Y)),Number(Kt(c.upperRight_X)),Number(Kt(c.upperRight_Y))]},HB=function(i){if(i.appearanceStreamContent)return i.appearanceStreamContent;if(i.V||i.DV){var e=[],t=i._V||i.DV,n=Ev(i,t),s=i.scope.internal.getFont(i.fontName,i.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(i.scope.__private__.encodeColorString(i.color)),e.push("/"+s+" "+Kt(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var r=Uo(i);return r.scope=i.scope,r.stream=e.join(`
`),r}},Ev=function(i,e){var t=i.fontSize===0?i.maxFontSize:i.fontSize,n={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=i.multiline?s.map(function(B){return B.split(`
`)}):s.map(function(B){return[B]});var r=t,a=pt.internal.getHeight(i)||0;a=a<0?-a:a;var l=pt.internal.getWidth(i)||0;l=l<0?-l:l;var c=function(B,H,se){if(B+1<s.length){var ie=H+" "+s[B+1][0];return h0(ie,i,se).width<=l-4}return!1};r++;e:for(;r>0;){e="",r--;var d,h,p=h0("3",i,r).height,v=i.multiline?a-r:(a-p)/2,m=v+=2,E=0,S=0,N=0;if(r<=0){e=`(...) Tj
`,e+="% Width of Text: "+h0(e,i,r=12).width+", FieldWidth:"+l+`
`;break}for(var C="",P=0,L=0;L<s.length;L++)if(s.hasOwnProperty(L)){var O=!1;if(s[L].length!==1&&N!==s[L].length-1){if((p+2)*(P+2)+2>a)continue e;C+=s[L][N],O=!0,S=L,L--}else{C=(C+=s[L][N]+" ").substr(C.length-1)==" "?C.substr(0,C.length-1):C;var q=parseInt(L),G=c(q,C,r),W=L>=s.length-1;if(G&&!W){C+=" ",N=0;continue}if(G||W){if(W)S=q;else if(i.multiline&&(p+2)*(P+2)+2>a)continue e}else{if(!i.multiline||(p+2)*(P+2)+2>a)continue e;S=q}}for(var K="",j=E;j<=S;j++){var ee=s[j];if(i.multiline){if(j===S){K+=ee[N]+" ",N=(N+1)%ee.length;continue}if(j===E){K+=ee[ee.length-1]+" ";continue}}K+=ee[0]+" "}switch(K=K.substr(K.length-1)==" "?K.substr(0,K.length-1):K,h=h0(K,i,r).width,i.textAlign){case"right":d=l-h-2;break;case"center":d=(l-h)/2;break;default:d=2}e+=Kt(d)+" "+Kt(m)+` Td
`,e+="("+Rc(K)+`) Tj
`,e+=-Kt(d)+` 0 Td
`,m=-(r+2),h=0,E=O?S:S+1,P++,C=""}break}return n.text=e,n.fontSize=r,n},h0=function(i,e,t){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(i,{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:s}},zB={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},VB=function(i,e){var t={type:"reference",object:i};e.internal.getPageInfo(i.page).pageContext.annotations.find(function(n){return n.type===t.type&&n.object===t.object})===void 0&&e.internal.getPageInfo(i.page).pageContext.annotations.push(t)},GB=function(i,e){if(e.scope=i,i.internal!==void 0&&(i.internal.acroformPlugin===void 0||i.internal.acroformPlugin.isInitialized===!1)){if(ho.FieldNum=0,i.internal.acroformPlugin=JSON.parse(JSON.stringify(zB)),i.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");wy=i.internal.scaleFactor,i.internal.acroformPlugin.acroFormDictionaryRoot=new nT,i.internal.acroformPlugin.acroFormDictionaryRoot.scope=i,i.internal.acroformPlugin.acroFormDictionaryRoot._eventID=i.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(i)}),i.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in n)if(n.hasOwnProperty(s)){var r=n[s];r.objId=void 0,r.hasAnnotation&&VB(r,t)}})(i)}),i.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(i)}),i.internal.events.subscribe("postPutPages",function(t){(function(n,s){var r=!n;for(var a in n||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(a)){var l=n[a],c=[],d=l.Rect;if(l.Rect&&(l.Rect=qB(l.Rect,s)),s.internal.newObjectDeferredBegin(l.objId,!0),l.DA=pt.createDefaultAppearanceStream(l),Fn(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var h=HB(l);c.push({key:"AP",value:"<</N "+h+">>"}),s.internal.acroformPlugin.xForms.push(h)}if(l.appearanceStreamContent){var p="";for(var v in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(v)){var m=l.appearanceStreamContent[v];if(p+="/"+v+" ",p+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var a in m)if(m.hasOwnProperty(a)){var E=m[a];typeof E=="function"&&(E=E.call(s,l)),p+="/"+a+" "+E+" ",s.internal.acroformPlugin.xForms.indexOf(E)>=0||s.internal.acroformPlugin.xForms.push(E)}}else typeof(E=m)=="function"&&(E=E.call(s,l)),p+="/"+a+" "+E,s.internal.acroformPlugin.xForms.indexOf(E)>=0||s.internal.acroformPlugin.xForms.push(E);p+=">>"}c.push({key:"AP",value:`<<
`+p+">>"})}s.internal.putStream({additionalKeyValues:c,objectId:l.objId}),s.internal.out("endobj")}r&&(function(S,N){for(var C in S)if(S.hasOwnProperty(C)){var P=C,L=S[C];N.internal.newObjectDeferredBegin(L.objId,!0),Fn(L)==="object"&&typeof L.putStream=="function"&&L.putStream(),delete S[P]}})(s.internal.acroformPlugin.xForms,s)})(t,i)}),i.internal.acroformPlugin.isInitialized=!0}},eT=Di.__acroform__.arrayToPdfArray=function(i,e,t){var n=function(a){return a};if(Array.isArray(i)){for(var s="[",r=0;r<i.length;r++)switch(r!==0&&(s+=" "),Fn(i[r])){case"boolean":case"number":case"object":s+=i[r].toString();break;case"string":i[r].substr(0,1)!=="/"?(e!==void 0&&t&&(n=t.internal.getEncryptor(e)),s+="("+Rc(n(i[r].toString()))+")"):s+=i[r].toString()}return s+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},w1=function(i,e,t){var n=function(s){return s};return e!==void 0&&t&&(n=t.internal.getEncryptor(e)),(i=i||"").toString(),"("+Rc(n(i))+")"},Ho=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(i){this._objId=i}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ho.prototype.toString=function(){return this.objId+" 0 R"},Ho.prototype.putStream=function(){var i=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:i,objectId:this.objId}),this.scope.internal.out("endobj")},Ho.prototype.getKeyValueListForStream=function(){var i=[],e=Object.getOwnPropertyNames(this).filter(function(r){return r!="content"&&r!="appearanceStreamContent"&&r!="scope"&&r!="objId"&&r.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var n=e[t],s=this[n];s&&(Array.isArray(s)?i.push({key:n,value:eT(s,this.objId,this.scope)}):s instanceof Ho?(s.scope=this.scope,i.push({key:n,value:s.objId+" 0 R"})):typeof s!="function"&&i.push({key:n,value:s}))}return i};var tT=function(){Ho.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var i,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){i=t.trim()},get:function(){return i||null}})};Rr(tT,Ho);var nT=function(){Ho.call(this);var i,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(i){var t=function(n){return n};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Rc(t(i))+")"}},set:function(t){i=t}})};Rr(nT,Ho);var ho=function i(){Ho.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute F supplied.');e=C}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Hi(e,3)},set:function(C){C?this.F=zi(e,3):this.F=Vi(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute Ff supplied.');t=C}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(C){n=C!==void 0?C:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(C){n[0]=C}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(C){n[1]=C}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(C){n[2]=C}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(C){n[3]=C}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(C){switch(C){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=C;break;default:throw new Error('Invalid value "'+C+'" for attribute FT supplied.')}}});var r=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!r||r.length<1){if(this instanceof Z0)return;r="FieldObject"+i.FieldNum++}var C=function(P){return P};return this.scope&&(C=this.scope.internal.getEncryptor(this.objId)),"("+Rc(C(r))+")"},set:function(C){r=C.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return r},set:function(C){r=C}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(C){a=C}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(C){l=C}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(C){c=C}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/wy:d},set:function(C){d=C}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(C){h=C}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof Z0||this instanceof wc))return w1(p,this.objId,this.scope)},set:function(C){C=C.toString(),p=C}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof ws==0?w1(v,this.objId,this.scope):v},set:function(C){C=C.toString(),v=this instanceof ws==0?C.substr(0,1)==="("?kd(C.substr(1,C.length-2)):kd(C):C}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ws==1?kd(v.substr(1,v.length-1)):v},set:function(C){C=C.toString(),v=this instanceof ws==1?"/"+C:C}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(C){this.V=C}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof ws==0?w1(m,this.objId,this.scope):m},set:function(C){C=C.toString(),m=this instanceof ws==0?C.substr(0,1)==="("?kd(C.substr(1,C.length-2)):kd(C):C}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ws==1?kd(m.substr(1,m.length-1)):m},set:function(C){C=C.toString(),m=this instanceof ws==1?"/"+C:C}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var E,S=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return S},set:function(C){C=!!C,S=C}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(E)return E},set:function(C){E=C}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,1)},set:function(C){C?this.Ff=zi(this.Ff,1):this.Ff=Vi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,2)},set:function(C){C?this.Ff=zi(this.Ff,2):this.Ff=Vi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,3)},set:function(C){C?this.Ff=zi(this.Ff,3):this.Ff=Vi(this.Ff,3)}});var N=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(N!==null)return N},set:function(C){if([0,1,2].indexOf(C)===-1)throw new Error('Invalid value "'+C+'" for attribute Q supplied.');N=C}}),Object.defineProperty(this,"textAlign",{get:function(){var C;switch(N){case 0:default:C="left";break;case 1:C="center";break;case 2:C="right"}return C},configurable:!0,enumerable:!0,set:function(C){switch(C){case"right":case 2:N=2;break;case"center":case 1:N=1;break;default:N=0}}})};Rr(ho,Ho);var Xd=function(){ho.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var i=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return i},set:function(t){i=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return i},set:function(t){i=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return eT(e,this.objId,this.scope)},set:function(t){var n,s;s=[],typeof(n=t)=="string"&&(s=(function(r,a,l){l||(l=1);for(var c,d=[];c=a.exec(r);)d.push(c[l]);return d})(n,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,18)},set:function(t){t?this.Ff=zi(this.Ff,18):this.Ff=Vi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=zi(this.Ff,19):this.Ff=Vi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,20)},set:function(t){t?(this.Ff=zi(this.Ff,20),e.sort()):this.Ff=Vi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,22)},set:function(t){t?this.Ff=zi(this.Ff,22):this.Ff=Vi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,23)},set:function(t){t?this.Ff=zi(this.Ff,23):this.Ff=Vi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,27)},set:function(t){t?this.Ff=zi(this.Ff,27):this.Ff=Vi(this.Ff,27)}}),this.hasAppearanceStream=!1};Rr(Xd,ho);var Zd=function(){Xd.call(this),this.fontName="helvetica",this.combo=!1};Rr(Zd,Xd);var Qd=function(){Zd.call(this),this.combo=!0};Rr(Qd,Zd);var C0=function(){Qd.call(this),this.edit=!0};Rr(C0,Qd);var ws=function(){ho.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,15)},set:function(t){t?this.Ff=zi(this.Ff,15):this.Ff=Vi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,16)},set:function(t){t?this.Ff=zi(this.Ff,16):this.Ff=Vi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,17)},set:function(t){t?this.Ff=zi(this.Ff,17):this.Ff=Vi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,26)},set:function(t){t?this.Ff=zi(this.Ff,26):this.Ff=Vi(this.Ff,26)}});var i,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(r){return r};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,s=[];for(n in s.push("<<"),e)s.push("/"+n+" ("+Rc(t(e[n]))+")");return s.push(">>"),s.join(`
`)}},set:function(t){Fn(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return i},set:function(t){i=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return i.substr(1,i.length-1)},set:function(t){i="/"+t}})};Rr(ws,ho);var N0=function(){ws.call(this),this.pushButton=!0};Rr(N0,ws);var eh=function(){ws.call(this),this.radio=!0,this.pushButton=!1;var i=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return i},set:function(e){i=e!==void 0?e:[]}})};Rr(eh,ws);var Z0=function(){var i,e;ho.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return i},set:function(s){i=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var t,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(l){return l};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var r,a=[];for(r in a.push("<<"),n)a.push("/"+r+" ("+Rc(s(n[r]))+")");return a.push(">>"),a.join(`
`)},set:function(s){Fn(s)==="object"&&(n=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(s){typeof s=="string"&&(n.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(s){t="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=pt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Rr(Z0,ho),eh.prototype.setAppearance=function(i){if(!("createAppearanceStream"in i)||!("getCA"in i))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=i.createAppearanceStream(t.optionName),t.caption=i.getCA()}},eh.prototype.createOption=function(i){var e=new Z0;return e.Parent=this,e.optionName=i,this.Kids.push(e),$B.call(this.scope,e),e};var k0=function(){ws.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=pt.CheckBox.createAppearanceStream()};Rr(k0,ws);var wc=function(){ho.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,13)},set:function(e){e?this.Ff=zi(this.Ff,13):this.Ff=Vi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,21)},set:function(e){e?this.Ff=zi(this.Ff,21):this.Ff=Vi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,23)},set:function(e){e?this.Ff=zi(this.Ff,23):this.Ff=Vi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,24)},set:function(e){e?this.Ff=zi(this.Ff,24):this.Ff=Vi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,25)},set:function(e){e?this.Ff=zi(this.Ff,25):this.Ff=Vi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,26)},set:function(e){e?this.Ff=zi(this.Ff,26):this.Ff=Vi(this.Ff,26)}});var i=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return i},set:function(e){i=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return i},set:function(e){Number.isInteger(e)&&(i=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Rr(wc,ho);var R0=function(){wc.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,14)},set:function(i){i?this.Ff=zi(this.Ff,14):this.Ff=Vi(this.Ff,14)}}),this.password=!0};Rr(R0,wc);var pt={CheckBox:{createAppearanceStream:function(){return{N:{On:pt.CheckBox.YesNormal},D:{On:pt.CheckBox.YesPushDown,Off:pt.CheckBox.OffPushDown}}},YesPushDown:function(i){var e=Uo(i);e.scope=i.scope;var t=[],n=i.scope.internal.getFont(i.fontName,i.fontStyle).id,s=i.scope.__private__.encodeColorString(i.color),r=Ev(i,i.caption);return t.push("0.749023 g"),t.push("0 0 "+Kt(pt.internal.getWidth(i))+" "+Kt(pt.internal.getHeight(i))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+n+" "+Kt(r.fontSize)+" Tf "+s),t.push("BT"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(i){var e=Uo(i);e.scope=i.scope;var t=i.scope.internal.getFont(i.fontName,i.fontStyle).id,n=i.scope.__private__.encodeColorString(i.color),s=[],r=pt.internal.getHeight(i),a=pt.internal.getWidth(i),l=Ev(i,i.caption);return s.push("1 g"),s.push("0 0 "+Kt(a)+" "+Kt(r)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+Kt(a-1)+" "+Kt(r-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+t+" "+Kt(l.fontSize)+" Tf "+n),s.push(l.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(i){var e=Uo(i);e.scope=i.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Kt(pt.internal.getWidth(i))+" "+Kt(pt.internal.getHeight(i))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(i){var e={D:{Off:pt.RadioButton.Circle.OffPushDown},N:{}};return e.N[i]=pt.RadioButton.Circle.YesNormal,e.D[i]=pt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(i){var e=Uo(i);e.scope=i.scope;var t=[],n=pt.internal.getWidth(i)<=pt.internal.getHeight(i)?pt.internal.getWidth(i)/4:pt.internal.getHeight(i)/4;n=Number((.9*n).toFixed(5));var s=pt.internal.Bezier_C,r=Number((n*s).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+mu(pt.internal.getWidth(i)/2)+" "+mu(pt.internal.getHeight(i)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+r+" "+r+" "+n+" 0 "+n+" c"),t.push("-"+r+" "+n+" -"+n+" "+r+" -"+n+" 0 c"),t.push("-"+n+" -"+r+" -"+r+" -"+n+" 0 -"+n+" c"),t.push(r+" -"+n+" "+n+" -"+r+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(i){var e=Uo(i);e.scope=i.scope;var t=[],n=pt.internal.getWidth(i)<=pt.internal.getHeight(i)?pt.internal.getWidth(i)/4:pt.internal.getHeight(i)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),r=Number((s*pt.internal.Bezier_C).toFixed(5)),a=Number((n*pt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+mu(pt.internal.getWidth(i)/2)+" "+mu(pt.internal.getHeight(i)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+r+" "+r+" "+s+" 0 "+s+" c"),t.push("-"+r+" "+s+" -"+s+" "+r+" -"+s+" 0 c"),t.push("-"+s+" -"+r+" -"+r+" -"+s+" 0 -"+s+" c"),t.push(r+" -"+s+" "+s+" -"+r+" "+s+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+mu(pt.internal.getWidth(i)/2)+" "+mu(pt.internal.getHeight(i)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),t.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),t.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),t.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(i){var e=Uo(i);e.scope=i.scope;var t=[],n=pt.internal.getWidth(i)<=pt.internal.getHeight(i)?pt.internal.getWidth(i)/4:pt.internal.getHeight(i)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),r=Number((s*pt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+mu(pt.internal.getWidth(i)/2)+" "+mu(pt.internal.getHeight(i)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+r+" "+r+" "+s+" 0 "+s+" c"),t.push("-"+r+" "+s+" -"+s+" "+r+" -"+s+" 0 c"),t.push("-"+s+" -"+r+" -"+r+" -"+s+" 0 -"+s+" c"),t.push(r+" -"+s+" "+s+" -"+r+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(i){var e={D:{Off:pt.RadioButton.Cross.OffPushDown},N:{}};return e.N[i]=pt.RadioButton.Cross.YesNormal,e.D[i]=pt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(i){var e=Uo(i);e.scope=i.scope;var t=[],n=pt.internal.calculateCross(i);return t.push("q"),t.push("1 1 "+Kt(pt.internal.getWidth(i)-2)+" "+Kt(pt.internal.getHeight(i)-2)+" re"),t.push("W"),t.push("n"),t.push(Kt(n.x1.x)+" "+Kt(n.x1.y)+" m"),t.push(Kt(n.x2.x)+" "+Kt(n.x2.y)+" l"),t.push(Kt(n.x4.x)+" "+Kt(n.x4.y)+" m"),t.push(Kt(n.x3.x)+" "+Kt(n.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(i){var e=Uo(i);e.scope=i.scope;var t=pt.internal.calculateCross(i),n=[];return n.push("0.749023 g"),n.push("0 0 "+Kt(pt.internal.getWidth(i))+" "+Kt(pt.internal.getHeight(i))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Kt(pt.internal.getWidth(i)-2)+" "+Kt(pt.internal.getHeight(i)-2)+" re"),n.push("W"),n.push("n"),n.push(Kt(t.x1.x)+" "+Kt(t.x1.y)+" m"),n.push(Kt(t.x2.x)+" "+Kt(t.x2.y)+" l"),n.push(Kt(t.x4.x)+" "+Kt(t.x4.y)+" m"),n.push(Kt(t.x3.x)+" "+Kt(t.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(i){var e=Uo(i);e.scope=i.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Kt(pt.internal.getWidth(i))+" "+Kt(pt.internal.getHeight(i))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(i){var e=i.scope.internal.getFont(i.fontName,i.fontStyle).id,t=i.scope.__private__.encodeColorString(i.color);return"/"+e+" "+i.fontSize+" Tf "+t}};pt.internal={Bezier_C:.551915024494,calculateCross:function(i){var e=pt.internal.getWidth(i),t=pt.internal.getHeight(i),n=Math.min(e,t);return{x1:{x:(e-n)/2,y:(t-n)/2+n},x2:{x:(e-n)/2+n,y:(t-n)/2},x3:{x:(e-n)/2,y:(t-n)/2},x4:{x:(e-n)/2+n,y:(t-n)/2+n}}}},pt.internal.getWidth=function(i){var e=0;return Fn(i)==="object"&&(e=N_(i.Rect[2])),e},pt.internal.getHeight=function(i){var e=0;return Fn(i)==="object"&&(e=N_(i.Rect[3])),e};var $B=Di.addField=function(i){if(GB(this,i),!(i instanceof ho))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=i).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),i.page=i.scope.internal.getCurrentPageInfo().pageNumber,this};Di.AcroFormChoiceField=Xd,Di.AcroFormListBox=Zd,Di.AcroFormComboBox=Qd,Di.AcroFormEditBox=C0,Di.AcroFormButton=ws,Di.AcroFormPushButton=N0,Di.AcroFormRadioButton=eh,Di.AcroFormCheckBox=k0,Di.AcroFormTextField=wc,Di.AcroFormPasswordField=R0,Di.AcroFormAppearance=pt,Di.AcroForm={ChoiceField:Xd,ListBox:Zd,ComboBox:Qd,EditBox:C0,Button:ws,PushButton:N0,RadioButton:eh,CheckBox:k0,TextField:wc,PasswordField:R0,Appearance:pt},_t.AcroForm={ChoiceField:Xd,ListBox:Zd,ComboBox:Qd,EditBox:C0,Button:ws,PushButton:N0,RadioButton:eh,CheckBox:k0,TextField:wc,PasswordField:R0,Appearance:pt};_t.AcroForm;function iT(i){return i.reduce(function(e,t,n){return e[t]=n,e},{})}(function(i){var e="addImage_";i.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=i.__addimage__.getImageFileTypeByImageData=function(B,H){var se,ie,ye,X,ue,de=t;if((H=H||t)==="RGBA"||B.data!==void 0&&B.data instanceof Uint8ClampedArray&&"height"in B&&"width"in B)return"RGBA";if(G(B))for(ue in n)for(ye=n[ue],se=0;se<ye.length;se+=1){for(X=!0,ie=0;ie<ye[se].length;ie+=1)if(ye[se][ie]!==void 0&&ye[se][ie]!==B[ie]){X=!1;break}if(X===!0){de=ue;break}}else for(ue in n)for(ye=n[ue],se=0;se<ye.length;se+=1){for(X=!0,ie=0;ie<ye[se].length;ie+=1)if(ye[se][ie]!==void 0&&ye[se][ie]!==B.charCodeAt(ie)){X=!1;break}if(X===!0){de=ue;break}}return de===t&&H!==t&&(de=H),de},r=function B(H){for(var se=this.internal.write,ie=this.internal.putStream,ye=(0,this.internal.getFilters)();ye.indexOf("FlateEncode")!==-1;)ye.splice(ye.indexOf("FlateEncode"),1);H.objectId=this.internal.newObject();var X=[];if(X.push({key:"Type",value:"/XObject"}),X.push({key:"Subtype",value:"/Image"}),X.push({key:"Width",value:H.width}),X.push({key:"Height",value:H.height}),H.colorSpace===C.INDEXED?X.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(H.palette.length/3-1)+" "+("sMask"in H&&H.sMask!==void 0?H.objectId+2:H.objectId+1)+" 0 R]"}):(X.push({key:"ColorSpace",value:"/"+H.colorSpace}),H.colorSpace===C.DEVICE_CMYK&&X.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),X.push({key:"BitsPerComponent",value:H.bitsPerComponent}),"decodeParameters"in H&&H.decodeParameters!==void 0&&X.push({key:"DecodeParms",value:"<<"+H.decodeParameters+">>"}),"transparency"in H&&Array.isArray(H.transparency)&&H.transparency.length>0){for(var ue="",de=0,we=H.transparency.length;de<we;de++)ue+=H.transparency[de]+" "+H.transparency[de]+" ";X.push({key:"Mask",value:"["+ue+"]"})}H.sMask!==void 0&&X.push({key:"SMask",value:H.objectId+1+" 0 R"});var Oe=H.filter!==void 0?["/"+H.filter]:void 0;if(ie({data:H.data,additionalKeyValues:X,alreadyAppliedFilters:Oe,objectId:H.objectId}),se("endobj"),"sMask"in H&&H.sMask!==void 0){var Q,M=(Q=H.sMaskBitsPerComponent)!==null&&Q!==void 0?Q:H.bitsPerComponent,V={width:H.width,height:H.height,colorSpace:"DeviceGray",bitsPerComponent:M,data:H.sMask};"filter"in H&&(V.decodeParameters="/Predictor ".concat(H.predictor," /Colors 1 /BitsPerComponent ").concat(M," /Columns ").concat(H.width),V.filter=H.filter),B.call(this,V)}if(H.colorSpace===C.INDEXED){var Z=this.internal.newObject();ie({data:K(new Uint8Array(H.palette)),objectId:Z}),se("endobj")}},a=function(){var B=this.internal.collections[e+"images"];for(var H in B)r.call(this,B[H])},l=function(){var B,H=this.internal.collections[e+"images"],se=this.internal.write;for(var ie in H)se("/I"+(B=H[ie]).index,B.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",l))},d=function(){var B=this.internal.collections[e+"images"];return c.call(this),B},h=function(){return Object.keys(this.internal.collections[e+"images"]).length},p=function(B){return typeof i["process"+B.toUpperCase()]=="function"},v=function(B){return Fn(B)==="object"&&B.nodeType===1},m=function(B,H){if(B.nodeName==="IMG"&&B.hasAttribute("src")){var se=""+B.getAttribute("src");if(se.indexOf("data:image/")===0)return T0(unescape(se).split("base64,").pop());var ie=i.loadFile(se,!0);if(ie!==void 0)return ie}if(B.nodeName==="CANVAS"){if(B.width===0||B.height===0)throw new Error("Given canvas must have data. Canvas width: "+B.width+", height: "+B.height);var ye;switch(H){case"PNG":ye="image/png";break;case"WEBP":ye="image/webp";break;default:ye="image/jpeg"}return T0(B.toDataURL(ye,1).split("base64,").pop())}},E=function(B){var H=this.internal.collections[e+"images"];if(H){for(var se in H)if(B===H[se].alias)return H[se]}},S=function(B,H,se){return B||H||(B=-96,H=-96),B<0&&(B=-1*se.width*72/B/this.internal.scaleFactor),H<0&&(H=-1*se.height*72/H/this.internal.scaleFactor),B===0&&(B=H*se.width/se.height),H===0&&(H=B*se.height/se.width),[B,H]},N=function(B,H,se,ie,ye,X){var ue=S.call(this,se,ie,ye),de=this.internal.getCoordinateString,we=this.internal.getVerticalCoordinateString,Oe=d.call(this);if(se=ue[0],ie=ue[1],Oe[ye.index]=ye,X){X*=Math.PI/180;var Q=Math.cos(X),M=Math.sin(X),V=function(le){return le.toFixed(4)},Z=[V(Q),V(M),V(-1*M),V(Q),0,0,"cm"]}this.internal.write("q"),X?(this.internal.write([1,"0","0",1,de(B),we(H+ie),"cm"].join(" ")),this.internal.write(Z.join(" ")),this.internal.write([de(se),"0","0",de(ie),"0","0","cm"].join(" "))):this.internal.write([de(se),"0","0",de(ie),de(B),we(H+ie),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ye.index+" Do"),this.internal.write("Q")},C=i.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};i.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var P=i.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},L=i.__addimage__.sHashCode=function(B){var H,se,ie=0;if(typeof B=="string")for(se=B.length,H=0;H<se;H++)ie=(ie<<5)-ie+B.charCodeAt(H),ie|=0;else if(G(B))for(se=B.byteLength/2,H=0;H<se;H++)ie=(ie<<5)-ie+B[H],ie|=0;return ie},O=i.__addimage__.validateStringAsBase64=function(B){(B=B||"").toString().trim();var H=!0;return B.length===0&&(H=!1),B.length%4!=0&&(H=!1),/^[A-Za-z0-9+/]+$/.test(B.substr(0,B.length-2))===!1&&(H=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(B.substr(-2))===!1&&(H=!1),H},q=i.__addimage__.extractImageFromDataUrl=function(B){if(B==null||!(B=B.trim()).startsWith("data:"))return null;var H=B.indexOf(",");return H<0?null:B.substring(0,H).trim().endsWith("base64")?B.substring(H+1):null};i.__addimage__.isArrayBuffer=function(B){return B instanceof ArrayBuffer};var G=i.__addimage__.isArrayBufferView=function(B){return B instanceof Int8Array||B instanceof Uint8Array||B instanceof Uint8ClampedArray||B instanceof Int16Array||B instanceof Uint16Array||B instanceof Int32Array||B instanceof Uint32Array||B instanceof Float32Array||B instanceof Float64Array},W=i.__addimage__.binaryStringToUint8Array=function(B){for(var H=B.length,se=new Uint8Array(H),ie=0;ie<H;ie++)se[ie]=B.charCodeAt(ie);return se},K=i.__addimage__.arrayBufferToBinaryString=function(B){for(var H="",se=G(B)?B:new Uint8Array(B),ie=0;ie<se.length;ie+=8192)H+=String.fromCharCode.apply(null,se.subarray(ie,ie+8192));return H};i.addImage=function(){var B,H,se,ie,ye,X,ue,de,we;if(typeof arguments[1]=="number"?(H=t,se=arguments[1],ie=arguments[2],ye=arguments[3],X=arguments[4],ue=arguments[5],de=arguments[6],we=arguments[7]):(H=arguments[1],se=arguments[2],ie=arguments[3],ye=arguments[4],X=arguments[5],ue=arguments[6],de=arguments[7],we=arguments[8]),Fn(B=arguments[0])==="object"&&!v(B)&&"imageData"in B){var Oe=B;B=Oe.imageData,H=Oe.format||H||t,se=Oe.x||se||0,ie=Oe.y||ie||0,ye=Oe.w||Oe.width||ye,X=Oe.h||Oe.height||X,ue=Oe.alias||ue,de=Oe.compression||de,we=Oe.rotation||Oe.angle||we}var Q=this.internal.getFilters();if(de===void 0&&Q.indexOf("FlateEncode")!==-1&&(de="SLOW"),isNaN(se)||isNaN(ie))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var M=j.call(this,B,H,ue,de);return N.call(this,se,ie,ye,X,M,we),this};var j=function(B,H,se,ie){var ye,X,ue;if(typeof B=="string"&&s(B)===t){B=unescape(B);var de=ee(B,!1);(de!==""||(de=i.loadFile(B,!0))!==void 0)&&(B=de)}if(v(B)&&(B=m(B,H)),H=s(B,H),!p(H))throw new Error("addImage does not support files of type '"+H+"', please ensure that a plugin for '"+H+"' support is added.");if(((ue=se)==null||ue.length===0)&&(se=(function(we){return typeof we=="string"||G(we)?L(we):G(we.data)?L(we.data):null})(B)),(ye=E.call(this,se))||(B instanceof Uint8Array||H==="RGBA"||(X=B,B=W(B)),ye=this["process"+H.toUpperCase()](B,h.call(this),se,(function(we){return we&&typeof we=="string"&&(we=we.toUpperCase()),we in i.image_compression?we:P.NONE})(ie),X)),!ye)throw new Error("An unknown error occurred whilst processing the image.");return ye},ee=i.__addimage__.convertBase64ToBinaryString=function(B,H){H=typeof H!="boolean"||H;var se,ie="";if(typeof B=="string"){var ye;se=(ye=q(B))!==null&&ye!==void 0?ye:B;try{ie=T0(se)}catch(X){if(H)throw O(se)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+X.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ie};i.getImageProperties=function(B){var H,se,ie="";if(v(B)&&(B=m(B)),typeof B=="string"&&s(B)===t&&((ie=ee(B,!1))===""&&(ie=i.loadFile(B)||""),B=ie),se=s(B),!p(se))throw new Error("addImage does not support files of type '"+se+"', please ensure that a plugin for '"+se+"' support is added.");if(B instanceof Uint8Array||(B=W(B)),!(H=this["process"+se.toUpperCase()](B)))throw new Error("An unknown error occurred whilst processing the image");return H.fileType=se,H}})(_t.API),(function(i){var e=function(t){if(t!==void 0&&t!="")return!0};_t.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),i.events.push(["putPage",function(t){for(var n,s,r,a=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(t.objId),d=t.pageContext.annotations,h=!1,p=0;p<d.length&&!h;p++)switch((n=d[p]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var v=0;v<d.length;v++){n=d[v];var m=this.internal.pdfEscape,E=this.internal.getEncryptor(t.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var S=this.internal.newAdditionalObject(),N=this.internal.newAdditionalObject(),C=this.internal.getEncryptor(S.objId),P=n.title||"Note";r="<</Type /Annot /Subtype /Text "+(s="/Rect ["+a(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+m(C(n.contents))+")",r+=" /Popup "+N.objId+" 0 R",r+=" /P "+c.objId+" 0 R",r+=" /T ("+m(C(P))+") >>",S.content=r;var L=S.objId+" 0 R";r="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+a(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+L,n.open&&(r+=" /Open true"),r+=" >>",N.content=r,this.internal.write(S.objId,"0 R",N.objId,"0 R");break;case"freetext":s="/Rect ["+a(n.bounds.x)+" "+l(n.bounds.y)+" "+a(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var O=n.color||"#000000";r="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+m(E(n.contents))+")",r+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+O+")",r+=" /Border [0 0 0]",r+=" >>",this.internal.write(r);break;case"link":if(n.options.name){var q=this.annotations._nameMap[n.options.name];n.options.pageNumber=q.page,n.options.top=q.y}else n.options.top||(n.options.top=0);if(s="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",r="",n.options.url)r="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+m(E(n.options.url))+") >>";else if(n.options.pageNumber)switch(r="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":r+=" /Fit]";break;case"FitH":r+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,r+=" /FitV "+n.options.left+"]";break;default:var G=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),r+=" /XYZ "+n.options.left+" "+G+" "+n.options.zoom+"]"}r!=""&&(r+=" >>",this.internal.write(r))}}this.internal.write("]")}}]),i.createAnnotation=function(t){var n=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":n.pageContext.annotations.push(t)}},i.link=function(t,n,s,r,a){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(t),y:d(n),w:c(t+s),h:d(n+r)},options:a,type:"link"})},i.textWithLink=function(t,n,s,r){var a,l,c=this.getTextWidth(t),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(r.maxWidth!==void 0){l=r.maxWidth;var h=this.splitTextToSize(t,l).length;a=Math.ceil(d*h)}else l=c,a=d;return this.text(t,n,s,r),s+=.2*d,r.align==="center"&&(n-=c/2),r.align==="right"&&(n-=c),this.link(n,s-d,l,a,r),c},i.getTextWidth=function(t){var n=this.internal.getFontSize();return this.getStringUnitWidth(t)*n/this.internal.scaleFactor}})(_t.API),(function(i){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];i.__arabicParser__={};var r=i.__arabicParser__.isInArabicSubstitutionA=function(S){return e[S.charCodeAt(0)]!==void 0},a=i.__arabicParser__.isArabicLetter=function(S){return typeof S=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(S)},l=i.__arabicParser__.isArabicEndLetter=function(S){return a(S)&&r(S)&&e[S.charCodeAt(0)].length<=2},c=i.__arabicParser__.isArabicAlfLetter=function(S){return a(S)&&s.indexOf(S.charCodeAt(0))>=0};i.__arabicParser__.arabicLetterHasIsolatedForm=function(S){return a(S)&&r(S)&&e[S.charCodeAt(0)].length>=1};var d=i.__arabicParser__.arabicLetterHasFinalForm=function(S){return a(S)&&r(S)&&e[S.charCodeAt(0)].length>=2};i.__arabicParser__.arabicLetterHasInitialForm=function(S){return a(S)&&r(S)&&e[S.charCodeAt(0)].length>=3};var h=i.__arabicParser__.arabicLetterHasMedialForm=function(S){return a(S)&&r(S)&&e[S.charCodeAt(0)].length==4},p=i.__arabicParser__.resolveLigatures=function(S){var N=0,C=t,P="",L=0;for(N=0;N<S.length;N+=1)C[S.charCodeAt(N)]!==void 0?(L++,typeof(C=C[S.charCodeAt(N)])=="number"&&(P+=String.fromCharCode(C),C=t,L=0),N===S.length-1&&(C=t,P+=S.charAt(N-(L-1)),N-=L-1,L=0)):(C=t,P+=S.charAt(N-L),N-=L,L=0);return P};i.__arabicParser__.isArabicDiacritic=function(S){return S!==void 0&&n[S.charCodeAt(0)]!==void 0};var v=i.__arabicParser__.getCorrectForm=function(S,N,C){return a(S)?r(S)===!1?-1:!d(S)||!a(N)&&!a(C)||!a(C)&&l(N)||l(S)&&!a(N)||l(S)&&c(N)||l(S)&&l(N)?0:h(S)&&a(N)&&!l(N)&&a(C)&&d(C)?3:l(S)||!a(C)?1:2:-1},m=function(S){var N=0,C=0,P=0,L="",O="",q="",G=(S=S||"").split("\\s+"),W=[];for(N=0;N<G.length;N+=1){for(W.push(""),C=0;C<G[N].length;C+=1)L=G[N][C],O=G[N][C-1],q=G[N][C+1],a(L)?(P=v(L,O,q),W[N]+=P!==-1?String.fromCharCode(e[L.charCodeAt(0)][P]):L):W[N]+=L;W[N]=p(W[N])}return W.join(" ")},E=i.__arabicParser__.processArabic=i.processArabic=function(){var S,N=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,C=[];if(Array.isArray(N)){var P=0;for(C=[],P=0;P<N.length;P+=1)Array.isArray(N[P])?C.push([m(N[P][0]),N[P][1],N[P][2]]):C.push([m(N[P])]);S=C}else S=m(N);return typeof arguments[0]=="string"?S:(arguments[0].text=S,arguments[0])};i.events.push(["preProcessText",E])})(_t.API),_t.API.autoPrint=function(i){var e;return(i=i||{}).variant=i.variant||"non-conform",i.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(i){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(l){t=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(l){s=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var r=[];Object.defineProperty(this,"childNodes",{get:function(){return r},set:function(l){r=l}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(l){a=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,n){var s;if((t=t||"2d")!=="2d")return null;for(s in n)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=n[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},i.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(_t.API),(function(i){var e={left:0,top:0,bottom:0,right:0},t=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new r,this.internal.__cell__.pages=1},r=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(S){c=S}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(S){d=S}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(S){h=S}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(S){p=S}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(S){v=S}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(S){m=S}});var E=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return E},set:function(S){E=S}}),this};r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},r.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},i.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},i.getTextDimensions=function(c,d){n.call(this);var h=(d=d||{}).fontSize||this.getFontSize(),p=d.font||this.getFont(),v=d.scaleFactor||this.internal.scaleFactor,m=0,E=0,S=0,N=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var C=d.maxWidth;C>0?typeof c=="string"?c=this.splitTextToSize(c,C):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(L,O){return L.concat(N.splitTextToSize(O,C))},[])):c=Array.isArray(c)?c:[c];for(var P=0;P<c.length;P++)m<(S=this.getStringUnitWidth(c[P],{font:p})*h)&&(m=S);return m!==0&&(E=c.length),{w:m/=v,h:Math.max((E*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/v,0)}},i.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new r(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=i.cell=function(){var c;c=arguments[0]instanceof r?arguments[0]:new r(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var d=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,v=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=p.top,m&&v&&(this.printHeaderRow(c.lineNumber,!0),c.y+=v[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,t===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-h,c.y+h,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+h,{align:"center",baseline:"top",maxWidth:c.width-h-h}):this.text(c.text,c.x+h,c.y+h,{align:"left",baseline:"top",maxWidth:c.width-h-h})),this.internal.__cell__.lastCell=c,this};i.table=function(c,d,h,p,v){if(n.call(this),!h)throw new Error("No data for PDF table.");var m,E,S,N,C=[],P=[],L=[],O={},q={},G=[],W=[],K=(v=v||{}).autoSize||!1,j=v.printHeaders!==!1,ee=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,B=v.margins||Object.assign({width:this.getPageWidth()},e),H=typeof v.padding=="number"?v.padding:3,se=v.headerBackgroundColor||"#c8c8c8",ie=v.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=j,this.internal.__cell__.margins=B,this.internal.__cell__.table_font_size=ee,this.internal.__cell__.padding=H,this.internal.__cell__.headerBackgroundColor=se,this.internal.__cell__.headerTextColor=ie,this.setFontSize(ee),p==null)P=C=Object.keys(h[0]),L=C.map(function(){return"left"});else if(Array.isArray(p)&&Fn(p[0])==="object")for(C=p.map(function(Oe){return Oe.name}),P=p.map(function(Oe){return Oe.prompt||Oe.name||""}),L=p.map(function(Oe){return Oe.align||"left"}),m=0;m<p.length;m+=1)q[p[m].name]=.7499990551181103*p[m].width;else Array.isArray(p)&&typeof p[0]=="string"&&(P=C=p,L=C.map(function(){return"left"}));if(K||Array.isArray(p)&&typeof p[0]=="string")for(m=0;m<C.length;m+=1){for(O[N=C[m]]=h.map(function(Oe){return Oe[N]}),this.setFont(void 0,"bold"),G.push(this.getTextDimensions(P[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),E=O[N],this.setFont(void 0,"normal"),S=0;S<E.length;S+=1)G.push(this.getTextDimensions(E[S],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);q[N]=Math.max.apply(null,G)+H+H,G=[]}if(j){var ye={};for(m=0;m<C.length;m+=1)ye[C[m]]={},ye[C[m]].text=P[m],ye[C[m]].align=L[m];var X=l.call(this,ye,q);W=C.map(function(Oe){return new r(c,d,q[Oe],X,ye[Oe].text,void 0,ye[Oe].align)}),this.setTableHeaderRow(W),this.printHeaderRow(1,!1)}var ue=p.reduce(function(Oe,Q){return Oe[Q.name]=Q.align,Oe},{});for(m=0;m<h.length;m+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:m,data:h[m]},this);var de=l.call(this,h[m],q);for(S=0;S<C.length;S+=1){var we=h[m][C[S]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:m,col:S,data:we},this),a.call(this,new r(c,d,q[C[S]],de,we,m+2,ue[C[S]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var h=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(c).map(function(m){var E=c[m];return this.splitTextToSize(E.hasOwnProperty("text")?E.text:E,d[m]-h-h)},this).map(function(m){return this.getLineHeightFactor()*m.length*p/v+h+h},this).reduce(function(m,E){return Math.max(m,E)},0)};i.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},i.printHeaderRow=function(c,d){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new r(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){h=this.internal.__cell__.tableHeaderRow[m].clone(),d&&(h.y=this.internal.__cell__.margins.top||0,v.push(h)),h.lineNumber=c;var E=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,h),this.setTextColor(E)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),t=!1}})(_t.API);var sT={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},rT=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Tv=iT(rT),aT=[100,200,300,400,500,600,700,800,900],WB=iT(aT);function x1(i){var e=i.family.replace(/"|'/g,"").toLowerCase(),t=(function(r){return sT[r=r||"normal"]?r:"normal"})(i.style),n=(function(r){return r?typeof r=="number"?r>=100&&r<=900&&r%100==0?r:400:/^\d00$/.test(r)?parseInt(r):r==="bold"?700:400:400})(i.weight),s=(function(r){return typeof Tv[r=r||"normal"]=="number"?r:"normal"})(i.stretch);return{family:e,style:t,weight:n,stretch:s,src:i.src||[],ref:i.ref||{name:e,style:[s,t,n].join(" ")}}}function k_(i,e,t,n){var s;for(s=t;s>=0&&s<e.length;s+=n)if(i[e[s]])return i[e[s]];for(s=t;s>=0&&s<e.length;s-=n)if(i[e[s]])return i[e[s]]}var YB={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},R_={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function L_(i){return[i.stretch,i.style,i.weight,i.family].join(" ")}function P_(i){return i.trimLeft()}function KB(i,e){for(var t=0;t<i.length;){if(i.charAt(t)===e)return[i.substring(0,t),i.substring(t+1)];t+=1}return null}function JB(i){var e=i.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],i.substring(e[0].length)]}var f0,I_,M_,Rd,p0,D_,O_,B_,_1=["times"];function F_(i,e,t,n,s){var r=4,a=j_;switch(s){case _t.API.image_compression.FAST:r=1,a=U_;break;case _t.API.image_compression.MEDIUM:r=6,a=q_;break;case _t.API.image_compression.SLOW:r=9,a=H_}i=(function(c,d,h,p){for(var v,m=c.length/d,E=new Uint8Array(c.length+m),S=[XB,U_,j_,q_,H_],N=0;N<m;N+=1){var C=N*d,P=c.subarray(C,C+d);if(p)E.set(p(P,h,v),C+N);else{for(var L=S.length,O=[],q=0;q<L;q+=1)O[q]=S[q](P,h,v);var G=QB(O.concat());E.set(O[G],C+N)}v=P}return E})(i,e,Math.ceil(t*n/8),a);var l=bv(i,{level:r});return _t.API.__addimage__.arrayBufferToBinaryString(l)}function XB(i){var e=Array.apply([],i);return e.unshift(0),e}function U_(i,e){var t=i.length,n=[];n[0]=1;for(var s=0;s<t;s+=1){var r=i[s-e]||0;n[s+1]=i[s]-r+256&255}return n}function j_(i,e,t){var n=i.length,s=[];s[0]=2;for(var r=0;r<n;r+=1){var a=t&&t[r]||0;s[r+1]=i[r]-a+256&255}return s}function q_(i,e,t){var n=i.length,s=[];s[0]=3;for(var r=0;r<n;r+=1){var a=i[r-e]||0,l=t&&t[r]||0;s[r+1]=i[r]+256-(a+l>>>1)&255}return s}function H_(i,e,t){var n=i.length,s=[];s[0]=4;for(var r=0;r<n;r+=1){var a=ZB(i[r-e]||0,t&&t[r]||0,t&&t[r-e]||0);s[r+1]=i[r]-a+256&255}return s}function ZB(i,e,t){if(i===e&&e===t)return i;var n=Math.abs(e-t),s=Math.abs(i-t),r=Math.abs(i+e-t-t);return n<=s&&n<=r?i:s<=r?e:t}function QB(i){var e=i.map(function(t){return t.reduce(function(n,s){return n+Math.abs(s)},0)});return e.indexOf(Math.min.apply(null,e))}function A1(i,e,t){var n=e*t,s=Math.floor(n/8),r=16-(n-8*s+t),a=(1<<t)-1;return oT(i,s)>>r&a}function z_(i,e,t,n){var s=t*n,r=Math.floor(s/8),a=16-(s-8*r+n),l=(1<<n)-1,c=(e&l)<<a;(function(d,h,p){if(h+1<d.byteLength)d.setUint16(h,p,!1);else{var v=p>>8&255;d.setUint8(h,v)}})(i,r,oT(i,r)&~(l<<a)&65535|c)}function oT(i,e){return e+1<i.byteLength?i.getUint16(e,!1):i.getUint8(e)<<8}function eF(i){var e=0;if(i[e++]!==71||i[e++]!==73||i[e++]!==70||i[e++]!==56||(i[e++]+1&253)!=56||i[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=i[e++]|i[e++]<<8,n=i[e++]|i[e++]<<8,s=i[e++],r=s>>7,a=1<<1+(7&s);i[e++],i[e++];var l=null,c=null;r&&(l=e,c=a,e+=3*a);var d=!0,h=[],p=0,v=null,m=0,E=null;for(this.width=t,this.height=n;d&&e<i.length;)switch(i[e++]){case 33:switch(i[e++]){case 255:if(i[e]!==11||i[e+1]==78&&i[e+2]==69&&i[e+3]==84&&i[e+4]==83&&i[e+5]==67&&i[e+6]==65&&i[e+7]==80&&i[e+8]==69&&i[e+9]==50&&i[e+10]==46&&i[e+11]==48&&i[e+12]==3&&i[e+13]==1&&i[e+16]==0)e+=14,E=i[e++]|i[e++]<<8,e++;else for(e+=12;;){if(!((B=i[e++])>=0))throw Error("Invalid block size");if(B===0)break;e+=B}break;case 249:if(i[e++]!==4||i[e+4]!==0)throw new Error("Invalid graphics extension block.");var S=i[e++];p=i[e++]|i[e++]<<8,v=i[e++],1&S||(v=null),m=S>>2&7,e++;break;case 254:for(;;){if(!((B=i[e++])>=0))throw Error("Invalid block size");if(B===0)break;e+=B}break;default:throw new Error("Unknown graphic control label: 0x"+i[e-1].toString(16))}break;case 44:var N=i[e++]|i[e++]<<8,C=i[e++]|i[e++]<<8,P=i[e++]|i[e++]<<8,L=i[e++]|i[e++]<<8,O=i[e++],q=O>>6&1,G=1<<1+(7&O),W=l,K=c,j=!1;O>>7&&(j=!0,W=e,K=G,e+=3*G);var ee=e;for(e++;;){var B;if(!((B=i[e++])>=0))throw Error("Invalid block size");if(B===0)break;e+=B}h.push({x:N,y:C,width:P,height:L,has_local_palette:j,palette_offset:W,palette_size:K,data_offset:ee,data_length:e-ee,transparent_index:v,interlaced:!!q,delay:p,disposal:m});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+i[e-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return E},this.frameInfo=function(H){if(H<0||H>=h.length)throw new Error("Frame index out of range.");return h[H]},this.decodeAndBlitFrameBGRA=function(H,se){var ie=this.frameInfo(H),ye=ie.width*ie.height,X=new Uint8Array(ye);V_(i,ie.data_offset,X,ye);var ue=ie.palette_offset,de=ie.transparent_index;de===null&&(de=256);var we=ie.width,Oe=t-we,Q=we,M=4*(ie.y*t+ie.x),V=4*((ie.y+ie.height)*t+ie.x),Z=M,le=4*Oe;ie.interlaced===!0&&(le+=4*t*7);for(var ce=8,he=0,Ae=X.length;he<Ae;++he){var Ee=X[he];if(Q===0&&(Q=we,(Z+=le)>=V&&(le=4*Oe+4*t*(ce-1),Z=M+(we+Oe)*(ce<<1),ce>>=1)),Ee===de)Z+=4;else{var Ie=i[ue+3*Ee],He=i[ue+3*Ee+1],Ye=i[ue+3*Ee+2];se[Z++]=Ye,se[Z++]=He,se[Z++]=Ie,se[Z++]=255}--Q}},this.decodeAndBlitFrameRGBA=function(H,se){var ie=this.frameInfo(H),ye=ie.width*ie.height,X=new Uint8Array(ye);V_(i,ie.data_offset,X,ye);var ue=ie.palette_offset,de=ie.transparent_index;de===null&&(de=256);var we=ie.width,Oe=t-we,Q=we,M=4*(ie.y*t+ie.x),V=4*((ie.y+ie.height)*t+ie.x),Z=M,le=4*Oe;ie.interlaced===!0&&(le+=4*t*7);for(var ce=8,he=0,Ae=X.length;he<Ae;++he){var Ee=X[he];if(Q===0&&(Q=we,(Z+=le)>=V&&(le=4*Oe+4*t*(ce-1),Z=M+(we+Oe)*(ce<<1),ce>>=1)),Ee===de)Z+=4;else{var Ie=i[ue+3*Ee],He=i[ue+3*Ee+1],Ye=i[ue+3*Ee+2];se[Z++]=Ie,se[Z++]=He,se[Z++]=Ye,se[Z++]=255}--Q}}}function V_(i,e,t,n){for(var s=i[e++],r=1<<s,a=r+1,l=a+1,c=s+1,d=(1<<c)-1,h=0,p=0,v=0,m=i[e++],E=new Int32Array(4096),S=null;;){for(;h<16&&m!==0;)p|=i[e++]<<h,h+=8,m===1?m=i[e++]:--m;if(h<c)break;var N=p&d;if(p>>=c,h-=c,N!==r){if(N===a)break;for(var C=N<l?N:S,P=0,L=C;L>r;)L=E[L]>>8,++P;var O=L;if(v+P+(C!==N?1:0)>n)return void Jn.log("Warning, gif stream longer than expected.");t[v++]=O;var q=v+=P;for(C!==N&&(t[v++]=O),L=C;P--;)L=E[L],t[--q]=255&L,L>>=8;S!==null&&l<4096&&(E[l++]=S<<8|O,l>=d+1&&c<12&&(++c,d=d<<1|1)),S=N}else l=a+1,d=(1<<(c=s+1))-1,S=null}return v!==n&&Jn.log("Warning, gif stream shorter than expected."),t}function S1(i){var e,t,n,s,r,a=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),h=new Array(64),p=new Array(65535),v=new Array(65535),m=new Array(64),E=new Array(64),S=[],N=0,C=7,P=new Array(64),L=new Array(64),O=new Array(64),q=new Array(256),G=new Array(2048),W=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],K=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],j=[0,1,2,3,4,5,6,7,8,9,10,11],ee=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],B=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],H=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],se=[0,1,2,3,4,5,6,7,8,9,10,11],ie=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ye=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function X(M,V){for(var Z=0,le=0,ce=new Array,he=1;he<=16;he++){for(var Ae=1;Ae<=M[he];Ae++)ce[V[le]]=[],ce[V[le]][0]=Z,ce[V[le]][1]=he,le++,Z++;Z*=2}return ce}function ue(M){for(var V=M[0],Z=M[1]-1;Z>=0;)V&1<<Z&&(N|=1<<C),Z--,--C<0&&(N==255?(de(255),de(0)):de(N),C=7,N=0)}function de(M){S.push(M)}function we(M){de(M>>8&255),de(255&M)}function Oe(M,V,Z,le,ce){for(var he,Ae=ce[0],Ee=ce[240],Ie=(function(Le,at){var Ke,Qe,rt,Tt,zt,At,tn,Vt,ut,Pt,tt=0;for(ut=0;ut<8;++ut){Ke=Le[tt],Qe=Le[tt+1],rt=Le[tt+2],Tt=Le[tt+3],zt=Le[tt+4],At=Le[tt+5],tn=Le[tt+6];var Pn=Ke+(Vt=Le[tt+7]),bt=Ke-Vt,Ct=Qe+tn,Ft=Qe-tn,nn=rt+At,St=rt-At,In=Tt+zt,Lt=Tt-zt,Ot=Pn+In,An=Pn-In,Gt=Ct+nn,gt=Ct-nn;Le[tt]=Ot+Gt,Le[tt+4]=Ot-Gt;var rn=.707106781*(gt+An);Le[tt+2]=An+rn,Le[tt+6]=An-rn;var Ws=.382683433*((Ot=Lt+St)-(gt=Ft+bt)),Un=.5411961*Ot+Ws,Lr=1.306562965*gt+Ws,Os=.707106781*(Gt=St+Ft),wt=bt+Os,Ca=bt-Os;Le[tt+5]=Ca+Un,Le[tt+3]=Ca-Un,Le[tt+1]=wt+Lr,Le[tt+7]=wt-Lr,tt+=8}for(tt=0,ut=0;ut<8;++ut){Ke=Le[tt],Qe=Le[tt+8],rt=Le[tt+16],Tt=Le[tt+24],zt=Le[tt+32],At=Le[tt+40],tn=Le[tt+48];var na=Ke+(Vt=Le[tt+56]),Ys=Ke-Vt,Ks=Qe+tn,Zn=Qe-tn,Ti=rt+At,Gi=rt-At,po=Tt+zt,xs=Tt-zt,Mn=na+po,ei=na-po,ds=Ks+Ti,Js=Ks-Ti;Le[tt]=Mn+ds,Le[tt+32]=Mn-ds;var ur=.707106781*(Js+ei);Le[tt+16]=ei+ur,Le[tt+48]=ei-ur;var $o=.382683433*((Mn=xs+Gi)-(Js=Zn+Ys)),Pr=.5411961*Mn+$o,Ir=1.306562965*Js+$o,go=.707106781*(ds=Gi+Zn),Mr=Ys+go,Dr=Ys-go;Le[tt+40]=Dr+Pr,Le[tt+24]=Dr-Pr,Le[tt+8]=Mr+Ir,Le[tt+56]=Mr-Ir,tt++}for(ut=0;ut<64;++ut)Pt=Le[ut]*at[ut],m[ut]=Pt>0?Pt+.5|0:Pt-.5|0;return m})(M,V),He=0;He<64;++He)E[W[He]]=Ie[He];var Ye=E[0]-Z;Z=E[0],Ye==0?ue(le[0]):(ue(le[v[he=32767+Ye]]),ue(p[he]));for(var Ze=63;Ze>0&&E[Ze]==0;)Ze--;if(Ze==0)return ue(Ae),Z;for(var st,ne=1;ne<=Ze;){for(var Je=ne;E[ne]==0&&ne<=Ze;)++ne;var Ge=ne-Je;if(Ge>=16){st=Ge>>4;for(var Be=1;Be<=st;++Be)ue(Ee);Ge&=15}he=32767+E[ne],ue(ce[(Ge<<4)+v[he]]),ue(p[he]),ne++}return Ze!=63&&ue(Ae),Z}function Q(M){M=Math.min(Math.max(M,1),100),r!=M&&((function(V){for(var Z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],le=0;le<64;le++){var ce=a((Z[le]*V+50)/100);ce=Math.min(Math.max(ce,1),255),l[W[le]]=ce}for(var he=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ae=0;Ae<64;Ae++){var Ee=a((he[Ae]*V+50)/100);Ee=Math.min(Math.max(Ee,1),255),c[W[Ae]]=Ee}for(var Ie=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],He=0,Ye=0;Ye<8;Ye++)for(var Ze=0;Ze<8;Ze++)d[He]=1/(l[W[He]]*Ie[Ye]*Ie[Ze]*8),h[He]=1/(c[W[He]]*Ie[Ye]*Ie[Ze]*8),He++})(M<50?Math.floor(5e3/M):Math.floor(200-2*M)),r=M)}this.encode=function(M,V){V&&Q(V),S=new Array,N=0,C=7,we(65496),we(65504),we(16),de(74),de(70),de(73),de(70),de(0),de(1),de(1),de(0),we(1),we(1),de(0),de(0),(function(){we(65499),we(132),de(0);for(var Qe=0;Qe<64;Qe++)de(l[Qe]);de(1);for(var rt=0;rt<64;rt++)de(c[rt])})(),(function(Qe,rt){we(65472),we(17),de(8),we(rt),we(Qe),de(3),de(1),de(17),de(0),de(2),de(17),de(1),de(3),de(17),de(1)})(M.width,M.height),(function(){we(65476),we(418),de(0);for(var Qe=0;Qe<16;Qe++)de(K[Qe+1]);for(var rt=0;rt<=11;rt++)de(j[rt]);de(16);for(var Tt=0;Tt<16;Tt++)de(ee[Tt+1]);for(var zt=0;zt<=161;zt++)de(B[zt]);de(1);for(var At=0;At<16;At++)de(H[At+1]);for(var tn=0;tn<=11;tn++)de(se[tn]);de(17);for(var Vt=0;Vt<16;Vt++)de(ie[Vt+1]);for(var ut=0;ut<=161;ut++)de(ye[ut])})(),we(65498),we(12),de(3),de(1),de(0),de(2),de(17),de(3),de(17),de(0),de(63),de(0);var Z=0,le=0,ce=0;N=0,C=7,this.encode.displayName="_encode_";for(var he,Ae,Ee,Ie,He,Ye,Ze,st,ne,Je=M.data,Ge=M.width,Be=M.height,Le=4*Ge,at=0;at<Be;){for(he=0;he<Le;){for(He=Le*at+he,Ze=-1,st=0,ne=0;ne<64;ne++)Ye=He+(st=ne>>3)*Le+(Ze=4*(7&ne)),at+st>=Be&&(Ye-=Le*(at+1+st-Be)),he+Ze>=Le&&(Ye-=he+Ze-Le+4),Ae=Je[Ye++],Ee=Je[Ye++],Ie=Je[Ye++],P[ne]=(G[Ae]+G[Ee+256|0]+G[Ie+512|0]>>16)-128,L[ne]=(G[Ae+768|0]+G[Ee+1024|0]+G[Ie+1280|0]>>16)-128,O[ne]=(G[Ae+1280|0]+G[Ee+1536|0]+G[Ie+1792|0]>>16)-128;Z=Oe(P,d,Z,e,n),le=Oe(L,h,le,t,s),ce=Oe(O,h,ce,t,s),he+=32}at+=8}if(C>=0){var Ke=[];Ke[1]=C+1,Ke[0]=(1<<C+1)-1,ue(Ke)}return we(65497),new Uint8Array(S)},i=i||50,(function(){for(var M=String.fromCharCode,V=0;V<256;V++)q[V]=M(V)})(),e=X(K,j),t=X(H,se),n=X(ee,B),s=X(ie,ye),(function(){for(var M=1,V=2,Z=1;Z<=15;Z++){for(var le=M;le<V;le++)v[32767+le]=Z,p[32767+le]=[],p[32767+le][1]=Z,p[32767+le][0]=le;for(var ce=-(V-1);ce<=-M;ce++)v[32767+ce]=Z,p[32767+ce]=[],p[32767+ce][1]=Z,p[32767+ce][0]=V-1+ce;M<<=1,V<<=1}})(),(function(){for(var M=0;M<256;M++)G[M]=19595*M,G[M+256|0]=38470*M,G[M+512|0]=7471*M+32768,G[M+768|0]=-11059*M,G[M+1024|0]=-21709*M,G[M+1280|0]=32768*M+8421375,G[M+1536|0]=-27439*M,G[M+1792|0]=-5329*M})(),Q(i)}function to(i,e){if(this.pos=0,this.buffer=i,this.datav=new DataView(i.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function G_(i){function e(j){if(!j)throw Error("assert :P")}function t(j,ee,B){for(var H=0;4>H;H++)if(j[ee+H]!=B.charCodeAt(H))return!0;return!1}function n(j,ee,B,H,se){for(var ie=0;ie<se;ie++)j[ee+ie]=B[H+ie]}function s(j,ee,B,H){for(var se=0;se<H;se++)j[ee+se]=B}function r(j){return new Int32Array(j)}function a(j,ee){for(var B=[],H=0;H<j;H++)B.push(new ee);return B}function l(j,ee){var B=[];return(function H(se,ie,ye){for(var X=ye[ie],ue=0;ue<X&&(se.push(ye.length>ie+1?[]:new ee),!(ye.length<ie+1));ue++)H(se[ue],ie+1,ye)})(B,0,j),B}var c=function(){var j=this;function ee(b,A){for(var R=1<<A-1>>>0;b&R;)R>>>=1;return R?(b&R-1)+R:b}function B(b,A,R,I,U){e(!(I%R));do b[A+(I-=R)]=U;while(0<I)}function H(b,A,R,I,U){if(e(2328>=U),512>=U)var z=r(512);else if((z=r(U))==null)return 0;return(function($,J,te,ae,ge,Ce){var re,be,Se=J,De=1<<te,Te=r(16),Me=r(16);for(e(ge!=0),e(ae!=null),e($!=null),e(0<te),be=0;be<ge;++be){if(15<ae[be])return 0;++Te[ae[be]]}if(Te[0]==ge)return 0;for(Me[1]=0,re=1;15>re;++re){if(Te[re]>1<<re)return 0;Me[re+1]=Me[re]+Te[re]}for(be=0;be<ge;++be)re=ae[be],0<ae[be]&&(Ce[Me[re]++]=be);if(Me[15]==1)return(ae=new se).g=0,ae.value=Ce[0],B($,Se,1,De,ae),De;var je,We=-1,Ve=De-1,ft=0,nt=1,qt=1,ot=1<<te;for(be=0,re=1,ge=2;re<=te;++re,ge<<=1){if(nt+=qt<<=1,0>(qt-=Te[re]))return 0;for(;0<Te[re];--Te[re])(ae=new se).g=re,ae.value=Ce[be++],B($,Se+ft,ge,ot,ae),ft=ee(ft,re)}for(re=te+1,ge=2;15>=re;++re,ge<<=1){if(nt+=qt<<=1,0>(qt-=Te[re]))return 0;for(;0<Te[re];--Te[re]){if(ae=new se,(ft&Ve)!=We){for(Se+=ot,je=1<<(We=re)-te;15>We&&!(0>=(je-=Te[We]));)++We,je<<=1;De+=ot=1<<(je=We-te),$[J+(We=ft&Ve)].g=je+te,$[J+We].value=Se-J-We}ae.g=re-te,ae.value=Ce[be++],B($,Se+(ft>>te),ge,ot,ae),ft=ee(ft,re)}}return nt!=2*Me[15]-1?0:De})(b,A,R,I,U,z)}function se(){this.value=this.g=0}function ie(){this.value=this.g=0}function ye(){this.G=a(5,se),this.H=r(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(wo,ie)}function X(b,A,R,I){e(b!=null),e(A!=null),e(2147483648>I),b.Ca=254,b.I=0,b.b=-8,b.Ka=0,b.oa=A,b.pa=R,b.Jd=A,b.Yc=R+I,b.Zc=4<=I?R+I-4+1:R,Ae(b)}function ue(b,A){for(var R=0;0<A--;)R|=Ie(b,128)<<A;return R}function de(b,A){var R=ue(b,A);return Ee(b)?-R:R}function we(b,A,R,I){var U,z=0;for(e(b!=null),e(A!=null),e(4294967288>I),b.Sb=I,b.Ra=0,b.u=0,b.h=0,4<I&&(I=4),U=0;U<I;++U)z+=A[R+U]<<8*U;b.Ra=z,b.bb=I,b.oa=A,b.pa=R}function Oe(b){for(;8<=b.u&&b.bb<b.Sb;)b.Ra>>>=8,b.Ra+=b.oa[b.pa+b.bb]<<ua-8>>>0,++b.bb,b.u-=8;le(b)&&(b.h=1,b.u=0)}function Q(b,A){if(e(0<=A),!b.h&&A<=Es){var R=Z(b)&Fs[A];return b.u+=A,Oe(b),R}return b.h=1,b.u=0}function M(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function V(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Z(b){return b.Ra>>>(b.u&ua-1)>>>0}function le(b){return e(b.bb<=b.Sb),b.h||b.bb==b.Sb&&b.u>ua}function ce(b,A){b.u=A,b.h=le(b)}function he(b){b.u>=ca&&(e(b.u>=ca),Oe(b))}function Ae(b){e(b!=null&&b.oa!=null),b.pa<b.Zc?(b.I=(b.oa[b.pa++]|b.I<<8)>>>0,b.b+=8):(e(b!=null&&b.oa!=null),b.pa<b.Yc?(b.b+=8,b.I=b.oa[b.pa++]|b.I<<8):b.Ka?b.b=0:(b.I<<=8,b.b+=8,b.Ka=1))}function Ee(b){return ue(b,1)}function Ie(b,A){var R=b.Ca;0>b.b&&Ae(b);var I=b.b,U=R*A>>>8,z=(b.I>>>I>U)+0;for(z?(R-=U,b.I-=U+1<<I>>>0):R=U+1,I=R,U=0;256<=I;)U+=8,I>>=8;return I=7^U+Ha[I],b.b-=I,b.Ca=(R<<I)-1,z}function He(b,A,R){b[A+0]=R>>24&255,b[A+1]=R>>16&255,b[A+2]=R>>8&255,b[A+3]=255&R}function Ye(b,A){return b[A+0]|b[A+1]<<8}function Ze(b,A){return Ye(b,A)|b[A+2]<<16}function st(b,A){return Ye(b,A)|Ye(b,A+2)<<16}function ne(b,A){var R=1<<A;return e(b!=null),e(0<A),b.X=r(R),b.X==null?0:(b.Mb=32-A,b.Xa=A,1)}function Je(b,A){e(b!=null),e(A!=null),e(b.Xa==A.Xa),n(A.X,0,b.X,0,1<<A.Xa)}function Ge(){this.X=[],this.Xa=this.Mb=0}function Be(b,A,R,I){e(R!=null),e(I!=null);var U=R[0],z=I[0];return U==0&&(U=(b*z+A/2)/A),z==0&&(z=(A*U+b/2)/b),0>=U||0>=z?0:(R[0]=U,I[0]=z,1)}function Le(b,A){return b+(1<<A)-1>>>A}function at(b,A){return((4278255360&b)+(4278255360&A)>>>0&4278255360)+((16711935&b)+(16711935&A)>>>0&16711935)>>>0}function Ke(b,A){j[A]=function(R,I,U,z,$,J,te){var ae;for(ae=0;ae<$;++ae){var ge=j[b](J[te+ae-1],U,z+ae);J[te+ae]=at(R[I+ae],ge)}}}function Qe(){this.ud=this.hd=this.jd=0}function rt(b,A){return((4278124286&(b^A))>>>1)+(b&A)>>>0}function Tt(b){return 0<=b&&256>b?b:0>b?0:255<b?255:void 0}function zt(b,A){return Tt(b+(b-A+.5>>1))}function At(b,A,R){return Math.abs(A-R)-Math.abs(b-R)}function tn(b,A,R,I,U,z,$){for(I=z[$-1],R=0;R<U;++R)z[$+R]=I=at(b[A+R],I)}function Vt(b,A,R,I,U){var z;for(z=0;z<R;++z){var $=b[A+z],J=$>>8&255,te=16711935&(te=(te=16711935&$)+((J<<16)+J));I[U+z]=(4278255360&$)+te>>>0}}function ut(b,A){A.jd=255&b,A.hd=b>>8&255,A.ud=b>>16&255}function Pt(b,A,R,I,U,z){var $;for($=0;$<I;++$){var J=A[R+$],te=J>>>8,ae=J,ge=255&(ge=(ge=J>>>16)+((b.jd<<24>>24)*(te<<24>>24)>>>5));ae=255&(ae=(ae+=(b.hd<<24>>24)*(te<<24>>24)>>>5)+((b.ud<<24>>24)*(ge<<24>>24)>>>5)),U[z+$]=(4278255360&J)+(ge<<16)+ae}}function tt(b,A,R,I,U){j[A]=function(z,$,J,te,ae,ge,Ce,re,be){for(te=Ce;te<re;++te)for(Ce=0;Ce<be;++Ce)ae[ge++]=U(J[I(z[$++])])},j[b]=function(z,$,J,te,ae,ge,Ce){var re=8>>z.b,be=z.Ea,Se=z.K[0],De=z.w;if(8>re)for(z=(1<<z.b)-1,De=(1<<re)-1;$<J;++$){var Te,Me=0;for(Te=0;Te<be;++Te)Te&z||(Me=I(te[ae++])),ge[Ce++]=U(Se[Me&De]),Me>>=re}else j["VP8LMapColor"+R](te,ae,Se,De,ge,Ce,$,J,be)}}function Pn(b,A,R,I,U){for(R=A+R;A<R;){var z=b[A++];I[U++]=z>>16&255,I[U++]=z>>8&255,I[U++]=255&z}}function bt(b,A,R,I,U){for(R=A+R;A<R;){var z=b[A++];I[U++]=z>>16&255,I[U++]=z>>8&255,I[U++]=255&z,I[U++]=z>>24&255}}function Ct(b,A,R,I,U){for(R=A+R;A<R;){var z=($=b[A++])>>16&240|$>>12&15,$=240&$|$>>28&15;I[U++]=z,I[U++]=$}}function Ft(b,A,R,I,U){for(R=A+R;A<R;){var z=($=b[A++])>>16&248|$>>13&7,$=$>>5&224|$>>3&31;I[U++]=z,I[U++]=$}}function nn(b,A,R,I,U){for(R=A+R;A<R;){var z=b[A++];I[U++]=255&z,I[U++]=z>>8&255,I[U++]=z>>16&255}}function St(b,A,R,I,U,z){if(z==0)for(R=A+R;A<R;)He(I,((z=b[A++])[0]>>24|z[1]>>8&65280|z[2]<<8&16711680|z[3]<<24)>>>0),U+=32;else n(I,U,b,A,R)}function In(b,A){j[A][0]=j[b+"0"],j[A][1]=j[b+"1"],j[A][2]=j[b+"2"],j[A][3]=j[b+"3"],j[A][4]=j[b+"4"],j[A][5]=j[b+"5"],j[A][6]=j[b+"6"],j[A][7]=j[b+"7"],j[A][8]=j[b+"8"],j[A][9]=j[b+"9"],j[A][10]=j[b+"10"],j[A][11]=j[b+"11"],j[A][12]=j[b+"12"],j[A][13]=j[b+"13"],j[A][14]=j[b+"0"],j[A][15]=j[b+"0"]}function Lt(b){return b==Zu||b==$c||b==$l||b==Wc}function Ot(){this.eb=[],this.size=this.A=this.fb=0}function An(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Gt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ot,this.f.kb=new An,this.sd=null}function gt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function rn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ws(b){return alert("todo:WebPSamplerProcessPlane"),b.T}function Un(b,A){var R=b.T,I=A.ba.f.RGBA,U=I.eb,z=I.fb+b.ka*I.A,$=rs[A.ba.S],J=b.y,te=b.O,ae=b.f,ge=b.N,Ce=b.ea,re=b.W,be=A.cc,Se=A.dc,De=A.Mc,Te=A.Nc,Me=b.ka,je=b.ka+b.T,We=b.U,Ve=We+1>>1;for(Me==0?$(J,te,null,null,ae,ge,Ce,re,ae,ge,Ce,re,U,z,null,null,We):($(A.ec,A.fc,J,te,be,Se,De,Te,ae,ge,Ce,re,U,z-I.A,U,z,We),++R);Me+2<je;Me+=2)be=ae,Se=ge,De=Ce,Te=re,ge+=b.Rc,re+=b.Rc,z+=2*I.A,$(J,(te+=2*b.fa)-b.fa,J,te,be,Se,De,Te,ae,ge,Ce,re,U,z-I.A,U,z,We);return te+=b.fa,b.j+je<b.o?(n(A.ec,A.fc,J,te,We),n(A.cc,A.dc,ae,ge,Ve),n(A.Mc,A.Nc,Ce,re,Ve),R--):1&je||$(J,te,null,null,ae,ge,Ce,re,ae,ge,Ce,re,U,z+I.A,null,null,We),R}function Lr(b,A,R){var I=b.F,U=[b.J];if(I!=null){var z=b.U,$=A.ba.S,J=$==Xu||$==$l;A=A.ba.f.RGBA;var te=[0],ae=b.ka;te[0]=b.T,b.Kb&&(ae==0?--te[0]:(--ae,U[0]-=b.width),b.j+b.ka+b.T==b.o&&(te[0]=b.o-b.j-ae));var ge=A.eb;ae=A.fb+ae*A.A,b=Wu(I,U[0],b.width,z,te,ge,ae+(J?0:3),A.A),e(R==te),b&&Lt($)&&il(ge,ae,J,z,te,A.A)}return 0}function Os(b){var A=b.ma,R=A.ba.S,I=11>R,U=R==ps||R==pr||R==Xu||R==Gl||R==12||Lt(R);if(A.memory=null,A.Ib=null,A.Jb=null,A.Nd=null,!qa(A.Oa,b,U?11:12))return 0;if(U&&Lt(R)&&zu(),b.da)alert("todo:use_scaling");else{if(I){if(A.Ib=Ws,b.Kb){if(R=b.U+1>>1,A.memory=r(b.U+2*R),A.memory==null)return 0;A.ec=A.memory,A.fc=0,A.cc=A.ec,A.dc=A.fc+b.U,A.Mc=A.cc,A.Nc=A.dc+R,A.Ib=Un,zu()}}else alert("todo:EmitYUV");U&&(A.Jb=Lr,I&&jr())}if(I&&!Co){for(b=0;256>b;++b)as[b]=89858*(b-128)+Kl>>wr,vg[b]=-22014*(b-128)+Kl,Zf[b]=-45773*(b-128),Zc[b]=113618*(b-128)+Kl>>wr;for(b=ol;b<To;++b)A=76283*(b-16)+Kl>>wr,yg[b-ol]=Zs(A,255),bg[b-ol]=Zs(A+8>>4,15);Co=1}return 1}function wt(b){var A=b.ma,R=b.U,I=b.T;return e(!(1&b.ka)),0>=R||0>=I?0:(R=A.Ib(b,A),A.Jb!=null&&A.Jb(b,A,R),A.Dc+=R,1)}function Ca(b){b.ma.memory=null}function na(b,A,R,I){return Q(b,8)!=47?0:(A[0]=Q(b,14)+1,R[0]=Q(b,14)+1,I[0]=Q(b,1),Q(b,3)!=0?0:!b.h)}function Ys(b,A){if(4>b)return b+1;var R=b-2>>1;return(2+(1&b)<<R)+Q(A,R)+1}function Ks(b,A){return 120<A?A-120:1<=(R=((R=mr[A-1])>>4)*b+(8-(15&R)))?R:1;var R}function Zn(b,A,R){var I=Z(R),U=b[A+=255&I].g-8;return 0<U&&(ce(R,R.u+8),I=Z(R),A+=b[A].value,A+=I&(1<<U)-1),ce(R,R.u+b[A].g),b[A].value}function Ti(b,A,R){return R.g+=b.g,R.value+=b.value<<A>>>0,e(8>=R.g),b.g}function Gi(b,A,R){var I=b.xc;return e((A=I==0?0:b.vc[b.md*(R>>I)+(A>>I)])<b.Wb),b.Ya[A]}function po(b,A,R,I){var U=b.ab,z=b.c*A,$=b.C;A=$+A;var J=R,te=I;for(I=b.Ta,R=b.Ua;0<U--;){var ae=b.gc[U],ge=$,Ce=A,re=J,be=te,Se=(te=I,J=R,ae.Ea);switch(e(ge<Ce),e(Ce<=ae.nc),ae.hc){case 2:yi(re,be,(Ce-ge)*Se,te,J);break;case 0:var De=ge,Te=Ce,Me=te,je=J,We=(ot=ae).Ea;De==0&&(ql(re,be,null,null,1,Me,je),tn(re,be+1,0,0,We-1,Me,je+1),be+=We,je+=We,++De);for(var Ve=1<<ot.b,ft=Ve-1,nt=Le(We,ot.b),qt=ot.K,ot=ot.w+(De>>ot.b)*nt;De<Te;){var an=qt,Yn=ot,Wt=1;for(Hl(re,be,Me,je-We,1,Me,je);Wt<We;){var it=(Wt&~ft)+Ve;it>We&&(it=We),(0,za[an[Yn++]>>8&15])(re,be+ +Wt,Me,je+Wt-We,it-Wt,Me,je+Wt),Wt=it}be+=We,je+=We,++De&ft||(ot+=nt)}Ce!=ae.nc&&n(te,J-Se,te,J+(Ce-ge-1)*Se,Se);break;case 1:for(Se=re,Te=be,We=(re=ae.Ea)-(je=re&~(Me=(be=1<<ae.b)-1)),De=Le(re,ae.b),Ve=ae.K,ae=ae.w+(ge>>ae.b)*De;ge<Ce;){for(ft=Ve,nt=ae,qt=new Qe,ot=Te+je,an=Te+re;Te<ot;)ut(ft[nt++],qt),zl(qt,Se,Te,be,te,J),Te+=be,J+=be;Te<an&&(ut(ft[nt++],qt),zl(qt,Se,Te,We,te,J),Te+=We,J+=We),++ge&Me||(ae+=De)}break;case 3:if(re==te&&be==J&&0<ae.b){for(Te=te,re=Se=J+(Ce-ge)*Se-(je=(Ce-ge)*Le(ae.Ea,ae.b)),be=te,Me=J,De=[],je=(We=je)-1;0<=je;--je)De[je]=be[Me+je];for(je=We-1;0<=je;--je)Te[re+je]=De[je];qc(ae,ge,Ce,te,Se,te,J)}else qc(ae,ge,Ce,re,be,te,J)}J=I,te=R}te!=R&&n(I,R,J,te,z)}function xs(b,A){var R=b.V,I=b.Ba+b.c*b.C,U=A-b.C;if(e(A<=b.l.o),e(16>=U),0<U){var z=b.l,$=b.Ta,J=b.Ua,te=z.width;if(po(b,U,R,I),U=J=[J],e((R=b.C)<(I=A)),e(z.v<z.va),I>z.o&&(I=z.o),R<z.j){var ae=z.j-R;R=z.j,U[0]+=ae*te}if(R>=I?R=0:(U[0]+=4*z.v,z.ka=R-z.j,z.U=z.va-z.v,z.T=I-R,R=1),R){if(J=J[0],11>(R=b.ca).S){var ge=R.f.RGBA,Ce=(I=R.S,U=z.U,z=z.T,ae=ge.eb,ge.A),re=z;for(ge=ge.fb+b.Ma*ge.A;0<re--;){var be=$,Se=J,De=U,Te=ae,Me=ge;switch(I){case Vc:Vl(be,Se,De,Te,Me);break;case ps:Va(be,Se,De,Te,Me);break;case Zu:Va(be,Se,De,Te,Me),il(Te,Me,0,De,1,0);break;case Gc:tl(be,Se,De,Te,Me);break;case pr:St(be,Se,De,Te,Me,1);break;case $c:St(be,Se,De,Te,Me,1),il(Te,Me,0,De,1,0);break;case Xu:St(be,Se,De,Te,Me,0);break;case $l:St(be,Se,De,Te,Me,0),il(Te,Me,1,De,1,0);break;case Gl:Ga(be,Se,De,Te,Me);break;case Wc:Ga(be,Se,De,Te,Me),fr(Te,Me,De,1,0);break;case xo:fa(be,Se,De,Te,Me);break;default:e(0)}J+=te,ge+=Ce}b.Ma+=z}else alert("todo:EmitRescaledRowsYUVA");e(b.Ma<=R.height)}}b.C=A,e(b.C<=b.i)}function Mn(b){var A;if(0<b.ua)return 0;for(A=0;A<b.Wb;++A){var R=b.Ya[A].G,I=b.Ya[A].H;if(0<R[1][I[1]+0].g||0<R[2][I[2]+0].g||0<R[3][I[3]+0].g)return 0}return 1}function ei(b,A,R,I,U,z){if(b.Z!=0){var $=b.qd,J=b.rd;for(e(Ya[b.Z]!=null);A<R;++A)Ya[b.Z]($,J,I,U,I,U,z),$=I,J=U,U+=z;b.qd=$,b.rd=J}}function ds(b,A){var R=b.l.ma,I=R.Z==0||R.Z==1?b.l.j:b.C;if(I=b.C<I?I:b.C,e(A<=b.l.o),A>I){var U=b.l.width,z=R.ca,$=R.tb+U*I,J=b.V,te=b.Ba+b.c*I,ae=b.gc;e(b.ab==1),e(ae[0].hc==3),ha(ae[0],I,A,J,te,z,$),ei(R,I,A,z,$,U)}b.C=b.Ma=A}function Js(b,A,R,I,U,z,$){var J=b.$/I,te=b.$%I,ae=b.m,ge=b.s,Ce=R+b.$,re=Ce;U=R+I*U;var be=R+I*z,Se=280+ge.ua,De=b.Pb?J:16777216,Te=0<ge.ua?ge.Wa:null,Me=ge.wc,je=Ce<be?Gi(ge,te,J):null;e(b.C<z),e(be<=U);var We=!1;e:for(;;){for(;We||Ce<be;){var Ve=0;if(J>=De){var ft=Ce-R;e((De=b).Pb),De.wd=De.m,De.xd=ft,0<De.s.ua&&Je(De.s.Wa,De.s.vb),De=J+_o}if(te&Me||(je=Gi(ge,te,J)),e(je!=null),je.Qb&&(A[Ce]=je.qb,We=!0),!We)if(he(ae),je.jc){Ve=ae,ft=A;var nt=Ce,qt=je.pd[Z(Ve)&wo-1];e(je.jc),256>qt.g?(ce(Ve,Ve.u+qt.g),ft[nt]=qt.value,Ve=0):(ce(Ve,Ve.u+qt.g-256),e(256<=qt.value),Ve=qt.value),Ve==0&&(We=!0)}else Ve=Zn(je.G[0],je.H[0],ae);if(ae.h)break;if(We||256>Ve){if(!We)if(je.nd)A[Ce]=(je.qb|Ve<<8)>>>0;else{if(he(ae),We=Zn(je.G[1],je.H[1],ae),he(ae),ft=Zn(je.G[2],je.H[2],ae),nt=Zn(je.G[3],je.H[3],ae),ae.h)break;A[Ce]=(nt<<24|We<<16|Ve<<8|ft)>>>0}if(We=!1,++Ce,++te>=I&&(te=0,++J,$!=null&&J<=z&&!(J%16)&&$(b,J),Te!=null))for(;re<Ce;)Ve=A[re++],Te.X[(506832829*Ve&4294967295)>>>Te.Mb]=Ve}else if(280>Ve){if(Ve=Ys(Ve-256,ae),ft=Zn(je.G[4],je.H[4],ae),he(ae),ft=Ks(I,ft=Ys(ft,ae)),ae.h)break;if(Ce-R<ft||U-Ce<Ve)break e;for(nt=0;nt<Ve;++nt)A[Ce+nt]=A[Ce+nt-ft];for(Ce+=Ve,te+=Ve;te>=I;)te-=I,++J,$!=null&&J<=z&&!(J%16)&&$(b,J);if(e(Ce<=U),te&Me&&(je=Gi(ge,te,J)),Te!=null)for(;re<Ce;)Ve=A[re++],Te.X[(506832829*Ve&4294967295)>>>Te.Mb]=Ve}else{if(!(Ve<Se))break e;for(We=Ve-280,e(Te!=null);re<Ce;)Ve=A[re++],Te.X[(506832829*Ve&4294967295)>>>Te.Mb]=Ve;Ve=Ce,e(!(We>>>(ft=Te).Xa)),A[Ve]=ft.X[We],We=!0}We||e(ae.h==le(ae))}if(b.Pb&&ae.h&&Ce<U)e(b.m.h),b.a=5,b.m=b.wd,b.$=b.xd,0<b.s.ua&&Je(b.s.vb,b.s.Wa);else{if(ae.h)break e;$?.(b,J>z?z:J),b.a=0,b.$=Ce-R}return 1}return b.a=3,0}function ur(b){e(b!=null),b.vc=null,b.yc=null,b.Ya=null;var A=b.Wa;A!=null&&(A.X=null),b.vb=null,e(b!=null)}function $o(){var b=new Ut;return b==null?null:(b.a=0,b.xb=vh,In("Predictor","VP8LPredictors"),In("Predictor","VP8LPredictors_C"),In("PredictorAdd","VP8LPredictorsAdd"),In("PredictorAdd","VP8LPredictorsAdd_C"),yi=Vt,zl=Pt,Vl=Pn,Va=bt,Ga=Ct,fa=Ft,tl=nn,j.VP8LMapColor32b=da,j.VP8LMapColor8b=ns,b)}function Pr(b,A,R,I,U){var z=1,$=[b],J=[A],te=I.m,ae=I.s,ge=null,Ce=0;e:for(;;){if(R)for(;z&&Q(te,1);){var re=$,be=J,Se=I,De=1,Te=Se.m,Me=Se.gc[Se.ab],je=Q(Te,2);if(Se.Oc&1<<je)z=0;else{switch(Se.Oc|=1<<je,Me.hc=je,Me.Ea=re[0],Me.nc=be[0],Me.K=[null],++Se.ab,e(4>=Se.ab),je){case 0:case 1:Me.b=Q(Te,3)+2,De=Pr(Le(Me.Ea,Me.b),Le(Me.nc,Me.b),0,Se,Me.K),Me.K=Me.K[0];break;case 3:var We,Ve=Q(Te,8)+1,ft=16<Ve?0:4<Ve?1:2<Ve?2:3;if(re[0]=Le(Me.Ea,ft),Me.b=ft,We=De=Pr(Ve,1,0,Se,Me.K)){var nt,qt=Ve,ot=Me,an=1<<(8>>ot.b),Yn=r(an);if(Yn==null)We=0;else{var Wt=ot.K[0],it=ot.w;for(Yn[0]=ot.K[0][0],nt=1;nt<1*qt;++nt)Yn[nt]=at(Wt[it+nt],Yn[nt-1]);for(;nt<4*an;++nt)Yn[nt]=0;ot.K[0]=null,ot.K[0]=Yn,We=1}}De=We;break;case 2:break;default:e(0)}z=De}}if($=$[0],J=J[0],z&&Q(te,1)&&!(z=1<=(Ce=Q(te,4))&&11>=Ce)){I.a=3;break e}var Xe;if(Xe=z)t:{var ni,Mt,Xt,Cn=I,Ui=$,os=J,Hn=Ce,ki=R,gs=Cn.m,Ri=Cn.s,sn=[null],vn=1,ii=0,_n=vr[Hn];n:for(;;){if(ki&&Q(gs,1)){var ji=Q(gs,3)+2,si=Le(Ui,ji),yn=Le(os,ji),xi=si*yn;if(!Pr(si,yn,0,Cn,sn))break n;for(sn=sn[0],Ri.xc=ji,ni=0;ni<xi;++ni){var Nn=sn[ni]>>8&65535;sn[ni]=Nn,Nn>=vn&&(vn=Nn+1)}}if(gs.h)break n;for(Mt=0;5>Mt;++Mt){var Li=rl[Mt];!Mt&&0<Hn&&(Li+=1<<Hn),ii<Li&&(ii=Li)}var Pi=a(vn*_n,se),Dn=vn,pn=a(Dn,ye);if(pn==null)var ms=null;else e(65536>=Dn),ms=pn;var ui=r(ii);if(ms==null||ui==null||Pi==null){Cn.a=1;break n}var Et=Pi;for(ni=Xt=0;ni<vn;++ni){var Nt=ms[ni],bn=Nt.G,Us=Nt.H,xr=0,Cs=1,Ii=0;for(Mt=0;5>Mt;++Mt){Li=rl[Mt],bn[Mt]=Et,Us[Mt]=Xt,!Mt&&0<Hn&&(Li+=1<<Hn);s:{var No,ko=Li,ed=Cn,zn=ui,bh=Et,wh=Xt,td=0,Ka=ed.m,wg=Q(Ka,1);if(s(zn,0,0,ko),wg){var xh=Q(Ka,1)+1,_h=Q(Ka,1),nd=Q(Ka,_h==0?1:8);zn[nd]=1,xh==2&&(zn[nd=Q(Ka,8)]=1);var Yi=1}else{var ci=r(19),nc=Q(Ka,4)+4;if(19<nc){ed.a=3;var Ro=0;break s}for(No=0;No<nc;++No)ci[Qu[No]]=Q(Ka,3);var Xl=void 0,ll=void 0,ma=ed,id=ci,Zl=ko,sd=zn,rd=0,Ja=ma.m,Ah=8,Sh=a(128,se);i:for(;H(Sh,0,7,id,19);){if(Q(Ja,1)){var Qf=2+2*Q(Ja,3);if((Xl=2+Q(Ja,Qf))>Zl)break i}else Xl=Zl;for(ll=0;ll<Zl&&Xl--;){he(Ja);var Eh=Sh[0+(127&Z(Ja))];ce(Ja,Ja.u+Eh.g);var Lo=Eh.value;if(16>Lo)sd[ll++]=Lo,Lo!=0&&(Ah=Lo);else{var ep=Lo==16,tp=Lo-16,np=Wl[tp],Th=Q(Ja,gr[tp])+np;if(ll+Th>Zl)break i;for(var ip=ep?Ah:0;0<Th--;)sd[ll++]=ip}}rd=1;break i}rd||(ma.a=3),Yi=rd}(Yi=Yi&&!Ka.h)&&(td=H(bh,wh,8,zn,ko)),Yi&&td!=0?Ro=td:(ed.a=3,Ro=0)}if(Ro==0)break n;if(Cs&&Yc[Mt]==1&&(Cs=Et[Xt].g==0),xr+=Et[Xt].g,Xt+=Ro,3>=Mt){var ul,ad=ui[0];for(ul=1;ul<Li;++ul)ui[ul]>ad&&(ad=ui[ul]);Ii+=ad}}if(Nt.nd=Cs,Nt.Qb=0,Cs&&(Nt.qb=(bn[3][Us[3]+0].value<<24|bn[1][Us[1]+0].value<<16|bn[2][Us[2]+0].value)>>>0,xr==0&&256>bn[0][Us[0]+0].value&&(Nt.Qb=1,Nt.qb+=bn[0][Us[0]+0].value<<8)),Nt.jc=!Nt.Qb&&6>Ii,Nt.jc){var ic,va=Nt;for(ic=0;ic<wo;++ic){var Xa=ic,Za=va.pd[Xa],od=va.G[0][va.H[0]+Xa];256<=od.value?(Za.g=od.g+256,Za.value=od.value):(Za.g=0,Za.value=0,Xa>>=Ti(od,8,Za),Xa>>=Ti(va.G[1][va.H[1]+Xa],16,Za),Xa>>=Ti(va.G[2][va.H[2]+Xa],0,Za),Ti(va.G[3][va.H[3]+Xa],24,Za))}}}Ri.vc=sn,Ri.Wb=vn,Ri.Ya=ms,Ri.yc=Pi,Xe=1;break t}Xe=0}if(!(z=Xe)){I.a=3;break e}if(0<Ce){if(ae.ua=1<<Ce,!ne(ae.Wa,Ce)){I.a=1,z=0;break e}}else ae.ua=0;var ld=I,cl=$,sp=J,Ql=ld.s,eu=Ql.xc;if(ld.c=cl,ld.i=sp,Ql.md=Le(cl,eu),Ql.wc=eu==0?-1:(1<<eu)-1,R){I.xb=Ao;break e}if((ge=r($*J))==null){I.a=1,z=0;break e}z=(z=Js(I,ge,0,$,J,J,null))&&!te.h;break e}return z?(U!=null?U[0]=ge:(e(ge==null),e(R)),I.$=0,R||ur(ae)):ur(ae),z}function Ir(b,A){var R=b.c*b.i,I=R+A+16*A;return e(b.c<=A),b.V=r(I),b.V==null?(b.Ta=null,b.Ua=0,b.a=1,0):(b.Ta=b.V,b.Ua=b.Ba+R+A,1)}function go(b,A){var R=b.C,I=A-R,U=b.V,z=b.Ba+b.c*R;for(e(A<=b.l.o);0<I;){var $=16<I?16:I,J=b.l.ma,te=b.l.width,ae=te*$,ge=J.ca,Ce=J.tb+te*R,re=b.Ta,be=b.Ua;po(b,$,U,z),ir(re,be,ge,Ce,ae),ei(J,R,R+$,ge,Ce,te),I-=$,U+=$*b.c,R+=$}e(R==A),b.C=b.Ma=A}function Mr(){this.ub=this.yd=this.td=this.Rb=0}function Dr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Wo(){this.Fb=this.Bb=this.Cb=0,this.Zb=r(4),this.Lb=r(4)}function ia(){this.Yb=(function(){var b=[];return(function A(R,I,U){for(var z=U[I],$=0;$<z&&(R.push(U.length>I+1?[]:0),!(U.length<I+1));$++)A(R[$],I+1,U)})(b,0,[3,11]),b})()}function mi(){this.jb=r(3),this.Wc=l([4,8],ia),this.Xc=l([4,17],ia)}function ku(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new r(4),this.od=new r(4)}function Xs(){this.ld=this.La=this.dd=this.tc=0}function Or(){this.Na=this.la=0}function Na(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ru(){this.ad=r(384),this.Za=0,this.Ob=r(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Lu(){this.uc=this.M=this.Nb=0,this.wa=Array(new Xs),this.Y=0,this.ya=Array(new Ru),this.aa=0,this.l=new ka}function Pu(){this.y=r(16),this.f=r(8),this.ea=r(8)}function Lc(){this.cb=this.a=0,this.sc="",this.m=new M,this.Od=new Mr,this.Kc=new Dr,this.ed=new ku,this.Qa=new Wo,this.Ic=this.$c=this.Aa=0,this.D=new Lu,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,M),this.ia=0,this.pb=a(4,Na),this.Pa=new mi,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Pu),this.Hd=0,this.rb=Array(new Or),this.sb=0,this.wa=Array(new Xs),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ru),this.L=this.aa=0,this.gd=l([4,2],Xs),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Zs(b,A){return 0>b?0:b>A?A:b}function ka(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Br(){var b=new Lc;return b!=null&&(b.a=0,b.sc="OK",b.cb=0,b.Xb=0,sr||(sr=mo)),b}function wn(b,A,R){return b.a==0&&(b.a=A,b.sc=R,b.cb=0),0}function Iu(b,A,R){return 3<=R&&b[A+0]==157&&b[A+1]==1&&b[A+2]==42}function sa(b,A){if(b==null)return 0;if(b.a=0,b.sc="OK",A==null)return wn(b,2,"null VP8Io passed to VP8GetHeaders()");var R=A.data,I=A.w,U=A.ha;if(4>U)return wn(b,7,"Truncated header.");var z=R[I+0]|R[I+1]<<8|R[I+2]<<16,$=b.Od;if($.Rb=!(1&z),$.td=z>>1&7,$.yd=z>>4&1,$.ub=z>>5,3<$.td)return wn(b,3,"Incorrect keyframe parameters.");if(!$.yd)return wn(b,4,"Frame not displayable.");I+=3,U-=3;var J=b.Kc;if($.Rb){if(7>U)return wn(b,7,"cannot parse picture header");if(!Iu(R,I,U))return wn(b,3,"Bad code word");J.c=16383&(R[I+4]<<8|R[I+3]),J.Td=R[I+4]>>6,J.i=16383&(R[I+6]<<8|R[I+5]),J.Ud=R[I+6]>>6,I+=7,U-=7,b.za=J.c+15>>4,b.Ub=J.i+15>>4,A.width=J.c,A.height=J.i,A.Da=0,A.j=0,A.v=0,A.va=A.width,A.o=A.height,A.da=0,A.ib=A.width,A.hb=A.height,A.U=A.width,A.T=A.height,s((z=b.Pa).jb,0,255,z.jb.length),e((z=b.Qa)!=null),z.Cb=0,z.Bb=0,z.Fb=1,s(z.Zb,0,0,z.Zb.length),s(z.Lb,0,0,z.Lb)}if($.ub>U)return wn(b,7,"bad partition length");X(z=b.m,R,I,$.ub),I+=$.ub,U-=$.ub,$.Rb&&(J.Ld=Ee(z),J.Kd=Ee(z)),J=b.Qa;var te,ae=b.Pa;if(e(z!=null),e(J!=null),J.Cb=Ee(z),J.Cb){if(J.Bb=Ee(z),Ee(z)){for(J.Fb=Ee(z),te=0;4>te;++te)J.Zb[te]=Ee(z)?de(z,7):0;for(te=0;4>te;++te)J.Lb[te]=Ee(z)?de(z,6):0}if(J.Bb)for(te=0;3>te;++te)ae.jb[te]=Ee(z)?ue(z,8):255}else J.Bb=0;if(z.Ka)return wn(b,3,"cannot parse segment header");if((J=b.ed).zd=Ee(z),J.Tb=ue(z,6),J.wb=ue(z,3),J.Pc=Ee(z),J.Pc&&Ee(z)){for(ae=0;4>ae;++ae)Ee(z)&&(J.vd[ae]=de(z,6));for(ae=0;4>ae;++ae)Ee(z)&&(J.od[ae]=de(z,6))}if(b.L=J.Tb==0?0:J.zd?1:2,z.Ka)return wn(b,3,"cannot parse filter header");var ge=U;if(U=te=I,I=te+ge,J=ge,b.Xb=(1<<ue(b.m,2))-1,ge<3*(ae=b.Xb))R=7;else{for(te+=3*ae,J-=3*ae,ge=0;ge<ae;++ge){var Ce=R[U+0]|R[U+1]<<8|R[U+2]<<16;Ce>J&&(Ce=J),X(b.Jc[+ge],R,te,Ce),te+=Ce,J-=Ce,U+=3}X(b.Jc[+ae],R,te,J),R=te<I?0:5}if(R!=0)return wn(b,R,"cannot parse partitions");for(R=ue(te=b.m,7),U=Ee(te)?de(te,4):0,I=Ee(te)?de(te,4):0,J=Ee(te)?de(te,4):0,ae=Ee(te)?de(te,4):0,te=Ee(te)?de(te,4):0,ge=b.Qa,Ce=0;4>Ce;++Ce){if(ge.Cb){var re=ge.Zb[Ce];ge.Fb||(re+=R)}else{if(0<Ce){b.pb[Ce]=b.pb[0];continue}re=R}var be=b.pb[Ce];be.Sc[0]=yr[Zs(re+U,127)],be.Sc[1]=br[Zs(re+0,127)],be.Eb[0]=2*yr[Zs(re+I,127)],be.Eb[1]=101581*br[Zs(re+J,127)]>>16,8>be.Eb[1]&&(be.Eb[1]=8),be.Qc[0]=yr[Zs(re+ae,117)],be.Qc[1]=br[Zs(re+te,127)],be.lc=re+te}if(!$.Rb)return wn(b,4,"Not a key frame.");for(Ee(z),$=b.Pa,R=0;4>R;++R){for(U=0;8>U;++U)for(I=0;3>I;++I)for(J=0;11>J;++J)ae=Ie(z,Wn[R][U][I][J])?ue(z,8):Xf[R][U][I][J],$.Wc[R][U].Yb[I][J]=ae;for(U=0;17>U;++U)$.Xc[R][U]=$.Wc[R][on[U]]}return b.kc=Ee(z),b.kc&&(b.Bd=ue(z,8)),b.cb=1}function mo(b,A,R,I,U,z,$){var J=A[U].Yb[R];for(R=0;16>U;++U){if(!Ie(b,J[R+0]))return U;for(;!Ie(b,J[R+1]);)if(J=A[++U].Yb[0],R=0,U==16)return 16;var te=A[U+1].Yb;if(Ie(b,J[R+2])){var ae=b,ge=0;if(Ie(ae,(re=J)[(Ce=R)+3]))if(Ie(ae,re[Ce+6])){for(J=0,Ce=2*(ge=Ie(ae,re[Ce+8]))+(re=Ie(ae,re[Ce+9+ge])),ge=0,re=Jf[Ce];re[J];++J)ge+=ge+Ie(ae,re[J]);ge+=3+(8<<Ce)}else Ie(ae,re[Ce+7])?(ge=7+2*Ie(ae,165),ge+=Ie(ae,145)):ge=5+Ie(ae,159);else ge=Ie(ae,re[Ce+4])?3+Ie(ae,re[Ce+5]):2;J=te[2]}else ge=1,J=te[1];te=$+mh[U],0>(ae=b).b&&Ae(ae);var Ce,re=ae.b,be=(Ce=ae.Ca>>1)-(ae.I>>re)>>31;--ae.b,ae.Ca+=be,ae.Ca|=1,ae.I-=(Ce+1&be)<<re,z[te]=((ge^be)-be)*I[(0<U)+0]}return 16}function Mu(b){var A=b.rb[b.sb-1];A.la=0,A.Na=0,s(b.zc,0,0,b.zc.length),b.ja=0}function _s(b,A,R,I,U){U=b[A+R+32*I]+(U>>3),b[A+R+32*I]=-256&U?0>U?0:255:U}function Bi(b,A,R,I,U,z){_s(b,A,0,R,I+U),_s(b,A,1,R,I+z),_s(b,A,2,R,I-z),_s(b,A,3,R,I-U)}function Ci(b){return(20091*b>>16)+b}function Ml(b,A,R,I){var U,z=0,$=r(16);for(U=0;4>U;++U){var J=b[A+0]+b[A+8],te=b[A+0]-b[A+8],ae=(35468*b[A+4]>>16)-Ci(b[A+12]),ge=Ci(b[A+4])+(35468*b[A+12]>>16);$[z+0]=J+ge,$[z+1]=te+ae,$[z+2]=te-ae,$[z+3]=J-ge,z+=4,A++}for(U=z=0;4>U;++U)J=(b=$[z+0]+4)+$[z+8],te=b-$[z+8],ae=(35468*$[z+4]>>16)-Ci($[z+12]),_s(R,I,0,0,J+(ge=Ci($[z+4])+(35468*$[z+12]>>16))),_s(R,I,1,0,te+ae),_s(R,I,2,0,te-ae),_s(R,I,3,0,J-ge),z++,I+=32}function Pc(b,A,R,I){var U=b[A+0]+4,z=35468*b[A+4]>>16,$=Ci(b[A+4]),J=35468*b[A+1]>>16;Bi(R,I,0,U+$,b=Ci(b[A+1]),J),Bi(R,I,1,U+z,b,J),Bi(R,I,2,U-z,b,J),Bi(R,I,3,U-$,b,J)}function Du(b,A,R,I,U){Ml(b,A,R,I),U&&Ml(b,A+16,R,I+4)}function As(b,A,R,I){$a(b,A+0,R,I,1),$a(b,A+32,R,I+128,1)}function Ou(b,A,R,I){var U;for(b=b[A+0]+4,U=0;4>U;++U)for(A=0;4>A;++A)_s(R,I,A,U,b)}function Bu(b,A,R,I){b[A+0]&&xn(b,A+0,R,I),b[A+16]&&xn(b,A+16,R,I+4),b[A+32]&&xn(b,A+32,R,I+128),b[A+48]&&xn(b,A+48,R,I+128+4)}function Fr(b,A,R,I){var U,z=r(16);for(U=0;4>U;++U){var $=b[A+0+U]+b[A+12+U],J=b[A+4+U]+b[A+8+U],te=b[A+4+U]-b[A+8+U],ae=b[A+0+U]-b[A+12+U];z[0+U]=$+J,z[8+U]=$-J,z[4+U]=ae+te,z[12+U]=ae-te}for(U=0;4>U;++U)$=(b=z[0+4*U]+3)+z[3+4*U],J=z[1+4*U]+z[2+4*U],te=z[1+4*U]-z[2+4*U],ae=b-z[3+4*U],R[I+0]=$+J>>3,R[I+16]=ae+te>>3,R[I+32]=$-J>>3,R[I+48]=ae-te>>3,I+=64}function Yo(b,A,R){var I,U=A-32,z=fs,$=255-b[U-1];for(I=0;I<R;++I){var J,te=z,ae=$+b[A-1];for(J=0;J<R;++J)b[A+J]=te[ae+b[U+J]];A+=32}}function Ic(b,A){Yo(b,A,4)}function Mc(b,A){Yo(b,A,8)}function Fu(b,A){Yo(b,A,16)}function Uu(b,A){var R;for(R=0;16>R;++R)n(b,A+32*R,b,A-32,16)}function Dc(b,A){var R;for(R=16;0<R;--R)s(b,A,b[A-1],16),A+=32}function Bs(b,A,R){var I;for(I=0;16>I;++I)s(A,R+32*I,b,16)}function Ur(b,A){var R,I=16;for(R=0;16>R;++R)I+=b[A-1+32*R]+b[A+R-32];Bs(I>>5,b,A)}function Ra(b,A){var R,I=8;for(R=0;16>R;++R)I+=b[A-1+32*R];Bs(I>>4,b,A)}function Ko(b,A){var R,I=8;for(R=0;16>R;++R)I+=b[A+R-32];Bs(I>>4,b,A)}function vo(b,A){Bs(128,b,A)}function It(b,A,R){return b+2*A+R+2>>2}function Oc(b,A){var R,I=A-32;for(I=new Uint8Array([It(b[I-1],b[I+0],b[I+1]),It(b[I+0],b[I+1],b[I+2]),It(b[I+1],b[I+2],b[I+3]),It(b[I+2],b[I+3],b[I+4])]),R=0;4>R;++R)n(b,A+32*R,I,0,I.length)}function ju(b,A){var R=b[A-1],I=b[A-1+32],U=b[A-1+64],z=b[A-1+96];He(b,A+0,16843009*It(b[A-1-32],R,I)),He(b,A+32,16843009*It(R,I,U)),He(b,A+64,16843009*It(I,U,z)),He(b,A+96,16843009*It(U,z,z))}function Bc(b,A){var R,I=4;for(R=0;4>R;++R)I+=b[A+R-32]+b[A-1+32*R];for(I>>=3,R=0;4>R;++R)s(b,A+32*R,I,4)}function Qs(b,A){var R=b[A-1+0],I=b[A-1+32],U=b[A-1+64],z=b[A-1-32],$=b[A+0-32],J=b[A+1-32],te=b[A+2-32],ae=b[A+3-32];b[A+0+96]=It(I,U,b[A-1+96]),b[A+1+96]=b[A+0+64]=It(R,I,U),b[A+2+96]=b[A+1+64]=b[A+0+32]=It(z,R,I),b[A+3+96]=b[A+2+64]=b[A+1+32]=b[A+0+0]=It($,z,R),b[A+3+64]=b[A+2+32]=b[A+1+0]=It(J,$,z),b[A+3+32]=b[A+2+0]=It(te,J,$),b[A+3+0]=It(ae,te,J)}function es(b,A){var R=b[A+1-32],I=b[A+2-32],U=b[A+3-32],z=b[A+4-32],$=b[A+5-32],J=b[A+6-32],te=b[A+7-32];b[A+0+0]=It(b[A+0-32],R,I),b[A+1+0]=b[A+0+32]=It(R,I,U),b[A+2+0]=b[A+1+32]=b[A+0+64]=It(I,U,z),b[A+3+0]=b[A+2+32]=b[A+1+64]=b[A+0+96]=It(U,z,$),b[A+3+32]=b[A+2+64]=b[A+1+96]=It(z,$,J),b[A+3+64]=b[A+2+96]=It($,J,te),b[A+3+96]=It(J,te,te)}function qu(b,A){var R=b[A-1+0],I=b[A-1+32],U=b[A-1+64],z=b[A-1-32],$=b[A+0-32],J=b[A+1-32],te=b[A+2-32],ae=b[A+3-32];b[A+0+0]=b[A+1+64]=z+$+1>>1,b[A+1+0]=b[A+2+64]=$+J+1>>1,b[A+2+0]=b[A+3+64]=J+te+1>>1,b[A+3+0]=te+ae+1>>1,b[A+0+96]=It(U,I,R),b[A+0+64]=It(I,R,z),b[A+0+32]=b[A+1+96]=It(R,z,$),b[A+1+32]=b[A+2+96]=It(z,$,J),b[A+2+32]=b[A+3+96]=It($,J,te),b[A+3+32]=It(J,te,ae)}function Jo(b,A){var R=b[A+0-32],I=b[A+1-32],U=b[A+2-32],z=b[A+3-32],$=b[A+4-32],J=b[A+5-32],te=b[A+6-32],ae=b[A+7-32];b[A+0+0]=R+I+1>>1,b[A+1+0]=b[A+0+64]=I+U+1>>1,b[A+2+0]=b[A+1+64]=U+z+1>>1,b[A+3+0]=b[A+2+64]=z+$+1>>1,b[A+0+32]=It(R,I,U),b[A+1+32]=b[A+0+96]=It(I,U,z),b[A+2+32]=b[A+1+96]=It(U,z,$),b[A+3+32]=b[A+2+96]=It(z,$,J),b[A+3+64]=It($,J,te),b[A+3+96]=It(J,te,ae)}function er(b,A){var R=b[A-1+0],I=b[A-1+32],U=b[A-1+64],z=b[A-1+96];b[A+0+0]=R+I+1>>1,b[A+2+0]=b[A+0+32]=I+U+1>>1,b[A+2+32]=b[A+0+64]=U+z+1>>1,b[A+1+0]=It(R,I,U),b[A+3+0]=b[A+1+32]=It(I,U,z),b[A+3+32]=b[A+1+64]=It(U,z,z),b[A+3+64]=b[A+2+64]=b[A+0+96]=b[A+1+96]=b[A+2+96]=b[A+3+96]=z}function Xo(b,A){var R=b[A-1+0],I=b[A-1+32],U=b[A-1+64],z=b[A-1+96],$=b[A-1-32],J=b[A+0-32],te=b[A+1-32],ae=b[A+2-32];b[A+0+0]=b[A+2+32]=R+$+1>>1,b[A+0+32]=b[A+2+64]=I+R+1>>1,b[A+0+64]=b[A+2+96]=U+I+1>>1,b[A+0+96]=z+U+1>>1,b[A+3+0]=It(J,te,ae),b[A+2+0]=It($,J,te),b[A+1+0]=b[A+3+32]=It(R,$,J),b[A+1+32]=b[A+3+64]=It(I,R,$),b[A+1+64]=b[A+3+96]=It(U,I,R),b[A+1+96]=It(z,U,I)}function ra(b,A){var R;for(R=0;8>R;++R)n(b,A+32*R,b,A-32,8)}function Fc(b,A){var R;for(R=0;8>R;++R)s(b,A,b[A-1],8),A+=32}function cr(b,A,R){var I;for(I=0;8>I;++I)s(A,R+32*I,b,8)}function Dl(b,A){var R,I=8;for(R=0;8>R;++R)I+=b[A+R-32]+b[A-1+32*R];cr(I>>4,b,A)}function Ol(b,A){var R,I=4;for(R=0;8>R;++R)I+=b[A+R-32];cr(I>>3,b,A)}function $i(b,A){var R,I=4;for(R=0;8>R;++R)I+=b[A-1+32*R];cr(I>>3,b,A)}function aa(b,A){cr(128,b,A)}function dr(b,A,R){var I=b[A-R],U=b[A+0],z=3*(U-I)+Wa[1020+b[A-2*R]-b[A+R]],$=Ju[112+(z+4>>3)];b[A-R]=fs[255+I+Ju[112+(z+3>>3)]],b[A+0]=fs[255+U-$]}function La(b,A,R,I){var U=b[A+0],z=b[A+R];return is[255+b[A-2*R]-b[A-R]]>I||is[255+z-U]>I}function Bl(b,A,R,I){return 4*is[255+b[A-R]-b[A+0]]+is[255+b[A-2*R]-b[A+R]]<=I}function Zo(b,A,R,I,U){var z=b[A-3*R],$=b[A-2*R],J=b[A-R],te=b[A+0],ae=b[A+R],ge=b[A+2*R],Ce=b[A+3*R];return 4*is[255+J-te]+is[255+$-ae]>I?0:is[255+b[A-4*R]-z]<=U&&is[255+z-$]<=U&&is[255+$-J]<=U&&is[255+Ce-ge]<=U&&is[255+ge-ae]<=U&&is[255+ae-te]<=U}function Pa(b,A,R,I){var U=2*I+1;for(I=0;16>I;++I)Bl(b,A+I,R,U)&&dr(b,A+I,R)}function Ia(b,A,R,I){var U=2*I+1;for(I=0;16>I;++I)Bl(b,A+I*R,1,U)&&dr(b,A+I*R,1)}function Qo(b,A,R,I){var U;for(U=3;0<U;--U)Pa(b,A+=4*R,R,I)}function Hu(b,A,R,I){var U;for(U=3;0<U;--U)Ia(b,A+=4,R,I)}function Ma(b,A,R,I,U,z,$,J){for(z=2*z+1;0<U--;){if(Zo(b,A,R,z,$))if(La(b,A,R,J))dr(b,A,R);else{var te=b,ae=A,ge=R,Ce=te[ae-2*ge],re=te[ae-ge],be=te[ae+0],Se=te[ae+ge],De=te[ae+2*ge],Te=27*(je=Wa[1020+3*(be-re)+Wa[1020+Ce-Se]])+63>>7,Me=18*je+63>>7,je=9*je+63>>7;te[ae-3*ge]=fs[255+te[ae-3*ge]+je],te[ae-2*ge]=fs[255+Ce+Me],te[ae-ge]=fs[255+re+Te],te[ae+0]=fs[255+be-Te],te[ae+ge]=fs[255+Se-Me],te[ae+2*ge]=fs[255+De-je]}A+=I}}function Da(b,A,R,I,U,z,$,J){for(z=2*z+1;0<U--;){if(Zo(b,A,R,z,$))if(La(b,A,R,J))dr(b,A,R);else{var te=b,ae=A,ge=R,Ce=te[ae-ge],re=te[ae+0],be=te[ae+ge],Se=Ju[112+(4+(De=3*(re-Ce))>>3)],De=Ju[112+(De+3>>3)],Te=Se+1>>1;te[ae-2*ge]=fs[255+te[ae-2*ge]+Te],te[ae-ge]=fs[255+Ce+De],te[ae+0]=fs[255+re-Se],te[ae+ge]=fs[255+be-Te]}A+=I}}function Uc(b,A,R,I,U,z){Ma(b,A,R,1,16,I,U,z)}function Oa(b,A,R,I,U,z){Ma(b,A,1,R,16,I,U,z)}function jc(b,A,R,I,U,z){var $;for($=3;0<$;--$)Da(b,A+=4*R,R,1,16,I,U,z)}function k(b,A,R,I,U,z){var $;for($=3;0<$;--$)Da(b,A+=4,1,R,16,I,U,z)}function F(b,A,R,I,U,z,$,J){Ma(b,A,U,1,8,z,$,J),Ma(R,I,U,1,8,z,$,J)}function oe(b,A,R,I,U,z,$,J){Ma(b,A,1,U,8,z,$,J),Ma(R,I,1,U,8,z,$,J)}function pe(b,A,R,I,U,z,$,J){Da(b,A+4*U,U,1,8,z,$,J),Da(R,I+4*U,U,1,8,z,$,J)}function xe(b,A,R,I,U,z,$,J){Da(b,A+4,1,U,8,z,$,J),Da(R,I+4,1,U,8,z,$,J)}function Ue(){this.ba=new Gt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new rn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function $e(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ct(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function mt(){this.ua=0,this.Wa=new Ge,this.vb=new Ge,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ye,this.yc=new se}function Ut(){this.xb=this.a=0,this.l=new ka,this.ca=new Gt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new V,this.Pb=0,this.wd=new V,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new mt,this.ab=0,this.gc=a(4,ct),this.Oc=0}function $t(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ka,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function hn(b,A,R,I,U,z,$){for(b=b==null?0:b[A+0],A=0;A<$;++A)U[z+A]=b+R[I+A]&255,b=U[z+A]}function ti(b,A,R,I,U,z,$){var J;if(b==null)hn(null,null,R,I,U,z,$);else for(J=0;J<$;++J)U[z+J]=b[A+J]+R[I+J]&255}function vi(b,A,R,I,U,z,$){if(b==null)hn(null,null,R,I,U,z,$);else{var J,te=b[A+0],ae=te,ge=te;for(J=0;J<$;++J)ae=ge+(te=b[A+J])-ae,ge=R[I+J]+(-256&ae?0>ae?0:255:ae)&255,ae=te,U[z+J]=ge}}function jn(b,A,R,I){var U=A.width,z=A.o;if(e(b!=null&&A!=null),0>R||0>=I||R+I>z)return null;if(!b.Cc){if(b.ga==null){var $;if(b.ga=new $t,($=b.ga==null)||($=A.width*A.o,e(b.Gb.length==0),b.Gb=r($),b.Uc=0,b.Gb==null?$=0:(b.mb=b.Gb,b.nb=b.Uc,b.rc=null,$=1),$=!$),!$){$=b.ga;var J=b.Fa,te=b.P,ae=b.qc,ge=b.mb,Ce=b.nb,re=te+1,be=ae-1,Se=$.l;if(e(J!=null&&ge!=null&&A!=null),Ya[0]=null,Ya[1]=hn,Ya[2]=ti,Ya[3]=vi,$.ca=ge,$.tb=Ce,$.c=A.width,$.i=A.height,e(0<$.c&&0<$.i),1>=ae)A=0;else if($.$a=3&J[te+0],$.Z=J[te+0]>>2&3,$.Lc=J[te+0]>>4&3,te=J[te+0]>>6&3,0>$.$a||1<$.$a||4<=$.Z||1<$.Lc||te)A=0;else if(Se.put=wt,Se.ac=Os,Se.bc=Ca,Se.ma=$,Se.width=A.width,Se.height=A.height,Se.Da=A.Da,Se.v=A.v,Se.va=A.va,Se.j=A.j,Se.o=A.o,$.$a)e:{e($.$a==1),A=$o();t:for(;;){if(A==null){A=0;break e}if(e($!=null),$.mc=A,A.c=$.c,A.i=$.i,A.l=$.l,A.l.ma=$,A.l.width=$.c,A.l.height=$.i,A.a=0,we(A.m,J,re,be),!Pr($.c,$.i,1,A,null)||(A.ab==1&&A.gc[0].hc==3&&Mn(A.s)?($.ic=1,J=A.c*A.i,A.Ta=null,A.Ua=0,A.V=r(J),A.Ba=0,A.V==null?(A.a=1,A=0):A=1):($.ic=0,A=Ir(A,$.c)),!A))break t;A=1;break e}$.mc=null,A=0}else A=be>=$.c*$.i;$=!A}if($)return null;b.ga.Lc!=1?b.Ga=0:I=z-R}e(b.ga!=null),e(R+I<=z);e:{if(A=(J=b.ga).c,z=J.l.o,J.$a==0){if(re=b.rc,be=b.Vc,Se=b.Fa,te=b.P+1+R*A,ae=b.mb,ge=b.nb+R*A,e(te<=b.P+b.qc),J.Z!=0)for(e(Ya[J.Z]!=null),$=0;$<I;++$)Ya[J.Z](re,be,Se,te,ae,ge,A),re=ae,be=ge,ge+=A,te+=A;else for($=0;$<I;++$)n(ae,ge,Se,te,A),re=ae,be=ge,ge+=A,te+=A;b.rc=re,b.Vc=be}else{if(e(J.mc!=null),A=R+I,e(($=J.mc)!=null),e(A<=$.i),$.C>=A)A=1;else if(J.ic||jr(),J.ic){J=$.V,re=$.Ba,be=$.c;var De=$.i,Te=(Se=1,te=$.$/be,ae=$.$%be,ge=$.m,Ce=$.s,$.$),Me=be*De,je=be*A,We=Ce.wc,Ve=Te<je?Gi(Ce,ae,te):null;e(Te<=Me),e(A<=De),e(Mn(Ce));t:for(;;){for(;!ge.h&&Te<je;){if(ae&We||(Ve=Gi(Ce,ae,te)),e(Ve!=null),he(ge),256>(De=Zn(Ve.G[0],Ve.H[0],ge)))J[re+Te]=De,++Te,++ae>=be&&(ae=0,++te<=A&&!(te%16)&&ds($,te));else{if(!(280>De)){Se=0;break t}De=Ys(De-256,ge);var ft,nt=Zn(Ve.G[4],Ve.H[4],ge);if(he(ge),!(Te>=(nt=Ks(be,nt=Ys(nt,ge)))&&Me-Te>=De)){Se=0;break t}for(ft=0;ft<De;++ft)J[re+Te+ft]=J[re+Te+ft-nt];for(Te+=De,ae+=De;ae>=be;)ae-=be,++te<=A&&!(te%16)&&ds($,te);Te<je&&ae&We&&(Ve=Gi(Ce,ae,te))}e(ge.h==le(ge))}ds($,te>A?A:te);break t}!Se||ge.h&&Te<Me?(Se=0,$.a=ge.h?5:3):$.$=Te,A=Se}else A=Js($,$.V,$.Ba,$.c,$.i,A,go);if(!A){I=0;break e}}R+I>=z&&(b.Cc=1),I=1}if(!I)return null;if(b.Cc&&((I=b.ga)!=null&&(I.mc=null),b.ga=null,0<b.Ga))return alert("todo:WebPDequantizeLevels"),null}return b.nb+R*U}function Fi(b,A,R,I,U,z){for(;0<U--;){var $,J=b,te=A+(R?1:0),ae=b,ge=A+(R?0:3);for($=0;$<I;++$){var Ce=ae[ge+4*$];Ce!=255&&(Ce*=32897,J[te+4*$+0]=J[te+4*$+0]*Ce>>23,J[te+4*$+1]=J[te+4*$+1]*Ce>>23,J[te+4*$+2]=J[te+4*$+2]*Ce>>23)}A+=z}}function Ni(b,A,R,I,U){for(;0<I--;){var z;for(z=0;z<R;++z){var $=b[A+2*z+0],J=15&(ae=b[A+2*z+1]),te=4369*J,ae=(240&ae|ae>>4)*te>>16;b[A+2*z+0]=(240&$|$>>4)*te>>16&240|(15&$|$<<4)*te>>16>>4&15,b[A+2*z+1]=240&ae|J}A+=U}}function ts(b,A,R,I,U,z,$,J){var te,ae,ge=255;for(ae=0;ae<U;++ae){for(te=0;te<I;++te){var Ce=b[A+te];z[$+4*te]=Ce,ge&=Ce}A+=R,$+=J}return ge!=255}function Ba(b,A,R,I,U){var z;for(z=0;z<U;++z)R[I+z]=b[A+z]>>8}function jr(){il=Fi,fr=Ni,Wu=ts,ir=Ba}function Fa(b,A,R){j[b]=function(I,U,z,$,J,te,ae,ge,Ce,re,be,Se,De,Te,Me,je,We){var Ve,ft=We-1>>1,nt=J[te+0]|ae[ge+0]<<16,qt=Ce[re+0]|be[Se+0]<<16;e(I!=null);var ot=3*nt+qt+131074>>2;for(A(I[U+0],255&ot,ot>>16,De,Te),z!=null&&(ot=3*qt+nt+131074>>2,A(z[$+0],255&ot,ot>>16,Me,je)),Ve=1;Ve<=ft;++Ve){var an=J[te+Ve]|ae[ge+Ve]<<16,Yn=Ce[re+Ve]|be[Se+Ve]<<16,Wt=nt+an+qt+Yn+524296,it=Wt+2*(an+qt)>>3;ot=it+nt>>1,nt=(Wt=Wt+2*(nt+Yn)>>3)+an>>1,A(I[U+2*Ve-1],255&ot,ot>>16,De,Te+(2*Ve-1)*R),A(I[U+2*Ve-0],255&nt,nt>>16,De,Te+(2*Ve-0)*R),z!=null&&(ot=Wt+qt>>1,nt=it+Yn>>1,A(z[$+2*Ve-1],255&ot,ot>>16,Me,je+(2*Ve-1)*R),A(z[$+2*Ve+0],255&nt,nt>>16,Me,je+(2*Ve+0)*R)),nt=an,qt=Yn}1&We||(ot=3*nt+qt+131074>>2,A(I[U+We-1],255&ot,ot>>16,De,Te+(We-1)*R),z!=null&&(ot=3*qt+nt+131074>>2,A(z[$+We-1],255&ot,ot>>16,Me,je+(We-1)*R)))}}function zu(){rs[Vc]=al,rs[ps]=Yl,rs[Gc]=yh,rs[pr]=Jc,rs[Xu]=So,rs[Gl]=ga,rs[xo]=Eo,rs[Zu]=Yl,rs[$c]=Jc,rs[$l]=So,rs[Wc]=ga}function Fl(b){return b&-16384?0>b?0:255:b>>Xc}function oa(b,A){return Fl((19077*b>>8)+(26149*A>>8)-14234)}function qr(b,A,R){return Fl((19077*b>>8)-(6419*A>>8)-(13320*R>>8)+8708)}function el(b,A){return Fl((19077*b>>8)+(33050*A>>8)-17685)}function Ua(b,A,R,I,U){I[U+0]=oa(b,R),I[U+1]=qr(b,A,R),I[U+2]=el(b,A)}function Wi(b,A,R,I,U){I[U+0]=el(b,A),I[U+1]=qr(b,A,R),I[U+2]=oa(b,R)}function yo(b,A,R,I,U){var z=qr(b,A,R);A=z<<3&224|el(b,A)>>3,I[U+0]=248&oa(b,R)|z>>5,I[U+1]=A}function bo(b,A,R,I,U){var z=240&el(b,A)|15;I[U+0]=240&oa(b,R)|qr(b,A,R)>>4,I[U+1]=z}function Ul(b,A,R,I,U){I[U+0]=255,Ua(b,A,R,I,U+1)}function la(b,A,R,I,U){Wi(b,A,R,I,U),I[U+3]=255}function Ss(b,A,R,I,U){Ua(b,A,R,I,U),I[U+3]=255}function ja(b,A,R){j[b]=function(I,U,z,$,J,te,ae,ge,Ce){for(var re=ge+(-2&Ce)*R;ge!=re;)A(I[U+0],z[$+0],J[te+0],ae,ge),A(I[U+1],z[$+0],J[te+0],ae,ge+R),U+=2,++$,++te,ge+=2*R;1&Ce&&A(I[U+0],z[$+0],J[te+0],ae,ge)}}function jl(b,A,R){return R==0?b==0?A==0?6:5:A==0?4:0:R}function Vu(b,A,R,I,U){switch(b>>>30){case 3:$a(A,R,I,U,0);break;case 2:hs(A,R,I,U);break;case 1:xn(A,R,I,U)}}function tr(b,A){var R,I,U=A.M,z=A.Nb,$=b.oc,J=b.pc+40,te=b.oc,ae=b.pc+584,ge=b.oc,Ce=b.pc+600;for(R=0;16>R;++R)$[J+32*R-1]=129;for(R=0;8>R;++R)te[ae+32*R-1]=129,ge[Ce+32*R-1]=129;for(0<U?$[J-1-32]=te[ae-1-32]=ge[Ce-1-32]=129:(s($,J-32-1,127,21),s(te,ae-32-1,127,9),s(ge,Ce-32-1,127,9)),I=0;I<b.za;++I){var re=A.ya[A.aa+I];if(0<I){for(R=-1;16>R;++R)n($,J+32*R-4,$,J+32*R+12,4);for(R=-1;8>R;++R)n(te,ae+32*R-4,te,ae+32*R+4,4),n(ge,Ce+32*R-4,ge,Ce+32*R+4,4)}var be=b.Gd,Se=b.Hd+I,De=re.ad,Te=re.Hc;if(0<U&&(n($,J-32,be[Se].y,0,16),n(te,ae-32,be[Se].f,0,8),n(ge,Ce-32,be[Se].ea,0,8)),re.Za){var Me=$,je=J-32+16;for(0<U&&(I>=b.za-1?s(Me,je,be[Se].y[15],4):n(Me,je,be[Se+1].y,0,4)),R=0;4>R;R++)Me[je+128+R]=Me[je+256+R]=Me[je+384+R]=Me[je+0+R];for(R=0;16>R;++R,Te<<=2)Me=$,je=J+wi[R],li[re.Ob[R]](Me,je),Vu(Te,De,16*+R,Me,je)}else if(Me=jl(I,U,re.Ob[0]),Ts[Me]($,J),Te!=0)for(R=0;16>R;++R,Te<<=2)Vu(Te,De,16*+R,$,J+wi[R]);for(R=re.Gc,Me=jl(I,U,re.Dd),Gr[Me](te,ae),Gr[Me](ge,Ce),Te=De,Me=te,je=ae,255&(re=0|R)&&(170&re?hr(Te,256,Me,je):fn(Te,256,Me,je)),re=ge,Te=Ce,255&(R>>=8)&&(170&R?hr(De,320,re,Te):fn(De,320,re,Te)),U<b.Ub-1&&(n(be[Se].y,0,$,J+480,16),n(be[Se].f,0,te,ae+224,8),n(be[Se].ea,0,ge,Ce+224,8)),R=8*z*b.B,be=b.sa,Se=b.ta+16*I+16*z*b.R,De=b.qa,re=b.ra+8*I+R,Te=b.Ha,Me=b.Ia+8*I+R,R=0;16>R;++R)n(be,Se+R*b.R,$,J+32*R,16);for(R=0;8>R;++R)n(De,re+R*b.B,te,ae+32*R,8),n(Te,Me+R*b.B,ge,Ce+32*R,8)}}function Hr(b,A,R,I,U,z,$,J,te){var ae=[0],ge=[0],Ce=0,re=te!=null?te.kd:0,be=te??new $e;if(b==null||12>R)return 7;be.data=b,be.w=A,be.ha=R,A=[A],R=[R],be.gb=[be.gb];e:{var Se=A,De=R,Te=be.gb;if(e(b!=null),e(De!=null),e(Te!=null),Te[0]=0,12<=De[0]&&!t(b,Se[0],"RIFF")){if(t(b,Se[0]+8,"WEBP")){Te=3;break e}var Me=st(b,Se[0]+4);if(12>Me||4294967286<Me){Te=3;break e}if(re&&Me>De[0]-8){Te=7;break e}Te[0]=Me,Se[0]+=12,De[0]-=12}Te=0}if(Te!=0)return Te;for(Me=0<be.gb[0],R=R[0];;){e:{var je=b;De=A,Te=R;var We=ae,Ve=ge,ft=Se=[0];if((ot=Ce=[Ce])[0]=0,8>Te[0])Te=7;else{if(!t(je,De[0],"VP8X")){if(st(je,De[0]+4)!=10){Te=3;break e}if(18>Te[0]){Te=7;break e}var nt=st(je,De[0]+8),qt=1+Ze(je,De[0]+12);if(2147483648<=qt*(je=1+Ze(je,De[0]+15))){Te=3;break e}ft!=null&&(ft[0]=nt),We!=null&&(We[0]=qt),Ve!=null&&(Ve[0]=je),De[0]+=18,Te[0]-=18,ot[0]=1}Te=0}}if(Ce=Ce[0],Se=Se[0],Te!=0)return Te;if(De=!!(2&Se),!Me&&Ce)return 3;if(z!=null&&(z[0]=!!(16&Se)),$!=null&&($[0]=De),J!=null&&(J[0]=0),$=ae[0],Se=ge[0],Ce&&De&&te==null){Te=0;break}if(4>R){Te=7;break}if(Me&&Ce||!Me&&!Ce&&!t(b,A[0],"ALPH")){R=[R],be.na=[be.na],be.P=[be.P],be.Sa=[be.Sa];e:{nt=b,Te=A,Me=R;var ot=be.gb;We=be.na,Ve=be.P,ft=be.Sa,qt=22,e(nt!=null),e(Me!=null),je=Te[0];var an=Me[0];for(e(We!=null),e(ft!=null),We[0]=null,Ve[0]=null,ft[0]=0;;){if(Te[0]=je,Me[0]=an,8>an){Te=7;break e}var Yn=st(nt,je+4);if(4294967286<Yn){Te=3;break e}var Wt=8+Yn+1&-2;if(qt+=Wt,0<ot&&qt>ot){Te=3;break e}if(!t(nt,je,"VP8 ")||!t(nt,je,"VP8L")){Te=0;break e}if(an[0]<Wt){Te=7;break e}t(nt,je,"ALPH")||(We[0]=nt,Ve[0]=je+8,ft[0]=Yn),je+=Wt,an-=Wt}}if(R=R[0],be.na=be.na[0],be.P=be.P[0],be.Sa=be.Sa[0],Te!=0)break}R=[R],be.Ja=[be.Ja],be.xa=[be.xa];e:if(ot=b,Te=A,Me=R,We=be.gb[0],Ve=be.Ja,ft=be.xa,nt=Te[0],je=!t(ot,nt,"VP8 "),qt=!t(ot,nt,"VP8L"),e(ot!=null),e(Me!=null),e(Ve!=null),e(ft!=null),8>Me[0])Te=7;else{if(je||qt){if(ot=st(ot,nt+4),12<=We&&ot>We-12){Te=3;break e}if(re&&ot>Me[0]-8){Te=7;break e}Ve[0]=ot,Te[0]+=8,Me[0]-=8,ft[0]=qt}else ft[0]=5<=Me[0]&&ot[nt+0]==47&&!(ot[nt+4]>>5),Ve[0]=Me[0];Te=0}if(R=R[0],be.Ja=be.Ja[0],be.xa=be.xa[0],A=A[0],Te!=0)break;if(4294967286<be.Ja)return 3;if(J==null||De||(J[0]=be.xa?2:1),$=[$],Se=[Se],be.xa){if(5>R){Te=7;break}J=$,re=Se,De=z,b==null||5>R?b=0:5<=R&&b[A+0]==47&&!(b[A+4]>>5)?(Me=[0],ot=[0],We=[0],we(Ve=new V,b,A,R),na(Ve,Me,ot,We)?(J!=null&&(J[0]=Me[0]),re!=null&&(re[0]=ot[0]),De!=null&&(De[0]=We[0]),b=1):b=0):b=0}else{if(10>R){Te=7;break}J=Se,b==null||10>R||!Iu(b,A+3,R-3)?b=0:(re=b[A+0]|b[A+1]<<8|b[A+2]<<16,De=16383&(b[A+7]<<8|b[A+6]),b=16383&(b[A+9]<<8|b[A+8]),1&re||3<(re>>1&7)||!(re>>4&1)||re>>5>=be.Ja||!De||!b?b=0:($&&($[0]=De),J&&(J[0]=b),b=1))}if(!b||($=$[0],Se=Se[0],Ce&&(ae[0]!=$||ge[0]!=Se)))return 3;te!=null&&(te[0]=be,te.offset=A-te.w,e(4294967286>A-te.w),e(te.offset==te.ha-R));break}return Te==0||Te==7&&Ce&&te==null?(z!=null&&(z[0]|=be.na!=null&&0<be.na.length),I!=null&&(I[0]=$),U!=null&&(U[0]=Se),0):Te}function qa(b,A,R){var I=A.width,U=A.height,z=0,$=0,J=I,te=U;if(A.Da=b!=null&&0<b.Da,A.Da&&(J=b.cd,te=b.bd,z=b.v,$=b.j,11>R||(z&=-2,$&=-2),0>z||0>$||0>=J||0>=te||z+J>I||$+te>U))return 0;if(A.v=z,A.j=$,A.va=z+J,A.o=$+te,A.U=J,A.T=te,A.da=b!=null&&0<b.da,A.da){if(!Be(J,te,R=[b.ib],z=[b.hb]))return 0;A.ib=R[0],A.hb=z[0]}return A.ob=b!=null&&b.ob,A.Kb=b==null||!b.Sd,A.da&&(A.ob=A.ib<3*I/4&&A.hb<3*U/4,A.Kb=0),1}function Gu(b){if(b==null)return 2;if(11>b.S){var A=b.f.RGBA;A.fb+=(b.height-1)*A.A,A.A=-A.A}else A=b.f.kb,b=b.height,A.O+=(b-1)*A.fa,A.fa=-A.fa,A.N+=(b-1>>1)*A.Ab,A.Ab=-A.Ab,A.W+=(b-1>>1)*A.Db,A.Db=-A.Db,A.F!=null&&(A.J+=(b-1)*A.lb,A.lb=-A.lb);return 0}function zr(b,A,R,I){if(I==null||0>=b||0>=A)return 2;if(R!=null){if(R.Da){var U=R.cd,z=R.bd,$=-2&R.v,J=-2&R.j;if(0>$||0>J||0>=U||0>=z||$+U>b||J+z>A)return 2;b=U,A=z}if(R.da){if(!Be(b,A,U=[R.ib],z=[R.hb]))return 2;b=U[0],A=z[0]}}I.width=b,I.height=A;e:{var te=I.width,ae=I.height;if(b=I.S,0>=te||0>=ae||!(b>=Vc&&13>b))b=2;else{if(0>=I.Rd&&I.sd==null){$=z=U=A=0;var ge=(J=te*Qc[b])*ae;if(11>b||(z=(ae+1)/2*(A=(te+1)/2),b==12&&($=(U=te)*ae)),(ae=r(ge+2*z+$))==null){b=1;break e}I.sd=ae,11>b?((te=I.f.RGBA).eb=ae,te.fb=0,te.A=J,te.size=ge):((te=I.f.kb).y=ae,te.O=0,te.fa=J,te.Fd=ge,te.f=ae,te.N=0+ge,te.Ab=A,te.Cd=z,te.ea=ae,te.W=0+ge+z,te.Db=A,te.Ed=z,b==12&&(te.F=ae,te.J=0+ge+2*z),te.Tc=$,te.lb=U)}if(A=1,U=I.S,z=I.width,$=I.height,U>=Vc&&13>U)if(11>U)b=I.f.RGBA,A&=(J=Math.abs(b.A))*($-1)+z<=b.size,A&=J>=z*Qc[U],A&=b.eb!=null;else{b=I.f.kb,J=(z+1)/2,ge=($+1)/2,te=Math.abs(b.fa),ae=Math.abs(b.Ab);var Ce=Math.abs(b.Db),re=Math.abs(b.lb),be=re*($-1)+z;A&=te*($-1)+z<=b.Fd,A&=ae*(ge-1)+J<=b.Cd,A=(A&=Ce*(ge-1)+J<=b.Ed)&te>=z&ae>=J&Ce>=J,A&=b.y!=null,A&=b.f!=null,A&=b.ea!=null,U==12&&(A&=re>=z,A&=be<=b.Tc,A&=b.F!=null)}else A=0;b=A?0:2}}return b!=0||R!=null&&R.fd&&(b=Gu(I)),b}var wo=64,Fs=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Es=24,ua=32,ca=8,Ha=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ke("Predictor0","PredictorAdd0"),j.Predictor0=function(){return 4278190080},j.Predictor1=function(b){return b},j.Predictor2=function(b,A,R){return A[R+0]},j.Predictor3=function(b,A,R){return A[R+1]},j.Predictor4=function(b,A,R){return A[R-1]},j.Predictor5=function(b,A,R){return rt(rt(b,A[R+1]),A[R+0])},j.Predictor6=function(b,A,R){return rt(b,A[R-1])},j.Predictor7=function(b,A,R){return rt(b,A[R+0])},j.Predictor8=function(b,A,R){return rt(A[R-1],A[R+0])},j.Predictor9=function(b,A,R){return rt(A[R+0],A[R+1])},j.Predictor10=function(b,A,R){return rt(rt(b,A[R-1]),rt(A[R+0],A[R+1]))},j.Predictor11=function(b,A,R){var I=A[R+0];return 0>=At(I>>24&255,b>>24&255,(A=A[R-1])>>24&255)+At(I>>16&255,b>>16&255,A>>16&255)+At(I>>8&255,b>>8&255,A>>8&255)+At(255&I,255&b,255&A)?I:b},j.Predictor12=function(b,A,R){var I=A[R+0];return(Tt((b>>24&255)+(I>>24&255)-((A=A[R-1])>>24&255))<<24|Tt((b>>16&255)+(I>>16&255)-(A>>16&255))<<16|Tt((b>>8&255)+(I>>8&255)-(A>>8&255))<<8|Tt((255&b)+(255&I)-(255&A)))>>>0},j.Predictor13=function(b,A,R){var I=A[R-1];return(zt((b=rt(b,A[R+0]))>>24&255,I>>24&255)<<24|zt(b>>16&255,I>>16&255)<<16|zt(b>>8&255,I>>8&255)<<8|zt(255&b,255&I))>>>0};var ql=j.PredictorAdd0;j.PredictorAdd1=tn,Ke("Predictor2","PredictorAdd2"),Ke("Predictor3","PredictorAdd3"),Ke("Predictor4","PredictorAdd4"),Ke("Predictor5","PredictorAdd5"),Ke("Predictor6","PredictorAdd6"),Ke("Predictor7","PredictorAdd7"),Ke("Predictor8","PredictorAdd8"),Ke("Predictor9","PredictorAdd9"),Ke("Predictor10","PredictorAdd10"),Ke("Predictor11","PredictorAdd11"),Ke("Predictor12","PredictorAdd12"),Ke("Predictor13","PredictorAdd13");var Hl=j.PredictorAdd2;tt("ColorIndexInverseTransform","MapARGB","32b",function(b){return b>>8&255},function(b){return b}),tt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(b){return b},function(b){return b>>8&255});var yi,qc=j.ColorIndexInverseTransform,da=j.MapARGB,ha=j.VP8LColorIndexInverseTransformAlpha,ns=j.MapAlpha,za=j.VP8LPredictorsAdd=[];za.length=16,(j.VP8LPredictors=[]).length=16,(j.VP8LPredictorsAdd_C=[]).length=16,(j.VP8LPredictors_C=[]).length=16;var zl,Vl,Va,Ga,fa,tl,nr,$a,hs,hr,xn,fn,qn,bi,pa,Vr,nl,$u,fh,Wf,Yf,Kf,ph,gh,il,fr,Wu,ir,sl=r(511),Hc=r(2041),Yu=r(225),Ku=r(767),zc=0,Wa=Hc,Ju=Yu,fs=Ku,is=sl,Vc=0,ps=1,Gc=2,pr=3,Xu=4,Gl=5,xo=6,Zu=7,$c=8,$l=9,Wc=10,gr=[2,3,7],Wl=[3,3,11],rl=[280,256,256,256,40],Yc=[0,1,1,1,0],Qu=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],mr=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],vr=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],_o=8,yr=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],br=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],sr=null,Jf=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],mh=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Kc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Xf=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ss=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Wn=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],on=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ts=[],li=[],Gr=[],Ao=1,vh=2,Ya=[],rs=[];Fa("UpsampleRgbLinePair",Ua,3),Fa("UpsampleBgrLinePair",Wi,3),Fa("UpsampleRgbaLinePair",Ss,4),Fa("UpsampleBgraLinePair",la,4),Fa("UpsampleArgbLinePair",Ul,4),Fa("UpsampleRgba4444LinePair",bo,2),Fa("UpsampleRgb565LinePair",yo,2);var al=j.UpsampleRgbLinePair,yh=j.UpsampleBgrLinePair,Yl=j.UpsampleRgbaLinePair,Jc=j.UpsampleBgraLinePair,So=j.UpsampleArgbLinePair,ga=j.UpsampleRgba4444LinePair,Eo=j.UpsampleRgb565LinePair,wr=16,Kl=1<<wr-1,ol=-227,To=482,Xc=6,Co=0,as=r(256),Zc=r(256),Zf=r(256),vg=r(256),yg=r(To-ol),bg=r(To-ol);ja("YuvToRgbRow",Ua,3),ja("YuvToBgrRow",Wi,3),ja("YuvToRgbaRow",Ss,4),ja("YuvToBgraRow",la,4),ja("YuvToArgbRow",Ul,4),ja("YuvToRgba4444Row",bo,2),ja("YuvToRgb565Row",yo,2);var wi=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Jl=[0,2,8],ec=[8,7,6,4,4,2,2,2,1,1,1,1],tc=1;this.WebPDecodeRGBA=function(b,A,R,I,U){var z=ps,$=new Ue,J=new Gt;$.ba=J,J.S=z,J.width=[J.width],J.height=[J.height];var te=J.width,ae=J.height,ge=new gt;if(ge==null||b==null)var Ce=2;else e(ge!=null),Ce=Hr(b,A,R,ge.width,ge.height,ge.Pd,ge.Qd,ge.format,null);if(Ce!=0?te=0:(te!=null&&(te[0]=ge.width[0]),ae!=null&&(ae[0]=ge.height[0]),te=1),te){J.width=J.width[0],J.height=J.height[0],I!=null&&(I[0]=J.width),U!=null&&(U[0]=J.height);e:{if(I=new ka,(U=new $e).data=b,U.w=A,U.ha=R,U.kd=1,A=[0],e(U!=null),((b=Hr(U.data,U.w,U.ha,null,null,null,A,null,U))==0||b==7)&&A[0]&&(b=4),(A=b)==0){if(e($!=null),I.data=U.data,I.w=U.w+U.offset,I.ha=U.ha-U.offset,I.put=wt,I.ac=Os,I.bc=Ca,I.ma=$,U.xa){if((b=$o())==null){$=1;break e}if((function(re,be){var Se=[0],De=[0],Te=[0];t:for(;;){if(re==null)return 0;if(be==null)return re.a=2,0;if(re.l=be,re.a=0,we(re.m,be.data,be.w,be.ha),!na(re.m,Se,De,Te)){re.a=3;break t}if(re.xb=vh,be.width=Se[0],be.height=De[0],!Pr(Se[0],De[0],1,re,null))break t;return 1}return e(re.a!=0),0})(b,I)){if(I=(A=zr(I.width,I.height,$.Oa,$.ba))==0){t:{I=b;n:for(;;){if(I==null){I=0;break t}if(e(I.s.yc!=null),e(I.s.Ya!=null),e(0<I.s.Wb),e((R=I.l)!=null),e((U=R.ma)!=null),I.xb!=0){if(I.ca=U.ba,I.tb=U.tb,e(I.ca!=null),!qa(U.Oa,R,pr)){I.a=2;break n}if(!Ir(I,R.width)||R.da)break n;if((R.da||Lt(I.ca.S))&&jr(),11>I.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),I.ca.f.kb.F!=null&&jr()),I.Pb&&0<I.s.ua&&I.s.vb.X==null&&!ne(I.s.vb,I.s.Wa.Xa)){I.a=1;break n}I.xb=0}if(!Js(I,I.V,I.Ba,I.c,I.i,R.o,xs))break n;U.Dc=I.Ma,I=1;break t}e(I.a!=0),I=0}I=!I}I&&(A=b.a)}else A=b.a}else{if((b=new Br)==null){$=1;break e}if(b.Fa=U.na,b.P=U.P,b.qc=U.Sa,sa(b,I)){if((A=zr(I.width,I.height,$.Oa,$.ba))==0){if(b.Aa=0,R=$.Oa,e((U=b)!=null),R!=null){if(0<(te=0>(te=R.Md)?0:100<te?255:255*te/100)){for(ae=ge=0;4>ae;++ae)12>(Ce=U.pb[ae]).lc&&(Ce.ia=te*ec[0>Ce.lc?0:Ce.lc]>>3),ge|=Ce.ia;ge&&(alert("todo:VP8InitRandom"),U.ia=1)}U.Ga=R.Id,100<U.Ga?U.Ga=100:0>U.Ga&&(U.Ga=0)}(function(re,be){if(re==null)return 0;if(be==null)return wn(re,2,"NULL VP8Io parameter in VP8Decode().");if(!re.cb&&!sa(re,be))return 0;if(e(re.cb),be.ac==null||be.ac(be)){be.ob&&(re.L=0);var Se=Jl[re.L];if(re.L==2?(re.yb=0,re.zb=0):(re.yb=be.v-Se>>4,re.zb=be.j-Se>>4,0>re.yb&&(re.yb=0),0>re.zb&&(re.zb=0)),re.Va=be.o+15+Se>>4,re.Hb=be.va+15+Se>>4,re.Hb>re.za&&(re.Hb=re.za),re.Va>re.Ub&&(re.Va=re.Ub),0<re.L){var De=re.ed;for(Se=0;4>Se;++Se){var Te;if(re.Qa.Cb){var Me=re.Qa.Lb[Se];re.Qa.Fb||(Me+=De.Tb)}else Me=De.Tb;for(Te=0;1>=Te;++Te){var je=re.gd[Se][Te],We=Me;if(De.Pc&&(We+=De.vd[0],Te&&(We+=De.od[0])),0<(We=0>We?0:63<We?63:We)){var Ve=We;0<De.wb&&(Ve=4<De.wb?Ve>>2:Ve>>1)>9-De.wb&&(Ve=9-De.wb),1>Ve&&(Ve=1),je.dd=Ve,je.tc=2*We+Ve,je.ld=40<=We?2:15<=We?1:0}else je.tc=0;je.La=Te}}}Se=0}else wn(re,6,"Frame setup failed"),Se=re.a;if(Se=Se==0){if(Se){re.$c=0,0<re.Aa||(re.Ic=tc);t:{Se=re.Ic,De=4*(Ve=re.za);var ft=32*Ve,nt=Ve+1,qt=0<re.L?Ve*(0<re.Aa?2:1):0,ot=(re.Aa==2?2:1)*Ve;if((je=De+832+(Te=3*(16*Se+Jl[re.L])/2*ft)+(Me=re.Fa!=null&&0<re.Fa.length?re.Kc.c*re.Kc.i:0))!=je)Se=0;else{if(je>re.Vb){if(re.Vb=0,re.Ec=r(je),re.Fc=0,re.Ec==null){Se=wn(re,1,"no memory during frame initialization.");break t}re.Vb=je}je=re.Ec,We=re.Fc,re.Ac=je,re.Bc=We,We+=De,re.Gd=a(ft,Pu),re.Hd=0,re.rb=a(nt+1,Or),re.sb=1,re.wa=qt?a(qt,Xs):null,re.Y=0,re.D.Nb=0,re.D.wa=re.wa,re.D.Y=re.Y,0<re.Aa&&(re.D.Y+=Ve),e(!0),re.oc=je,re.pc=We,We+=832,re.ya=a(ot,Ru),re.aa=0,re.D.ya=re.ya,re.D.aa=re.aa,re.Aa==2&&(re.D.aa+=Ve),re.R=16*Ve,re.B=8*Ve,Ve=(ft=Jl[re.L])*re.R,ft=ft/2*re.B,re.sa=je,re.ta=We+Ve,re.qa=re.sa,re.ra=re.ta+16*Se*re.R+ft,re.Ha=re.qa,re.Ia=re.ra+8*Se*re.B+ft,re.$c=0,We+=Te,re.mb=Me?je:null,re.nb=Me?We:null,e(We+Me<=re.Fc+re.Vb),Mu(re),s(re.Ac,re.Bc,0,De),Se=1}}if(Se){if(be.ka=0,be.y=re.sa,be.O=re.ta,be.f=re.qa,be.N=re.ra,be.ea=re.Ha,be.Vd=re.Ia,be.fa=re.R,be.Rc=re.B,be.F=null,be.J=0,!zc){for(Se=-255;255>=Se;++Se)sl[255+Se]=0>Se?-Se:Se;for(Se=-1020;1020>=Se;++Se)Hc[1020+Se]=-128>Se?-128:127<Se?127:Se;for(Se=-112;112>=Se;++Se)Yu[112+Se]=-16>Se?-16:15<Se?15:Se;for(Se=-255;510>=Se;++Se)Ku[255+Se]=0>Se?0:255<Se?255:Se;zc=1}nr=Fr,$a=Du,hr=As,xn=Ou,fn=Bu,hs=Pc,qn=Uc,bi=Oa,pa=F,Vr=oe,nl=jc,$u=k,fh=pe,Wf=xe,Yf=Pa,Kf=Ia,ph=Qo,gh=Hu,li[0]=Bc,li[1]=Ic,li[2]=Oc,li[3]=ju,li[4]=Qs,li[5]=qu,li[6]=es,li[7]=Jo,li[8]=Xo,li[9]=er,Ts[0]=Ur,Ts[1]=Fu,Ts[2]=Uu,Ts[3]=Dc,Ts[4]=Ra,Ts[5]=Ko,Ts[6]=vo,Gr[0]=Dl,Gr[1]=Mc,Gr[2]=ra,Gr[3]=Fc,Gr[4]=$i,Gr[5]=Ol,Gr[6]=aa,Se=1}else Se=0}Se&&(Se=(function(an,Yn){for(an.M=0;an.M<an.Va;++an.M){var Wt,it=an.Jc[an.M&an.Xb],Xe=an.m,ni=an;for(Wt=0;Wt<ni.za;++Wt){var Mt=Xe,Xt=ni,Cn=Xt.Ac,Ui=Xt.Bc+4*Wt,os=Xt.zc,Hn=Xt.ya[Xt.aa+Wt];if(Xt.Qa.Bb?Hn.$b=Ie(Mt,Xt.Pa.jb[0])?2+Ie(Mt,Xt.Pa.jb[2]):Ie(Mt,Xt.Pa.jb[1]):Hn.$b=0,Xt.kc&&(Hn.Ad=Ie(Mt,Xt.Bd)),Hn.Za=!Ie(Mt,145)+0,Hn.Za){var ki=Hn.Ob,gs=0;for(Xt=0;4>Xt;++Xt){var Ri,sn=os[0+Xt];for(Ri=0;4>Ri;++Ri){sn=ss[Cn[Ui+Ri]][sn];for(var vn=Kc[Ie(Mt,sn[0])];0<vn;)vn=Kc[2*vn+Ie(Mt,sn[vn])];sn=-vn,Cn[Ui+Ri]=sn}n(ki,gs,Cn,Ui,4),gs+=4,os[0+Xt]=sn}}else sn=Ie(Mt,156)?Ie(Mt,128)?1:3:Ie(Mt,163)?2:0,Hn.Ob[0]=sn,s(Cn,Ui,sn,4),s(os,0,sn,4);Hn.Dd=Ie(Mt,142)?Ie(Mt,114)?Ie(Mt,183)?1:3:2:0}if(ni.m.Ka)return wn(an,7,"Premature end-of-partition0 encountered.");for(;an.ja<an.za;++an.ja){if(ni=it,Mt=(Xe=an).rb[Xe.sb-1],Cn=Xe.rb[Xe.sb+Xe.ja],Wt=Xe.ya[Xe.aa+Xe.ja],Ui=Xe.kc?Wt.Ad:0)Mt.la=Cn.la=0,Wt.Za||(Mt.Na=Cn.Na=0),Wt.Hc=0,Wt.Gc=0,Wt.ia=0;else{var ii,_n;if(Mt=Cn,Cn=ni,Ui=Xe.Pa.Xc,os=Xe.ya[Xe.aa+Xe.ja],Hn=Xe.pb[os.$b],Xt=os.ad,ki=0,gs=Xe.rb[Xe.sb-1],sn=Ri=0,s(Xt,ki,0,384),os.Za)var ji=0,si=Ui[3];else{vn=r(16);var yn=Mt.Na+gs.Na;if(yn=sr(Cn,Ui[1],yn,Hn.Eb,0,vn,0),Mt.Na=gs.Na=(0<yn)+0,1<yn)nr(vn,0,Xt,ki);else{var xi=vn[0]+3>>3;for(vn=0;256>vn;vn+=16)Xt[ki+vn]=xi}ji=1,si=Ui[0]}var Nn=15&Mt.la,Li=15&gs.la;for(vn=0;4>vn;++vn){var Pi=1&Li;for(xi=_n=0;4>xi;++xi)Nn=Nn>>1|(Pi=(yn=sr(Cn,si,yn=Pi+(1&Nn),Hn.Sc,ji,Xt,ki))>ji)<<7,_n=_n<<2|(3<yn?3:1<yn?2:Xt[ki+0]!=0),ki+=16;Nn>>=4,Li=Li>>1|Pi<<7,Ri=(Ri<<8|_n)>>>0}for(si=Nn,ji=Li>>4,ii=0;4>ii;ii+=2){for(_n=0,Nn=Mt.la>>4+ii,Li=gs.la>>4+ii,vn=0;2>vn;++vn){for(Pi=1&Li,xi=0;2>xi;++xi)yn=Pi+(1&Nn),Nn=Nn>>1|(Pi=0<(yn=sr(Cn,Ui[2],yn,Hn.Qc,0,Xt,ki)))<<3,_n=_n<<2|(3<yn?3:1<yn?2:Xt[ki+0]!=0),ki+=16;Nn>>=2,Li=Li>>1|Pi<<5}sn|=_n<<4*ii,si|=Nn<<4<<ii,ji|=(240&Li)<<ii}Mt.la=si,gs.la=ji,os.Hc=Ri,os.Gc=sn,os.ia=43690&sn?0:Hn.ia,Ui=!(Ri|sn)}if(0<Xe.L&&(Xe.wa[Xe.Y+Xe.ja]=Xe.gd[Wt.$b][Wt.Za],Xe.wa[Xe.Y+Xe.ja].La|=!Ui),ni.Ka)return wn(an,7,"Premature end-of-file encountered.")}if(Mu(an),Xe=Yn,ni=1,Wt=(it=an).D,Mt=0<it.L&&it.M>=it.zb&&it.M<=it.Va,it.Aa==0)t:{if(Wt.M=it.M,Wt.uc=Mt,tr(it,Wt),ni=1,Wt=(_n=it.D).Nb,Mt=(sn=Jl[it.L])*it.R,Cn=sn/2*it.B,vn=16*Wt*it.R,xi=8*Wt*it.B,Ui=it.sa,os=it.ta-Mt+vn,Hn=it.qa,Xt=it.ra-Cn+xi,ki=it.Ha,gs=it.Ia-Cn+xi,Li=(Nn=_n.M)==0,Ri=Nn>=it.Va-1,it.Aa==2&&tr(it,_n),_n.uc)for(Pi=(yn=it).D.M,e(yn.D.uc),_n=yn.yb;_n<yn.Hb;++_n){ji=_n,si=Pi;var Dn=(pn=(Ii=yn).D).Nb;ii=Ii.R;var pn=pn.wa[pn.Y+ji],ms=Ii.sa,ui=Ii.ta+16*Dn*ii+16*ji,Et=pn.dd,Nt=pn.tc;if(Nt!=0)if(e(3<=Nt),Ii.L==1)0<ji&&Kf(ms,ui,ii,Nt+4),pn.La&&gh(ms,ui,ii,Nt),0<si&&Yf(ms,ui,ii,Nt+4),pn.La&&ph(ms,ui,ii,Nt);else{var bn=Ii.B,Us=Ii.qa,xr=Ii.ra+8*Dn*bn+8*ji,Cs=Ii.Ha,Ii=Ii.Ia+8*Dn*bn+8*ji;Dn=pn.ld,0<ji&&(bi(ms,ui,ii,Nt+4,Et,Dn),Vr(Us,xr,Cs,Ii,bn,Nt+4,Et,Dn)),pn.La&&($u(ms,ui,ii,Nt,Et,Dn),Wf(Us,xr,Cs,Ii,bn,Nt,Et,Dn)),0<si&&(qn(ms,ui,ii,Nt+4,Et,Dn),pa(Us,xr,Cs,Ii,bn,Nt+4,Et,Dn)),pn.La&&(nl(ms,ui,ii,Nt,Et,Dn),fh(Us,xr,Cs,Ii,bn,Nt,Et,Dn))}}if(it.ia&&alert("todo:DitherRow"),Xe.put!=null){if(_n=16*Nn,Nn=16*(Nn+1),Li?(Xe.y=it.sa,Xe.O=it.ta+vn,Xe.f=it.qa,Xe.N=it.ra+xi,Xe.ea=it.Ha,Xe.W=it.Ia+xi):(_n-=sn,Xe.y=Ui,Xe.O=os,Xe.f=Hn,Xe.N=Xt,Xe.ea=ki,Xe.W=gs),Ri||(Nn-=sn),Nn>Xe.o&&(Nn=Xe.o),Xe.F=null,Xe.J=null,it.Fa!=null&&0<it.Fa.length&&_n<Nn&&(Xe.J=jn(it,Xe,_n,Nn-_n),Xe.F=it.mb,Xe.F==null&&Xe.F.length==0)){ni=wn(it,3,"Could not decode alpha data.");break t}_n<Xe.j&&(sn=Xe.j-_n,_n=Xe.j,e(!(1&sn)),Xe.O+=it.R*sn,Xe.N+=it.B*(sn>>1),Xe.W+=it.B*(sn>>1),Xe.F!=null&&(Xe.J+=Xe.width*sn)),_n<Nn&&(Xe.O+=Xe.v,Xe.N+=Xe.v>>1,Xe.W+=Xe.v>>1,Xe.F!=null&&(Xe.J+=Xe.v),Xe.ka=_n-Xe.j,Xe.U=Xe.va-Xe.v,Xe.T=Nn-_n,ni=Xe.put(Xe))}Wt+1!=it.Ic||Ri||(n(it.sa,it.ta-Mt,Ui,os+16*it.R,Mt),n(it.qa,it.ra-Cn,Hn,Xt+8*it.B,Cn),n(it.Ha,it.Ia-Cn,ki,gs+8*it.B,Cn))}if(!ni)return wn(an,6,"Output aborted.")}return 1})(re,be)),be.bc!=null&&be.bc(be),Se&=1}return Se?(re.cb=0,Se):0})(b,I)||(A=b.a)}}else A=b.a}A==0&&$.Oa!=null&&$.Oa.fd&&(A=Gu($.ba))}$=A}z=$!=0?null:11>z?J.f.RGBA.eb:J.f.kb.y}else z=null;return z};var Qc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(j,ee){for(var B="",H=0;H<4;H++)B+=String.fromCharCode(j[ee++]);return B}function h(j,ee){return j[ee+0]|j[ee+1]<<8}function p(j,ee){return(j[ee+0]|j[ee+1]<<8|j[ee+2]<<16)>>>0}function v(j,ee){return(j[ee+0]|j[ee+1]<<8|j[ee+2]<<16|j[ee+3]<<24)>>>0}new c;var m=[0],E=[0],S=[],N=new c,C=i,P=(function(j,ee){var B={},H=0,se=!1,ie=0,ye=0;if(B.frames=[],!(function(M,V){for(var Z=0;Z<4;Z++)if(M[V+Z]!="RIFF".charCodeAt(Z))return!0;return!1})(j,ee)){for(v(j,ee+=4),ee+=8;ee<j.length;){var X=d(j,ee),ue=v(j,ee+=4);ee+=4;var de=ue+(1&ue);switch(X){case"VP8 ":case"VP8L":B.frames[H]===void 0&&(B.frames[H]={}),(Q=B.frames[H]).src_off=se?ye:ee-8,Q.src_size=ie+ue+8,H++,se&&(se=!1,ie=0,ye=0);break;case"VP8X":(Q=B.header={}).feature_flags=j[ee];var we=ee+4;Q.canvas_width=1+p(j,we),we+=3,Q.canvas_height=1+p(j,we),we+=3;break;case"ALPH":se=!0,ie=de+8,ye=ee-8;break;case"ANIM":(Q=B.header).bgcolor=v(j,ee),we=ee+4,Q.loop_count=h(j,we),we+=2;break;case"ANMF":var Oe,Q;(Q=B.frames[H]={}).offset_x=2*p(j,ee),ee+=3,Q.offset_y=2*p(j,ee),ee+=3,Q.width=1+p(j,ee),ee+=3,Q.height=1+p(j,ee),ee+=3,Q.duration=p(j,ee),ee+=3,Oe=j[ee++],Q.dispose=1&Oe,Q.blend=Oe>>1&1}X!="ANMF"&&(ee+=de)}return B}})(C,0);P.response=C,P.rgbaoutput=!0,P.dataurl=!1;var L=P.header?P.header:null,O=P.frames?P.frames:null;if(L){L.loop_counter=L.loop_count,m=[L.canvas_height],E=[L.canvas_width];for(var q=0;q<O.length&&O[q].blend!=0;q++);}var G=O[0],W=N.WebPDecodeRGBA(C,G.src_off,G.src_size,E,m);G.rgba=W,G.imgwidth=E[0],G.imgheight=m[0];for(var K=0;K<E[0]*m[0]*4;K++)S[K]=W[K];return this.width=E,this.height=m,this.data=S,this}(function(i){var e,t,n,s,r,a,l,c,d,h=function(M){return M=M||{},this.isStrokeTransparent=M.isStrokeTransparent||!1,this.strokeOpacity=M.strokeOpacity||1,this.strokeStyle=M.strokeStyle||"#000000",this.fillStyle=M.fillStyle||"#000000",this.isFillTransparent=M.isFillTransparent||!1,this.fillOpacity=M.fillOpacity||1,this.font=M.font||"10px sans-serif",this.textBaseline=M.textBaseline||"alphabetic",this.textAlign=M.textAlign||"left",this.lineWidth=M.lineWidth||1,this.lineJoin=M.lineJoin||"miter",this.lineCap=M.lineCap||"butt",this.path=M.path||[],this.transform=M.transform!==void 0?M.transform.clone():new c,this.globalCompositeOperation=M.globalCompositeOperation||"normal",this.globalAlpha=M.globalAlpha||1,this.clip_path=M.clip_path||[],this.currentPoint=M.currentPoint||new a,this.miterLimit=M.miterLimit||10,this.lastPoint=M.lastPoint||new a,this.lineDashOffset=M.lineDashOffset||0,this.lineDash=M.lineDash||[],this.margin=M.margin||[0,0,0,0],this.prevPageLastElemOffset=M.prevPageLastElemOffset||0,this.ignoreClearRect=typeof M.ignoreClearRect!="boolean"||M.ignoreClearRect,this};i.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,t=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,r=this.internal.getVerticalCoordinate,a=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new h}]);var p=function(M){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var V=M;Object.defineProperty(this,"pdf",{get:function(){return V}});var Z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Z},set:function(ne){Z=!!ne}});var le=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return le},set:function(ne){le=!!ne}});var ce=0;Object.defineProperty(this,"posX",{get:function(){return ce},set:function(ne){isNaN(ne)||(ce=ne)}});var he=0;Object.defineProperty(this,"posY",{get:function(){return he},set:function(ne){isNaN(ne)||(he=ne)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(ne){var Je;typeof ne=="number"?Je=[ne,ne,ne,ne]:((Je=new Array(4))[0]=ne[0],Je[1]=ne.length>=2?ne[1]:Je[0],Je[2]=ne.length>=3?ne[2]:Je[0],Je[3]=ne.length>=4?ne[3]:Je[1]),d.margin=Je}});var Ae=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ae},set:function(ne){Ae=ne}});var Ee=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ee},set:function(ne){Ee=ne}});var Ie=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ie},set:function(ne){Ie=ne}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(ne){ne instanceof h&&(d=ne)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(ne){d.path=ne}});var He=[];Object.defineProperty(this,"ctxStack",{get:function(){return He},set:function(ne){He=ne}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ne){var Je;Je=v(ne),this.ctx.fillStyle=Je.style,this.ctx.isFillTransparent=Je.a===0,this.ctx.fillOpacity=Je.a,this.pdf.setFillColor(Je.r,Je.g,Je.b,{a:Je.a}),this.pdf.setTextColor(Je.r,Je.g,Je.b,{a:Je.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ne){var Je=v(ne);this.ctx.strokeStyle=Je.style,this.ctx.isStrokeTransparent=Je.a===0,this.ctx.strokeOpacity=Je.a,Je.a===0?this.pdf.setDrawColor(255,255,255):(Je.a,this.pdf.setDrawColor(Je.r,Je.g,Je.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ne){["butt","round","square"].indexOf(ne)!==-1&&(this.ctx.lineCap=ne,this.pdf.setLineCap(ne))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ne){isNaN(ne)||(this.ctx.lineWidth=ne,this.pdf.setLineWidth(ne))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ne){["bevel","round","miter"].indexOf(ne)!==-1&&(this.ctx.lineJoin=ne,this.pdf.setLineJoin(ne))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ne){isNaN(ne)||(this.ctx.miterLimit=ne,this.pdf.setMiterLimit(ne))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ne){this.ctx.textBaseline=ne}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ne){["right","end","center","left","start"].indexOf(ne)!==-1&&(this.ctx.textAlign=ne)}});var Ye=null,Ze=null,st=null;Object.defineProperty(this,"fontFaces",{get:function(){return st},set:function(ne){Ye=null,Ze=null,st=ne}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ne){var Je;if(this.ctx.font=ne,(Je=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(ne))!==null){var Ge=Je[1];Je[2];var Be=Je[3],Le=Je[4];Je[5];var at=Je[6],Ke=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Le)[2];Le=Math.floor(Ke==="px"?parseFloat(Le)*this.pdf.internal.scaleFactor:Ke==="em"?parseFloat(Le)*this.pdf.getFontSize():parseFloat(Le)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Le);var Qe=(function(tt){var Pn,bt,Ct=[],Ft=tt.trim();if(Ft==="")return _1;if(Ft in R_)return[R_[Ft]];for(;Ft!=="";){switch(bt=null,Pn=(Ft=P_(Ft)).charAt(0)){case'"':case"'":bt=KB(Ft.substring(1),Pn);break;default:bt=JB(Ft)}if(bt===null||(Ct.push(bt[0]),(Ft=P_(bt[1]))!==""&&Ft.charAt(0)!==","))return _1;Ft=Ft.replace(/^,/,"")}return Ct})(at);if(this.fontFaces){var rt=(function(tt,Pn){var bt=tt.getFontList(),Ct=JSON.stringify(bt);if(Ye===null||Ze!==Ct){var Ft=(function(nn){var St=[];return Object.keys(nn).forEach(function(In){nn[In].forEach(function(Lt){var Ot=null;switch(Lt){case"bold":Ot={family:In,weight:"bold"};break;case"italic":Ot={family:In,style:"italic"};break;case"bolditalic":Ot={family:In,weight:"bold",style:"italic"};break;case"":case"normal":Ot={family:In}}Ot!==null&&(Ot.ref={name:In,style:Lt},St.push(Ot))})}),St})(bt);Ye=(function(nn){for(var St={},In=0;In<nn.length;++In){var Lt=x1(nn[In]),Ot=Lt.family,An=Lt.stretch,Gt=Lt.style,gt=Lt.weight;St[Ot]=St[Ot]||{},St[Ot][An]=St[Ot][An]||{},St[Ot][An][Gt]=St[Ot][An][Gt]||{},St[Ot][An][Gt][gt]=Lt}return St})(Ft.concat(Pn)),Ze=Ct}return Ye})(this.pdf,this.fontFaces),Tt=Qe.map(function(tt){return{family:tt,stretch:"normal",weight:Be,style:Ge}}),zt=(function(tt,Pn,bt){for(var Ct=(bt=bt||{}).defaultFontFamily||"times",Ft=Object.assign({},YB,bt.genericFontFamilies||{}),nn=null,St=null,In=0;In<Pn.length;++In)if(Ft[(nn=x1(Pn[In])).family]&&(nn.family=Ft[nn.family]),tt.hasOwnProperty(nn.family)){St=tt[nn.family];break}if(!(St=St||tt[Ct]))throw new Error("Could not find a font-family for the rule '"+L_(nn)+"' and default family '"+Ct+"'.");if(St=(function(Lt,Ot){if(Ot[Lt])return Ot[Lt];var An=Tv[Lt],Gt=An<=Tv.normal?-1:1,gt=k_(Ot,rT,An,Gt);if(!gt)throw new Error("Could not find a matching font-stretch value for "+Lt);return gt})(nn.stretch,St),St=(function(Lt,Ot){if(Ot[Lt])return Ot[Lt];for(var An=sT[Lt],Gt=0;Gt<An.length;++Gt)if(Ot[An[Gt]])return Ot[An[Gt]];throw new Error("Could not find a matching font-style for "+Lt)})(nn.style,St),!(St=(function(Lt,Ot){if(Ot[Lt])return Ot[Lt];if(Lt===400&&Ot[500])return Ot[500];if(Lt===500&&Ot[400])return Ot[400];var An=WB[Lt],Gt=k_(Ot,aT,An,Lt<400?-1:1);if(!Gt)throw new Error("Could not find a matching font-weight for value "+Lt);return Gt})(nn.weight,St)))throw new Error("Failed to resolve a font for the rule '"+L_(nn)+"'.");return St})(rt,Tt);this.pdf.setFont(zt.ref.name,zt.ref.style)}else{var At="";(Be==="bold"||parseInt(Be,10)>=700||Ge==="bold")&&(At="bold"),Ge==="italic"&&(At+="italic"),At.length===0&&(At="normal");for(var tn="",Vt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ut=0;ut<Qe.length;ut++){if(this.pdf.internal.getFont(Qe[ut],At,{noFallback:!0,disableWarning:!0})!==void 0){tn=Qe[ut];break}if(At==="bolditalic"&&this.pdf.internal.getFont(Qe[ut],"bold",{noFallback:!0,disableWarning:!0})!==void 0)tn=Qe[ut],At="bold";else if(this.pdf.internal.getFont(Qe[ut],"normal",{noFallback:!0,disableWarning:!0})!==void 0){tn=Qe[ut],At="normal";break}}if(tn===""){for(var Pt=0;Pt<Qe.length;Pt++)if(Vt[Qe[Pt]]){tn=Vt[Qe[Pt]];break}}tn=tn===""?"Times":tn,this.pdf.setFont(tn,At)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ne){this.ctx.globalCompositeOperation=ne}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ne){this.ctx.globalAlpha=ne}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ne){this.ctx.lineDashOffset=ne,Q.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ne){this.ctx.lineDash=ne,Q.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ne){this.ctx.ignoreClearRect=!!ne}})};p.prototype.setLineDash=function(M){this.lineDash=M},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){O.call(this,"fill",!1)},p.prototype.stroke=function(){O.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(M,V){if(isNaN(M)||isNaN(V))throw Jn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Z=this.ctx.transform.applyToPoint(new a(M,V));this.path.push({type:"mt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new a(M,V)},p.prototype.closePath=function(){var M=new a(0,0),V=0;for(V=this.path.length-1;V!==-1;V--)if(this.path[V].type==="begin"&&Fn(this.path[V+1])==="object"&&typeof this.path[V+1].x=="number"){M=new a(this.path[V+1].x,this.path[V+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(M.x,M.y)},p.prototype.lineTo=function(M,V){if(isNaN(M)||isNaN(V))throw Jn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Z=this.ctx.transform.applyToPoint(new a(M,V));this.path.push({type:"lt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new a(Z.x,Z.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),O.call(this,null,!0)},p.prototype.quadraticCurveTo=function(M,V,Z,le){if(isNaN(Z)||isNaN(le)||isNaN(M)||isNaN(V))throw Jn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ce=this.ctx.transform.applyToPoint(new a(Z,le)),he=this.ctx.transform.applyToPoint(new a(M,V));this.path.push({type:"qct",x1:he.x,y1:he.y,x:ce.x,y:ce.y}),this.ctx.lastPoint=new a(ce.x,ce.y)},p.prototype.bezierCurveTo=function(M,V,Z,le,ce,he){if(isNaN(ce)||isNaN(he)||isNaN(M)||isNaN(V)||isNaN(Z)||isNaN(le))throw Jn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ae=this.ctx.transform.applyToPoint(new a(ce,he)),Ee=this.ctx.transform.applyToPoint(new a(M,V)),Ie=this.ctx.transform.applyToPoint(new a(Z,le));this.path.push({type:"bct",x1:Ee.x,y1:Ee.y,x2:Ie.x,y2:Ie.y,x:Ae.x,y:Ae.y}),this.ctx.lastPoint=new a(Ae.x,Ae.y)},p.prototype.arc=function(M,V,Z,le,ce,he){if(isNaN(M)||isNaN(V)||isNaN(Z)||isNaN(le)||isNaN(ce))throw Jn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(he=!!he,!this.ctx.transform.isIdentity){var Ae=this.ctx.transform.applyToPoint(new a(M,V));M=Ae.x,V=Ae.y;var Ee=this.ctx.transform.applyToPoint(new a(0,Z)),Ie=this.ctx.transform.applyToPoint(new a(0,0));Z=Math.sqrt(Math.pow(Ee.x-Ie.x,2)+Math.pow(Ee.y-Ie.y,2))}Math.abs(ce-le)>=2*Math.PI&&(le=0,ce=2*Math.PI),this.path.push({type:"arc",x:M,y:V,radius:Z,startAngle:le,endAngle:ce,counterclockwise:he})},p.prototype.arcTo=function(M,V,Z,le,ce){throw new Error("arcTo not implemented.")},p.prototype.rect=function(M,V,Z,le){if(isNaN(M)||isNaN(V)||isNaN(Z)||isNaN(le))throw Jn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(M,V),this.lineTo(M+Z,V),this.lineTo(M+Z,V+le),this.lineTo(M,V+le),this.lineTo(M,V),this.lineTo(M+Z,V),this.lineTo(M,V)},p.prototype.fillRect=function(M,V,Z,le){if(isNaN(M)||isNaN(V)||isNaN(Z)||isNaN(le))throw Jn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var ce={};this.lineCap!=="butt"&&(ce.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ce.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(M,V,Z,le),this.fill(),ce.hasOwnProperty("lineCap")&&(this.lineCap=ce.lineCap),ce.hasOwnProperty("lineJoin")&&(this.lineJoin=ce.lineJoin)}},p.prototype.strokeRect=function(M,V,Z,le){if(isNaN(M)||isNaN(V)||isNaN(Z)||isNaN(le))throw Jn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");E.call(this)||(this.beginPath(),this.rect(M,V,Z,le),this.stroke())},p.prototype.clearRect=function(M,V,Z,le){if(isNaN(M)||isNaN(V)||isNaN(Z)||isNaN(le))throw Jn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(M,V,Z,le))},p.prototype.save=function(M){M=typeof M!="boolean"||M;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("q");if(this.pdf.setPage(V),M){this.ctx.fontSize=this.pdf.internal.getFontSize();var le=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=le}},p.prototype.restore=function(M){M=typeof M!="boolean"||M;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("Q");this.pdf.setPage(V),M&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(M){var V,Z,le,ce;if(M.isCanvasGradient===!0&&(M=M.getColor()),!M)return{r:0,g:0,b:0,a:0,style:M};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(M))V=0,Z=0,le=0,ce=0;else{var he=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(M);if(he!==null)V=parseInt(he[1]),Z=parseInt(he[2]),le=parseInt(he[3]),ce=1;else if((he=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(M))!==null)V=parseInt(he[1]),Z=parseInt(he[2]),le=parseInt(he[3]),ce=parseFloat(he[4]);else{if(ce=1,typeof M=="string"&&M.charAt(0)!=="#"){var Ae=new XE(M);M=Ae.ok?Ae.toHex():"#000000"}M.length===4?(V=M.substring(1,2),V+=V,Z=M.substring(2,3),Z+=Z,le=M.substring(3,4),le+=le):(V=M.substring(1,3),Z=M.substring(3,5),le=M.substring(5,7)),V=parseInt(V,16),Z=parseInt(Z,16),le=parseInt(le,16)}}return{r:V,g:Z,b:le,a:ce,style:M}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},E=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(M,V,Z,le){if(isNaN(V)||isNaN(Z)||typeof M!="string")throw Jn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(le=isNaN(le)?void 0:le,!m.call(this)){var ce=de(this.ctx.transform.rotation),he=this.ctx.transform.scaleX;H.call(this,{text:M,x:V,y:Z,scale:he,angle:ce,align:this.textAlign,maxWidth:le})}},p.prototype.strokeText=function(M,V,Z,le){if(isNaN(V)||isNaN(Z)||typeof M!="string")throw Jn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!E.call(this)){le=isNaN(le)?void 0:le;var ce=de(this.ctx.transform.rotation),he=this.ctx.transform.scaleX;H.call(this,{text:M,x:V,y:Z,scale:he,renderingMode:"stroke",angle:ce,align:this.textAlign,maxWidth:le})}},p.prototype.measureText=function(M){if(typeof M!="string")throw Jn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var V=this.pdf,Z=this.pdf.internal.scaleFactor,le=V.internal.getFontSize(),ce=V.getStringUnitWidth(M)*le/V.internal.scaleFactor;return new function(he){var Ae=(he=he||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ae}}),this}({width:ce*=Math.round(96*Z/72*1e4)/1e4})},p.prototype.scale=function(M,V){if(isNaN(M)||isNaN(V))throw Jn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Z=new c(M,0,0,V,0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},p.prototype.rotate=function(M){if(isNaN(M))throw Jn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var V=new c(Math.cos(M),Math.sin(M),-Math.sin(M),Math.cos(M),0,0);this.ctx.transform=this.ctx.transform.multiply(V)},p.prototype.translate=function(M,V){if(isNaN(M)||isNaN(V))throw Jn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Z=new c(1,0,0,1,M,V);this.ctx.transform=this.ctx.transform.multiply(Z)},p.prototype.transform=function(M,V,Z,le,ce,he){if(isNaN(M)||isNaN(V)||isNaN(Z)||isNaN(le)||isNaN(ce)||isNaN(he))throw Jn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ae=new c(M,V,Z,le,ce,he);this.ctx.transform=this.ctx.transform.multiply(Ae)},p.prototype.setTransform=function(M,V,Z,le,ce,he){M=isNaN(M)?1:M,V=isNaN(V)?0:V,Z=isNaN(Z)?0:Z,le=isNaN(le)?1:le,ce=isNaN(ce)?0:ce,he=isNaN(he)?0:he,this.ctx.transform=new c(M,V,Z,le,ce,he)};var S=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(M,V,Z,le,ce,he,Ae,Ee,Ie){var He=this.pdf.getImageProperties(M),Ye=1,Ze=1,st=1,ne=1;le!==void 0&&Ee!==void 0&&(st=Ee/le,ne=Ie/ce,Ye=He.width/le*Ee/le,Ze=He.height/ce*Ie/ce),he===void 0&&(he=V,Ae=Z,V=0,Z=0),le!==void 0&&Ee===void 0&&(Ee=le,Ie=ce),le===void 0&&Ee===void 0&&(Ee=He.width,Ie=He.height);var Je=this.ctx.transform.decompose(),Ge=de(Je.rotate.shx),Be=new c,Le=(Be=(Be=(Be=Be.multiply(Je.translate)).multiply(Je.skew)).multiply(Je.scale)).applyToRectangle(new l(he-V*st,Ae-Z*ne,le*Ye,ce*Ze));if(this.autoPaging){for(var at,Ke=N.call(this,Le),Qe=[],rt=0;rt<Ke.length;rt+=1)Qe.indexOf(Ke[rt])===-1&&Qe.push(Ke[rt]);L(Qe);for(var Tt=Qe[0],zt=Qe[Qe.length-1],At=Tt;At<zt+1;At++){this.pdf.setPage(At);var tn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Vt=At===1?this.posY+this.margin[0]:this.margin[0],ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Pt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],tt=At===1?0:ut+(At-2)*Pt;if(this.ctx.clip_path.length!==0){var Pn=this.path;at=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(at,this.posX+this.margin[3],-tt+Vt+this.ctx.prevPageLastElemOffset),q.call(this,"fill",!0),this.path=Pn}var bt=JSON.parse(JSON.stringify(Le));bt=P([bt],this.posX+this.margin[3],-tt+Vt+this.ctx.prevPageLastElemOffset)[0];var Ct=(At>Tt||At<zt)&&S.call(this);Ct&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],tn,Pt,null).clip().discardPath()),this.pdf.addImage(M,"JPEG",bt.x,bt.y,bt.w,bt.h,null,null,Ge),Ct&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(M,"JPEG",Le.x,Le.y,Le.w,Le.h,null,null,Ge)};var N=function(M,V,Z){var le=[];V=V||this.pdf.internal.pageSize.width,Z=Z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ce=this.posY+this.ctx.prevPageLastElemOffset;switch(M.type){default:case"mt":case"lt":le.push(Math.floor((M.y+ce)/Z)+1);break;case"arc":le.push(Math.floor((M.y+ce-M.radius)/Z)+1),le.push(Math.floor((M.y+ce+M.radius)/Z)+1);break;case"qct":var he=we(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x,M.y);le.push(Math.floor((he.y+ce)/Z)+1),le.push(Math.floor((he.y+he.h+ce)/Z)+1);break;case"bct":var Ae=Oe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x2,M.y2,M.x,M.y);le.push(Math.floor((Ae.y+ce)/Z)+1),le.push(Math.floor((Ae.y+Ae.h+ce)/Z)+1);break;case"rect":le.push(Math.floor((M.y+ce)/Z)+1),le.push(Math.floor((M.y+M.h+ce)/Z)+1)}for(var Ee=0;Ee<le.length;Ee+=1)for(;this.pdf.internal.getNumberOfPages()<le[Ee];)C.call(this);return le},C=function(){var M=this.fillStyle,V=this.strokeStyle,Z=this.font,le=this.lineCap,ce=this.lineWidth,he=this.lineJoin;this.pdf.addPage(),this.fillStyle=M,this.strokeStyle=V,this.font=Z,this.lineCap=le,this.lineWidth=ce,this.lineJoin=he},P=function(M,V,Z){for(var le=0;le<M.length;le++)switch(M[le].type){case"bct":M[le].x2+=V,M[le].y2+=Z;case"qct":M[le].x1+=V,M[le].y1+=Z;default:M[le].x+=V,M[le].y+=Z}return M},L=function(M){return M.sort(function(V,Z){return V-Z})},O=function(M,V){var Z=this.fillStyle,le=this.strokeStyle,ce=this.lineCap,he=this.lineWidth,Ae=Math.abs(he*this.ctx.transform.scaleX),Ee=this.lineJoin;if(this.autoPaging){for(var Ie,He,Ye=JSON.parse(JSON.stringify(this.path)),Ze=JSON.parse(JSON.stringify(this.path)),st=[],ne=0;ne<Ze.length;ne++)if(Ze[ne].x!==void 0)for(var Je=N.call(this,Ze[ne]),Ge=0;Ge<Je.length;Ge+=1)st.indexOf(Je[Ge])===-1&&st.push(Je[Ge]);for(var Be=0;Be<st.length;Be++)for(;this.pdf.internal.getNumberOfPages()<st[Be];)C.call(this);L(st);for(var Le=st[0],at=st[st.length-1],Ke=Le;Ke<at+1;Ke++){this.pdf.setPage(Ke),this.fillStyle=Z,this.strokeStyle=le,this.lineCap=ce,this.lineWidth=Ae,this.lineJoin=Ee;var Qe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],rt=Ke===1?this.posY+this.margin[0]:this.margin[0],Tt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],zt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],At=Ke===1?0:Tt+(Ke-2)*zt;if(this.ctx.clip_path.length!==0){var tn=this.path;Ie=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(Ie,this.posX+this.margin[3],-At+rt+this.ctx.prevPageLastElemOffset),q.call(this,M,!0),this.path=tn}if(He=JSON.parse(JSON.stringify(Ye)),this.path=P(He,this.posX+this.margin[3],-At+rt+this.ctx.prevPageLastElemOffset),V===!1||Ke===0){var Vt=(Ke>Le||Ke<at)&&S.call(this);Vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Qe,zt,null).clip().discardPath()),q.call(this,M,V),Vt&&this.pdf.restoreGraphicsState()}this.lineWidth=he}this.path=Ye}else this.lineWidth=Ae,q.call(this,M,V),this.lineWidth=he},q=function(M,V){if((M!=="stroke"||V||!E.call(this))&&(M==="stroke"||V||!m.call(this))){for(var Z,le,ce=[],he=this.path,Ae=0;Ae<he.length;Ae++){var Ee=he[Ae];switch(Ee.type){case"begin":ce.push({begin:!0});break;case"close":ce.push({close:!0});break;case"mt":ce.push({start:Ee,deltas:[],abs:[]});break;case"lt":var Ie=ce.length;if(he[Ae-1]&&!isNaN(he[Ae-1].x)&&(Z=[Ee.x-he[Ae-1].x,Ee.y-he[Ae-1].y],Ie>0)){for(;Ie>=0;Ie--)if(ce[Ie-1].close!==!0&&ce[Ie-1].begin!==!0){ce[Ie-1].deltas.push(Z),ce[Ie-1].abs.push(Ee);break}}break;case"bct":Z=[Ee.x1-he[Ae-1].x,Ee.y1-he[Ae-1].y,Ee.x2-he[Ae-1].x,Ee.y2-he[Ae-1].y,Ee.x-he[Ae-1].x,Ee.y-he[Ae-1].y],ce[ce.length-1].deltas.push(Z);break;case"qct":var He=he[Ae-1].x+2/3*(Ee.x1-he[Ae-1].x),Ye=he[Ae-1].y+2/3*(Ee.y1-he[Ae-1].y),Ze=Ee.x+2/3*(Ee.x1-Ee.x),st=Ee.y+2/3*(Ee.y1-Ee.y),ne=Ee.x,Je=Ee.y;Z=[He-he[Ae-1].x,Ye-he[Ae-1].y,Ze-he[Ae-1].x,st-he[Ae-1].y,ne-he[Ae-1].x,Je-he[Ae-1].y],ce[ce.length-1].deltas.push(Z);break;case"arc":ce.push({deltas:[],abs:[],arc:!0}),Array.isArray(ce[ce.length-1].abs)&&ce[ce.length-1].abs.push(Ee)}}le=V?null:M==="stroke"?"stroke":"fill";for(var Ge=!1,Be=0;Be<ce.length;Be++)if(ce[Be].arc)for(var Le=ce[Be].abs,at=0;at<Le.length;at++){var Ke=Le[at];Ke.type==="arc"?K.call(this,Ke.x,Ke.y,Ke.radius,Ke.startAngle,Ke.endAngle,Ke.counterclockwise,void 0,V,!Ge):se.call(this,Ke.x,Ke.y),Ge=!0}else if(ce[Be].close===!0)this.pdf.internal.out("h"),Ge=!1;else if(ce[Be].begin!==!0){var Qe=ce[Be].start.x,rt=ce[Be].start.y;ie.call(this,ce[Be].deltas,Qe,rt),Ge=!0}le&&j.call(this,le),V&&ee.call(this)}},G=function(M){var V=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Z=V*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return M-Z;case"top":return M+V-Z;case"hanging":return M+V-2*Z;case"middle":return M+V/2-Z;default:return M}},W=function(M){return M+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var M=function(){};return M.colorStops=[],M.addColorStop=function(V,Z){this.colorStops.push([V,Z])},M.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},M.isCanvasGradient=!0,M},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var K=function(M,V,Z,le,ce,he,Ae,Ee,Ie){for(var He=X.call(this,Z,le,ce,he),Ye=0;Ye<He.length;Ye++){var Ze=He[Ye];Ye===0&&(Ie?B.call(this,Ze.x1+M,Ze.y1+V):se.call(this,Ze.x1+M,Ze.y1+V)),ye.call(this,M,V,Ze.x2,Ze.y2,Ze.x3,Ze.y3,Ze.x4,Ze.y4)}Ee?ee.call(this):j.call(this,Ae)},j=function(M){switch(M){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},ee=function(){this.pdf.clip(),this.pdf.discardPath()},B=function(M,V){this.pdf.internal.out(t(M)+" "+n(V)+" m")},H=function(M){var V;switch(M.align){case"right":case"end":V="right";break;case"center":V="center";break;default:V="left"}var Z,le,ce,he=this.pdf.getTextDimensions(M.text),Ae=G.call(this,M.y),Ee=W.call(this,Ae)-he.h,Ie=this.ctx.transform.applyToPoint(new a(M.x,Ae));if(this.autoPaging){var He=this.ctx.transform.decompose(),Ye=new c;Ye=(Ye=(Ye=Ye.multiply(He.translate)).multiply(He.skew)).multiply(He.scale);for(var Ze=this.ctx.transform.applyToRectangle(new l(M.x,Ae,he.w,he.h)),st=Ye.applyToRectangle(new l(M.x,Ee,he.w,he.h)),ne=N.call(this,st),Je=[],Ge=0;Ge<ne.length;Ge+=1)Je.indexOf(ne[Ge])===-1&&Je.push(ne[Ge]);L(Je);for(var Be=Je[0],Le=Je[Je.length-1],at=Be;at<Le+1;at++){this.pdf.setPage(at);var Ke=at===1?this.posY+this.margin[0]:this.margin[0],Qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],rt=this.pdf.internal.pageSize.height-this.margin[2],Tt=rt-this.margin[0],zt=this.pdf.internal.pageSize.width-this.margin[1],At=zt-this.margin[3],tn=at===1?0:Qe+(at-2)*Tt;if(this.ctx.clip_path.length!==0){var Vt=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(Z,this.posX+this.margin[3],-1*tn+Ke),q.call(this,"fill",!0),this.path=Vt}var ut=P([JSON.parse(JSON.stringify(st))],this.posX+this.margin[3],-tn+Ke+this.ctx.prevPageLastElemOffset)[0];M.scale>=.01&&(le=this.pdf.internal.getFontSize(),this.pdf.setFontSize(le*M.scale),ce=this.lineWidth,this.lineWidth=ce*M.scale);var Pt=this.autoPaging!=="text";if(Pt||ut.y+ut.h<=rt){if(Pt||ut.y>=Ke&&ut.x<=zt){var tt=Pt?M.text:this.pdf.splitTextToSize(M.text,M.maxWidth||zt-ut.x)[0],Pn=P([JSON.parse(JSON.stringify(Ze))],this.posX+this.margin[3],-tn+Ke+this.ctx.prevPageLastElemOffset)[0],bt=Pt&&(at>Be||at<Le)&&S.call(this);bt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],At,Tt,null).clip().discardPath()),this.pdf.text(tt,Pn.x,Pn.y,{angle:M.angle,align:V,renderingMode:M.renderingMode}),bt&&this.pdf.restoreGraphicsState()}}else ut.y<rt&&(this.ctx.prevPageLastElemOffset+=rt-ut.y);M.scale>=.01&&(this.pdf.setFontSize(le),this.lineWidth=ce)}}else M.scale>=.01&&(le=this.pdf.internal.getFontSize(),this.pdf.setFontSize(le*M.scale),ce=this.lineWidth,this.lineWidth=ce*M.scale),this.pdf.text(M.text,Ie.x+this.posX,Ie.y+this.posY,{angle:M.angle,align:V,renderingMode:M.renderingMode,maxWidth:M.maxWidth}),M.scale>=.01&&(this.pdf.setFontSize(le),this.lineWidth=ce)},se=function(M,V,Z,le){Z=Z||0,le=le||0,this.pdf.internal.out(t(M+Z)+" "+n(V+le)+" l")},ie=function(M,V,Z){return this.pdf.lines(M,V,Z,null,null)},ye=function(M,V,Z,le,ce,he,Ae,Ee){this.pdf.internal.out([e(s(Z+M)),e(r(le+V)),e(s(ce+M)),e(r(he+V)),e(s(Ae+M)),e(r(Ee+V)),"c"].join(" "))},X=function(M,V,Z,le){for(var ce=2*Math.PI,he=Math.PI/2;V>Z;)V-=ce;var Ae=Math.abs(Z-V);Ae<ce&&le&&(Ae=ce-Ae);for(var Ee=[],Ie=le?-1:1,He=V;Ae>1e-5;){var Ye=He+Ie*Math.min(Ae,he);Ee.push(ue.call(this,M,He,Ye)),Ae-=Math.abs(Ye-He),He=Ye}return Ee},ue=function(M,V,Z){var le=(Z-V)/2,ce=M*Math.cos(le),he=M*Math.sin(le),Ae=ce,Ee=-he,Ie=Ae*Ae+Ee*Ee,He=Ie+Ae*ce+Ee*he,Ye=4/3*(Math.sqrt(2*Ie*He)-He)/(Ae*he-Ee*ce),Ze=Ae-Ye*Ee,st=Ee+Ye*Ae,ne=Ze,Je=-st,Ge=le+V,Be=Math.cos(Ge),Le=Math.sin(Ge);return{x1:M*Math.cos(V),y1:M*Math.sin(V),x2:Ze*Be-st*Le,y2:Ze*Le+st*Be,x3:ne*Be-Je*Le,y3:ne*Le+Je*Be,x4:M*Math.cos(Z),y4:M*Math.sin(Z)}},de=function(M){return 180*M/Math.PI},we=function(M,V,Z,le,ce,he){var Ae=M+.5*(Z-M),Ee=V+.5*(le-V),Ie=ce+.5*(Z-ce),He=he+.5*(le-he),Ye=Math.min(M,ce,Ae,Ie),Ze=Math.max(M,ce,Ae,Ie),st=Math.min(V,he,Ee,He),ne=Math.max(V,he,Ee,He);return new l(Ye,st,Ze-Ye,ne-st)},Oe=function(M,V,Z,le,ce,he,Ae,Ee){var Ie,He,Ye,Ze,st,ne,Je,Ge,Be,Le,at,Ke,Qe,rt,Tt=Z-M,zt=le-V,At=ce-Z,tn=he-le,Vt=Ae-ce,ut=Ee-he;for(He=0;He<41;He++)Be=(Je=(Ye=M+(Ie=He/40)*Tt)+Ie*((st=Z+Ie*At)-Ye))+Ie*(st+Ie*(ce+Ie*Vt-st)-Je),Le=(Ge=(Ze=V+Ie*zt)+Ie*((ne=le+Ie*tn)-Ze))+Ie*(ne+Ie*(he+Ie*ut-ne)-Ge),He==0?(at=Be,Ke=Le,Qe=Be,rt=Le):(at=Math.min(at,Be),Ke=Math.min(Ke,Le),Qe=Math.max(Qe,Be),rt=Math.max(rt,Le));return new l(Math.round(at),Math.round(Ke),Math.round(Qe-at),Math.round(rt-Ke))},Q=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var M,V,Z=(M=this.ctx.lineDash,V=this.ctx.lineDashOffset,JSON.stringify({lineDash:M,lineDashOffset:V}));this.prevLineDash!==Z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Z)}}})(_t.API),(function(i){var e=function(a){var l,c,d,h,p,v,m,E,S,N;for(c=[],d=0,h=(a+=l="\0\0\0\0".slice(a.length%4||4)).length;h>d;d+=4)(p=(a.charCodeAt(d)<<24)+(a.charCodeAt(d+1)<<16)+(a.charCodeAt(d+2)<<8)+a.charCodeAt(d+3))!==0?(v=(p=((p=((p=((p=(p-(N=p%85))/85)-(S=p%85))/85)-(E=p%85))/85)-(m=p%85))/85)%85,c.push(v+33,m+33,E+33,S+33,N+33)):c.push(122);return(function(C,P){for(var L=P;L>0;L--)C.pop()})(c,l.length),String.fromCharCode.apply(String,c)+"~>"},t=function(a){var l,c,d,h,p,v=String,m="length",E=255,S="charCodeAt",N="slice",C="replace";for(a[N](-2),a=a[N](0,-2)[C](/\s/g,"")[C]("z","!!!!!"),d=[],h=0,p=(a+=l="uuuuu"[N](a[m]%5||5))[m];p>h;h+=5)c=52200625*(a[S](h)-33)+614125*(a[S](h+1)-33)+7225*(a[S](h+2)-33)+85*(a[S](h+3)-33)+(a[S](h+4)-33),d.push(E&c>>24,E&c>>16,E&c>>8,E&c);return(function(P,L){for(var O=L;O>0;O--)P.pop()})(d,l[m]),v.fromCharCode.apply(v,d)},n=function(a){return a.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},s=function(a){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),l.test(a)===!1)return"";for(var c="",d=0;d<a.length;d+=2)c+=String.fromCharCode("0x"+(a[d]+a[d+1]));return c},r=function(a){for(var l=new Uint8Array(a.length),c=a.length;c--;)l[c]=a.charCodeAt(c);return(l=bv(l)).reduce(function(d,h){return d+String.fromCharCode(h)},"")};i.processDataByFilters=function(a,l){var c=0,d=a||"",h=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":d=t(d),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=e(d),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=s(d),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=n(d),h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=r(d),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:d,reverseChain:h.reverse().join(" ")}}})(_t.API),(function(i){i.loadFile=function(e,t,n){return(function(s,r,a){r=r!==!1,a=typeof a=="function"?a:function(){};var l=void 0;try{l=(function(c,d,h){var p=new XMLHttpRequest,v=0,m=function(E){var S=E.length,N=[],C=String.fromCharCode;for(v=0;v<S;v+=1)N.push(C(255&E.charCodeAt(v)));return N.join("")};if(p.open("GET",c,!d),p.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(p.onload=function(){p.status===200?h(m(this.responseText)):h(void 0)}),p.send(null),d&&p.status===200)return m(p.responseText)})(s,r,a)}catch{}return l})(e,t,n)},i.loadImageFile=i.loadFile})(_t.API),(function(i){function e(){return(Ht.html2canvas?Promise.resolve(Ht.html2canvas):i1(()=>import("./html2canvas.esm-Ge7aVWlp.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function t(){return(Ht.DOMPurify?Promise.resolve(Ht.DOMPurify):i1(()=>import("./purify.es-C65SP4u9.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var n=function(l){var c=Fn(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},s=function(l,c){var d=document.createElement(l);for(var h in c.className&&(d.className=c.className),c.innerHTML&&c.dompurify&&(d.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)d.style[h]=c.style[h];return d},r=function l(c,d){for(var h=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),p=c.firstChild;p;p=p.nextSibling)d!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||h.appendChild(l(p,d));return c.nodeType===1&&(c.nodeName==="CANVAS"?(h.width=c.width,h.height=c.height,h.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(h.value=c.value),h.addEventListener("load",function(){h.scrollTop=c.scrollTop,h.scrollLeft=c.scrollLeft},!0)),h},a=function l(c){var d=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),h=l.convert(Promise.resolve(),d);return(h=h.setProgress(1,l,1,[l])).set(c)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(l,c){return l.__proto__=c||a.prototype,l},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(l,c){return this.then(function(){switch(c=c||(function(d){switch(n(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(l),c){case"string":return this.then(t).then(function(d){return this.set({src:s("div",{innerHTML:l,dompurify:d})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},a.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=r(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,c(this.prop.container,d)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var d=this.opt.jsPDF,h=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,v=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete v.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=h,h)for(var m=0;m<h.length;++m){var E=h[m],S=E.src.find(function(N){return N.format==="truetype"});S&&d.addFont(S.url,E.ref.name,E.ref.style)}return v.windowHeight=v.windowHeight||0,v.windowHeight=v.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):v.windowHeight,d.context2d.save(!0),c(this.prop.container,v)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(l,c,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},a.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},a.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},a.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(l){if(n(l)!=="object")return this;var c=Object.keys(l||{}).map(function(d){if(d in a.template.prop)return function(){this.prop[d]=l[d]};switch(d){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[d]=l[d]}}},this);return this.then(function(){return this.thenList(c)})},a.prototype.get=function(l,c){return this.then(function(){var d=l in a.template.prop?this.prop[l]:this.opt[l];return c?c(d):d})},a.prototype.setMargin=function(l){return this.then(function(){switch(n(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},a.prototype.setPageSize=function(l){function c(d,h){return Math.floor(d*h/72*96)}return this.then(function(){(l=l||_t.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},a.prototype.setProgress=function(l,c,d,h){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),d!=null&&(this.progress.n=d),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(l,c,d,h){return this.setProgress(l?this.progress.val+l:null,c||null,d?this.progress.n+d:null,h?this.progress.stack.concat(h):null)},a.prototype.then=function(l,c){var d=this;return this.thenCore(l,c,function(h,p){return d.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,function(v){return d.updateProgress(null,h),v}).then(h,p).then(function(v){return d.updateProgress(1),v})})},a.prototype.thenCore=function(l,c,d){d=d||Promise.prototype.then;var h=this;l&&(l=l.bind(h)),c&&(c=c.bind(h));var p=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?h:a.convert(Object.assign({},h),Promise.prototype),v=d.call(p,l,c);return a.convert(v,h.__proto__)},a.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},a.prototype.thenList=function(l){var c=this;return l.forEach(function(d){c=c.thenCore(d)}),c},a.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return a.convert(c,this)},a.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},a.prototype.error=function(l){return this.then(function(){throw new Error(l)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,_t.getPageSize=function(l,c,d){if(Fn(l)==="object"){var h=l;l=h.orientation,c=h.unit||c,d=h.format||d}c=c||"mm",d=d||"a4",l=(""+(l||"P")).toLowerCase();var p,v=(""+d).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+c}var E,S=0,N=0;if(m.hasOwnProperty(v))S=m[v][1]/p,N=m[v][0]/p;else try{S=d[1],N=d[0]}catch{throw new Error("Invalid format: "+d)}if(l==="p"||l==="portrait")l="p",N>S&&(E=N,N=S,S=E);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",S>N&&(E=N,N=S,S=E)}return{width:N,height:S,unit:c,k:p,orientation:l}},i.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(x1):null;var d=new a(c);return c.worker?d:d.from(l).doCallback()}})(_t.API),_t.API.addJS=function(i){return M_=i,this.internal.events.subscribe("postPutResources",function(){f0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(f0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),I_=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+M_+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){f0!==void 0&&I_!==void 0&&this.internal.out("/Names <</JavaScript "+f0+" 0 R>>")}),this},(function(i){var e;i.events.push(["postPutResources",function(){var t=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=t.outline.render().split(/\r\n/),r=0;r<s.length;r++){var a=s[r],l=n.exec(a);if(l!=null){var c=l[1];t.internal.newObjectDeferredBegin(c,!1)}t.internal.write(a)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,h=[];for(r=0;r<d;r++){var p=t.internal.newObject();h.push(p);var v=t.internal.getPageInfo(r+1);t.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var m=t.internal.newObject();for(t.internal.write("<< /Names [ "),r=0;r<h.length;r++)t.internal.write("(page_"+(r+1)+")"+h[r]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+m+" 0 R"),t.internal.write(">>","endobj")}}]),i.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),i.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(n,s,r){var a={title:s,options:r,children:[]};return n==null&&(n=this.root),n.children.push(a),a},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(n){n.id=t.internal.newObjectDeferred();for(var s=0;s<n.children.length;s++)this.genIds_r(n.children[s])},t.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},t.outline.renderItems=function(n){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,r=0;r<n.children.length;r++){var a=n.children[r];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(n)),r>0&&this.line("/Prev "+this.makeRef(n.children[r-1])),r<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[r+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var l=this.count=this.count_r({count:0},a);if(l>0&&this.line("/Count "+l),a.options&&a.options.pageNumber){var c=t.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var d=0;d<n.children.length;d++)this.renderItems(n.children[d])},t.outline.line=function(n){this.ctx.val+=n+`\r
`},t.outline.makeRef=function(n){return n.id+" 0 R"},t.outline.makeString=function(n){return"("+t.internal.pdfEscape(n)+")"},t.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(n,s){for(var r=0;r<s.children.length;r++)n.count++,this.count_r(n,s.children[r]);return n.count}}])})(_t.API),(function(i){var e=[192,193,194,195,196,197,198,199];i.processJPEG=function(t,n,s,r,a,l){var c,d=this.decode.DCT_DECODE,h=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=a||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,c=(function(p){for(var v,m=256*p.charCodeAt(4)+p.charCodeAt(5),E=p.length,S={width:0,height:0,numcomponents:1},N=4;N<E;N+=2){if(N+=m,e.indexOf(p.charCodeAt(N+1))!==-1){v=256*p.charCodeAt(N+5)+p.charCodeAt(N+6),S={width:256*p.charCodeAt(N+7)+p.charCodeAt(N+8),height:v,numcomponents:p.charCodeAt(N+9)};break}m=256*p.charCodeAt(N+2)+p.charCodeAt(N+3)}return S})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}h={data:t,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:n,alias:s}}return h}})(_t.API),_t.API.processPNG=function(i,e,t,n){if(this.__addimage__.isArrayBuffer(i)&&(i=new Uint8Array(i)),this.__addimage__.isArrayBufferView(i)){var s,r=IB(i,{checkCrc:!0}),a=r.width,l=r.height,c=r.channels,d=r.palette,h=r.depth;s=d&&c===1?(function(K){for(var j=K.width,ee=K.height,B=K.data,H=K.palette,se=K.depth,ie=!1,ye=[],X=[],ue=void 0,de=!1,we=0,Oe=0;Oe<H.length;Oe++){var Q=Fx(H[Oe],4),M=Q[0],V=Q[1],Z=Q[2],le=Q[3];ye.push(M,V,Z),le!=null&&(le===0?(we++,X.length<1&&X.push(Oe)):le<255&&(de=!0))}if(de||we>1){ie=!0,X=void 0;var ce=j*ee;ue=new Uint8Array(ce);for(var he=new DataView(B.buffer),Ae=0;Ae<ce;Ae++){var Ee=A1(he,Ae,se),Ie=Fx(H[Ee],4)[3];ue[Ae]=Ie}}else we===0&&(X=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:ie?8:void 0,colorBytes:B,alphaBytes:ue,needSMask:ie,palette:ye,mask:X}})(r):c===2||c===4?(function(K){for(var j=K.data,ee=K.width,B=K.height,H=K.channels,se=K.depth,ie=H===2?"DeviceGray":"DeviceRGB",ye=H-1,X=ee*B,ue=ye,de=X*ue,we=1*X,Oe=Math.ceil(de*se/8),Q=Math.ceil(we*se/8),M=new Uint8Array(Oe),V=new Uint8Array(Q),Z=new DataView(j.buffer),le=new DataView(M.buffer),ce=new DataView(V.buffer),he=!1,Ae=0;Ae<X;Ae++){for(var Ee=Ae*H,Ie=0;Ie<ue;Ie++)z_(le,A1(Z,Ee+Ie,se),Ae*ue+Ie,se);var He=A1(Z,Ee+ue,se);He<(1<<se)-1&&(he=!0),z_(ce,He,1*Ae,se)}return{colorSpace:ie,colorsPerPixel:ye,sMaskBitsPerComponent:he?se:void 0,colorBytes:M,alphaBytes:V,needSMask:he}})(r):(function(K){var j=K.data,ee=K.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:ee,colorsPerPixel:ee==="DeviceGray"?1:3,colorBytes:j instanceof Uint16Array?(function(B){for(var H=B.length,se=new Uint8Array(2*H),ie=new DataView(se.buffer,se.byteOffset,se.byteLength),ye=0;ye<H;ye++)ie.setUint16(2*ye,B[ye],!1);return se})(j):j,needSMask:!1}})(r);var p,v,m,E=s,S=E.colorSpace,N=E.colorsPerPixel,C=E.sMaskBitsPerComponent,P=E.colorBytes,L=E.alphaBytes,O=E.needSMask,q=E.palette,G=E.mask,W=null;return n!==_t.API.image_compression.NONE&&typeof bv=="function"?(W=(function(K){var j;switch(K){case _t.API.image_compression.FAST:j=11;break;case _t.API.image_compression.MEDIUM:j=13;break;case _t.API.image_compression.SLOW:j=14;break;default:j=12}return j})(n),p=this.decode.FLATE_DECODE,v="/Predictor ".concat(W," /Colors ").concat(N," /BitsPerComponent ").concat(h," /Columns ").concat(a),i=F_(P,Math.ceil(a*N*h/8),N,h,n),O&&(m=F_(L,Math.ceil(a*C/8),1,C,n))):(p=void 0,v=void 0,i=P,O&&(m=L)),(this.__addimage__.isArrayBuffer(i)||this.__addimage__.isArrayBufferView(i))&&(i=this.__addimage__.arrayBufferToBinaryString(i)),(m&&this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),{alias:t,data:i,index:e,filter:p,decodeParameters:v,transparency:G,palette:q,sMask:m,predictor:W,width:a,height:l,bitsPerComponent:h,sMaskBitsPerComponent:C,colorSpace:S}}},(function(i){i.processGIF89A=function(e,t,n,s){var r=new eF(e),a=r.width,l=r.height,c=[];r.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:a,height:l},h=new S1(100).encode(d,100);return i.processJPEG.call(this,h,t,n,s)},i.processGIF87A=i.processGIF89A})(_t.API),to.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var i=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(i);for(var e=0;e<i;e++){var t=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:n,blue:t,quad:r}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},to.prototype.parseBGR=function(){this.pos=this.offset;try{var i="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[i]()}catch(t){Jn.log("bit decode error:"+t)}},to.prototype.bit1=function(){var i,e=Math.ceil(this.width/8),t=e%4;for(i=this.height-1;i>=0;i--){for(var n=this.bottom_up?i:this.height-1-i,s=0;s<e;s++)for(var r=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+8*s*4,l=0;l<8&&8*s+l<this.width;l++){var c=this.palette[r>>7-l&1];this.data[a+4*l]=c.blue,this.data[a+4*l+1]=c.green,this.data[a+4*l+2]=c.red,this.data[a+4*l+3]=255}t!==0&&(this.pos+=4-t)}},to.prototype.bit4=function(){for(var i=Math.ceil(this.width/2),e=i%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,s=0;s<i;s++){var r=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+2*s*4,l=r>>4,c=15&r,d=this.palette[l];if(this.data[a]=d.blue,this.data[a+1]=d.green,this.data[a+2]=d.red,this.data[a+3]=255,2*s+1>=this.width)break;d=this.palette[c],this.data[a+4]=d.blue,this.data[a+4+1]=d.green,this.data[a+4+2]=d.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},to.prototype.bit8=function(){for(var i=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),r=t*this.width*4+4*n;if(s<this.palette.length){var a=this.palette[s];this.data[r]=a.red,this.data[r+1]=a.green,this.data[r+2]=a.blue,this.data[r+3]=255}else this.data[r]=255,this.data[r+1]=255,this.data[r+2]=255,this.data[r+3]=255}i!==0&&(this.pos+=4-i)}},to.prototype.bit15=function(){for(var i=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var r=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(r&e)/e*255|0,l=(r>>5&e)/e*255|0,c=(r>>10&e)/e*255|0,d=r>>15?255:0,h=n*this.width*4+4*s;this.data[h]=c,this.data[h+1]=l,this.data[h+2]=a,this.data[h+3]=d}this.pos+=i}},to.prototype.bit16=function(){for(var i=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,r=0;r<this.width;r++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(a&e)/e*255|0,c=(a>>5&t)/t*255|0,d=(a>>11)/e*255|0,h=s*this.width*4+4*r;this.data[h]=d,this.data[h+1]=c,this.data[h+2]=l,this.data[h+3]=255}this.pos+=i}},to.prototype.bit24=function(){for(var i=this.height-1;i>=0;i--){for(var e=this.bottom_up?i:this.height-1-i,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=r,this.data[a+1]=s,this.data[a+2]=n,this.data[a+3]=255}this.pos+=this.width%4}},to.prototype.bit32=function(){for(var i=this.height-1;i>=0;i--)for(var e=this.bottom_up?i:this.height-1-i,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*t;this.data[l]=r,this.data[l+1]=s,this.data[l+2]=n,this.data[l+3]=a}},to.prototype.getData=function(){return this.data},(function(i){i.processBMP=function(e,t,n,s){var r=new to(e,!1),a=r.width,l=r.height,c={data:r.getData(),width:a,height:l},d=new S1(100).encode(c,100);return i.processJPEG.call(this,d,t,n,s)}})(_t.API),G_.prototype.getData=function(){return this.data},(function(i){i.processWEBP=function(e,t,n,s){var r=new G_(e),a=r.width,l=r.height,c={data:r.getData(),width:a,height:l},d=new S1(100).encode(c,100);return i.processJPEG.call(this,d,t,n,s)}})(_t.API),_t.API.processRGBA=function(i,e,t){for(var n=i.data,s=n.length,r=new Uint8Array(s/4*3),a=new Uint8Array(s/4),l=0,c=0,d=0;d<s;d+=4){var h=n[d],p=n[d+1],v=n[d+2],m=n[d+3];r[l++]=h,r[l++]=p,r[l++]=v,a[c++]=m}var E=this.__addimage__.arrayBufferToBinaryString(r);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:E,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:i.width,height:i.height}},_t.API.setLanguage=function(i){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[i]!==void 0&&(this.internal.languageSettings.languageCode=i,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Rd=_t.API,p0=Rd.getCharWidthsArray=function(i,e){var t,n,s=(e=e||{}).font||this.internal.getFont(),r=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:s.metadata.Unicode.widths,c=l.fof?l.fof:1,d=e.kerning?e.kerning:s.metadata.Unicode.kerning,h=d.fof?d.fof:1,p=e.doKerning!==!1,v=0,m=i.length,E=0,S=l[0]||c,N=[];for(t=0;t<m;t++)n=i.charCodeAt(t),typeof s.metadata.widthOfString=="function"?N.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(n))+a*(1e3/r)||0)/1e3):(v=p&&Fn(d[n])==="object"&&!isNaN(parseInt(d[n][E],10))?d[n][E]/h:0,N.push((l[n]||S)/c+v)),E=n;return N},D_=Rd.getStringUnitWidth=function(i,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return Rd.processArabic&&(i=Rd.processArabic(i)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(i,t,s)/t:p0.apply(this,arguments).reduce(function(r,a){return r+a},0)},O_=function(i,e,t,n){for(var s=[],r=0,a=i.length,l=0;r!==a&&l+e[r]<t;)l+=e[r],r++;s.push(i.slice(0,r));var c=r;for(l=0;r!==a;)l+e[r]>n&&(s.push(i.slice(c,r)),l=0,c=r),l+=e[r],r++;return c!==r&&s.push(i.slice(c,r)),s},B_=function(i,e,t){t||(t={});var n,s,r,a,l,c,d,h=[],p=[h],v=t.textIndent||0,m=0,E=0,S=i.split(" "),N=p0.apply(this,[" ",t])[0];if(c=t.lineIndent===-1?S[0].length+2:t.lineIndent||0){var C=Array(c).join(" "),P=[];S.map(function(O){(O=O.split(/\s*\n/)).length>1?P=P.concat(O.map(function(q,G){return(G&&q.length?`
`:"")+q})):P.push(O[0])}),S=P,c=D_.apply(this,[C,t])}for(r=0,a=S.length;r<a;r++){var L=0;if(n=S[r],c&&n[0]==`
`&&(n=n.substr(1),L=1),v+m+(E=(s=p0.apply(this,[n,t])).reduce(function(O,q){return O+q},0))>e||L){if(E>e){for(l=O_.apply(this,[n,s,e-(v+m),e]),h.push(l.shift()),h=[l.pop()];l.length;)p.push([l.shift()]);E=s.slice(n.length-(h[0]?h[0].length:0)).reduce(function(O,q){return O+q},0)}else h=[n];p.push(h),v=E+c,m=N}else h.push(n),v+=m+E,m=N}return d=c?function(O,q){return(q?C:"")+O.join(" ")}:function(O){return O.join(" ")},p.map(d)},Rd.splitTextToSize=function(i,e,t){var n,s=(t=t||{}).fontSize||this.internal.getFontSize(),r=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var p=this.internal.getFont(h.fontName,h.fontStyle),v="Unicode";return p.metadata[v]?{widths:p.metadata[v].widths||{0:1},kerning:p.metadata[v].kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);n=Array.isArray(i)?i:String(i).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/s;r.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/s:0,r.lineIndent=t.lineIndent;var l,c,d=[];for(l=0,c=n.length;l<c;l++)d=d.concat(B_.apply(this,[n[l],a,r]));return d},(function(i){i.__fontmetrics__=i.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",n={},s={},r=0;r<16;r++)n[t[r]]=e[r],s[e[r]]=t[r];var a=function(v){return"0x"+parseInt(v,10).toString(16)},l=i.__fontmetrics__.compress=function(v){var m,E,S,N,C=["{"];for(var P in v){if(m=v[P],isNaN(parseInt(P,10))?E="'"+P+"'":(P=parseInt(P,10),E=(E=a(P).slice(2)).slice(0,-1)+s[E.slice(-1)]),typeof m=="number")m<0?(S=a(m).slice(3),N="-"):(S=a(m).slice(2),N=""),S=N+S.slice(0,-1)+s[S.slice(-1)];else{if(Fn(m)!=="object")throw new Error("Don't know what to do with value type "+Fn(m)+".");S=l(m)}C.push(E+S)}return C.push("}"),C.join("")},c=i.__fontmetrics__.uncompress=function(v){if(typeof v!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,E,S,N,C={},P=1,L=C,O=[],q="",G="",W=v.length-1,K=1;K<W;K+=1)(N=v[K])=="'"?m?(S=m.join(""),m=void 0):m=[]:m?m.push(N):N=="{"?(O.push([L,S]),L={},S=void 0):N=="}"?((E=O.pop())[0][E[1]]=L,S=void 0,L=E[0]):N=="-"?P=-1:S===void 0?n.hasOwnProperty(N)?(q+=n[N],S=parseInt(q,16)*P,P=1,q=""):q+=N:n.hasOwnProperty(N)?(G+=n[N],L[S]=parseInt(G,16)*P,P=1,S=void 0,G=""):G+=N;return C},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},p={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};i.events.push(["addFont",function(v){var m=v.font,E=p.Unicode[m.postScriptName];E&&(m.metadata.Unicode={},m.metadata.Unicode.widths=E.widths,m.metadata.Unicode.kerning=E.kerning);var S=h.Unicode[m.postScriptName];S&&(m.metadata.Unicode.encoding=S,m.encoding=S.codePages[0])}])})(_t.API),(function(i){var e=function(t){for(var n=t.length,s=new Uint8Array(n),r=0;r<n;r++)s[r]=t.charCodeAt(r);return s};i.API.events.push(["addFont",function(t){var n=void 0,s=t.font,r=t.instance;if(!s.isStandardFont){if(r===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(n=r.existsFileInVFS(s.postScriptName)===!1?r.loadFile(s.postScriptName):r.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(a,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e(T0(l)),a.metadata=i.API.TTFFont.open(l),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(s,n)}}])})(_t),_t.API.addSvgAsImage=function(i,e,t,n,s,r,a,l){if(isNaN(e)||isNaN(t))throw Jn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(s))throw Jn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=s;var d=c.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,c.width,c.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return(Ht.canvg?Promise.resolve(Ht.canvg):i1(()=>import("./index.es-CiDiqv8a.js"),[])).catch(function(v){return Promise.reject(new Error("Could not load canvg: "+v))}).then(function(v){return v.default?v.default:v}).then(function(v){return v.fromString(d,i,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(h)}).then(function(){p.addImage(c.toDataURL("image/jpeg",1),e,t,n,s,a,l)})},_t.API.putTotalPages=function(i){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(i,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(i,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var s=0;s<this.internal.pages[n].length;s++)this.internal.pages[n][s]=this.internal.pages[n][s].replace(e,t);return this},_t.API.viewerPreferences=function(i,e){var t;i=i||{},e=e||!1;var n,s,r,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(a),c=[],d=0,h=0,p=0;function v(E,S){var N,C=!1;for(N=0;N<E.length;N+=1)E[N]===S&&(C=!0);return C}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,i==="reset"||e===!0){var m=l.length;for(p=0;p<m;p+=1)t[l[p]].value=t[l[p]].defaultValue,t[l[p]].explicitSet=!1}if(Fn(i)==="object"){for(s in i)if(r=i[s],v(l,s)&&r!==void 0){if(t[s].type==="boolean"&&typeof r=="boolean")t[s].value=r;else if(t[s].type==="name"&&v(t[s].valueSet,r))t[s].value=r;else if(t[s].type==="integer"&&Number.isInteger(r))t[s].value=r;else if(t[s].type==="array"){for(d=0;d<r.length;d+=1)if(n=!0,r[d].length===1&&typeof r[d][0]=="number")c.push(String(r[d]-1));else if(r[d].length>1){for(h=0;h<r[d].length;h+=1)typeof r[d][h]!="number"&&(n=!1);n===!0&&c.push([r[d][0]-1,r[d][1]-1].join(" "))}t[s].value="["+c.join(" ")+"]"}else t[s].value=t[s].defaultValue;t[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var E,S=[];for(E in t)t[E].explicitSet===!0&&(t[E].type==="name"?S.push("/"+E+" /"+t[E].value):S.push("/"+E+" "+t[E].value));S.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+S.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(i){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),r=unescape(encodeURIComponent(n)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=r.length+a.length+l.length+s.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(s+r+a+l+c),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};i.addMetadata=function(n,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(_t.API),(function(i){var e=i.API,t=e.pdfEscape16=function(r,a){for(var l,c=a.metadata.Unicode.widths,d=["","0","00","000","0000"],h=[""],p=0,v=r.length;p<v;++p){if(l=a.metadata.characterToGlyph(r.charCodeAt(p)),a.metadata.glyIdsUsed.push(l),a.metadata.toUnicode[l]=r.charCodeAt(p),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(a.metadata.widthOfGlyph(l),10)])),l=="0")return h.join("");l=l.toString(16),h.push(d[4-l.length],l)}return h.join("")},n=function(r){var a,l,c,d,h,p,v;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],p=0,v=(l=Object.keys(r).sort(function(m,E){return m-E})).length;p<v;p++)a=l[p],c.length>=100&&(h+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),r[a]!==void 0&&r[a]!==null&&typeof r[a].toString=="function"&&(d=("0000"+r[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),c.push("<"+a+"><"+d+">"));return c.length&&(h+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),h+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(r){(function(a){var l=a.font,c=a.out,d=a.newObject,h=a.putStream;if(l.metadata instanceof i.API.TTFFont&&l.encoding==="Identity-H"){for(var p=l.metadata.Unicode.widths,v=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),m="",E=0;E<v.length;E++)m+=String.fromCharCode(v[E]);var S=d();h({data:m,addLength1:!0,objectId:S}),c("endobj");var N=d();h({data:n(l.metadata.toUnicode),addLength1:!0,objectId:N}),c("endobj");var C=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Bd(l.fontName)),c("/FontFile2 "+S+" 0 R"),c("/FontBBox "+i.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var P=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+Bd(l.fontName)),c("/FontDescriptor "+C+" 0 R"),c("/W "+i.API.PDFObject.convert(p)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+N+" 0 R"),c("/BaseFont /"+Bd(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+P+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(r)}]),e.events.push(["putFont",function(r){(function(a){var l=a.font,c=a.out,d=a.newObject,h=a.putStream;if(l.metadata instanceof i.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var p=l.metadata.rawData,v="",m=0;m<p.length;m++)v+=String.fromCharCode(p[m]);var E=d();h({data:v,addLength1:!0,objectId:E}),c("endobj");var S=d();h({data:n(l.metadata.toUnicode),addLength1:!0,objectId:S}),c("endobj");var N=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+E+" 0 R"),c("/Flags 96"),c("/FontBBox "+i.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+Bd(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var C=0;C<l.metadata.hmtx.widths.length;C++)l.metadata.hmtx.widths[C]=parseInt(l.metadata.hmtx.widths[C]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+S+" 0 R/BaseFont/"+Bd(l.fontName)+"/FontDescriptor "+N+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+i.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(r)}]);var s=function(r){var a,l=r.text||"",c=r.x,d=r.y,h=r.options||{},p=r.mutex||{},v=p.pdfEscape,m=p.activeFontKey,E=p.fonts,S=m,N="",C=0,P="",L=E[S].encoding;if(E[S].encoding!=="Identity-H")return{text:l,x:c,y:d,options:h,mutex:p};for(P=l,S=m,Array.isArray(l)&&(P=l[0]),C=0;C<P.length;C+=1)E[S].metadata.hasOwnProperty("cmap")&&(a=E[S].metadata.cmap.unicode.codeMap[P[C].charCodeAt(0)]),a||P[C].charCodeAt(0)<256&&E[S].metadata.hasOwnProperty("Unicode")?N+=P[C]:N+="";var O="";return parseInt(S.slice(1))<14||L==="WinAnsiEncoding"?O=v(N,S).split("").map(function(q){return q.charCodeAt(0).toString(16)}).join(""):L==="Identity-H"&&(O=t(N,E[S])),p.isHex=!0,{text:O,x:c,y:d,options:h,mutex:p}};e.events.push(["postProcessText",function(r){var a=r.text||"",l=[],c={text:a,x:r.x,y:r.y,options:r.options,mutex:r.mutex};if(Array.isArray(a)){var d=0;for(d=0;d<a.length;d+=1)Array.isArray(a[d])&&a[d].length===3?l.push([s(Object.assign({},c,{text:a[d][0]})).text,a[d][1],a[d][2]]):l.push(s(Object.assign({},c,{text:a[d]})).text);r.text=l}else r.text=s(Object.assign({},c,{text:a})).text}])})(_t),(function(i){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};i.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},i.addFileToVFS=function(t,n){return e.call(this),this.internal.vFS[t]=n,this},i.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(_t.API),(function(i){i.__bidiEngine__=i.prototype.__bidiEngine__=function(n){var s,r,a,l,c,d,h,p=e,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],E={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},S={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},N=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],C=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),P=!1,L=0;this.__bidiEngine__={};var O=function(B){var H=B.charCodeAt(),se=H>>8,ie=S[se];return ie!==void 0?p[256*ie+(255&H)]:se===252||se===253?"AL":C.test(se)?"L":se===8?"R":"N"},q=function(B){for(var H,se=0;se<B.length;se++){if((H=O(B.charAt(se)))==="L")return!1;if(H==="R")return!0}return!1},G=function(B,H,se,ie){var ye,X,ue,de,we=H[ie];switch(we){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":P=!1;break;case"N":case"AN":break;case"EN":P&&(we="AN");break;case"AL":P=!0,we="R";break;case"WS":case"BN":we="N";break;case"CS":ie<1||ie+1>=H.length||(ye=se[ie-1])!=="EN"&&ye!=="AN"||(X=H[ie+1])!=="EN"&&X!=="AN"?we="N":P&&(X="AN"),we=X===ye?X:"N";break;case"ES":we=(ye=ie>0?se[ie-1]:"B")==="EN"&&ie+1<H.length&&H[ie+1]==="EN"?"EN":"N";break;case"ET":if(ie>0&&se[ie-1]==="EN"){we="EN";break}if(P){we="N";break}for(ue=ie+1,de=H.length;ue<de&&H[ue]==="ET";)ue++;we=ue<de&&H[ue]==="EN"?"EN":"N";break;case"NSM":if(a&&!l){for(de=H.length,ue=ie+1;ue<de&&H[ue]==="NSM";)ue++;if(ue<de){var Oe=B[ie],Q=Oe>=1425&&Oe<=2303||Oe===64286;if(ye=H[ue],Q&&(ye==="R"||ye==="AL")){we="R";break}}}we=ie<1||(ye=H[ie-1])==="B"?"N":se[ie-1];break;case"B":P=!1,s=!0,we=L;break;case"S":r=!0,we="N"}return we},W=function(B,H,se){var ie=B.split("");return se&&K(ie,se,{hiLevel:L}),ie.reverse(),H&&H.reverse(),ie.join("")},K=function(B,H,se){var ie,ye,X,ue,de,we=-1,Oe=B.length,Q=0,M=[],V=L?m:v,Z=[];for(P=!1,s=!1,r=!1,ye=0;ye<Oe;ye++)Z[ye]=O(B[ye]);for(X=0;X<Oe;X++){if(de=Q,M[X]=G(B,Z,M,X),ie=240&(Q=V[de][E[M[X]]]),Q&=15,H[X]=ue=V[Q][5],ie>0)if(ie===16){for(ye=we;ye<X;ye++)H[ye]=1;we=-1}else we=-1;if(V[Q][6])we===-1&&(we=X);else if(we>-1){for(ye=we;ye<X;ye++)H[ye]=ue;we=-1}Z[X]==="B"&&(H[X]=0),se.hiLevel|=ue}r&&(function(le,ce,he){for(var Ae=0;Ae<he;Ae++)if(le[Ae]==="S"){ce[Ae]=L;for(var Ee=Ae-1;Ee>=0&&le[Ee]==="WS";Ee--)ce[Ee]=L}})(Z,H,Oe)},j=function(B,H,se,ie,ye){if(!(ye.hiLevel<B)){if(B===1&&L===1&&!s)return H.reverse(),void(se&&se.reverse());for(var X,ue,de,we,Oe=H.length,Q=0;Q<Oe;){if(ie[Q]>=B){for(de=Q+1;de<Oe&&ie[de]>=B;)de++;for(we=Q,ue=de-1;we<ue;we++,ue--)X=H[we],H[we]=H[ue],H[ue]=X,se&&(X=se[we],se[we]=se[ue],se[ue]=X);Q=de}Q++}}},ee=function(B,H,se){var ie=B.split(""),ye={hiLevel:L};return se||(se=[]),K(ie,se,ye),(function(X,ue,de){if(de.hiLevel!==0&&h)for(var we,Oe=0;Oe<X.length;Oe++)ue[Oe]===1&&(we=N.indexOf(X[Oe]))>=0&&(X[Oe]=N[we+1])})(ie,se,ye),j(2,ie,H,se,ye),j(1,ie,H,se,ye),ie.join("")};return this.__bidiEngine__.doBidiReorder=function(B,H,se){if((function(ye,X){if(X)for(var ue=0;ue<ye.length;ue++)X[ue]=ue;l===void 0&&(l=q(ye)),d===void 0&&(d=q(ye))})(B,H),a||!c||d)if(a&&c&&l^d)L=l?1:0,B=W(B,H,se);else if(!a&&c&&d)L=l?1:0,B=ee(B,H,se),B=W(B,H);else if(!a||l||c||d){if(a&&!c&&l^d)B=W(B,H),l?(L=0,B=ee(B,H,se)):(L=1,B=ee(B,H,se),B=W(B,H));else if(a&&l&&!c&&d)L=1,B=ee(B,H,se),B=W(B,H);else if(!a&&!c&&l^d){var ie=h;l?(L=1,B=ee(B,H,se),L=0,h=!1,B=ee(B,H,se),h=ie):(L=0,B=ee(B,H,se),B=W(B,H),L=1,h=!1,B=ee(B,H,se),h=ie,B=W(B,H))}}else L=0,B=ee(B,H,se);else L=l?1:0,B=ee(B,H,se);return B},this.__bidiEngine__.setOptions=function(B){B&&(a=B.isInputVisual,c=B.isOutputVisual,l=B.isInputRtl,d=B.isOutputRtl,h=B.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new i.__bidiEngine__({isInputVisual:!0});i.API.events.push(["postProcessText",function(n){var s=n.text;n.x,n.y;var r=n.options||{};n.mutex,r.lang;var a=[];if(r.isInputVisual=typeof r.isInputVisual!="boolean"||r.isInputVisual,t.setOptions(r),Object.prototype.toString.call(s)==="[object Array]"){var l=0;for(a=[],l=0;l<s.length;l+=1)Object.prototype.toString.call(s[l])==="[object Array]"?a.push([t.doBidiReorder(s[l][0]),s[l][1],s[l][2]]):a.push([t.doBidiReorder(s[l])]);n.text=a}else n.text=t.doBidiReorder(s);t.setOptions({isInputVisual:!0})}])})(_t),_t.API.TTFFont=(function(){function i(e){var t;if(this.rawData=e,t=this.contents=new Tu(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new gF(this),this.registerTTF()}return i.open=function(e){return new i(e)},i.prototype.parse=function(){return this.directory=new tF(this.contents),this.head=new iF(this),this.name=new lF(this),this.cmap=new lT(this),this.toUnicode={},this.hhea=new sF(this),this.maxp=new uF(this),this.hmtx=new cF(this),this.post=new aF(this),this.os2=new rF(this),this.loca=new pF(this),this.glyf=new dF(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},i.prototype.registerTTF=function(){var e,t,n,s,r;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,l,c,d;for(d=[],a=0,l=(c=this.bbox).length;a<l;a++)e=c[a],d.push(Math.round(e*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(n=255&(s=this.post.italic_angle),32768&(t=s>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(r=this.familyClass)===1||r===2||r===3||r===4||r===5||r===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},i.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},i.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},i.prototype.widthOfString=function(e,t,n){var s,r,a,l;for(a=0,r=0,l=(e=""+e).length;0<=l?r<l:r>l;r=0<=l?++r:--r)s=e.charCodeAt(r),a+=this.widthOfGlyph(this.characterToGlyph(s))+n*(1e3/t)||0;return a*(t/1e3)},i.prototype.lineHeight=function(e,t){var n;return t==null&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},i})();var fo,Tu=(function(){function i(e){this.data=e??[],this.pos=0,this.length=this.data.length}return i.prototype.readByte=function(){return this.data[this.pos++]},i.prototype.writeByte=function(e){return this.data[this.pos++]=e},i.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},i.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},i.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},i.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},i.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},i.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},i.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},i.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},i.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},i.prototype.writeString=function(e){var t,n,s;for(s=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)s.push(this.writeByte(e.charCodeAt(t)));return s},i.prototype.readShort=function(){return this.readInt16()},i.prototype.writeShort=function(e){return this.writeInt16(e)},i.prototype.readLongLong=function(){var e,t,n,s,r,a,l,c;return e=this.readByte(),t=this.readByte(),n=this.readByte(),s=this.readByte(),r=this.readByte(),a=this.readByte(),l=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^s)+16777216*(255^r)+65536*(255^a)+256*(255^l)+(255^c)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*s+16777216*r+65536*a+256*l+c},i.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},i.prototype.readInt=function(){return this.readInt32()},i.prototype.writeInt=function(e){return this.writeInt32(e)},i.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},i.prototype.write=function(e){var t,n,s,r;for(r=[],n=0,s=e.length;n<s;n++)t=e[n],r.push(this.writeByte(t));return r},i})(),tF=(function(){var i;function e(t){var n,s,r;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},s=0,r=this.tableCount;0<=r?s<r:s>r;s=0<=r?++s:--s)n={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(t){var n,s,r,a,l,c,d,h,p,v,m,E,S;for(S in m=Object.keys(t).length,c=Math.log(2),p=16*Math.floor(Math.log(m)/c),a=Math.floor(p/c),h=16*m-p,(s=new Tu).writeInt(this.scalarType),s.writeShort(m),s.writeShort(p),s.writeShort(a),s.writeShort(h),r=16*m,d=s.pos+r,l=null,E=[],t)for(v=t[S],s.writeString(S),s.writeInt(i(v)),s.writeInt(d),s.writeInt(v.length),E=E.concat(v),S==="head"&&(l=d),d+=v.length;d%4;)E.push(0),d++;return s.write(E),n=2981146554-i(s.data),s.pos=l+8,s.writeUInt32(n),s.data},i=function(t){var n,s,r,a;for(t=uT.call(t);t.length%4;)t.push(0);for(r=new Tu(t),s=0,n=0,a=t.length;n<a;n=n+=4)s+=r.readUInt32();return 4294967295&s},e})(),nF={}.hasOwnProperty,Go=function(i,e){for(var t in e)nF.call(e,t)&&(i[t]=e[t]);function n(){this.constructor=i}return n.prototype=e.prototype,i.prototype=new n,i.__super__=e.prototype,i};fo=(function(){function i(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return i.prototype.parse=function(){},i.prototype.encode=function(){},i.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},i})();var iF=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Go(i,fo),i.prototype.tag="head",i.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},i.prototype.encode=function(e){var t;return(t=new Tu).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},i})(),$_=(function(){function i(e,t){var n,s,r,a,l,c,d,h,p,v,m,E,S,N,C,P,L;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(m=e.readUInt16(),v=m/2,e.pos+=6,r=(function(){var O,q;for(q=[],c=O=0;0<=v?O<v:O>v;c=0<=v?++O:--O)q.push(e.readUInt16());return q})(),e.pos+=2,S=(function(){var O,q;for(q=[],c=O=0;0<=v?O<v:O>v;c=0<=v?++O:--O)q.push(e.readUInt16());return q})(),d=(function(){var O,q;for(q=[],c=O=0;0<=v?O<v:O>v;c=0<=v?++O:--O)q.push(e.readUInt16());return q})(),h=(function(){var O,q;for(q=[],c=O=0;0<=v?O<v:O>v;c=0<=v?++O:--O)q.push(e.readUInt16());return q})(),s=(this.length-e.pos+this.offset)/2,l=(function(){var O,q;for(q=[],c=O=0;0<=s?O<s:O>s;c=0<=s?++O:--O)q.push(e.readUInt16());return q})(),c=C=0,L=r.length;C<L;c=++C)for(N=r[c],n=P=E=S[c];E<=N?P<=N:P>=N;n=E<=N?++P:--P)h[c]===0?a=n+d[c]:(a=l[h[c]/2+(n-E)-(v-c)]||0)!==0&&(a+=d[c]),this.codeMap[n]=65535&a}e.pos=p}return i.encode=function(e,t){var n,s,r,a,l,c,d,h,p,v,m,E,S,N,C,P,L,O,q,G,W,K,j,ee,B,H,se,ie,ye,X,ue,de,we,Oe,Q,M,V,Z,le,ce,he,Ae,Ee,Ie,He,Ye;switch(ie=new Tu,a=Object.keys(e).sort(function(Ze,st){return Ze-st}),t){case"macroman":for(S=0,N=(function(){var Ze=[];for(E=0;E<256;++E)Ze.push(0);return Ze})(),P={0:0},r={},ye=0,we=a.length;ye<we;ye++)P[Ee=e[s=a[ye]]]==null&&(P[Ee]=++S),r[s]={old:e[s],new:P[e[s]]},N[s]=P[e[s]];return ie.writeUInt16(1),ie.writeUInt16(0),ie.writeUInt32(12),ie.writeUInt16(0),ie.writeUInt16(262),ie.writeUInt16(0),ie.write(N),{charMap:r,subtable:ie.data,maxGlyphID:S+1};case"unicode":for(H=[],p=[],L=0,P={},n={},C=d=null,X=0,Oe=a.length;X<Oe;X++)P[q=e[s=a[X]]]==null&&(P[q]=++L),n[s]={old:q,new:P[q]},l=P[q]-s,C!=null&&l===d||(C&&p.push(C),H.push(s),d=l),C=s;for(C&&p.push(C),p.push(65535),H.push(65535),ee=2*(j=H.length),K=2*Math.pow(Math.log(j)/Math.LN2,2),v=Math.log(K/2)/Math.LN2,W=2*j-K,c=[],G=[],m=[],E=ue=0,Q=H.length;ue<Q;E=++ue){if(B=H[E],h=p[E],B===65535){c.push(0),G.push(0);break}if(B-(se=n[B].new)>=32768)for(c.push(0),G.push(2*(m.length+j-E)),s=de=B;B<=h?de<=h:de>=h;s=B<=h?++de:--de)m.push(n[s].new);else c.push(se-B),G.push(0)}for(ie.writeUInt16(3),ie.writeUInt16(1),ie.writeUInt32(12),ie.writeUInt16(4),ie.writeUInt16(16+8*j+2*m.length),ie.writeUInt16(0),ie.writeUInt16(ee),ie.writeUInt16(K),ie.writeUInt16(v),ie.writeUInt16(W),he=0,M=p.length;he<M;he++)s=p[he],ie.writeUInt16(s);for(ie.writeUInt16(0),Ae=0,V=H.length;Ae<V;Ae++)s=H[Ae],ie.writeUInt16(s);for(Ie=0,Z=c.length;Ie<Z;Ie++)l=c[Ie],ie.writeUInt16(l);for(He=0,le=G.length;He<le;He++)O=G[He],ie.writeUInt16(O);for(Ye=0,ce=m.length;Ye<ce;Ye++)S=m[Ye],ie.writeUInt16(S);return{charMap:n,subtable:ie.data,maxGlyphID:L+1}}},i})(),lT=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Go(i,fo),i.prototype.tag="cmap",i.prototype.parse=function(e){var t,n,s;for(e.pos=this.offset,this.version=e.readUInt16(),s=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=s?n<s:n>s;n=0<=s?++n:--n)t=new $_(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},i.encode=function(e,t){var n,s;return t==null&&(t="macroman"),n=$_.encode(e,t),(s=new Tu).writeUInt16(0),s.writeUInt16(1),n.table=s.data.concat(n.subtable),n},i})(),sF=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Go(i,fo),i.prototype.tag="hhea",i.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},i})(),rF=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Go(i,fo),i.prototype.tag="OS/2",i.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,n;for(n=[],t=0;t<10;++t)n.push(e.readByte());return n})(),this.charRange=(function(){var t,n;for(n=[],t=0;t<4;++t)n.push(e.readInt());return n})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,n;for(n=[],t=0;t<2;t=++t)n.push(e.readInt());return n})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},i})(),aF=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Go(i,fo),i.prototype.tag="post",i.prototype.parse=function(e){var t,n,s;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var r;for(n=e.readUInt16(),this.glyphNameIndex=[],r=0;0<=n?r<n:r>n;r=0<=n?++r:--r)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],s=[];e.pos<this.offset+this.length;)t=e.readByte(),s.push(this.names.push(e.readString(t)));return s;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var a,l,c;for(c=[],r=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;r=0<=l?++a:--a)c.push(e.readUInt32());return c}).call(this)}},i})(),oF=function(i,e){this.raw=i,this.length=i.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},lF=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Go(i,fo),i.prototype.tag="name",i.prototype.parse=function(e){var t,n,s,r,a,l,c,d,h,p,v;for(e.pos=this.offset,e.readShort(),t=e.readShort(),l=e.readShort(),n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+l+e.readShort()});for(c={},r=h=0,p=n.length;h<p;r=++h)s=n[r],e.pos=s.offset,d=e.readString(s.length),a=new oF(d,s),c[v=s.nameID]==null&&(c[v]=[]),c[s.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},i})(),uF=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Go(i,fo),i.prototype.tag="maxp",i.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},i})(),cF=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Go(i,fo),i.prototype.tag="hmtx",i.prototype.parse=function(e){var t,n,s,r,a,l,c;for(e.pos=this.offset,this.metrics=[],t=0,l=this.file.hhea.numberOfMetrics;0<=l?t<l:t>l;t=0<=l?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var d,h;for(h=[],t=d=0;0<=s?d<s:d>s;t=0<=s?++d:--d)h.push(e.readInt16());return h})(),this.widths=(function(){var d,h,p,v;for(v=[],d=0,h=(p=this.metrics).length;d<h;d++)r=p[d],v.push(r.advance);return v}).call(this),n=this.widths[this.widths.length-1],c=[],t=a=0;0<=s?a<s:a>s;t=0<=s?++a:--a)c.push(this.widths.push(n));return c},i.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},i})(),uT=[].slice,dF=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Go(i,fo),i.prototype.tag="glyf",i.prototype.parse=function(){return this.cache={}},i.prototype.glyphFor=function(e){var t,n,s,r,a,l,c,d,h,p;return e in this.cache?this.cache[e]:(r=this.file.loca,t=this.file.contents,n=r.indexOf(e),(s=r.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+n,a=(l=new Tu(t.read(s))).readShort(),d=l.readShort(),p=l.readShort(),c=l.readShort(),h=l.readShort(),this.cache[e]=a===-1?new fF(l,d,p,c,h):new hF(l,a,d,p,c,h),this.cache[e]))},i.prototype.encode=function(e,t,n){var s,r,a,l,c;for(a=[],r=[],l=0,c=t.length;l<c;l++)s=e[t[l]],r.push(a.length),s&&(a=a.concat(s.encode(n)));return r.push(a.length),{table:a,offsets:r}},i})(),hF=(function(){function i(e,t,n,s,r,a){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=s,this.xMax=r,this.yMax=a,this.compound=!1}return i.prototype.encode=function(){return this.raw.data},i})(),fF=(function(){function i(e,t,n,s,r){var a,l;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=s,this.yMax=r,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;l=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&l;)a.pos+=1&l?4:2,128&l?a.pos+=8:64&l?a.pos+=4:8&l&&(a.pos+=2)}return i.prototype.encode=function(){var e,t,n;for(t=new Tu(uT.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},i})(),pF=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Go(i,fo),i.prototype.tag="loca",i.prototype.parse=function(e){var t,n;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var s,r;for(r=[],n=0,s=this.length;n<s;n+=2)r.push(2*e.readUInt16());return r}).call(this):(function(){var s,r;for(r=[],n=0,s=this.length;n<s;n+=4)r.push(e.readUInt32());return r}).call(this)},i.prototype.indexOf=function(e){return this.offsets[e]},i.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},i.prototype.encode=function(e,t){for(var n=new Uint32Array(this.offsets.length),s=0,r=0,a=0;a<n.length;++a)if(n[a]=s,r<t.length&&t[r]==a){++r,n[a]=s;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(s+=c)}for(var d=new Array(4*n.length),h=0;h<n.length;++h)d[4*h+3]=255&n[h],d[4*h+2]=(65280&n[h])>>8,d[4*h+1]=(16711680&n[h])>>16,d[4*h]=(4278190080&n[h])>>24;return d},i})(),gF=(function(){function i(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return i.prototype.generateCmap=function(){var e,t,n,s,r;for(t in s=this.font.cmap.tables[0].codeMap,e={},r=this.subset)n=r[t],e[t]=s[n];return e},i.prototype.glyphsFor=function(e){var t,n,s,r,a,l,c;for(s={},a=0,l=e.length;a<l;a++)s[r=e[a]]=this.font.glyf.glyphFor(r);for(r in t=[],s)(n=s[r])!=null&&n.compound&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(r in c=this.glyphsFor(t))n=c[r],s[r]=n;return s},i.prototype.encode=function(e,t){var n,s,r,a,l,c,d,h,p,v,m,E,S,N,C;for(s in n=lT.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),m={0:0},C=n.charMap)m[(c=C[s]).old]=c.new;for(E in v=n.maxGlyphID,a)E in m||(m[E]=v++);return h=(function(P){var L,O;for(L in O={},P)O[P[L]]=L;return O})(m),p=Object.keys(h).sort(function(P,L){return P-L}),S=(function(){var P,L,O;for(O=[],P=0,L=p.length;P<L;P++)l=p[P],O.push(h[l]);return O})(),r=this.font.glyf.encode(a,S,m),d=this.font.loca.encode(r.offsets,S),N={cmap:this.font.cmap.raw(),glyf:r.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(N["OS/2"]=this.font.os2.raw()),this.font.directory.encode(N)},i})();_t.API.PDFObject=(function(){var i;function e(){}return i=function(t,n){return(Array(n+1).join("0")+t).slice(-n)},e.convert=function(t){var n,s,r,a;if(Array.isArray(t))return"["+(function(){var l,c,d;for(d=[],l=0,c=t.length;l<c;l++)n=t[l],d.push(e.convert(n));return d})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+i(t.getUTCFullYear(),4)+i(t.getUTCMonth(),2)+i(t.getUTCDate(),2)+i(t.getUTCHours(),2)+i(t.getUTCMinutes(),2)+i(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(s in r=["<<"],t)a=t[s],r.push("/"+s+" "+e.convert(a));return r.push(">>"),r.join(`
`)}return""+t},e})();function mF({transcriptionText:i,transcriptionId:e}){const[t,n]=me.useState([]),[s,r]=me.useState(!1),[a,l]=me.useState(""),[c,d]=me.useState(!1),h=me.useRef(null),p=me.useRef(null);me.useEffect(()=>{let N=!1;return(async()=>{try{const P=new yf({apiKey:"AIzaSyAsUHH0VyT_kYUGinuA-g0V2yVucmXjuHs"});p.current=P.chats.create({model:"gemini-2.5-flash",config:{systemInstruction:`Eres un asistente inteligente experto en analizar documentos. 
                        Tu tarea es responder preguntas basndote EXCLUSIVAMENTE en la siguiente transcripcin del documento proporcionada por el usuario.
                        Si la respuesta no est en el texto, indcalo claramente. Se amable y preciso.
                        
                        CONTEXTO DEL DOCUMENTO:
                        ${i}`}});const L=await ao.getDocumentChat(e);if(N)return;L&&L.length>0?n(L):n([{id:"init",role:"model",text:"Hola, he analizado el documento. Qu informacin especfica necesitas encontrar?"}]),r(!0)}catch(P){console.error("Failed to initialize chat session",P),N||n([{id:"err",role:"error",text:"Error al inicializar el chat. Verifica tu conexin."}])}})(),()=>{N=!0}},[e,i]);const v=()=>{h.current?.scrollIntoView({behavior:"smooth"})};me.useEffect(()=>{v()},[t]),me.useEffect(()=>{!e||!s||ao.saveDocumentChat(e,t).catch(N=>console.error("Error saving chat history",N))},[t,e,s]);const m=async()=>{if(!a.trim()||!p.current||c)return;const N={id:Date.now().toString(),role:"user",text:a};n(C=>[...C,N]),l(""),d(!0);try{const C=await p.current.sendMessage({message:a}),P={id:(Date.now()+1).toString(),role:"model",text:C.text||"No pude generar una respuesta."};n(L=>[...L,P])}catch(C){console.error("Error sending message:",C),n(P=>[...P,{id:Date.now().toString(),role:"error",text:"Ocurri un error al conectar con la IA. Por favor intenta de nuevo."}])}finally{d(!1)}},E=N=>{N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),m())},S=["Resume este documento","Cules son los puntos clave?","Identifica las fechas importantes","Explica la conclusin principal"];return x.jsxs("div",{className:"flex flex-col h-[600px] bg-slate-50 dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-700 overflow-hidden relative shadow-inner",children:[x.jsxs("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6 space-y-6",children:[t.length===0&&x.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center opacity-0 animate-fadeIn",style:{animationFillMode:"forwards"},children:[x.jsx("div",{className:"w-16 h-16 bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 flex items-center justify-center mb-4",children:x.jsx(lS,{className:"w-8 h-8 text-blue-500 dark:text-blue-300"})}),x.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-100",children:"Chat con tu Documento"}),x.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 max-w-xs mt-2 mb-8",children:"Haz preguntas especficas sobre el contenido de la transcripcin. La IA analizar el contexto por ti."}),x.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 w-full max-w-md",children:S.map((N,C)=>x.jsx("button",{onClick:()=>l(N),className:"text-xs text-left px-4 py-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl hover:border-blue-300 dark:hover:border-blue-400 hover:text-blue-600 dark:hover:text-blue-300 hover:shadow-sm transition-all text-slate-600 dark:text-slate-200 font-medium",children:N},C))})]}),t.map(N=>{const C=N.role==="user";return x.jsxs("div",{className:`flex gap-3 ${C?"justify-end":"justify-start"}`,children:[!C&&x.jsx("div",{className:"w-8 h-8 rounded-full bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 flex items-center justify-center shrink-0 mt-1 shadow-sm",children:x.jsx(Nl,{className:"w-4 h-4 text-purple-600 dark:text-purple-300"})}),x.jsx("div",{className:`max-w-[80%] px-5 py-3.5 text-sm leading-relaxed shadow-sm whitespace-pre-wrap ${C?"bg-blue-600 text-white rounded-2xl rounded-tr-none":"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-100 rounded-2xl rounded-tl-none"}`,children:N.text}),C&&x.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/40 border border-blue-200 dark:border-blue-700 flex items-center justify-center shrink-0 mt-1",children:x.jsx(Lk,{className:"w-4 h-4 text-blue-700 dark:text-blue-300"})})]},N.id)}),c&&x.jsxs("div",{className:"flex gap-3 justify-start",children:[x.jsx("div",{className:"w-8 h-8 rounded-full bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 flex items-center justify-center shrink-0 mt-1 shadow-sm",children:x.jsx(Nl,{className:"w-4 h-4 text-purple-600 dark:text-purple-300"})}),x.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 px-4 py-3 rounded-2xl rounded-tl-none shadow-sm flex items-center gap-1.5",children:[x.jsx("div",{className:"w-2 h-2 bg-slate-400 dark:bg-slate-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),x.jsx("div",{className:"w-2 h-2 bg-slate-400 dark:bg-slate-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),x.jsx("div",{className:"w-2 h-2 bg-slate-400 dark:bg-slate-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]}),x.jsx("div",{ref:h})]}),x.jsxs("div",{className:"bg-white dark:bg-slate-900 border-t border-slate-200 dark:border-slate-800 p-4",children:[x.jsxs("div",{className:"relative flex items-end gap-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-2xl p-2 focus-within:ring-2 focus-within:ring-blue-500/20 focus-within:border-blue-400 dark:focus-within:border-blue-500 transition-all shadow-sm",children:[x.jsx("textarea",{className:"w-full bg-transparent border-none text-slate-800 dark:text-slate-100 text-sm px-3 py-2.5 focus:ring-0 outline-none resize-none max-h-32 placeholder:text-slate-400 dark:placeholder:text-slate-500",placeholder:"Pregunta algo sobre el documento...",value:a,onChange:N=>l(N.target.value),onKeyDown:E,disabled:c,rows:1,style:{minHeight:"44px"}}),x.jsx("button",{className:"p-2.5 rounded-xl bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors mb-0.5",onClick:m,disabled:c||!a.trim(),title:"Enviar mensaje",children:c?x.jsx("span",{className:"block w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):x.jsx(kk,{className:"w-5 h-5 -rotate-45 translate-x-0.5 -translate-y-0.5"})})]}),x.jsx("p",{className:"text-[10px] text-center text-slate-400 dark:text-slate-500 mt-2",children:"La IA puede cometer errores. Verifica la informacin importante."})]})]})}function vF({item:i,onBack:e,onUpdateTranscription:t,onUpdateTags:n,prompts:s}){const[r,a]=me.useState("editor"),[l,c]=me.useState(!1),[d,h]=me.useState(null),[p,v]=me.useState(""),[m,E]=me.useState(!1),[S,N]=me.useState(null),[C,P]=me.useState(""),[L,O]=me.useState(i.tags||[]),[q,G]=me.useState([]),[W,K]=me.useState(!1),[j,ee]=me.useState(""),[B]=me.useState(!0),[H,se]=me.useState(!1),[ie,ye]=me.useState(!1),[X,ue]=me.useState(i.transcription.replace(/\n/g,"<br/>")),de=me.useRef(null),[we,Oe]=me.useState(!0),[Q,M]=me.useState(!1);me.useEffect(()=>{let Ge=i.transcription;if(!/<[a-z][\s\S]*>/i.test(Ge)){const Be=/^---\s*P[A]GINA\s+(\d+)\s*\(PDF Original:\s*(\d+)\)\s*---$/i;Ge=Ge.split(`
`).map(Ke=>{const Qe=Ke.trim().match(Be);if(Qe){const rt=Qe[1],Tt=Qe[2],zt=i.originalPageCount||"?";return`<div class="page-ref-banner text-[11px] font-semibold text-slate-700 dark:text-slate-200 bg-blue-50 dark:bg-slate-800 border border-blue-100 dark:border-slate-700 rounded-lg px-3 py-2 my-4">
  ${`Pgina ${rt} de ${i.pageCount} | [File Page ${Tt} de ${zt} REFERENCE  DO NOT CITE THIS NUMBER - for transcription reference only; not an official page number; do not use in citations, footnotes, bibliographies, or tables of contents]`}
</div>`}return Ke}).join(`
`).replace(/\n/g,"<br/>")}ue(Ge),de.current&&(de.current.innerHTML=Ge),O(i.tags||[])},[i.id,i.transcription,i.tags,i.pageCount,i.originalPageCount]),me.useEffect(()=>{r==="editor"&&de.current&&(de.current.innerHTML=X)},[r,X]);const V=Ge=>{const Be=Ge.currentTarget.innerHTML;ue(Be),Oe(!1)},Z=()=>{Q?M(!1):(M(!0),setTimeout(()=>{de.current?.focus()},0))},le=()=>{t(i.id,X),Oe(!0),M(!1)},ce=(Ge,Be=void 0)=>{document.execCommand(Ge,!1,Be),de.current?.focus()},he=()=>{if(!de.current){const Ge=document.createElement("DIV");return Ge.innerHTML=X,Ge.innerText||""}return de.current.innerText},Ae=async()=>{K(!0),G([]);try{const Ge=new yf({apiKey:"AIzaSyAsUHH0VyT_kYUGinuA-g0V2yVucmXjuHs"}),Le=he().substring(0,5e3),at=s.autoTagging.replace("[TRANSCRIPTION]",Le),Qe=(await Ge.models.generateContent({model:"gemini-2.5-flash",contents:at,config:{responseMimeType:"application/json",responseSchema:{type:Ai.ARRAY,items:{type:Ai.STRING}}}})).text;if(!Qe){console.error("Respuesta vaca de la IA al generar etiquetas"),alert("La IA no devolvi una respuesta vlida.");return}const rt=JSON.parse(Qe);if(Array.isArray(rt)){const Tt=rt.filter(zt=>!L.includes(zt));G(Tt),Tt.length===0&&alert("La IA no encontr etiquetas nuevas relevantes que no tengas ya.")}}catch(Ge){console.error("Error generating tags",Ge),alert("No se pudieron generar etiquetas automticamente.")}finally{K(!1)}},Ee=Ge=>{const Be=Ge.trim();if(!Be||L.includes(Be))return;const Le=[...L,Be];O(Le),n(i.id,Le),G(at=>at.filter(Ke=>Ke!==Be)),ee("")},Ie=Ge=>{const Be=L.filter(Le=>Le!==Ge);O(Be),n(i.id,Be)},He=Ge=>{Ge.key==="Enter"&&(Ge.preventDefault(),Ee(j))},Ye=()=>{const Ge=he(),Be=document.createElement("a"),Le=new Blob([Ge],{type:"text/plain"});Be.href=URL.createObjectURL(Le),Be.download=`${i.name}-transcription.txt`,document.body.appendChild(Be),Be.click(),document.body.removeChild(Be)},Ze=async()=>{const Ge=he();if(!Ge.trim()){alert("No hay contenido para exportar a PDF.");return}ye(!0);try{const Be=new _t({unit:"pt",format:"a4"}),Le=48,at=Be.internal.pageSize.getWidth(),Ke=Be.internal.pageSize.getHeight(),Qe=at-Le*2,rt=16,Tt=/^---\s*P[A]GINA\s+(\d+)\s*\(PDF Original:\s*(\d+)\)\s*---$/im,zt=/^\[Transcription Page \d+ \| File Page \d+ REFERENCE.*?\]$/i,At=[],tn=Ge.split(`
`);let Vt=1,ut=1,Pt=[];for(const tt of tn){const Pn=tt.match(Tt),bt=tt.trim().match(zt);Pn?(Pt.length>0&&(At.push({sequentialNum:Vt,pdfPageNum:ut,content:Pt.join(`
`).trim()}),Pt=[]),Vt=parseInt(Pn[1],10),ut=parseInt(Pn[2],10)):bt||Pt.push(tt)}if(Pt.length>0&&At.push({sequentialNum:Vt,pdfPageNum:ut,content:Pt.join(`
`).trim()}),At.length===0){alert("No se encontraron pginas en la transcripcin.");return}At.forEach((tt,Pn)=>{Pn>0&&Be.addPage();let bt=Le;Be.setFont("helvetica","bold"),Be.setFontSize(16),Be.setTextColor(0);const Ct=i.originalPageCount||At.length,Ft=i.pageCount||At.length;Be.text(`PGINA ${tt.sequentialNum} de ${Ft}`,Le,bt),bt+=20,Be.setFontSize(12),Be.setTextColor(80),Be.text(`(PDF Original: Pgina ${tt.pdfPageNum} de ${Ct})`,Le,bt),bt+=20,Be.setFontSize(8),Be.setFont("helvetica","normal"),Be.setTextColor(100);const nn=`[Transcription Page ${tt.sequentialNum} | File Page ${tt.pdfPageNum} REFERENCE  DO NOT CITE THIS NUMBER - for transcription reference only; not an official page number; do not use in citations, footnotes, bibliographies, or tables of contents]`;Be.splitTextToSize(nn,Qe).forEach(Un=>{Be.text(Un,Le,bt),bt+=10}),bt+=10,Be.setDrawColor(200),Be.line(Le,bt,at-Le,bt),bt+=20,Be.setFontSize(11),Be.setFont("helvetica","normal"),Be.setTextColor(0),tt.content.split(/\n\s*\n/g).map(Un=>Un.trim()).filter(Un=>Un.length>0).forEach(Un=>{Be.splitTextToSize(Un,Qe).forEach(Os=>{if(bt>Ke-100){Be.addPage(),bt=Le,Be.setFontSize(10),Be.setTextColor(130);const wt=i.pageCount||At.length;Be.text(`PGINA ${tt.sequentialNum} de ${wt} (continuacin) - PDF Original: Pg. ${tt.pdfPageNum}`,Le,bt),bt+=20,Be.setFontSize(11),Be.setTextColor(0)}Be.text(Os,Le,bt),bt+=rt}),bt+=rt*.5});const Lt="[logs  File Page Reference  DO NOT CITE THIS NUMBER - for transcription reference only; not an official page number; do not use in citations, footnotes, bibliographies, or tables of contents]";Be.setFontSize(7),Be.setTextColor(130);const Ot=Be.splitTextToSize(Lt,Qe),An=8,Gt=Ot.length*An;let gt=Ke-Le-Gt;Ot.forEach(Un=>{Be.text(Un,Le,gt),gt+=An}),Be.setFontSize(8);const rn=`Hoja ${Pn+1} de ${At.length}`,Ws=Be.getTextWidth(rn);Be.text(rn,at-Le-Ws,Ke-15)}),Be.save(`${i.name}-transcription.pdf`)}catch(Be){console.error("Error generating PDF:",Be),alert("Ocurri un error al generar el PDF.")}finally{ye(!1)}},st=async()=>{se(!0);try{const Ge=await ao.downloadOriginalPdf(i.id);if(Ge){const Be=URL.createObjectURL(Ge),Le=document.createElement("a");Le.href=Be,Le.download=i.fileName||"original.pdf",document.body.appendChild(Le),Le.click(),document.body.removeChild(Le),URL.revokeObjectURL(Be)}else alert("No se pudo encontrar el archivo original en la nube.")}catch(Ge){console.error("Failed to download file",Ge),alert("Ocurri un error al intentar descargar el archivo.")}finally{se(!1)}},ne=async()=>{c(!0),v(""),h(null);try{const Ge=new yf({apiKey:"AIzaSyAsUHH0VyT_kYUGinuA-g0V2yVucmXjuHs"}),Be=he(),Le=s.documentIndex.replace("[TRANSCRIPTION]",Be),Ke=(await Ge.models.generateContent({model:"gemini-2.5-flash",contents:Le,config:{responseMimeType:"application/json",responseSchema:{type:Ai.OBJECT,properties:{documents:{type:Ai.ARRAY,items:{type:Ai.OBJECT,properties:{documentName:{type:Ai.STRING},isAnnex:{type:Ai.STRING},internalPages:{type:Ai.STRING},pdfPages:{type:Ai.STRING},notes:{type:Ai.STRING}},required:["documentName","isAnnex","internalPages","pdfPages","notes"]}}},required:["documents"]}}})).text;if(!Ke)throw new Error("Respuesta vaca de la API al generar el ndice.");const Qe=JSON.parse(Ke);if(Qe.documents&&Array.isArray(Qe.documents)){const rt=Qe.documents.map((Tt,zt)=>({number:zt+1,...Tt}));h(rt)}else throw new Error("La respuesta de la API no tiene el formato esperado.")}catch(Ge){console.error("Error generating table:",Ge),v("No se pudo generar el ndice.")}finally{c(!1)}},Je=async()=>{E(!0),P(""),N(null);try{const Ge=new yf({apiKey:"AIzaSyAsUHH0VyT_kYUGinuA-g0V2yVucmXjuHs"}),Be=he(),Le=s.pageSummary.replace("[TRANSCRIPTION]",Be),Ke=(await Ge.models.generateContent({model:"gemini-2.5-flash",contents:Le,config:{responseMimeType:"application/json",responseSchema:{type:Ai.OBJECT,properties:{pages:{type:Ai.ARRAY,items:{type:Ai.OBJECT,properties:{page_number:{type:Ai.INTEGER},summary:{type:Ai.STRING}},required:["page_number","summary"]}}},required:["pages"]}}})).text;if(!Ke)throw new Error("Respuesta vaca de la API al generar la tabla por pginas.");const Qe=JSON.parse(Ke);if(Qe.pages&&Array.isArray(Qe.pages))N(Qe.pages.sort((rt,Tt)=>rt.page_number-Tt.page_number));else throw new Error("La respuesta de la API no tiene el formato esperado.")}catch(Ge){console.error("Error generating page table:",Ge),P("No se pudo generar la tabla por pginas.")}finally{E(!1)}};return x.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4 font-sans text-slate-800 dark:text-slate-100",children:[x.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4 mb-8",children:[x.jsxs("div",{className:"flex items-center gap-4",children:[x.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-slate-100 text-slate-500 transition-colors dark:hover:bg-slate-800 dark:text-slate-300",title:"Volver",children:x.jsx(Ec,{className:"w-6 h-6"})}),x.jsxs("div",{children:[x.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white leading-tight",children:i.name}),x.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 flex items-center gap-2 mt-1",children:[x.jsx("span",{className:"bg-slate-100 px-2 py-0.5 rounded text-xs font-medium border border-slate-200 uppercase tracking-wide dark:bg-slate-800 dark:border-slate-600 dark:text-slate-200",children:i.provider==="gemini"?"Gemini AI":"GPT-4o"})," ",i.fileName]})]})]}),x.jsx("div",{className:"flex gap-2",children:i.error?x.jsxs("span",{className:"bg-red-50 text-red-600 px-3 py-1.5 rounded-lg text-sm font-bold border border-red-100 flex items-center gap-2 dark:bg-red-950/40 dark:text-red-300 dark:border-red-900",children:[x.jsx(b0,{className:"w-5 h-5"}),"Fallido"]}):x.jsxs("span",{className:"bg-emerald-50 text-emerald-600 px-3 py-1.5 rounded-lg text-sm font-bold border border-emerald-100 flex items-center gap-2 dark:bg-emerald-950/40 dark:text-emerald-300 dark:border-emerald-900",children:[x.jsx(Ef,{className:"w-5 h-5"}),"Completado"]})})]}),x.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[x.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm flex flex-col justify-between h-32 dark:bg-gray-900 dark:border-gray-700",children:[x.jsxs("div",{className:"flex items-center justify-between text-slate-400 dark:text-slate-500 mb-2",children:[x.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Pginas Originales"}),x.jsx(uf,{className:"w-5 h-5"})]}),x.jsx("div",{className:"text-3xl font-bold text-slate-900 dark:text-slate-50",children:i.originalPageCount||"-"})]}),x.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm flex flex-col justify-between h-32 dark:bg-gray-900 dark:border-gray-700",children:[x.jsxs("div",{className:"flex items-center justify-between text-slate-400 dark:text-slate-500 mb-2",children:[x.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Rango Transcrito"}),x.jsx(Au,{className:"w-5 h-5"})]}),x.jsxs("div",{className:"flex flex-col",children:[x.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-slate-50",children:i.pages==="Todas"?`1-${i.originalPageCount||i.pageCount}`:i.pages}),x.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[i.pageCount," ",i.pageCount===1?"pgina":"pginas"," de"," ",i.originalPageCount||i.pageCount]})]})]}),x.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm flex flex-col justify-between h-32 dark:bg-gray-900 dark:border-gray-700",children:[x.jsxs("div",{className:"flex items-center justify-between text-slate-400 dark:text-slate-500 mb-2",children:[x.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Fecha Proceso"}),x.jsx(Mk,{className:"w-5 h-5"})]}),x.jsx("div",{className:"text-lg font-bold text-slate-900 dark:text-slate-50",children:i.date})]}),x.jsxs("div",{className:`p-5 rounded-2xl border shadow-sm flex flex-col justify-between h-32 ${i.error?"bg-red-50 border-red-100 dark:bg-red-950/40 dark:border-red-900":"bg-blue-50 border-blue-100 dark:bg-blue-950/40 dark:border-blue-900"}`,children:[x.jsxs("div",{className:`flex items-center justify-between mb-2 ${i.error?"text-red-400":"text-blue-400"}`,children:[x.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Estado Actual"}),i.error?x.jsx(b0,{className:"w-5 h-5"}):x.jsx(Ef,{className:"w-5 h-5"})]}),x.jsx("div",{className:`text-xl font-bold ${i.error?"text-red-700 dark:text-red-300":"text-blue-700 dark:text-blue-300"}`,children:i.error?"Error":"Finalizado"})]})]}),x.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 mb-8 shadow-sm dark:bg-gray-900 dark:border-gray-700",children:[x.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:"p-2 bg-purple-50 rounded-lg text-purple-600 dark:bg-purple-950/40 dark:text-purple-300",children:x.jsx($v,{className:"w-5 h-5"})}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-bold text-slate-900 dark:text-slate-50",children:"Etiquetado Inteligente"}),x.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Organiza tus documentos con palabras clave"})]})]}),x.jsx("button",{onClick:Ae,disabled:W,className:"flex items-center gap-2 px-4 py-2 bg-purple-50 text-purple-700 rounded-lg text-sm font-bold cursor-pointer hover:bg-purple-100 transition-colors disabled:opacity-50 dark:bg-purple-950/40 dark:text-purple-300 dark:hover:bg-purple-900/60",children:W?x.jsxs(x.Fragment,{children:[x.jsx("span",{className:"w-4 h-4 border-2 border-purple-200 border-t-purple-600 rounded-full animate-spin"}),"Generando..."]}):x.jsxs(x.Fragment,{children:[x.jsx(Nl,{className:"w-4 h-4"}),"Sugerir con IA"]})})]}),x.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[L.length===0&&x.jsx("span",{className:"text-sm text-slate-400 dark:text-slate-500 italic py-1",children:"No hay etiquetas asignadas."}),L.map(Ge=>x.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-slate-100 text-slate-700 text-sm font-medium rounded-full border border-slate-200 group dark:bg-slate-800 dark:text-slate-100 dark:border-slate-600",children:[Ge,x.jsx("button",{onClick:()=>Ie(Ge),className:"w-4 h-4 rounded-full flex items-center justify-center text-slate-400 hover:bg-red-100 hover:text-red-500 transition-colors dark:hover:bg-red-900/60",children:x.jsx(rS,{className:"w-3 h-3"})})]},Ge)),x.jsx("div",{className:"flex items-center gap-2",children:x.jsx("input",{type:"text",value:j,onChange:Ge=>ee(Ge.target.value),onKeyDown:He,placeholder:"+ Aadir...",className:"w-32 px-3 py-1 text-sm bg-transparent border border-dashed border-slate-300 rounded-full focus:w-48 focus:border-blue-500 focus:ring-0 transition-all outline-none placeholder:text-slate-400 dark:border-slate-600 dark:placeholder-slate-500 dark:text-slate-100"})})]}),q.length>0&&x.jsxs("div",{className:"bg-purple-50/50 rounded-xl p-4 border border-purple-100/50 dark:bg-purple-950/40 dark:border-purple-900/60",children:[x.jsxs("p",{className:"text-xs font-bold text-purple-800 dark:text-purple-200 mb-2 flex items-center gap-1",children:[x.jsx(Nl,{className:"w-3 h-3"}),"Sugerencias de la IA:"]}),x.jsx("div",{className:"flex flex-wrap gap-2",children:q.map(Ge=>x.jsxs("button",{onClick:()=>Ee(Ge),className:"text-xs bg-white text-purple-600 px-3 py-1 rounded-lg border border-purple-100 hover:border-purple-300 hover:shadow-sm transition-all flex items-center gap-1 dark:bg-gray-900 dark:text-purple-200 dark:border-purple-900 dark:hover:bg-purple-950/40",children:[x.jsx(Rk,{className:"w-3 h-3"}),Ge]},Ge))})]})]}),i.error&&x.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-6 mb-8 flex items-start gap-4 dark:bg-red-950/40 dark:border-red-900",children:[x.jsx("div",{className:"p-2 bg-red-100 rounded-full text-red-600 shrink-0 dark:bg-red-900 dark:text-red-300",children:x.jsx(b0,{className:"w-6 h-6"})}),x.jsxs("div",{children:[x.jsx("h3",{className:"font-bold text-red-900 dark:text-red-300",children:"Error durante la transcripcin"}),x.jsx("p",{className:"text-red-700 dark:text-red-200 mt-1 text-sm leading-relaxed",children:i.error})]})]}),x.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 mb-8",children:[x.jsxs("div",{className:"flex-1 bg-white p-5 rounded-2xl border border-slate-200 shadow-sm dark:bg-gray-900 dark:border-gray-700",children:[x.jsx("h4",{className:"text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider mb-4",children:"Exportar Documentos"}),x.jsxs("div",{className:"flex flex-wrap gap-3",children:[x.jsxs("button",{onClick:st,disabled:!B||H,className:"flex-1 min-w-[140px] flex items-center justify-center gap-2 px-4 py-2.5 bg-slate-50 text-slate-700 rounded-xl border border-slate-200 hover:bg-slate-100 hover:border-slate-300 transition-all text-sm font-semibold cursor-pointer disabled:opacity-50 dark:bg-slate-800 dark:text-slate-100 dark:border-slate-600 dark:hover:bg-slate-700",children:[H?x.jsx("span",{className:"loader w-4 h-4"}):x.jsx(uf,{className:"w-4 h-4"}),"Original"]}),x.jsxs("button",{onClick:Ye,disabled:!X,className:"flex-1 min-w-[140px] flex items-center justify-center gap-2 px-4 py-2.5 bg-slate-50 text-slate-700 cursor-pointer rounded-xl border border-slate-200 hover:bg-slate-100 hover:border-slate-300 transition-all text-sm font-semibold disabled:opacity-50 dark:bg-slate-800 dark:text-slate-100 dark:border-slate-600 dark:hover:bg-slate-700",children:[x.jsx(Au,{className:"w-4 h-4"}),"Texto (TXT)"]}),x.jsxs("button",{onClick:Ze,disabled:!X||ie,className:"flex-1 min-w-[140px] flex items-center justify-center gap-2 px-4 py-2.5 bg-blue-50 text-blue-700 cursor-pointer rounded-xl border border-blue-200 hover:bg-blue-100 transition-all text-sm font-semibold disabled:opacity-50 dark:bg-blue-950/40 dark:text-blue-300 dark:border-blue-900 dark:hover:bg-blue-900/60",children:[ie?x.jsx("span",{className:"loader w-4 h-4"}):x.jsx(Dk,{className:"w-4 h-4"}),"PDF Transcrito"]})]})]}),!i.error&&x.jsxs("div",{className:"flex-1 bg-linear-to-br from-blue-50 to-indigo-50 p-5 rounded-2xl border border-blue-100 shadow-sm dark:bg-gradient-to-br dark:from-slate-900 dark:to-slate-950 dark:border-slate-700",children:[x.jsxs("h4",{className:"text-xs font-bold text-blue-400 dark:text-blue-300 uppercase tracking-wider mb-4 flex items-center gap-1",children:[x.jsx(Nl,{className:"w-3 h-3"}),"Anlisis Avanzado"]}),x.jsxs("div",{className:"flex flex-wrap gap-3",children:[x.jsxs("button",{onClick:ne,disabled:l||d!==null,className:"flex-1 min-w-40 flex items-center justify-center gap-2 px-4 py-2.5 bg-white text-blue-700 rounded-xl cursor-pointer border border-blue-200 shadow-sm hover:shadow hover:-translate-y-0.5 transition-all text-sm font-bold disabled:opacity-50 disabled:translate-y-0 disabled:shadow-none dark:bg-gray-900 dark:text-blue-300 dark:border-blue-900",children:[l?x.jsx("span",{className:"loader w-4 h-4 border-blue-600 border-t-transparent"}):x.jsx(q0,{className:"w-4 h-4"}),"ndice del Documento"]}),x.jsxs("button",{onClick:Je,disabled:m||S!==null,className:"flex-1 min-w-40 flex items-center justify-center gap-2 px-4 py-2.5 bg-white text-indigo-700 rounded-xl cursor-pointer border border-indigo-200 shadow-sm hover:shadow hover:-translate-y-0.5 transition-all text-sm font-bold disabled:opacity-50 disabled:translate-y-0 disabled:shadow-none dark:bg-gray-900 dark:text-indigo-300 dark:border-indigo-900",children:[m?x.jsx("span",{className:"loader w-4 h-4 border-indigo-600 border-t-transparent"}):x.jsx(uf,{className:"w-4 h-4"}),"Tabla por Pginas"]})]}),(p||C)&&x.jsx("p",{className:"text-xs text-red-500 dark:text-red-400 mt-2 font-medium text-center",children:p||C})]})]}),x.jsx("div",{className:"mb-6 flex justify-center",children:x.jsxs("div",{className:"bg-slate-100 p-1 rounded-xl inline-flex shadow-inner dark:bg-slate-800 dark:shadow-none",children:[x.jsxs("button",{onClick:()=>a("editor"),className:`flex items-center gap-2 px-6 py-2.5 rounded-lg text-sm font-bold transition-all cursor-pointer ${r==="editor"?"bg-white text-slate-900 shadow-sm dark:bg-slate-900 dark:text-slate-50":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[x.jsx(M5,{className:"w-4 h-4"}),"Editor de Texto"]}),x.jsxs("button",{onClick:()=>a("chat"),className:`flex items-center gap-2 px-6 py-2.5 rounded-lg text-sm font-bold transition-all cursor-pointer ${r==="chat"?"bg-white text-blue-700 shadow-sm dark:bg-slate-900 dark:text-blue-300":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[x.jsx(lS,{className:"w-4 h-4"}),"Chat con Documento"]})]})}),(d||S)&&x.jsxs("div",{className:"mt-12 space-y-8 animate-fadeIn",children:[d&&x.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden shadow-sm dark:bg-gray-900 dark:border-gray-700",children:[x.jsxs("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200 flex items-center gap-2 dark:bg-gray-800 dark:border-gray-700",children:[x.jsx(q0,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),x.jsx("h3",{className:"font-bold text-slate-900 dark:text-slate-50",children:"ndice del Documento"})]}),x.jsx("div",{className:"overflow-x-auto",children:x.jsxs("table",{className:"w-full text-sm text-left",children:[x.jsx("thead",{className:"text-xs text-slate-500 uppercase bg-slate-50 border-b border-slate-100 dark:bg-gray-800 dark:border-gray-700 dark:text-slate-400",children:x.jsxs("tr",{children:[x.jsx("th",{className:"px-4 py-3 font-bold text-center whitespace-nowrap",children:"N."}),x.jsx("th",{className:"px-4 py-3 font-bold whitespace-nowrap",children:"Nombre literal del documento"}),x.jsx("th",{className:"px-4 py-3 font-bold text-center whitespace-nowrap",children:"Anexo"}),x.jsx("th",{className:"px-4 py-3 font-bold text-center whitespace-nowrap",children:"Pginas (paginacin interna)"}),x.jsx("th",{className:"px-4 py-3 font-bold text-center whitespace-nowrap",children:"Pgina del PDF"}),x.jsx("th",{className:"px-4 py-3 font-bold whitespace-nowrap",children:"Notas"})]})}),x.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-gray-700",children:d.map((Ge,Be)=>x.jsxs("tr",{className:"hover:bg-slate-50/50 dark:hover:bg-gray-800/50",children:[x.jsx("td",{className:"px-4 py-4 text-slate-500 dark:text-slate-400 text-center font-medium",children:Ge.number}),x.jsx("td",{className:"px-4 py-4 font-bold text-slate-700 dark:text-slate-200",children:Ge.documentName}),x.jsx("td",{className:"px-4 py-4 text-center",children:x.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-semibold ${Ge.isAnnex.toLowerCase()==="s"||Ge.isAnnex.toLowerCase()==="si"?"bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-300":Ge.isAnnex.toLowerCase()==="no"?"bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400":"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400"}`,children:Ge.isAnnex})}),x.jsx("td",{className:"px-4 py-4 text-slate-600 dark:text-slate-300 text-center font-mono text-xs",children:Ge.internalPages}),x.jsx("td",{className:"px-4 py-4 text-slate-600 dark:text-slate-300 text-center font-mono text-xs font-semibold",children:Ge.pdfPages}),x.jsx("td",{className:"px-4 py-4 text-slate-600 dark:text-slate-300 text-sm",children:Ge.notes})]},Be))})]})})]}),S&&x.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 overflow-hidden shadow-sm",children:[x.jsxs("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200 flex items-center gap-2",children:[x.jsx(uf,{className:"w-5 h-5 text-indigo-600"}),x.jsx("h3",{className:"font-bold text-slate-900",children:"Desglose por Pginas"})]}),x.jsx("div",{className:"overflow-x-auto",children:x.jsxs("table",{className:"w-full text-sm text-left",children:[x.jsx("thead",{className:"text-xs text-slate-500 uppercase bg-slate-50 border-b border-slate-100",children:x.jsxs("tr",{children:[x.jsx("th",{className:"px-6 py-3 font-bold w-24 text-center",children:"Pg."}),x.jsx("th",{className:"px-6 py-3 font-bold",children:"Contenido Relevante"})]})}),x.jsx("tbody",{className:"divide-y divide-slate-100",children:S.map((Ge,Be)=>x.jsxs("tr",{className:"hover:bg-slate-50/50",children:[x.jsx("td",{className:"px-6 py-4 font-bold text-indigo-600 text-center text-lg",children:Ge.page_number}),x.jsx("td",{className:"px-6 py-4 text-slate-600 leading-relaxed",children:Ge.summary})]},Be))})]})})]})]}),x.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 shadow-xl shadow-slate-200/50 overflow-hidden min-h-[600px] dark:bg-gray-950 dark:border-gray-800 dark:shadow-slate-900/40",children:[r==="editor"&&x.jsxs("div",{className:"flex flex-col h-full",children:[x.jsxs("div",{className:"border-b border-slate-100 p-3 flex items-center gap-2 bg-slate-50/50 flex-wrap dark:border-slate-800 dark:bg-slate-900/60",children:[Q?x.jsxs("div",{className:"flex bg-white rounded-lg border border-slate-200 p-1 shadow-sm dark:bg-slate-900 dark:border-slate-700",children:[x.jsx("button",{className:"p-2 hover:bg-slate-50 rounded text-slate-700 font-bold cursor-pointer dark:text-slate-100 dark:hover:bg-slate-800",onClick:()=>ce("bold"),children:"B"}),x.jsx("button",{className:"p-2 hover:bg-slate-50 rounded text-slate-700 italic cursor-pointer dark:text-slate-100 dark:hover:bg-slate-800",onClick:()=>ce("italic"),children:"I"}),x.jsx("button",{className:"p-2 hover:bg-slate-50 rounded text-slate-700 underline cursor-pointer dark:text-slate-100 dark:hover:bg-slate-800",onClick:()=>ce("underline"),children:"U"})]}):x.jsx("span",{className:"text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wide px-3",children:"Modo Lectura"}),x.jsx("div",{className:"ml-auto flex gap-2",children:Q?x.jsxs(x.Fragment,{children:[x.jsx("button",{onClick:Z,className:"px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg text-xs font-bold transition-colors cursor-pointer dark:text-red-300 dark:hover:bg-red-900/60",children:"Cancelar"}),x.jsx("button",{onClick:le,disabled:we,className:`px-4 py-2 rounded-lg text-xs font-bold text-white transition-all cursor-pointer ${we?"bg-green-500 dark:bg-green-600":"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600"}`,children:we?"Guardado":"Guardar Cambios"})]}):x.jsxs("button",{onClick:Z,className:"flex items-center gap-2 px-4 py-2 bg-blue-50 text-blue-700 rounded-lg text-xs font-bold hover:bg-blue-100 transition-colors cursor-pointer dark:bg-blue-950/40 dark:text-blue-300 dark:hover:bg-blue-900/60",children:[x.jsx(M5,{className:"w-3.5 h-3.5"}),"Editar Contenido"]})})]}),x.jsx("div",{className:`p-8 md:p-12 outline-none min-h-[500px] prose prose-slate max-w-none ${Q?"bg-white dark:bg-slate-950":"bg-slate-50/30 dark:bg-slate-900/40"}`,contentEditable:Q&&!i.error,ref:de,onInput:V,suppressContentEditableWarning:!0,spellCheck:Q})]}),r==="chat"&&x.jsx(mF,{transcriptionText:he(),transcriptionId:i.id})]})]})}function yF({theme:i,setTheme:e}){return x.jsxs("div",{className:"max-w-5xl mx-auto py-8 px-4 font-sans text-slate-800 dark:text-gray-100 transition-colors",children:[x.jsxs("div",{className:"mb-8",children:[x.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Configuracin del Sistema"}),x.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1",children:"Gestiona las preferencias, integraciones y comportamiento de la aplicacin."})]}),x.jsxs("div",{className:"space-y-10",children:[x.jsxs("section",{children:[x.jsx("h3",{className:"text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider mb-4 ml-1",children:"Inteligencia Artificial"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[x.jsxs(vu,{to:"/settings/api",className:"group bg-white dark:bg-gray-800 p-5 rounded-2xl border border-slate-200 dark:border-gray-700 shadow-sm hover:shadow-md hover:border-blue-300 dark:hover:border-blue-500 transition-all cursor-pointer flex items-start gap-4",children:[x.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-xl group-hover:bg-blue-100 dark:group-hover:bg-blue-900/50 transition-colors",children:x.jsx(V1,{className:"w-6 h-6"})}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-bold text-slate-900 dark:text-gray-100 text-base group-hover:text-blue-700 dark:group-hover:text-blue-300 transition-colors",children:"APIs y Credenciales"}),x.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1 leading-relaxed",children:"Gestiona las claves de acceso para OpenAI, Google Gemini y otros servicios."})]})]}),x.jsxs(vu,{to:"/settings/prompts",className:"group bg-white dark:bg-gray-800 p-5 rounded-2xl border border-slate-200 dark:border-gray-700 shadow-sm hover:shadow-md hover:border-purple-300 dark:hover:border-purple-500 transition-all cursor-pointer flex items-start gap-4",children:[x.jsx("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 rounded-xl group-hover:bg-purple-100 dark:group-hover:bg-purple-900/50 transition-colors",children:x.jsx(oS,{className:"w-6 h-6"})}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-bold text-slate-900 dark:text-gray-100 text-base group-hover:text-purple-700 dark:group-hover:text-purple-300 transition-colors",children:"Cadenas de Prompts"}),x.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1 leading-relaxed",children:"Personaliza las instrucciones del sistema para mejorar la precisin de la IA."})]})]})]})]}),x.jsxs("section",{children:[x.jsx("h3",{className:"text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider mb-4 ml-1",children:"Monitoreo y Estado"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[x.jsxs(vu,{to:"/settings/metrics",className:"group bg-white dark:bg-gray-800 p-5 rounded-2xl border border-slate-200 dark:border-gray-700 shadow-sm hover:shadow-md hover:border-emerald-300 dark:hover:border-emerald-500 transition-all cursor-pointer flex items-start gap-4",children:[x.jsx("div",{className:"p-3 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 rounded-xl group-hover:bg-emerald-100 dark:group-hover:bg-emerald-900/50 transition-colors",children:x.jsx(j0,{className:"w-6 h-6"})}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-bold text-slate-900 dark:text-gray-100 text-base group-hover:text-emerald-700 dark:group-hover:text-emerald-300 transition-colors",children:"Mtricas y Dashboard"}),x.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1 leading-relaxed",children:"Visualiza el rendimiento, consumo de tokens y estadsticas de uso."})]})]}),x.jsxs(vu,{to:"/settings/alerts",className:"group bg-white dark:bg-gray-800 p-5 rounded-2xl border border-slate-200 dark:border-gray-700 shadow-sm hover:shadow-md hover:border-orange-300 dark:hover:border-orange-500 transition-all cursor-pointer flex items-start gap-4",children:[x.jsx("div",{className:"p-3 bg-orange-50 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 rounded-xl group-hover:bg-orange-100 dark:group-hover:bg-orange-900/50 transition-colors",children:x.jsx(Pk,{className:"w-6 h-6"})}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-bold text-slate-900 dark:text-gray-100 text-base group-hover:text-orange-700 dark:group-hover:text-orange-300 transition-colors",children:"Alertas y Notificaciones"}),x.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1 leading-relaxed",children:"Configura umbrales de error y notificaciones automticas del sistema."})]})]})]})]}),x.jsxs("section",{children:[x.jsx("h3",{className:"text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider mb-4 ml-1",children:"Sistema"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[x.jsxs(vu,{to:"/settings/system-preferences",className:"group bg-white dark:bg-gray-800 p-5 rounded-2xl border border-slate-200 dark:border-gray-700 shadow-sm hover:shadow-md hover:border-slate-400 dark:hover:border-gray-500 transition-all cursor-pointer flex items-start gap-4",children:[x.jsx("div",{className:"p-3 bg-slate-100 dark:bg-gray-700 text-slate-600 dark:text-gray-300 rounded-xl group-hover:bg-slate-200 dark:group-hover:bg-gray-600 transition-colors",children:x.jsx(Gv,{className:"w-6 h-6"})}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-bold text-slate-900 dark:text-gray-100 text-base group-hover:text-slate-800 dark:group-hover:text-white transition-colors",children:"Preferencias Generales"}),x.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1 leading-relaxed",children:"Zona horaria, idioma, lmites de carga y polticas de retencin de datos."})]})]}),x.jsxs(vu,{to:"/settings/sot",className:"group bg-white dark:bg-gray-800 p-5 rounded-2xl border border-slate-200 dark:border-gray-700 shadow-sm hover:shadow-md hover:border-indigo-300 dark:hover:border-indigo-500 transition-all cursor-pointer flex items-start gap-4",children:[x.jsx("div",{className:"p-3 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-xl group-hover:bg-indigo-100 dark:group-hover:bg-indigo-900/50 transition-colors",children:x.jsx(aS,{className:"w-6 h-6"})}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-bold text-slate-900 dark:text-gray-100 text-base group-hover:text-indigo-700 dark:group-hover:text-indigo-300 transition-colors",children:"Documentacin (SOT)"}),x.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1 leading-relaxed",children:"Fuente de verdad, manuales tcnicos y especificaciones del proyecto."})]})]})]})]}),x.jsxs("section",{children:[x.jsx("h3",{className:"text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider mb-4 ml-1",children:"Apariencia"}),x.jsxs("div",{className:"bg-slate-50 dark:bg-gray-800/50 rounded-2xl border border-slate-200 dark:border-gray-700 p-2 flex gap-2 w-full max-w-md",children:[x.jsxs("button",{onClick:()=>e("light"),className:`flex-1 py-3 px-4 rounded-xl text-sm font-bold flex items-center justify-center gap-2 transition-all ${i==="light"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm border border-slate-200 dark:border-gray-600":"text-slate-500 dark:text-gray-400 hover:text-slate-700 dark:hover:text-gray-200 hover:bg-slate-200/50 dark:hover:bg-gray-700/50"}`,children:[x.jsx($k,{className:"w-5 h-5"}),"Modo Claro"]}),x.jsxs("button",{onClick:()=>e("dark"),className:`flex-1 py-3 px-4 rounded-xl text-sm font-bold flex items-center justify-center gap-2 transition-all ${i==="dark"?"bg-slate-800 text-white shadow-sm border border-slate-700":"text-slate-500 dark:text-gray-400 hover:text-slate-700 dark:hover:text-gray-200 hover:bg-slate-200/50 dark:hover:bg-gray-700/50"}`,children:[x.jsx(qk,{className:"w-5 h-5"}),"Modo Oscuro"]})]})]})]})]})}function bF({transcriptions:i}){const e=uo(),t=me.useMemo(()=>{const n=i.length;if(n===0)return null;const s=i.reduce((d,h)=>d+h.pageCount,0),r=i.reduce((d,h)=>(d[h.provider]=(d[h.provider]||0)+1,d),{}),a=i.reduce((d,h)=>{let p=0;return h.provider==="gemini"?p=h.pageCount*125e-6:p=h.pageCount*(850/1e6)*5,d+p},0),l=Math.round((r.gemini||0)/n*100),c=Math.round((r.openai||0)/n*100);return{totalTranscriptions:n,totalPages:s,totalCost:a,transcriptionsByProvider:r,geminiPercent:l,openaiPercent:c}},[i]);return x.jsxs("div",{className:"max-w-5xl mx-auto py-8 px-4 font-sans text-slate-800 dark:text-slate-100",children:[x.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[x.jsx("button",{className:"p-2 rounded-full hover:bg-slate-100 text-slate-500 transition-colors border border-transparent hover:border-slate-200 dark:hover:bg-slate-800 dark:border-slate-700 dark:text-slate-300",onClick:()=>e("/settings"),title:"Volver al men",children:x.jsx(Ec,{className:"w-6 h-6"})}),x.jsxs("div",{children:[x.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Mtricas y Dashboard"}),x.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Visin general del rendimiento, costos y uso del sistema."})]})]}),t?x.jsxs("div",{className:"space-y-8 animate-fadeIn",children:[x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[x.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm flex flex-col justify-between h-40 hover:shadow-md transition-shadow dark:bg-gray-900 dark:border-slate-700",children:[x.jsxs("div",{className:"flex justify-between items-start",children:[x.jsx("div",{className:"p-2 bg-blue-50 text-blue-600 rounded-lg dark:bg-blue-950/40 dark:text-blue-300",children:x.jsx(j0,{className:"w-6 h-6"})}),x.jsx("span",{className:"text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider",children:"Volumen"})]}),x.jsxs("div",{children:[x.jsx("div",{className:"text-3xl font-bold text-slate-900 dark:text-slate-50",children:t.totalTranscriptions}),x.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 font-medium",children:"Transcripciones"})]})]}),x.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm flex flex-col justify-between h-40 hover:shadow-md transition-shadow dark:bg-gray-900 dark:border-slate-700",children:[x.jsxs("div",{className:"flex justify-between items-start",children:[x.jsx("div",{className:"p-2 bg-indigo-50 text-indigo-600 rounded-lg dark:bg-indigo-950/40 dark:text-indigo-300",children:x.jsx(uf,{className:"w-6 h-6"})}),x.jsx("span",{className:"text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider",children:"Procesamiento"})]}),x.jsxs("div",{children:[x.jsx("div",{className:"text-3xl font-bold text-slate-900 dark:text-slate-50",children:t.totalPages}),x.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 font-medium",children:"Pginas Analizadas"})]})]}),x.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm flex flex-col justify-between h-40 hover:shadow-md transition-shadow dark:bg-gray-900 dark:border-slate-700",children:[x.jsxs("div",{className:"flex justify-between items-start",children:[x.jsx("div",{className:"p-2 bg-emerald-50 text-emerald-600 rounded-lg dark:bg-emerald-950/40 dark:text-emerald-300",children:x.jsx(cS,{className:"w-6 h-6"})}),x.jsx("span",{className:"text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider",children:"Costo Est."})]}),x.jsxs("div",{children:[x.jsxs("div",{className:"text-3xl font-bold text-slate-900 dark:text-slate-50",children:["$",t.totalCost.toFixed(4)]}),x.jsx("div",{className:"text-sm text-emerald-600 font-medium flex items-center gap-1 dark:text-emerald-300",children:"Economa estable"})]})]}),x.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm flex flex-col justify-between h-40 hover:shadow-md transition-shadow relative overflow-hidden dark:bg-gray-900 dark:border-slate-700",children:[x.jsxs("div",{className:"flex justify-between items-start",children:[x.jsx("div",{className:"p-2 bg-slate-100 text-slate-600 rounded-lg dark:bg-slate-800 dark:text-slate-300",children:x.jsx(Vk,{className:"w-6 h-6"})}),x.jsx("span",{className:"text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider",children:"Estado"})]}),x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[x.jsxs("span",{className:"relative flex h-3 w-3",children:[x.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),x.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-emerald-500"})]}),x.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-slate-50",children:"Operativo"})]}),x.jsx("div",{className:"text-sm text-slate-500 font-medium dark:text-slate-400",children:"Todos los sistemas online"})]})]})]}),x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[x.jsxs("div",{className:"lg:col-span-2 bg-white p-6 rounded-2xl border border-slate-200 shadow-sm dark:bg-gray-900 dark:border-slate-700",children:[x.jsxs("h3",{className:"text-sm font-bold text-slate-900 dark:text-slate-50 mb-6 flex items-center gap-2",children:[x.jsx(H1,{className:"w-5 h-5 text-slate-400 dark:text-slate-500"}),"Distribucin de Modelos de IA"]}),x.jsxs("div",{className:"mb-6",children:[x.jsxs("div",{className:"flex justify-between text-sm font-medium mb-2",children:[x.jsxs("span",{className:"text-blue-600 dark:text-blue-300",children:["Gemini (",t.geminiPercent,"%)"]}),x.jsxs("span",{className:"text-purple-600 dark:text-purple-300",children:["GPT-4o (",t.openaiPercent,"%)"]})]}),x.jsxs("div",{className:"w-full h-4 bg-slate-100 rounded-full overflow-hidden flex dark:bg-slate-800",children:[x.jsx("div",{className:"h-full bg-blue-500 transition-all duration-1000",style:{width:`${t.geminiPercent}%`}}),x.jsx("div",{className:"h-full bg-purple-500 transition-all duration-1000",style:{width:`${t.openaiPercent}%`}})]})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.jsxs("div",{className:"p-4 rounded-xl border border-slate-100 bg-blue-50/30 dark:bg-blue-950/30 dark:border-blue-900/60",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[x.jsx(Nl,{className:"w-4 h-4 text-blue-500 dark:text-blue-300"}),x.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200",children:"Google Gemini"})]}),x.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-slate-50",children:t.transcriptionsByProvider.gemini||0}),x.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Solicitudes procesadas"})]}),x.jsxs("div",{className:"p-4 rounded-xl border border-slate-100 bg-purple-50/30 dark:bg-purple-950/30 dark:border-purple-900/60",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[x.jsx(H1,{className:"w-4 h-4 text-purple-500 dark:text-purple-300"}),x.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200",children:"OpenAI GPT-4o"})]}),x.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-slate-50",children:t.transcriptionsByProvider.openai||0}),x.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Solicitudes procesadas"})]})]})]}),x.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm flex flex-col dark:bg-gray-900 dark:border-slate-700",children:[x.jsxs("h3",{className:"text-sm font-bold text-slate-900 dark:text-slate-50 mb-4 flex itemsinaire gap-2",children:[x.jsx(z1,{className:"w-5 h-5 text-orange-500"}),"Tasa de Errores"]}),x.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center p-4 bg-slate-50 rounded-xl border border-dashed border-slate-200 dark:bg-slate-900 dark:border-slate-700",children:[x.jsx("span",{className:"text-4xl font-bold text-slate-300 mb-2 dark:text-slate-500",children:"0%"}),x.jsx("p",{className:"text-sm text-slate-500 font-medium dark:text-slate-400",children:"Sin incidentes registrados"}),x.jsx("p",{className:"text-xs text-slate-400 mt-2 dark:text-slate-500",children:"El sistema de seguimiento de errores detallado est activo pero no ha detectado fallos crticos recientes."})]})]})]})]}):x.jsxs("div",{className:"bg-slate-50 rounded-3xl border border-dashed border-slate-300 p-12 flex flex-col items-center justify-center text-center dark:bg-slate-900 dark:border-slate-700",children:[x.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center shadow-sm mb-4 dark:bg-slate-800",children:x.jsx(j0,{className:"w-8 h-8 text-slate-300 dark:text-slate-500"})}),x.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-slate-50",children:"Sin datos suficientes"}),x.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-md mt-2",children:"An no se han realizado transcripciones. Procesa algunos documentos para comenzar a visualizar las mtricas de rendimiento y costos."})]})]})}function wF({apiKeys:i,setApiKeys:e}){const t=uo(),[n,s]=me.useState(i),[r,a]=me.useState(!1),[l,c]=me.useState(!1),d=()=>{e(n),c(!0),setTimeout(()=>c(!1),2e3)};return x.jsxs("div",{className:"max-w-3xl mx-auto py-8 px-4 font-sans text-slate-800 dark:text-slate-100",children:[x.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[x.jsx("button",{onClick:()=>t("/settings"),className:"p-2 rounded-full hover:bg-slate-100 text-slate-500 transition-colors cursor-pointer dark:hover:bg-slate-800 dark:text-slate-300",children:x.jsx(Ec,{className:"w-6 h-6"})}),x.jsxs("div",{children:[x.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"APIs y Credenciales"}),x.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Configura los motores de inteligencia artificial."})]})]}),x.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-2xl p-4 flex gap-3 mb-8 dark:bg-blue-950/40 dark:border-blue-900",children:[x.jsx("div",{className:"p-2 bg-blue-100 rounded-lg text-blue-600 shrink-0 h-fit dark:bg-blue-900 dark:text-blue-300",children:x.jsx(Gk,{className:"w-5 h-5"})}),x.jsx("div",{className:"text-sm text-blue-800 leading-relaxed dark:text-blue-200",children:x.jsx("p",{className:"font-bold mb-1",children:"Tus claves estn seguras"})})]}),x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm transition-all hover:shadow-md hover:border-slate-300 dark:bg-gray-900 dark:border-slate-700 dark:hover:border-slate-500",children:[x.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[x.jsx("div",{className:"p-2 bg-emerald-50 text-emerald-600 rounded-lg border border-emerald-100 dark:bg-emerald-950/40 dark:text-emerald-300 dark:border-emerald-900",children:x.jsx(H1,{className:"w-6 h-6"})}),x.jsxs("div",{children:[x.jsx("h3",{className:"font-bold text-slate-900 dark:text-slate-50",children:"OpenAI (GPT-4o)"}),x.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Recomendado para mayor precisin legal."})]})]}),x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:r?"text":"password",id:"openai-key",placeholder:"sk-...",value:n.openai||"",onChange:h=>s({...n,openai:h.target.value}),className:"w-full pl-10 pr-12 py-3 rounded-xl border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 outline-none transition-all text-sm font-mono text-slate-700 placeholder:text-slate-300 dark:bg-slate-950 dark:border-slate-700 dark:text-slate-100 dark:placeholder-slate-500 dark:focus:border-blue-500 dark:focus:ring-blue-500/30"}),x.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500",children:x.jsx(V1,{className:"w-5 h-5"})}),x.jsx("button",{onClick:()=>a(!r),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-blue-600 transition-colors p-1 dark:text-slate-500 dark:hover:text-blue-400",children:r?x.jsx(L5,{className:"w-5 h-5"}):x.jsx(P5,{className:"w-5 h-5"})})]}),x.jsx("div",{className:"mt-3 flex justify-end",children:x.jsx("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-xs font-semibold text-blue-600 hover:text-blue-800 hover:underline flex items-center gap-1 dark:text-blue-400 dark:hover:text-blue-300",children:"Obtener API Key "})})]}),x.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm transition-all hover:shadow-md hover:border-slate-300 dark:bg-gray-900 dark:border-slate-700 dark:hover:border-slate-500",children:[x.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[x.jsx("div",{className:"p-2 bg-purple-50 text-purple-600 rounded-lg border border-purple-100 dark:bg-purple-950/40 dark:text-purple-300 dark:border-purple-900",children:x.jsx(Nl,{className:"w-6 h-6"})}),x.jsxs("div",{children:[x.jsx("h3",{className:"font-bold text-slate-900 dark:text-slate-50",children:"Google Gemini"}),x.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Opcin rpida y econmica para borradores."})]})]}),x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:r?"text":"password",id:"gemini-key",placeholder:"AIza...",value:n.gemini||"",onChange:h=>s({...n,gemini:h.target.value}),className:"w-full pl-10 pr-12 py-3 rounded-xl border border-slate-200 focus:border-purple-500 focus:ring-2 focus:ring-purple-100 outline-none transition-all text-sm font-mono text-slate-700 placeholder:text-slate-300 dark:bg-slate-950 dark:border-slate-700 dark:text-slate-100 dark:placeholder-slate-500 dark:focus:border-purple-500 dark:focus:ring-purple-500/30"}),x.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500",children:x.jsx(V1,{className:"w-5 h-5"})}),x.jsx("button",{onClick:()=>a(!r),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-purple-600 transition-colors p-1 dark:text-slate-500 dark:hover:text-purple-400",children:r?x.jsx(L5,{className:"w-5 h-5"}):x.jsx(P5,{className:"w-5 h-5"})})]}),x.jsx("div",{className:"mt-3 flex justify-end",children:x.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-xs font-semibold text-purple-600 hover:text-purple-800 hover:underline flex items-center gap-1 dark:text-purple-300 dark:hover:text-purple-200",children:"Obtener API Key "})})]})]}),x.jsxs("div",{className:"mt-10 pt-6 border-t border-slate-200 flex items-center justify-end gap-4 dark:border-slate-700",children:[l&&x.jsxs("span",{className:"flex items-center gap-1.5 text-sm font-bold text-emerald-600 dark:text-emerald-400 animate-fadeIn",children:[x.jsx(Ff,{className:"w-5 h-5"}),"Cambios guardados!"]}),x.jsx("button",{onClick:d,className:"px-8 py-3 bg-slate-900 hover:bg-slate-800 text-white rounded-xl font-bold shadow-lg shadow-slate-900/20 transition-all transform active:scale-95 flex items-center gap-2",children:"Guardar Configuracin"})]})]})}function xF({prompts:i,setPrompts:e}){const t=uo(),[n,s]=me.useState(i),[r,a]=me.useState(!1),l=()=>{e(n),a(!0),setTimeout(()=>a(!1),2e3)},c=(d,h,p,v,m,E,S)=>x.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm hover:border-blue-300 transition-colors group dark:bg-gray-900 dark:border-slate-700 dark:hover:border-blue-500",children:[x.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[x.jsx("div",{className:"p-2.5 bg-slate-50 text-slate-600 rounded-xl border border-slate-100 group-hover:bg-blue-50 group-hover:text-blue-600 transition-colors dark:bg-slate-800 dark:text-slate-300 dark:border-slate-600 dark:group-hover:bg-slate-700 dark:group-hover:text-blue-300",children:m}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-bold text-slate-900 dark:text-slate-50 text-sm uppercase tracking-wide",children:h}),E&&x.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:E})]})]}),x.jsx("textarea",{id:d,value:p,onChange:N=>s({...n,[v]:N.target.value}),className:"w-full h-32 px-4 py-3 rounded-xl border border-slate-200 bg-slate-50 text-sm font-mono text-slate-700 focus:bg-white focus:border-blue-500 focus:ring-2 focus:ring-blue-100 outline-none transition-all resize-y leading-relaxed dark:bg-slate-900 dark:border-slate-700 dark:text-slate-100 dark:focus:bg-slate-950 dark:focus:border-blue-500 dark:focus:ring-blue-500/30",placeholder:"Escribe las instrucciones para la IA aqu..."}),S&&x.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-slate-500 bg-blue-50/50 px-3 py-2 rounded-lg border border-blue-100/50 dark:text-slate-300 dark:bg-blue-950/40 dark:border-blue-900/60",children:[x.jsx(Tf,{className:"w-4 h-4 text-blue-400 dark:text-blue-300"}),x.jsxs("span",{children:["Variable dinmica:"," ",x.jsx("code",{className:"bg-white px-1.5 py-0.5 rounded border border-blue-100 text-blue-600 font-bold select-all dark:bg-slate-900 dark:border-blue-900 dark:text-blue-300",children:S})]})]})]});return x.jsxs("div",{className:"max-w-5xl mx-auto py-8 px-4 font-sans text-slate-800 dark:text-slate-100 relative min-h-screen pb-32",children:[x.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[x.jsx("button",{className:"p-2 rounded-full hover:bg-slate-100 text-slate-500 transition-colors border border-transparent hover:border-slate-200 dark:hover:bg-slate-800 dark:border-slate-700 dark:text-slate-300",onClick:()=>t("/settings"),title:"Volver al men",children:x.jsx(Ec,{className:"w-6 h-6"})}),x.jsxs("div",{children:[x.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Cadenas de Prompts"}),x.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Ajusta el tono y formato de las respuestas de la IA."})]})]}),x.jsxs("div",{className:"space-y-10",children:[x.jsxs("section",{children:[x.jsxs("h3",{className:"text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider mb-4 ml-1 flex items-center gap-2",children:[x.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"}),"Procesamiento de Texto"]}),x.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[c("prompt-transcription","Transcripcin Estndar",n.transcription,"transcription",x.jsx(oS,{className:"w-6 h-6"}),"Instruccin base para convertir la imagen del documento a texto plano."),c("prompt-translate","Traduccin (Ingls  Espaol)",n.transcriptionTranslate,"transcriptionTranslate",x.jsx(Uk,{className:"w-6 h-6"}),"Instruccin utilizada cuando se activa el modo 'Traducir al Espaol'.")]})]}),x.jsxs("section",{children:[x.jsxs("h3",{className:"text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider mb-4 ml-1 flex items-center gap-2",children:[x.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-purple-500"}),"Generacin de Anlisis"]}),x.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[c("prompt-summary","Resumen General del Caso",n.summary,"summary",x.jsx(Au,{className:"w-6 h-6"}),"Genera la tabla de resumen de temas principales.","[TRANSCRIPTION]"),c("prompt-page-summary","Resumen por Pgina",n.pageSummary,"pageSummary",x.jsx(q0,{className:"w-6 h-6"}),"Genera la tabla desglosada pgina por pgina.","[PAGE_CONTENT]"),c("prompt-auto-tagging","Etiquetado Inteligente (JSON)",n.autoTagging,"autoTagging",x.jsx($v,{className:"w-6 h-6"}),"Debe devolver estrictamente un array JSON de strings para las sugerencias.","[TRANSCRIPTION]"),c("prompt-document-index","ndice de Documentos (Tabla Estructurada)",n.documentIndex,"documentIndex",x.jsx(q0,{className:"w-6 h-6"}),"Genera un ndice detallado con columnas: N., Nombre del documento, Anexo, Pginas internas, Pgina del PDF, Notas.","[TRANSCRIPTION]")]})]})]}),x.jsx("div",{className:"fixed bottom-8 left-1/2 transform -translate-x-1/2 z-30",children:x.jsxs("div",{className:"bg-white/80 backdrop-blur-md border border-slate-200/60 pl-5 pr-2 py-2 rounded-full shadow-[0_8px_30px_rgb(0,0,0,0.08)] flex items-center gap-6 hover:shadow-[0_8px_30px_rgb(0,0,0,0.12)] transition-all duration-300 dark:bg-slate-900/90 dark:border-slate-700",children:[x.jsx("div",{className:"flex items-center",children:r?x.jsxs("span",{className:"flex items-center gap-2 text-emerald-600 dark:text-emerald-400 text-sm font-semibold animate-fadeIn",children:[x.jsx(Ff,{className:"w-5 h-5"}),x.jsx("span",{children:"Cambios guardados"})]}):x.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400 font-medium flex items-center gap-2",children:[x.jsx(Nl,{className:"w-4 h-4 text-slate-400 dark:text-slate-500"}),x.jsx("span",{children:"Edicin activa"})]})}),x.jsx("button",{onClick:l,className:"px-6 py-2 bg-slate-900 hover:bg-blue-600 text-white text-sm font-bold rounded-full shadow-md transition-all transform active:scale-95 dark:bg-blue-600 dark:hover:bg-blue-500 cursor-pointer",children:"Guardar"})]})})]})}const g0=[{key:"databaseUnavailable",title:"Base de datos no disponible",desc:"Alerta crtica cuando PostgreSQL no responde o est desconectado",severity:"critical",iconType:"cog"},{key:"workerFailure",title:"Falla en workers de procesamiento",desc:"Notifica cuando los workers principales se desconectan o fallan",severity:"critical",iconType:"cog"},{key:"memoryExhausted",title:"Memoria del sistema agotada",desc:"Alerta cuando el uso de memoria supera el 90% disponible",severity:"critical",iconType:"cog"},{key:"diskSpaceCritical",title:"Espacio en disco crticamente bajo",desc:"Notifica cuando queda menos del 10% de espacio disponible",severity:"critical",iconType:"cog"},{key:"aiApisUnavailable",title:"APIs de IA no disponibles",desc:"Alerta cuando OpenAI o Google Gemini devuelven errores continuos",severity:"critical",iconType:"cog"},{key:"documentProcessingFailure",title:"Falla en procesamiento de documentos",desc:"Error crtico en la cadena de transcripcin de PDFs",severity:"critical",iconType:"cog"},{key:"responseTimeSlow",title:"Tiempo de respuesta extremadamente lento",desc:"Alerta cuando las respuestas superan 30 segundos consistentemente",severity:"high",iconType:"chart"},{key:"transcriptionQueueBlocked",title:"Cola de transcripcin bloqueada",desc:"Trabajos de transcripcin acumulados sin procesar por ms de 1 hora",severity:"high",iconType:"chart"},{key:"aiApiErrors",title:"Errores repetidos en APIs de IA",desc:"Ms del 20% de solicitudes a proveedores de IA fallan",severity:"high",iconType:"cog"},{key:"fileUploadFailures",title:"Fallas en carga de archivos",desc:"Usuarios no pueden subir PDFs correctamente al sistema",severity:"high",iconType:"cog"},{key:"sslCertificateExpiry",title:"Certificados SSL prximos a vencer",desc:"Certificados de seguridad vencen en menos de 30 das",severity:"medium",iconType:"lock"},{key:"highCpuUsage",title:"Uso elevado de CPU",desc:"El procesador supera el 85% de uso por ms de 15 minutos",severity:"medium",iconType:"chart"}],_F=({checked:i,onChange:e})=>x.jsx("button",{onClick:e,className:`relative inline-flex h-7 w-12 items-center rounded-full transition-colors focus:outline-none ${i?"bg-slate-900":"bg-slate-200"}`,children:x.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white transition-transform shadow-sm ${i?"translate-x-6":"translate-x-1"}`})}),AF=i=>{switch(i){case"critical":return{dot:"bg-red-500",badge:"bg-red-50 text-red-600 border-red-100",label:"Crtico"};case"high":return{dot:"bg-orange-500",badge:"bg-orange-50 text-orange-600 border-orange-100",label:"Alto"};case"medium":return{dot:"bg-yellow-400",badge:"bg-yellow-50 text-yellow-700 border-yellow-100",label:"Medio"};default:return{dot:"bg-slate-400",badge:"bg-slate-50 text-slate-600 border-slate-100",label:"Normal"}}},SF=i=>{switch(i){case"chart":return x.jsx(j0,{className:"w-6 h-6"});case"lock":return x.jsx(jk,{className:"w-6 h-6"});case"cog":default:return x.jsx(Bk,{className:"w-6 h-6"})}};function EF({alertSettings:i,setAlertSettings:e}){const t=uo(),[n,s]=me.useState(null),[r,a]=me.useState(!1),[l,c]=me.useState(""),d=E=>{e({...i,[E]:{...i[E],enabled:!i[E].enabled}})},h=E=>{const S=E.key;s(S),setTimeout(()=>{const N=new Date().toISOString();e({...i,[S]:{...i[S],lastTriggered:N,triggerCount:i[S].triggerCount+1}}),c(` Alerta "${E.title}" probada exitosamente`),a(!0),s(null),setTimeout(()=>{a(!1)},3e3)},1e3)},p=g0.filter(E=>i[E.key].enabled).length,v=g0.filter(E=>E.severity==="critical"&&i[E.key].enabled).length,m=E=>{if(!E)return"Nunca";const S=new Date(E),C=new Date().getTime()-S.getTime(),P=Math.floor(C/6e4),L=Math.floor(C/36e5),O=Math.floor(C/864e5);return P<1?"Hace un momento":P<60?`Hace ${P} min`:L<24?`Hace ${L}h`:O<7?`Hace ${O}d`:S.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"2-digit"})};return x.jsxs("div",{className:"max-w-5xl mx-auto py-8 px-4 font-sans text-slate-800 dark:text-slate-100 pb-24",children:[r&&x.jsxs("div",{className:"fixed top-4 right-4 z-50 bg-emerald-500 text-white px-6 py-4 rounded-lg shadow-lg flex items-center gap-3 animate-fade-in dark:bg-emerald-600",children:[x.jsx(Ff,{className:"w-6 h-6"}),x.jsx("span",{className:"font-medium",children:l})]}),x.jsxs("div",{className:"flex items-center gap-4 mb-10",children:[x.jsx("button",{className:"p-2 rounded-full hover:bg-slate-100 text-slate-500 transition-colors dark:hover:bg-slate-800 dark:text-slate-300",onClick:()=>t("/settings"),children:x.jsx(Ec,{className:"w-6 h-6"})}),x.jsxs("div",{children:[x.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Configuracin de Monitoreo"}),x.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Gestiona las reglas de incidentes crticos y recibe notificaciones en tiempo real."})]})]}),x.jsxs("div",{className:"flex items-center justify-between mb-6 px-2",children:[x.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider dark:text-slate-400",children:"ESTADO ACTUAL"}),x.jsxs("div",{className:"flex gap-6",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"w-2.5 h-2.5 bg-emerald-500 rounded-full"}),x.jsxs("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:[p," Activas"]})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("span",{className:"w-2.5 h-2.5 bg-red-500 rounded-full"}),x.jsxs("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:[v," Crticas"]})]})]})]}),x.jsx("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden dark:bg-gray-900 dark:border-slate-700",children:g0.map((E,S)=>{const N=AF(E.severity),C=i[E.key],P=n===E.key;return x.jsxs("div",{className:`p-6 flex flex-col md:flex-row items-start md:items-center gap-6 hover:bg-slate-50/50 dark:hover:bg-slate-800/60 transition-colors ${S!==g0.length-1?"border-b border-slate-100 dark:border-slate-800":""}`,children:[x.jsxs("div",{className:"flex items-center gap-4 shrink-0 mt-1 md:mt-0",children:[x.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${N.dot}`}),x.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:SF(E.iconType)})]}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-1",children:[x.jsx("h3",{className:"text-base font-bold text-slate-900 dark:text-slate-50",children:E.title}),x.jsx(Tf,{className:"w-4 h-4 text-slate-400 cursor-help dark:text-slate-500"}),x.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium border ${N.badge}`,children:N.label})]}),x.jsx("p",{className:"text-sm text-slate-500 mb-3 leading-relaxed dark:text-slate-400",children:E.desc}),x.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${C.enabled?"bg-emerald-500":"bg-slate-300"}`}),x.jsx("span",{className:`text-xs font-bold tracking-wide ${C.enabled?"text-emerald-600 dark:text-emerald-400":"text-slate-400 dark:text-slate-500"}`,children:C.enabled?"HABILITADA":"DESHABILITADA"})]}),x.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500 dark:text-slate-400",children:[x.jsxs("span",{children:[x.jsx("span",{className:"font-semibold",children:"ltima activacin:"})," ",m(C.lastTriggered)]}),x.jsx("span",{className:"text-slate-300",children:""}),x.jsxs("span",{children:[x.jsx("span",{className:"font-semibold",children:"Activaciones:"})," ",C.triggerCount]})]})]})]}),x.jsxs("div",{className:"flex items-center gap-5 shrink-0 w-full md:w-auto justify-between md:justify-end mt-2 md:mt-0",children:[x.jsxs("button",{onClick:()=>h(E),disabled:P||!C.enabled,className:`flex items-center gap-2 px-4 py-2 rounded-lg border text-sm font-medium transition-all ${P?"border-slate-200 text-slate-400 cursor-wait bg-slate-50 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-500":C.enabled?"border-slate-200 text-slate-600 hover:bg-white hover:border-slate-300 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-800":"border-slate-200 text-slate-400 cursor-not-allowed bg-slate-50 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-500"}`,children:[x.jsx(dS,{className:`w-4 h-4 ${P?"animate-spin":""}`}),P?"Probando...":"Probar"]}),x.jsx(_F,{checked:C.enabled,onChange:()=>d(E.key)})]})]},E.key)})}),x.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-100 rounded-lg dark:bg-blue-950/40 dark:border-blue-900/70",children:x.jsxs("div",{className:"flex gap-3",children:[x.jsx(Tf,{className:"w-5 h-5 text-blue-500 shrink-0 mt-0.5"}),x.jsxs("div",{className:"text-sm text-blue-900 dark:text-blue-100",children:[x.jsx("p",{className:"font-semibold mb-1",children:"Sobre las alertas de prueba"}),x.jsx("p",{className:"text-blue-700 dark:text-blue-300",children:'El botn "Probar" simula la activacin de cada alerta para verificar que el sistema de monitoreo funciona correctamente. Las alertas reales se activarn automticamente cuando se cumplan las condiciones especificadas.'})]})]})})]})}function TF({sotSettings:i,setSotSettings:e}){const t=uo(),[n,s]=me.useState(i),[r,a]=me.useState(!1),l=()=>{e(n),a(!0),setTimeout(()=>a(!1),2e3)};return x.jsxs("div",{className:"max-w-4xl mx-auto py-8 px-4 font-sans text-slate-800 dark:text-slate-100 pb-32",children:[x.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[x.jsx("button",{className:"p-2 rounded-full hover:bg-slate-100 text-slate-500 transition-colors border border-transparent hover:border-slate-200 dark:hover:bg-slate-800 dark:border-slate-700 dark:text-slate-300",onClick:()=>t("/settings"),title:"Volver al men",children:x.jsx(Ec,{className:"w-6 h-6"})}),x.jsxs("div",{children:[x.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Fuente de Verdad (SOT)"}),x.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Documentacin centralizada, especificaciones y control de versiones del sistema."})]})]}),x.jsxs("div",{className:"space-y-8",children:[x.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6 flex flex-col sm:flex-row gap-6 items-start sm:items-center dark:bg-gray-900 dark:border-slate-700",children:[x.jsx("div",{className:"p-3 bg-indigo-50 text-indigo-600 rounded-xl shrink-0 dark:bg-indigo-950/40 dark:text-indigo-300",children:x.jsx($v,{className:"w-8 h-8"})}),x.jsxs("div",{className:"flex-1 w-full",children:[x.jsx("label",{htmlFor:"sot-version",className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 dark:text-slate-400",children:"Versin Actual del Sistema"}),x.jsxs("div",{className:"relative max-w-xs",children:[x.jsx("input",{type:"text",id:"sot-version",value:n.version,onChange:c=>s({...n,version:c.target.value}),className:"w-full pl-4 pr-4 py-2.5 rounded-xl border border-slate-200 bg-slate-50 text-slate-900 font-bold focus:bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 outline-none transition-all dark:bg-slate-950 dark:border-slate-700 dark:text-slate-100 dark:focus:border-indigo-500 dark:focus:ring-indigo-500/30",placeholder:"v1.0.0"}),x.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex gap-1",children:x.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"})})]}),x.jsx("p",{className:"text-xs text-slate-400 mt-2 dark:text-slate-500",children:"Identificador nico para el despliegue actual."})]})]}),x.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden dark:bg-gray-900 dark:border-slate-700",children:[x.jsxs("div",{className:"bg-slate-50/50 px-6 py-4 border-b border-slate-100 flex items-center justify-between dark:bg-slate-900/60 dark:border-slate-800",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(aS,{className:"w-5 h-5 text-slate-400 dark:text-slate-500"}),x.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-slate-50 uppercase tracking-wide",children:"Arquitectura y Descripcin"})]}),x.jsx(Hk,{className:"w-5 h-5 text-slate-300 dark:text-slate-500"})]}),x.jsxs("div",{className:"p-6",children:[x.jsx("textarea",{id:"sot-description",value:n.systemDescription,onChange:c=>s({...n,systemDescription:c.target.value}),className:"w-full min-h-[200px] p-4 rounded-xl border border-slate-200 bg-white text-sm text-slate-700 leading-relaxed focus:border-blue-500 focus:ring-2 focus:ring-blue-100 outline-none transition-all resize-y placeholder:text-slate-300 dark:bg-slate-950 dark:border-slate-700 dark:text-slate-100 dark:placeholder-slate-500 dark:focus:border-blue-500 dark:focus:ring-blue-500/30",placeholder:"Describe aqu la arquitectura del sistema, flujos de datos y componentes principales..."}),x.jsxs("p",{className:"text-xs text-slate-400 mt-3 flex items-center gap-1 dark:text-slate-500",children:[x.jsx(CF,{className:"w-4 h-4"}),"Utiliza este espacio para documentar cmo funciona el sistema internamente."]})]})]}),x.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden dark:bg-gray-900 dark:border-slate-700",children:[x.jsxs("div",{className:"bg-slate-50/50 px-6 py-4 border-b border-slate-100 flex items-center gap-2 dark:bg-slate-900/60 dark:border-slate-800",children:[x.jsx(uS,{className:"w-5 h-5 text-slate-400 dark:text-slate-500"}),x.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-slate-50 uppercase tracking-wide",children:"Registro de Cambios (Changelog)"})]}),x.jsxs("div",{className:"p-6",children:[x.jsx("textarea",{id:"sot-changes",value:n.importantChanges,onChange:c=>s({...n,importantChanges:c.target.value}),className:"w-full min-h-[150px] p-4 rounded-xl border border-slate-200 bg-slate-900 text-slate-300 font-mono text-xs leading-relaxed focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 outline-none transition-all resize-y dark:border-slate-700",placeholder:`- v1.0.0: Lanzamiento inicial
- v1.0.1: Correccin de bugs en API...`}),x.jsx("p",{className:"text-xs text-slate-400 mt-3 dark:text-slate-500",children:"Se recomienda usar formato de lista con fechas o versiones."})]})]})]}),x.jsx("div",{className:"fixed bottom-8 left-1/2 transform -translate-x-1/2 z-30",children:x.jsxs("div",{className:"bg-white/80 backdrop-blur-md border border-slate-200/60 pl-5 pr-2 py-2 rounded-full shadow-[0_8px_30px_rgb(0,0,0,0.08)] flex items-center gap-6 hover:shadow-[0_8px_30px_rgb(0,0,0,0.12)] transition-all duration-300 dark:bg-slate-900/90 dark:border-slate-700",children:[x.jsx("div",{className:"flex items-center",children:r?x.jsxs("span",{className:"flex items-center gap-2 text-emerald-600 text-sm font-semibold animate-fadeIn dark:text-emerald-400",children:[x.jsx(Ff,{className:"w-5 h-5"}),x.jsx("span",{children:"Documentacin actualizada"})]}):x.jsxs("span",{className:"text-sm text-slate-500 font-medium flex items-center gap-2 dark:text-slate-400",children:[x.jsx(Au,{className:"w-4 h-4 text-slate-400 dark:text-slate-500"}),x.jsx("span",{children:"Edicin de SOT"})]})}),x.jsx("button",{onClick:l,className:"px-6 py-2 bg-slate-900 hover:bg-blue-600 text-white text-sm font-bold rounded-full shadow-md transition-all transform active:scale-95 dark:bg-blue-600 dark:hover:bg-blue-500",children:"Guardar"})]})})]})}function CF({className:i}){return x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:i,children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})})}function NF(i){return Dt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},child:[]}]})(i)}function kF(i){return Dt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M144 480C64.5 480 0 415.5 0 336c0-62.8 40.2-116.2 96.2-135.9c-.1-2.7-.2-5.4-.2-8.1c0-88.4 71.6-160 160-160c59.3 0 111 32.2 138.7 80.2C409.9 102 428.3 96 448 96c53 0 96 43 96 96c0 12.2-2.3 23.8-6.4 34.6C596 238.4 640 290.1 640 352c0 70.7-57.3 128-128 128l-368 0zm79-217c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l39-39L296 392c0 13.3 10.7 24 24 24s24-10.7 24-24l0-134.1 39 39c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-80-80c-9.4-9.4-24.6-9.4-33.9 0l-80 80z"},child:[]}]})(i)}function RF({preferences:i,setPreferences:e}){const t=uo(),[n,s]=me.useState(i),[r,a]=me.useState(!1),l=()=>{e(n),a(!0),setTimeout(()=>a(!1),2e3)},c=p=>{typeof n[p]=="boolean"&&s(v=>({...v,[p]:!v[p]}))},d=(p,v,m)=>{s(E=>({...E,retryPolicy:{...E.retryPolicy,[p]:{...E.retryPolicy[p],[v]:m}}}))},h=({checked:p,onChange:v})=>x.jsx("button",{onClick:v,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${p?"bg-slate-900":"bg-slate-200"}`,children:x.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform shadow-sm ${p?"translate-x-6":"translate-x-1"}`})});return x.jsxs("div",{className:"max-w-4xl mx-auto py-8 px-4 font-sans text-slate-800 dark:text-slate-100 pb-32",children:[x.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[x.jsx("button",{className:"p-2 rounded-full hover:bg-slate-100 text-slate-500 transition-colors border border-transparent hover:border-slate-200 dark:hover:bg-slate-800 dark:border-slate-700 dark:text-slate-300",onClick:()=>t("/settings"),children:x.jsx(Ec,{className:"w-6 h-6"})}),x.jsxs("div",{children:[x.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Preferencias del Sistema"}),x.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Ajustes globales de localizacin, lmites y comportamiento operativo."})]})]}),x.jsxs("div",{className:"space-y-8",children:[x.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6 dark:bg-gray-900 dark:border-slate-700",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-6 pb-4 border-b border-slate-100 dark:border-slate-800",children:[x.jsx(I5,{className:"w-5 h-5 text-slate-400 dark:text-slate-500"}),x.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-slate-50 uppercase tracking-wide",children:"Localizacin"})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2 ml-1 dark:text-slate-400",children:"Zona Horaria"}),x.jsxs("div",{className:"relative",children:[x.jsx(q1,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-5 h-5 dark:text-slate-500"}),x.jsxs("select",{value:n.timezone,onChange:p=>s({...n,timezone:p.target.value}),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-slate-200 bg-white text-sm font-medium focus:border-blue-500 focus:ring-2 focus:ring-blue-100 outline-none appearance-none cursor-pointer hover:border-slate-300 transition-all dark:bg-slate-950 dark:border-slate-700 dark:text-slate-100 dark:hover:border-slate-500 dark:focus:border-blue-500 dark:focus:ring-blue-500/30",children:[x.jsx("option",{value:"browser",children:"Predeterminado del Navegador"}),x.jsx("option",{value:"UTC",children:"UTC (Universal)"}),x.jsx("option",{value:"America/Bogota",children:"Amrica/Bogot (COT)"}),x.jsx("option",{value:"America/New_York",children:"Amrica/New York (EST)"}),x.jsx("option",{value:"Europe/Madrid",children:"Europa/Madrid (CET)"}),x.jsx("option",{value:"Europe/London",children:"Europa/Londres (GMT)"})]})]}),x.jsx("p",{className:"text-xs text-slate-400 mt-1.5 ml-1 dark:text-slate-500",children:"Define cmo se visualizan las fechas en el historial."})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2 ml-1 dark:text-slate-400",children:"Idioma"}),x.jsxs("div",{className:"relative",children:[x.jsx(I5,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-5 h-5 dark:text-slate-500"}),x.jsxs("select",{value:n.language,onChange:p=>s({...n,language:p.target.value}),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-slate-200 bg-white text-sm font-medium focus:border-blue-500 focus:ring-2 focus:ring-blue-100 outline-none appearance-none cursor-pointer hover:border-slate-300 transition-all dark:bg-slate-950 dark:border-slate-700 dark:text-slate-100 dark:hover:border-slate-500 dark:focus:border-blue-500 dark:focus:ring-blue-500/30",children:[x.jsx("option",{value:"es",children:"Espaol (Espaa)"}),x.jsx("option",{value:"en",children:"English (US)"})]})]})]})]})]}),x.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6 dark:bg-gray-900 dark:border-slate-700",children:[x.jsxs("div",{className:"flex items-center gap-2 mb-6 pb-4 border-b border-slate-100 dark:border-slate-800",children:[x.jsx(kF,{className:"w-5 h-5 text-slate-400 dark:text-slate-500"}),x.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-slate-50 uppercase tracking-wide",children:"Restricciones de Carga"})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2 ml-1 dark:text-slate-400",children:"Tamao Mximo (MB)"}),x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:"number",min:"1",max:"500",value:n.maxUploadSizeMB,onChange:p=>s({...n,maxUploadSizeMB:parseInt(p.target.value)||10}),className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 outline-none text-sm font-bold text-slate-900 dark:bg-slate-950 dark:border-slate-700 dark:text-slate-100 dark:focus:border-blue-500 dark:focus:ring-blue-500/30"}),x.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 text-xs font-bold",children:"MB"})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2 ml-1 dark:text-slate-400",children:"Lmite de Pginas"}),x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:"number",min:"1",max:"1000",value:n.maxPageLimit,onChange:p=>s({...n,maxPageLimit:parseInt(p.target.value)||100}),className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 outline-none text-sm font-bold text-slate-900 dark:bg-slate-950 dark:border-slate-700 dark:text-slate-100 dark:focus:border-blue-500 dark:focus:ring-blue-500/30"}),x.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 text-xs font-bold",children:"Pgs"})]})]})]})]}),x.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6 dark:bg-gray-900 dark:border-slate-700",children:[x.jsxs("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-slate-100 dark:border-slate-800",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(Ik,{className:"w-5 h-5 text-slate-400 dark:text-slate-500"}),x.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-slate-50 uppercase tracking-wide",children:"Clculo de Costos"})]}),x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Mostrar estimaciones"}),x.jsx(h,{checked:n.showEstimates,onChange:()=>c("showEstimates")})]})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[x.jsxs("div",{children:[x.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase mb-2 ml-1 flex items-center gap-1 dark:text-slate-400",children:["Costo Base",x.jsx(Tf,{className:"w-3 h-3 text-slate-400 cursor-help dark:text-slate-500",title:"Costo promedio por pgina en USD"})]}),x.jsxs("div",{className:"relative",children:[x.jsx(cS,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-5 h-5 dark:text-slate-500"}),x.jsx("input",{type:"number",step:"0.000001",min:"0",value:n.costPerPage,onChange:p=>s({...n,costPerPage:parseFloat(p.target.value)||0}),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 outline-none text-sm font-mono dark:bg-slate-950 dark:border-slate-700 dark:text-slate-100 dark:focus:border-blue-500 dark:focus:ring-blue-500/30"})]})]}),x.jsxs("div",{children:[x.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase mb-2 ml-1 flex items-center gap-1 dark:text-slate-400",children:["Tiempo Procesamiento",x.jsx(Tf,{className:"w-3 h-3 text-slate-400 cursor-help dark:text-slate-500",title:"Tiempo medio por pgina en segundos"})]}),x.jsxs("div",{className:"relative",children:[x.jsx(q1,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-5 h-5 dark:text-slate-500"}),x.jsx("input",{type:"number",step:"0.1",min:"0",value:n.timePerPage,onChange:p=>s({...n,timePerPage:parseFloat(p.target.value)||0}),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 outline-none text-sm font-mono dark:bg-slate-950 dark:border-slate-700 dark:text-slate-100 dark:focus:border-blue-500 dark:focus:ring-blue-500/30"}),x.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 text-xs font-bold",children:"Seg"})]})]})]})]}),x.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden dark:bg-gray-900 dark:border-slate-700",children:[x.jsxs("div",{className:"bg-slate-50/50 px-6 py-4 border-b border-slate-100 flex items-center gap-2 dark:bg-slate-900/60 dark:border-slate-800",children:[x.jsx(NF,{className:"w-5 h-5 text-slate-400 dark:text-slate-500"}),x.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-slate-50 uppercase tracking-wide",children:"Recuperacin de Fallos"})]}),x.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:["network","timeout","rateLimit"].map(p=>{const v=n.retryPolicy[p],m={network:"Errores de Red",timeout:"Timeouts",rateLimit:"Lmite de Tasa (429)"};return x.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-center justify-between gap-4 hover:bg-slate-50/30 dark:hover:bg-slate-800/60 transition-colors",children:[x.jsxs("div",{className:"flex-1",children:[x.jsx("h4",{className:"text-sm font-bold text-slate-800 dark:text-slate-100",children:m[p]}),x.jsxs("p",{className:"text-xs text-slate-500 mt-1 dark:text-slate-400",children:["Configura cmo el sistema reacciona ante"," ",m[p].toLowerCase(),"."]})]}),x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsxs("div",{className:"flex flex-col",children:[x.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1 dark:text-slate-500",children:"Intentos"}),x.jsx("input",{type:"number",min:"0",max:"10",value:v.maxRetries,onChange:E=>d(p,"maxRetries",parseInt(E.target.value)||0),className:"w-20 px-2 py-1.5 rounded-lg border border-slate-200 text-sm text-center font-bold focus:border-blue-500 outline-none dark:bg-slate-950 dark:border-slate-700 dark:text-slate-100 dark:focus:border-blue-500"})]}),x.jsxs("div",{className:"flex flex-col",children:[x.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400 mb-1 dark:text-slate-500",children:"Estrategia"}),x.jsxs("select",{value:v.backoff,onChange:E=>d(p,"backoff",E.target.value),className:"w-32 px-2 py-1.5 rounded-lg border border-slate-200 text-sm bg-white focus:border-blue-500 outline-none cursor-pointer dark:bg-slate-950 dark:border-slate-700 dark:text-slate-100",children:[x.jsx("option",{value:"fixed",children:"Fijo (30s)"}),x.jsx("option",{value:"exponential",children:"Exponencial"})]})]})]})]},p)})})]})]}),x.jsx("div",{className:"fixed bottom-8 left-1/2 transform -translate-x-1/2 z-30",children:x.jsxs("div",{className:"bg-white/80 backdrop-blur-md border border-slate-200/60 pl-5 pr-2 py-2 rounded-full shadow-[0_8px_30px_rgb(0,0,0,0.08)] flex items-center gap-6 hover:shadow-[0_8px_30px_rgb(0,0,0,0.12)] transition-all duration-300",children:[x.jsx("div",{className:"flex items-center",children:r?x.jsxs("span",{className:"flex items-center gap-2 text-emerald-600 text-sm font-semibold animate-fadeIn",children:[x.jsx(Ff,{className:"w-5 h-5"}),x.jsx("span",{children:"Preferencias actualizadas"})]}):x.jsxs("span",{className:"text-sm text-slate-500 font-medium flex items-center gap-2",children:[x.jsx(Gv,{className:"w-4 h-4 text-slate-400"}),x.jsx("span",{children:"Configuracin del sistema"})]})}),x.jsx("button",{onClick:l,className:"px-6 py-2 bg-slate-900 hover:bg-blue-600 text-white text-sm font-bold rounded-full shadow-md transition-all transform active:scale-95",children:"Guardar"})]})})]})}function LF(i){return x.jsxs(iA,{children:[x.jsx(Is,{index:!0,element:x.jsx(yF,{theme:i.theme,setTheme:i.setTheme})}),x.jsx(Is,{path:"metrics",element:x.jsx(bF,{transcriptions:i.transcriptions})}),x.jsx(Is,{path:"api",element:x.jsx(wF,{apiKeys:i.apiKeys,setApiKeys:i.setApiKeys})}),x.jsx(Is,{path:"prompts",element:x.jsx(xF,{prompts:i.prompts,setPrompts:i.setPrompts})}),x.jsx(Is,{path:"alerts",element:x.jsx(EF,{alertSettings:i.alertSettings,setAlertSettings:i.setAlertSettings})}),x.jsx(Is,{path:"sot",element:x.jsx(TF,{sotSettings:i.sotSettings,setSotSettings:i.setSotSettings})}),x.jsx(Is,{path:"system-preferences",element:x.jsx(RF,{preferences:i.systemPreferences,setPreferences:i.setSystemPreferences})}),x.jsx(Is,{path:"*",element:x.jsx(ff,{to:"/settings",replace:!0})})]})}function m0({children:i}){const{user:e,loading:t}=Bf();return t?x.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:x.jsx("div",{className:"loader",style:{fontSize:"2rem",color:"var(--primary-color)"}})}):e?x.jsx(x.Fragment,{children:i}):x.jsx(ff,{to:"/login",replace:!0})}function PF({transcriptions:i,isLoadingData:e,selectedTranscription:t,theme:n,apiKeys:s,prompts:r,alertSettings:a,sotSettings:l,systemPreferences:c,setTheme:d,setApiKeys:h,setPrompts:p,setAlertSettings:v,setSotSettings:m,setSystemPreferences:E,handleTranscriptionComplete:S,handleUpdateTranscription:N,handleUpdateTags:C,clearHistory:P,handleDeleteTranscription:L,onSelectTranscription:O,onBack:q}){return x.jsx(Jk,{children:x.jsxs(iA,{children:[x.jsx(Is,{path:"/",element:x.jsx(ff,{to:"/transcribe",replace:!0})}),x.jsx(Is,{path:"/transcribe",element:x.jsx(m0,{children:x.jsx(S7,{onTranscriptionComplete:S,apiKeys:s,prompts:r})})}),x.jsx(Is,{path:"/history",element:x.jsx(m0,{children:e?x.jsx("p",{style:{padding:"2rem",textAlign:"center"},children:"Cargando datos..."}):x.jsx(E7,{transcriptions:i,clearHistory:P,onDeleteTranscription:L,onSelectTranscription:O})})}),x.jsx(Is,{path:"/history/:id",element:x.jsx(m0,{children:t?x.jsx(vF,{item:t,onBack:q,onUpdateTranscription:N,onUpdateTags:C,apiKeys:s,prompts:r}):x.jsx(ff,{to:"/history",replace:!0})})}),x.jsx(Is,{path:"/settings/*",element:x.jsx(m0,{children:x.jsx(LF,{theme:n,setTheme:d,transcriptions:i,apiKeys:s,setApiKeys:h,prompts:r,setPrompts:p,alertSettings:a,setAlertSettings:v,sotSettings:l,setSotSettings:m,systemPreferences:c,setSystemPreferences:E})})}),x.jsx(Is,{path:"/login",element:x.jsx(Xk,{})}),x.jsx(Is,{path:"/register",element:x.jsx(Zk,{})}),x.jsx(Is,{path:"*",element:x.jsx(ff,{to:"/",replace:!0})})]})})}const E1={transcription:"Transcribe el texto de esta imagen. Mantn el formato original tanto como sea posible.",transcriptionTranslate:"Transcribe el texto de esta imagen traducindolo directamente del ingls al espaol. Mantn el formato original y el sentido del texto.",summary:`Analiza la siguiente transcripcin de un documento y extrae las partes o temas ms importantes. Para cada parte, proporciona un ttulo conciso (topic) y un breve resumen (summary). La transcripcin es:

[TRANSCRIPTION]`,pageSummary:`Analiza el siguiente texto, que contiene transcripciones de un documento PDF separadas por marcadores de pgina (ej: --- PGINA X ---). Genera un resumen conciso del contenido especfico de cada pgina individualmente. La transcripcin es:

[TRANSCRIPTION]`,autoTagging:`Analiza la siguiente transcripcin y genera una lista de 3 a 5 etiquetas (tags) cortas y relevantes que clasifiquen este documento (ej: 'Factura', 'Legal', 'Mdico', 'Contrato', 'Urgente'). Devuelve SOLO un array JSON de strings.

[TRANSCRIPTION]`,documentIndex:`Analiza el siguiente documento y crea un ndice detallado de TODOS los documentos/secciones que contiene.

Para cada documento o seccin identificada, extrae:

1. **Nombre literal del documento**: El ttulo EXACTO como aparece en el documento (ej: 'DECLARACIN JURADA', 'DECISIN N 123-2024', 'CONTRATO DE ARRENDAMIENTO', etc.)

2. **Es un Anexo?**: Indica 'S' si es un anexo, apndice o documento adjunto. Indica 'No' si es un documento principal. Indica 'N/A' si no aplica.

3. **Pginas (paginacin interna)**: Si el documento tiene su propia numeracin de pginas (ej: '1-5', 'i-iii', '1-20'), indcala. Si no tiene paginacin interna visible, indica 'N/A'.

4. **Pgina del PDF**: Indica en qu pgina(s) del PDF completo se encuentra este documento. Busca los marcadores 'PGINA X (PDF Original: Y)' para identificar esto. Usa formato '15-20' para rangos o '15' para pgina nica.

5. **Notas**: Cualquier informacin adicional relevante (ej: 'Documento firmado', 'Copia certificada', 'Incompleto', 'Con sellos oficiales', etc.). Si no hay notas, indica 'N/A'.

INSTRUCCIONES IMPORTANTES:
- Identifica TODOS los documentos presentes, no solo los principales
- Usa los nombres LITERALES como aparecen (no traduzcas ni parafrasees)
- Si el documento contiene subdocumentos (ej: Expediente con Declaracin + Sentencia + Pruebas), lista cada uno por separado
- Mantn el orden cronolgico/secuencial del documento
- Si encuentras encabezados, ttulos o nombres oficiales, salos tal cual

DOCUMENTO A ANALIZAR:
[TRANSCRIPTION]`},IF={databaseUnavailable:{enabled:!0,triggerCount:0},workerFailure:{enabled:!0,triggerCount:0},memoryExhausted:{enabled:!0,triggerCount:0},diskSpaceCritical:{enabled:!0,triggerCount:0},aiApisUnavailable:{enabled:!0,triggerCount:0},documentProcessingFailure:{enabled:!0,triggerCount:0},responseTimeSlow:{enabled:!0,triggerCount:0},transcriptionQueueBlocked:{enabled:!0,triggerCount:0},aiApiErrors:{enabled:!0,triggerCount:0},fileUploadFailures:{enabled:!0,triggerCount:0},sslCertificateExpiry:{enabled:!1,triggerCount:0},highCpuUsage:{enabled:!1,triggerCount:0}},MF={version:"1.0.0",importantChanges:`- Integracin completa con Supabase (Database y Storage).
- Persistencia en la nube.
- Autenticacin real.`,systemDescription:"PDF Transcriber es una aplicacin web diseada para extraer texto de documentos PDF utilizando modelos avanzados de inteligencia artificial. Los datos se almacenan de forma segura en Supabase (PostgreSQL)."},DF={timezone:"browser",language:"es",maxUploadSizeMB:50,maxPageLimit:100,showEstimates:!0,costPerPage:125e-6,timePerPage:5,retryPolicy:{network:{maxRetries:3,backoff:"exponential"},timeout:{maxRetries:1,backoff:"fixed"},rateLimit:{maxRetries:3,backoff:"exponential"}}};function OF(){const{user:i,loading:e}=Bf(),t=uo(),[n,s]=me.useState([]),[r,a]=me.useState(!1),[l,c]=me.useState(null),[d,h]=xd("theme","light"),[p,v]=xd("apiKeys",{openai:""}),[m,E]=xd("prompts",E1),[S,N]=xd("alertSettings_v2",IF),[C,P]=xd("sotSettings",MF),[L,O]=xd("systemPreferences_v2",DF);if(me.useEffect(()=>{Object.keys(E1).every(se=>se in m)||E({...E1,...m})},[]),me.useEffect(()=>{const H=window.document.documentElement;H.classList.remove("light","dark"),d==="dark"?H.classList.add("dark"):H.classList.add("light")},[d]),me.useEffect(()=>{i?(a(!0),ao.getAllTranscriptions(i.id).then(H=>s(H)).catch(H=>console.error("Failed to load transcriptions",H)).finally(()=>a(!1))):s([])},[i]),e)return x.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:x.jsx("div",{className:"loader",style:{fontSize:"2rem",color:"var(--primary-color)"}})});const q=H=>{s(se=>[H,...se]),c(H),t("/history")},G=H=>{c(H),t(`/history/${H.id}`)},W=()=>{c(null),t("/history")},K=async(H,se)=>{s(ie=>ie.map(ye=>ye.id===H?{...ye,transcription:se}:ye)),l&&l.id===H&&c(ie=>ie?{...ie,transcription:se}:null);try{await ao.updateTranscriptionText(H,se)}catch(ie){console.error("Failed to save changes to DB",ie),alert("Error guardando cambios en la nube.")}},j=async(H,se)=>{s(ie=>ie.map(ye=>ye.id===H?{...ye,tags:se}:ye)),l&&l.id===H&&c(ie=>ie?{...ie,tags:se}:null);try{await ao.updateTranscriptionTags(H,se)}catch(ie){console.error("Failed to save tags to DB",ie)}},ee=async H=>{console.log(" handleDeleteTranscription llamado con ID:",H),console.log(" Transcripciones actuales:",n.length),console.log(" Actualizando estado local..."),s(se=>{const ie=se.filter(ye=>ye.id!==H);return console.log(" Nueva lista tiene",ie.length,"items"),ie}),l&&l.id===H&&c(null),console.log(" Llamando a dbService.deleteTranscription...");try{await ao.deleteTranscription(H),console.log(" Transcripcin eliminada de la BD exitosamente")}catch(se){console.error(" Error eliminando de la BD:",se),alert("No se pudo eliminar la transcripcin de la base de datos. Recarga la pgina para reintentar.");try{a(!0);const ie=await ao.getAllTranscriptions(i?i.id:null);s(ie)}catch(ie){console.error("Failed to reload transcriptions after delete error",ie)}finally{a(!1)}}},B=async()=>{if(!n.length)return;const H=n.map(se=>se.id);s([]),c(null);try{await Promise.all(H.map(se=>ao.deleteTranscription(se)))}catch(se){console.error("Failed to clear history from DB",se),alert("Ocurri un error eliminando el historial en la base de datos. Recarga la pgina para verificar el estado.");try{a(!0);const ie=await ao.getAllTranscriptions(i?i.id:null);s(ie)}catch(ie){console.error("Failed to reload transcriptions after clear error",ie)}finally{a(!1)}}};return x.jsx(PF,{transcriptions:n,isLoadingData:r,selectedTranscription:l,theme:d,apiKeys:p,prompts:m,alertSettings:S,sotSettings:C,systemPreferences:L,setTheme:h,setApiKeys:v,setPrompts:E,setAlertSettings:N,setSotSettings:P,setSystemPreferences:O,handleTranscriptionComplete:q,handleUpdateTranscription:K,handleUpdateTags:j,clearHistory:B,handleDeleteTranscription:ee,onSelectTranscription:G,onBack:W})}function BF(){return x.jsx(H3,{children:x.jsx(bk,{children:x.jsx(OF,{})})})}Wd.workerSrc="https://esm.sh/pdfjs-dist@5.4.394/build/pdf.worker.mjs";const W_=document.getElementById("root");W_?kC.createRoot(W_).render(x.jsx(_u.StrictMode,{children:x.jsx(BF,{})})):console.error("Failed to find the root element");export{Fn as _,UF as c,Cv as g};
